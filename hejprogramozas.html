<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Shell vagy h&eacute;jprogramoz&aacute;s</title><link rel="stylesheet" type="text/css" href="book.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1-RC2">


<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-86733-2";
urchinTracker();
</script>

</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="hu" class="book" title="Shell vagy h&eacute;jprogramoz&aacute;s" id="d5e1"><div class="titlepage"><div><div><h1 class="title">Shell vagy h&eacute;jprogramoz&aacute;s</h1></div><div><div class="author"><h3 class="author"><span class="surname">Szab&oacute;</span> <span class="firstname">L&aacute;szl&oacute; Zsolt</span></h3><div class="affiliation">
				<span class="orgname">Sapientia Erd&eacute;lyi Magyar Tudom&aacute;nyegyetem, M&#369;szaki &eacute;s Hum&aacute;ntudom&aacute;nyok Kar, Marosv&aacute;s&aacute;rhely<br></span>
			</div></div></div><div><p class="copyright">Szerz&#337;i jog &copy; 2011 Hallgat&oacute;i Inform&aacute;ci&oacute;s K&ouml;zpont</p></div><div><div class="legalnotice" title="Jogi k&ouml;zlem&eacute;ny"><a name="d5e20"></a>
<p><span class="inlinemediaobject"><img src="images/uszt_logo.png"></span></p>

			<p>Lektor&aacute;lta: Budai L&aacute;szl&oacute;, Informatikai tan&aacute;csad&oacute;, Acceleris Gmbh</p>
		</div></div><div><div class="legalnotice" title="Jogi k&ouml;zlem&eacute;ny"><a name="d5e26"></a>
        <p>A tananyag a T&Aacute;MOP-4.1.2-08/1/A-2009-0046 sz&aacute;m&uacute; Kelet-magyarorsz&aacute;gi Informatika Tananyag T&aacute;rh&aacute;z projekt keret&eacute;ben k&eacute;sz&uuml;lt.</p>
        <p>A tananyagfejleszt&eacute;s az Eur&oacute;pai Uni&oacute; t&aacute;mogat&aacute;s&aacute;val &eacute;s az Eur&oacute;pai Szoci&aacute;lis Alap t&aacute;rsfinansz&iacute;roz&aacute;s&aacute;val val&oacute;sult meg.</p>
<p>
</p><div class="mediaobject"><img src="images/kmitt_logo.png"></div><p>
</p>
<p>
</p><div class="mediaobject"><img src="images/nm_logo.png"></div><p>
</p>
<p>Nemzeti Fejleszt&eacute;si &Uuml;gyn&ouml;ks&eacute;g <a class="ulink" href="http://ujszechenyiterv.gov.hu" target="_blank">http://ujszechenyiterv.gov.hu</a><span class="emphasis"><em> 06 40 638-638</em></span></p>
<p>
</p><div class="mediaobject"><img src="images/eu_logo.png"></div><p>
</p>
       <p> </p> 
		</div></div><div><p class="pubdate">Megjelent: 2011</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="2"><b>Verzi&oacute;t&ouml;rt&eacute;net</b></th></tr>
     <tr><td align="left">Verzi&oacute; 1.1</td><td align="left">2012 November 8.</td></tr><tr><td align="left" colspan="2">Korrekci&oacute;k</td></tr>
     <tr><td align="left">Verzi&oacute; 1.0</td><td align="left">2011 Okt&oacute;ber 19.</td></tr><tr><td align="left" colspan="2">TAMOP Kelet-magyarorsz&aacute;gi Informatika Tananyag T&aacute;rh&aacute;z els&#337; v&aacute;ltozat</td></tr>
  </table></div></div></div><hr></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="chapter"><a href="#d5e54">1. Bevezet&#337;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e56">A shell vagy h&eacute;jprogramoz&aacute;s h&aacute;tter&eacute;r&#337;l</a></span></dt><dt><span class="sect1"><a href="#d5e74">A h&eacute;j v&aacute;ltozatai</a></span></dt><dt><span class="sect1"><a href="#d5e97">A tananyag szerkezete</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d5e112">2. A UNIX termin&aacute;l haszn&aacute;lata</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e114">T&ouml;rt&eacute;nelemi h&aacute;tt&eacute;r</a></span></dt><dt><span class="sect1"><a href="#d5e124">A termin&aacute;llal val&oacute; munk&aacute;t seg&iacute;t&#337; billenty&#369;k</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e309">Mozg&aacute;s a parancssorok  list&aacute;j&aacute;ban</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e336">A munkaszesszi&oacute;</a></span></dt><dt><span class="sect1"><a href="#d5e362">A parancsok form&aacute;tuma</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d5e394">3. A f&aacute;jlrendszer</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e396">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e404">A f&aacute;jlnevek</a></span></dt><dt><span class="sect1"><a href="#d5e413">A UNIX f&aacute;jlrendszer fel&eacute;p&iacute;t&eacute;se, fontos k&ouml;nyvt&aacute;rak</a></span></dt><dt><span class="sect1"><a href="#d5e522">K&ouml;z&ouml;ns&eacute;ges f&aacute;jlok</a></span></dt><dt><span class="sect1"><a href="#d5e533">A hozz&aacute;f&eacute;r&eacute;si jogok</a></span></dt><dt><span class="sect1"><a href="#d5e587">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;z&ouml;ns&eacute;ges f&aacute;jlokon</a></span></dt><dt><span class="sect1"><a href="#d5e611">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;nyvt&aacute;rakon</a></span></dt><dt><span class="sect1"><a href="#cmd_umask">Az umask &eacute;s az implicit jogok</a></span></dt><dt><span class="sect1"><a href="#d5e703">A f&aacute;jlok id&#337;b&eacute;lyegei</a></span></dt><dt><span class="sect1"><a href="#filetypes">F&aacute;jl t&iacute;pusok, eszk&ouml;z&ouml;k </a></span></dt><dt><span class="sect1"><a href="#d5e751">Hivatkoz&aacute;sok (linkek)</a></span></dt><dt><span class="sect1"><a href="#d5e772">A f&aacute;jl nevekben haszn&aacute;lhat&oacute; metakarakterek</a></span></dt><dt><span class="sect1"><a href="#cmd_file">A fejezetben haszn&aacute;lt parancsok</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d5e1056">4. Alapfogalmak a h&eacute;j (shell) haszn&aacute;lat&aacute;hoz</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e1058">H&eacute;jprogramok</a></span></dt><dt><span class="sect1"><a href="#d5e1109">A h&eacute;j &aacute;ltal v&eacute;grehajtott parancsok</a></span></dt><dt><span class="sect1"><a href="#cmd_alias">Alias-ok vagy helyettes&iacute;t&#337; nevek</a></span></dt><dt><span class="sect1"><a href="#d5e1156">A parancsv&eacute;grehajt&aacute;s</a></span></dt><dt><span class="sect1"><a href="#d5e1180">H&aacute;tt&eacute;rben val&oacute; v&eacute;grehajt&aacute;s</a></span></dt><dt><span class="sect1"><a href="#environ">A k&ouml;rnyezeti v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e1215">A h&eacute;j ind&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1248">Nyelvi karakterk&eacute;szlet be&aacute;ll&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1263">A standard bemenet &eacute;s kimenet</a></span></dt><dt><span class="sect1"><a href="#redirection">&Aacute;tir&aacute;ny&iacute;t&aacute;sok</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e1284">A standard bemenet &aacute;tir&aacute;ny&iacute;t&aacute;sa ( &lt; )</a></span></dt><dt><span class="sect2"><a href="#d5e1294">A standard kimenet f&aacute;jlba ir&aacute;ny&iacute;t&aacute;sa ( &gt; )</a></span></dt><dt><span class="sect2"><a href="#d5e1310">A kimenet hozz&aacute;f&#369;z&eacute;se egy f&aacute;jlhoz ( &gt;&gt; )</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e1314">Cs&#337;vezet&eacute;kek</a></span></dt><dt><span class="sect1"><a href="#d5e1351">Speci&aacute;lis eszk&ouml;z&ouml;k</a></span></dt><dt><span class="sect1"><a href="#d5e1382">A  standard  kimenet &eacute;s hibakimenet egyszerre t&ouml;rt&eacute;n&#337; &aacute;tir&aacute;ny&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1399">Egyszer&#369; sz&ouml;vegsz&#369;r&eacute;s</a></span></dt><dt><span class="sect1"><a href="#cmd_shell">A fejezetben haszn&aacute;lt parancsok</a></span></dt></dl></dd><dt><span class="chapter"><a href="#valtozok">5. A h&eacute;j v&aacute;ltoz&oacute;i</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e1471">A h&eacute;j v&aacute;ltoz&oacute;inak t&iacute;pusa</a></span></dt><dt><span class="sect1"><a href="#d5e1482">V&aacute;ltoz&oacute;k l&eacute;trehoz&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1514">Az id&eacute;z&#337;jelek haszn&aacute;lata</a></span></dt><dd><dl><dt><span class="sect2"><a href="#doublequote">A kett&#337;s id&eacute;z&#337;jel</a></span></dt><dt><span class="sect2"><a href="#singlequote">Az aposztr&oacute;f</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e1591">A {} jel&ouml;l&eacute;s</a></span></dt><dt><span class="sect1"><a href="#cmd_echo">Az echo parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1700">A h&eacute;j saj&aacute;t v&aacute;ltoz&oacute;i</a></span></dt><dt><span class="sect1"><a href="#d5e1725">Az k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s az  export parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1763">A h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;i vagy param&eacute;terei</a></span></dt><dt><span class="sect1"><a href="#commandsubst">A parancs helyettes&iacute;t&eacute;s</a></span></dt><dt><span class="sect1"><a href="#d5e1820">A parancssor &aacute;t&iacute;r&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1852">A here document &aacute;tir&aacute;ny&iacute;t&aacute;s ("itt dokumentum")</a></span></dt><dt><span class="sect1"><a href="#cmd_dot">A . &eacute;s a source parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1892">P&eacute;ldaprogramok</a></span></dt></dl></dd><dt><span class="chapter"><a href="#vezerles">6. Vez&eacute;rl&#337; szerkezetek</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e1941">Vez&eacute;rl&#337; szerkezetek</a></span></dt><dt><span class="sect1"><a href="#d5e1948">Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</a></span></dt><dt><span class="sect1"><a href="#d5e2001">Az &amp;&amp; , || &eacute;s ! szerkezetek</a></span></dt><dt><span class="sect1"><a href="#d5e2038">A test parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_expr">Az expr parancs</a></span></dt><dt><span class="sect1"><a href="#d5e2203">Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel</a></span></dt><dt><span class="sect1"><a href="#d5e2264">A for ciklusok</a></span></dt><dt><span class="sect1"><a href="#d5e2320">A  while &eacute;s until ciklusok</a></span></dt><dt><span class="sect1"><a href="#d5e2379">A break &eacute;s continue haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e2398">A shift parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_exit">Kil&eacute;p&eacute;s a h&eacute;j programb&oacute;l: az exit</a></span></dt><dt><span class="sect1"><a href="#d5e2425">A case szerkezet</a></span></dt><dt><span class="sect1"><a href="#d5e2481">A select szerkezet</a></span></dt><dt><span class="sect1"><a href="#cmd_read">A read parancs</a></span></dt><dt><span class="sect1"><a href="#d5e2570">P&eacute;ldaprogramok</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e2573">F&aacute;jl m&aacute;sol&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e2583">K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se</a></span></dt><dt><span class="sect2"><a href="#d5e2627">Sz&ouml;veges f&aacute;jl sorainak v&eacute;gigj&aacute;r&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e2676">A programoz&aacute;si hib&aacute;k felder&iacute;t&eacute;se</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#regex">7. Regul&aacute;ris vagy szab&aacute;lyos kifejez&eacute;sek alkalmaz&aacute;sa</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e2682">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e2718">A b&#337;v&iacute;tett kifejez&eacute;sek (extended)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e2749">Egyedi karakterekre val&oacute; illeszt&eacute;sek</a></span></dt><dt><span class="sect2"><a href="#d5e2778">A  .  metakarakter</a></span></dt><dt><span class="sect2"><a href="#d5e2801">A karakter halmaz &eacute;s a karakter oszt&aacute;ly</a></span></dt><dt><span class="sect2"><a href="#d5e2877">Csoportos&iacute;t&aacute;s &eacute;s altern&aacute;l&aacute;s:  ( )  &eacute;s  |</a></span></dt><dt><span class="sect2"><a href="#d5e2912">Ism&eacute;tl&eacute;s, intervallum</a></span></dt><dt><span class="sect2"><a href="#d5e3013">Horgonyok</a></span></dt><dt><span class="sect2"><a href="#d5e3036">A visszautal&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e3062">Tov&aacute;bbi vissza-per szekvenci&aacute;k </a></span></dt><dt><span class="sect2"><a href="#d5e3105">&Ouml;sszefoglal&oacute; t&aacute;b&aacute;zat</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e3192">Alap szint&#369; (basic) regul&aacute;ris kifejez&eacute;sek </a></span></dt><dt><span class="sect1"><a href="#d5e3222">A grep &eacute;s egrep haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e3336">P&eacute;ld&aacute;k regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;ra az egrep-el</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e3338">Keres&eacute;sek</a></span></dt><dt><span class="sect2"><a href="#d5e3356">Tal&aacute;lat sz&aacute;ml&aacute;l&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e3391">Sz&ouml;vegek v&aacute;g&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e3412">Sztringek tesztel&eacute;se</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d5e3428">8. K&uuml;l&ouml;nb&ouml;z&#337; h&eacute;j szerkezetek</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e3430">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#function">F&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect1"><a href="#codeblock">K&oacute;d blokkok haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#calculations">Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel</a></span></dt><dt><span class="sect1"><a href="#d5e3612">A C st&iacute;lus&uacute; for ciklus</a></span></dt><dt><span class="sect1"><a href="#string_operatorok">M&#369;veletek karakterl&aacute;ncokkal</a></span></dt><dt><span class="sect1"><a href="#test2">A [[ ]] szerkezet</a></span></dt></dl></dd><dt><span class="chapter"><a href="#sed">9. A sed folyamszerkeszt&#337;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e3728">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#cmd_sed">A sed parancssora</a></span></dt><dt><span class="sect1"><a href="#d5e3834">A sed m&#369;k&ouml;d&eacute;se</a></span></dt><dt><span class="sect1"><a href="#d5e3863">A sed parancsai</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e3865">A c&iacute;mek megad&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e3946">Gyakran haszn&aacute;lt sed parancsok</a></span></dt><dt><span class="sect2"><a href="#d5e4105">A sed ritk&aacute;bban haszn&aacute;lt parancsai</a></span></dt><dt><span class="sect2"><a href="#d5e4198">A hold pufferre vonatkoz&oacute; parancsok</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e4270">P&eacute;ld&aacute;k a sed haszn&aacute;lat&aacute;ra h&eacute;jprogramokban</a></span></dt></dl></dd><dt><span class="chapter"><a href="#awk">10. Az awk</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e4344">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e4355">Az awk parancs haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e4401">M&#369;k&ouml;d&eacute;si elv</a></span></dt><dt><span class="sect1"><a href="#d5e4429">Az Awk programoz&aacute;si nyelv</a></span></dt><dt><span class="sect1"><a href="#d5e4457">Az Awk minta</a></span></dt><dt><span class="sect1"><a href="#d5e4540">Az utas&iacute;t&aacute;sok </a></span></dt><dt><span class="sect1"><a href="#d5e4555">A v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e4573">Bels&#337; v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e4684">Konstansok</a></span></dt><dt><span class="sect1"><a href="#d5e4694">Oper&aacute;torok</a></span></dt><dt><span class="sect1"><a href="#d5e4713">Vez&eacute;rl&#337; kifejez&eacute;sek</a></span></dt><dt><span class="sect1"><a href="#d5e4726">Az Awk f&uuml;ggv&eacute;nyek</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e4729">A fontosabb numerikus f&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect2"><a href="#d5e4752">Fontosabb sztring f&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect2"><a href="#d5e4830">Saj&aacute;t f&uuml;ggv&eacute;nyek</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e4865">Az awk haszn&aacute;lata h&eacute;jprogramokban</a></span></dt></dl></dd><dt><span class="chapter"><a href="#process">11. Folyamatok kezel&eacute;se</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e4938">Folyamatok</a></span></dt><dt><span class="sect1"><a href="#pid">A folyamatazonos&iacute;t&oacute;</a></span></dt><dt><span class="sect1"><a href="#job">A Unix feladat (job) fogalma</a></span></dt><dt><span class="sect1"><a href="#d5e5093">A wait parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_ps">Folyamatok k&ouml;vet&eacute;se a ps paranccsal</a></span></dt><dt><span class="sect1"><a href="#cmd_top">A top parancs</a></span></dt><dt><span class="sect1"><a href="#signal">Jelz&eacute;sek</a></span></dt><dt><span class="sect1"><a href="#d5e5428">A kill parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_killall">A killall parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_pgrep">A pgrep &eacute;s pkill parancsok</a></span></dt><dt><span class="sect1"><a href="#cmd_trap">Jelz&eacute;sek kezel&eacute;se shell alatt: a trap parancs</a></span></dt><dt><span class="sect1"><a href="#signal_debug">Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)</a></span></dt><dt><span class="sect1"><a href="#cmd_nohup">A nohup parancs</a></span></dt><dt><span class="sect1"><a href="#subshell">Alh&eacute;jak (subshell)</a></span></dt><dt><span class="sect1"><a href="#d5e5695">P&eacute;ldaprogramok</a></span></dt></dl></dd><dt><span class="appendix"><a href="#appendix">A. Hibakeres&eacute;s h&eacute;jprogramokban</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d5e5803">V&aacute;ltoz&oacute;k ki&iacute;r&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e5809">A h&eacute;j opci&oacute;inak haszn&aacute;lata &eacute;s a set parancs</a></span></dt><dt><span class="sect1"><a href="#d5e5927">Jelz&eacute;sek haszn&aacute;lata programk&ouml;vet&eacute;sre</a></span></dt></dl></dd><dt><span class="appendix"><a href="#d5e5934">B. A getopts f&uuml;ggv&eacute;ny</a></span></dt><dt><span class="bibliography"><a href="#bibliogr">Bibliogr&aacute;fia</a></span></dt><dt><span class="index"><a href="#d5e6066">T&aacute;rgymutat&oacute;</a></span></dt></dl></div><div class="list-of-tables"><p><b>A t&aacute;bl&aacute;zatok list&aacute;ja</b></p><dl><dt>2.1. <a href="#d5e156">A parancssor szerkeszt&eacute;si billenty&#369;i</a></dt><dt>2.2. <a href="#d5e214">A Readline szerkeszt&eacute;si m&#369;veletei a parancssoron</a></dt><dt>2.3. <a href="#d5e261">K&eacute;perny&#337;t kezel&#337; parancsok</a></dt><dt>2.4. <a href="#d5e314">A parancssor ism&eacute;tl&eacute;s&eacute;re haszn&aacute;lt billenty&#369;k&oacute;dok</a></dt><dt>3.1. <a href="#d5e443">A f&aacute;jlrendszer fontosabb k&ouml;nyvt&aacute;rai</a></dt><dt>3.2. <a href="#d5e778">A f&aacute;jlnevekben haszn&aacute;lhat&oacute; metakarakterek</a></dt><dt>5.1. <a href="#checkvar">V&aacute;ltoz&oacute;k kezdeti &eacute;rt&eacute;k&eacute;t kezel&#337; oper&aacute;torok</a></dt><dt>5.2. <a href="#d5e1638">Sztring oper&aacute;torok I.</a></dt><dt>6.1. <a href="#d5e1971">Az exit kil&eacute;p&eacute;si &eacute;rt&eacute;kei</a></dt><dt>7.1. <a href="#d5e3109">A b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;sek metakarakterei</a></dt><dt>7.2. <a href="#d5e3248">A grep &eacute;s egrep fontosabb opci&oacute;i</a></dt><dt>8.1. <a href="#d5e3632">Sztring oper&aacute;torok II.</a></dt><dt>9.1. <a href="#d5e3784">A sed opci&oacute;i</a></dt><dt>10.1. <a href="#d5e4461">Az Awk mint&aacute;i</a></dt><dt>10.2. <a href="#d5e4576">Az Awk bels&#337; v&aacute;ltoz&oacute;i</a></dt><dt>10.3. <a href="#d5e4755">Az Awk sztring f&uuml;ggv&eacute;nyei</a></dt><dt>11.1. <a href="#d5e4969">A ps &aacute;ltal megjelen&iacute;tett folyamat &aacute;llapotok</a></dt><dt>11.2. <a href="#d5e5138">A ps parancs kimenet&eacute;nek fontosabb oszlopai</a></dt><dt>11.3. <a href="#d5e5186">A ps parancs n&eacute;h&aacute;ny gyakran haszn&aacute;lt parancssori opci&oacute;ja</a></dt><dt>11.4. <a href="#d5e5259">A top fontosabb interakt&iacute;v parancsai</a></dt><dt>11.5. <a href="#d5e5330">A fontosabb jelz&eacute;sek</a></dt><dt>A.1. <a href="#d5e5845">A Bash hibak&ouml;vet&eacute;sn&eacute;l haszn&aacute;lhat&oacute; opci&oacute;i</a></dt></dl></div>	

	
	
	
	
    <div class="chapter" title="1. fejezet - Bevezet&#337;" id="d5e54"><div class="titlepage"><div><div><h2 class="title">1. fejezet - Bevezet&#337;</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e56">A shell vagy h&eacute;jprogramoz&aacute;s h&aacute;tter&eacute;r&#337;l</a></span></dt><dt><span class="sect1"><a href="#d5e74">A h&eacute;j v&aacute;ltozatai</a></span></dt><dt><span class="sect1"><a href="#d5e97">A tananyag szerkezete</a></span></dt></dl></div>

<div class="sect1" title="A shell vagy h&eacute;jprogramoz&aacute;s h&aacute;tter&eacute;r&#337;l"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e56">A shell vagy h&eacute;jprogramoz&aacute;s h&aacute;tter&eacute;r&#337;l</h2></div></div></div>
	
<p>Ez a tananyag a UNIX alap&uacute; oper&aacute;ci&oacute;s rendszerek egyik fontos komponens&eacute;nek, a shellnek vagy h&eacute;jnak az alapszint&#369; haszn&aacute;lat&aacute;t mutatja be.</p>
<p>Nem c&eacute;lunk a UNIX alap&uacute; rendszerek meglehet&#337;sen bonyolult t&ouml;rt&eacute;net&eacute;t bemutatni, azonban n&eacute;h&aacute;ny r&eacute;szletet meg kell eml&iacute;ten&uuml;nk, hogy utaljunk a h&eacute;jak jelenlegi haszn&aacute;lati lehet&#337;s&eacute;geire.</p>
<p>A UNIX oper&aacute;ci&oacute;s rendszert az AT&amp;T, t&aacute;vk&ouml;zl&eacute;sben m&#369;k&ouml;d&#337; c&eacute;g Bell nev&#369;  laborat&oacute;rium&aacute;ban kezdt&eacute;k tervezni, 1969-1972 k&ouml;z&ouml;tt, tervez&#337;i Ken Thompson, Dennis Ritchie, Doug McIlroy voltak (UNIX1970). A c&eacute;l t&ouml;bbfelhaszn&aacute;l&oacute;s multitaszking rendszer fejleszt&eacute;se volt, amelyik val&oacute;s idej&#369;  funkcionalit&aacute;sokkal is rendelkezik.</p>

<p>Ezzel egy id&#337;ben alakul ki a C nyelv standard k&ouml;nyvt&aacute;ra, &eacute;s a klasszikus oper&aacute;ci&oacute;s rendszer f&uuml;ggv&eacute;nyek sora, &iacute;gy kialakul&aacute;sa &ouml;sszefon&oacute;dik a C nyelv tervez&eacute;s&eacute;vel (Dennis Ritchie &eacute;s Brian Kernighan). A UNIX az els&#337; oper&aacute;ci&oacute;s rendszer amelynek k&oacute;dja igen kis r&eacute;szt&#337;l eltekintve C-ben &iacute;r&oacute;dott. Els&#337; v&aacute;ltozat&aacute;t  PDP  sz&aacute;m&iacute;t&oacute;g&eacute;peken fejlesztett&eacute;k, ekkor alakult ki a klasszikus f&aacute;jlrendszer strukt&uacute;r&aacute;ja.</p>

<p>Az 1970-80-as &eacute;vek jelentett&eacute;k a UNIX felhaszn&aacute;l&aacute;s&aacute;nak kezdeti id&#337;szak&aacute;t. Mivel az AT&amp;T nem forgalmazta a rendszert mint oper&aacute;ci&oacute;s rendszert &ouml;n&aacute;ll&oacute;an, tervez&eacute;si elvei &eacute;s forr&aacute;sk&oacute;dja sok fejleszt&#337; laborba eljutott, els&#337;sorban egyetemekre. &Iacute;gy t&ouml;bb helyen is folytattak kieg&eacute;sz&iacute;t&#337; tervez&#337;i-fejleszt&#337;i tev&eacute;kenys&eacute;get.  T&ouml;bb fontos fejleszt&eacute;si vonulat alakult ki, ezek k&ouml;z&uuml;l a legfontosabbak a  System V illetve a Berkeley-i fejleszt&eacute;sekre &eacute;p&uuml;l&#337; BSD rendszerek. A UNIX szerz&#337;i joga &aacute;tker&uuml;lt m&aacute;s c&eacute;gekhez, &eacute;s egy meglehet&#337;sen bonyolult t&ouml;rt&eacute;nett&eacute; alakult.</p>

<p>Jelenleg sok c&eacute;g fejleszt saj&aacute;t UNIX-ot amelyek licencelt fejleszt&eacute;sek &eacute;s az eredeti UNIX k&oacute;dra &eacute;p&uuml;lnek: IBM, Hewlett-Packard, SCO, Novell, Oracle (a Sun Microsystems fejleszt&eacute;s&eacute;t vette meg). Ezek v&aacute;llalati kiszolg&aacute;l&oacute;k piac&aacute;ra fejlesztett rendszerek. Az Internet, telefonh&aacute;l&oacute;zatok stb. sok vonatkoz&aacute;sban UNIX-okon &eacute;p&uuml;ltek ki, &iacute;gy ezek mai fejletts&eacute;g&eacute;hez a UNIX-on haszn&aacute;lt elvek l&eacute;nyegesen hozz&aacute;j&aacute;rultak.  A UNIX haszn&aacute;lat&aacute;nak egyik nagy el&#337;ny&eacute;t kiv&aacute;l&oacute; h&aacute;l&oacute;zati &eacute;s val&oacute;s idej&#369; szolg&aacute;ltat&aacute;sai jelentik.</p>

<p>A sok UNIX v&aacute;ltozat k&ouml;vetkezm&eacute;nyek&eacute;nt t&ouml;bb standardiz&aacute;l&aacute;si folyamat alakult ki (1984, X/Open Portability Guide: X/Open Company; 1988-2004, POSIX (Portable Operating System Interface): IEEE 1003-asnak is nevezett standard; 1995, Open Group: Single UNIX Specification). Ezek a standardok a UNIX programoz&aacute;si interf&eacute;szeire  illetve parancsnyelv&eacute;re hat&aacute;roznak meg k&ouml;z&ouml;s ir&aacute;nyonalakat. A UNIX nevet, amely v&eacute;dett n&eacute;v (tulajdonosa jelenleg az Open Group nev&#369; konzorcium) &aacute;ltal&aacute;ban azokra a rendszerekre alkalmazzuk, amelyek k&ouml;vetik az eredeti UNIX rendszerek fel&eacute;p&iacute;t&eacute;s&eacute;t, &eacute;s meg is felelnek bizonyos szabv&aacute;nyoknak (mint az Open Group Single UNIX Specification szabv&aacute;nya).</p>

<p>Unix alap&uacute; vagy Unix-szer&#369; rendszereknek nevezz&uuml;k azokat az oper&aacute;ci&oacute;s rendszereket, amelyek &uacute;gy viselkednek mintha UNIX rendszerek lenn&eacute;nek. Ez az elnevez&eacute;s vitathat&oacute;, de c&eacute;lunknak megfelel. Ezek a rendszerek nem val&oacute;s&iacute;tj&aacute;k meg sz&uuml;ks&eacute;gszer&#369;en minden vonatkoz&aacute;sban a UNIX standardokat. Ide tartozik t&ouml;bb ny&iacute;lt forr&aacute;sk&oacute;d&uacute; oper&aacute;ci&oacute;s rendszer is, mint a Linux kernelre &eacute;p&uuml;l&#337; rendszerek vagy a Free BSD. Ezek a rendszerek a 90-es &eacute;vekben lettek n&eacute;pszer&#369;ek meg k&uuml;l&ouml;nb&ouml;z&#337; ny&iacute;lt forr&aacute;sk&oacute;d&uacute; fejleszt&eacute;sek eredm&eacute;nyek&eacute;nt. </p>

<p>A Linux egy UNIX-hoz hasonl&oacute;an viselked&#337; rendszer ("Unix-like", Unix-szer&#369; rendszer, vagy kl&oacute;n): eg&eacute;sz pontosan csak a rendszermag, a kernel kl&oacute;nja. A kl&oacute;n fogalma azt jelenti, hogy nem tartalmaz UNIX k&oacute;dot, de m&aacute;s szoftver megold&aacute;sokat haszn&aacute;lva megval&oacute;s&iacute;tja ugyanazt, mint egy eredeti UNIX kernel &eacute;s hasonl&oacute;an is haszn&aacute;lhat&oacute;. Eredeti alkot&oacute;ja Linus Torvalds.</p>

<p>A Linux kernel k&ouml;r&eacute; fel lehet &eacute;p&iacute;teni egy oper&aacute;ci&oacute;s rendszert, ami Unix-szer&#369;en viselkedik, ha  a UNIX-hoz hasonl&oacute;an kl&oacute;n felhaszn&aacute;l&oacute;i programokkal vessz&uuml;k k&ouml;r&uuml;l. Egy ilyen &ouml;ssze&aacute;ll&iacute;t&aacute;st, ahol jelen van a Linux kernel &eacute;s egy csomag felhaszn&aacute;l&oacute;i illetve rendszer program, Linux disztrib&uacute;ci&oacute;nak nevezz&uuml;k. </p>

<p>A shell vagy h&eacute;j tulajdonk&eacute;ppen egy parancs&eacute;rtelmez&#337;, a felhaszn&aacute;l&oacute; &aacute;ltal parancssori sz&ouml;veggel le&iacute;rt parancsokat hajtja v&eacute;gre, &iacute;gy interf&eacute;szt biztos&iacute;t a felhaszn&aacute;l&oacute; &eacute;s az oper&aacute;ci&oacute;s rendszer k&ouml;z&ouml;tt. Ebben az &eacute;rtelemben parancsnak nevez&uuml;nk b&aacute;rmilyen futtathat&oacute; programot amelyik r&eacute;sze egy Unix alap&uacute; oper&aacute;ci&oacute;s rendszernek. </p>

<p>Az els&#337; id&#337;kben a h&eacute;j  (1970-es &eacute;vek) egyszer&#369;bb parancs nyelvet biztos&iacute;tott az akkoriban kialakul&oacute; UNIX rendszerek sz&aacute;m&aacute;ra. Az &eacute;vek halad&aacute;s&aacute;val ez a nyelv egyre bonyolultabb lett, t&ouml;bb v&aacute;ltozata alakult ki, ezek saj&aacute;t fejl&#337;d&eacute;si &uacute;tjaikat j&aacute;rt&aacute;k, ett&#337;l kezdve m&aacute;r programoz&aacute;si nyelvi lehet&#337;s&eacute;geket is biztos&iacute;tottak, ez&eacute;rt tal&aacute;n megengedhet&#337; az is, hogy a h&eacute;jat programoz&aacute;si nyelvnek is nevezz&uuml;k.</p>

<p>A UNIX parancs&eacute;rtelmez&#337; angol neve <span class="emphasis"><em>shell</em></span>, a magyar nyelv&#369; dokumentumokban ez helyenk&eacute;nt <span class="emphasis"><em>burok</em></span>, helyenk&eacute;nt <span class="emphasis"><em>h&eacute;j</em></span> megnevez&eacute;ssel fordul el&#337;, a mindennapi nyelvben tapasztalatunk szerint gyakrabban haszn&aacute;ljuk magyarul is a shell megnevez&eacute;st. &Iacute;gy ebben a tananyagban a h&eacute;j &eacute;s shell megnevez&eacute;s egyar&aacute;nt el&#337;fordul. A parancs&eacute;rtelmez&#337; neve arra utal, hogy burokk&eacute;nt veszi k&ouml;r&uuml;l a UNIX oper&aacute;ci&oacute;s rendszer legfontosabb komponens&eacute;t, a rendszer magj&aacute;t vagy kernelt, &eacute;s ennek szolg&aacute;ltat&aacute;saihoz csak a parancs&eacute;rtelmez&#337;n kereszt&uuml;l lehet hozz&aacute;f&eacute;rni, amikor egy felhaszn&aacute;l&oacute; haszn&aacute;lni akarja a rendszert.</p>
</div>

<div class="sect1" title="A h&eacute;j v&aacute;ltozatai"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e74">A h&eacute;j v&aacute;ltozatai</h2></div></div></div> 

<p>A Unix alap&uacute; rendszerek t&ouml;rt&eacute;nelmi fejl&#337;d&eacute;se folyam&aacute;n  t&ouml;bb h&eacute;jat terveztek, a legt&ouml;bb esetben megtartva az eredeti rendszerben haszn&aacute;lt h&eacute;j elveit &eacute;s kieg&eacute;sz&iacute;tett&eacute;k k&uuml;l&ouml;nb&ouml;z&#337;, a programoz&aacute;st k&ouml;nny&iacute;t&#337; szerkezetekkel.</p>

<p>A Bourne shell volt az els&#337; parancs&eacute;rtelmez&#337; amelyiket kimondottan arra fejlesztett&eacute;k, hogy szkript nyelv is legyen egyben. 1977-ben kezdt&eacute;k fejleszteni az AT&amp;T-n&eacute;l (els&#337; fejleszt&#337; Stephen Bourne). Ezzel vezettek be sok &uacute;j lehet&#337;s&eacute;get el&#337;sz&ouml;r, mint a parancssor helyettes&iacute;t&eacute;s. A k&eacute;s&#337;bbi &eacute;vekben is az AT&amp;T-n&eacute;l fejlesztett&eacute;k. Jelenlegi Linux disztrib&uacute;ci&oacute;kon <span class="command"><strong>sh</strong></span> program n&eacute;v alatt tal&aacute;lhat&oacute; meg, &eacute;s legt&ouml;bbsz&ouml;r nem k&uuml;l&ouml;n programk&eacute;nt, hanem szimb&oacute;likus linkk&eacute;nt, amely a rendszeren tal&aacute;lhat&oacute; Bash-re mutat (ez emul&aacute;lja a Bourne shellt).</p>

<p>A h&eacute;jak t&ouml;rt&eacute;net&eacute;ben egyik er&#337;s hat&aacute;st kifejt&#337; fejleszt&eacute;s A Korn h&eacute;j. Ezt a v&aacute;ltozatot ugyancsak az AT&amp;T-n&eacute;l fejlesztett&eacute;k (David Korn), &eacute;s a legfontosabb fejleszt&eacute;si c&eacute;l a shell programoz&aacute;si nyelvv&eacute; val&oacute; &aacute;talak&iacute;t&aacute;sa volt. Visszafel&eacute; kompatibilis maradt a Bourne h&eacute;jjal. Sok &uacute;j lehet&#337;s&eacute;get vezettek be, &iacute;gy az asszociat&iacute;v t&ouml;mb&ouml;ket, az eg&eacute;sz &eacute;s val&oacute;s sz&aacute;mokkal val&oacute; &uacute;j sz&aacute;m&iacute;t&aacute;si szerkezeteket. A POSIX standard "Shell Language Standard" nev&#369; el&#337;&iacute;r&aacute;sait pontosan betartja, ez&eacute;rt gyakran ezt haszn&aacute;lj&aacute;k ipari standard h&eacute;jk&eacute;nt a UNIX vari&aacute;nsokban. Eleinte az AT&amp;T tulajdon&aacute;ban volt a fejleszt&eacute;se, 2000-ben ny&iacute;lt forr&aacute;sk&oacute;d&uacute;v&aacute; tett&eacute;k &eacute;s jelenleg Common Public Licence licenc alatt fejlesztik (l&aacute;sd http://www.kornshell.com/). Annak ellen&eacute;re, hogy a mindennapi munk&aacute;ban sokan ennek modernebb v&aacute;ltozatait vagy a Bash-t haszn&aacute;ljuk,  UNIX karbantart&oacute; vagy install&aacute;l&oacute; szkriptekben legt&ouml;bben ma is a Bourne vagy a Korn v&aacute;ltozatait futtatj&aacute;k.</p>

<p>A C h&eacute;jat (C shell) a Berkeley rendszerek fejleszt&eacute;s sor&aacute;n fejlesztett&eacute;k ki (fejleszt&#337;je Bill Joy, a k&eacute;s&#337;bbi Sun Microsystems alap&iacute;t&oacute;). Amint nev&eacute;b&#337;l kider&uuml;l, szerkezetei hasonl&iacute;tanak a C-re. Ebben fejlesztett&eacute;k tov&aacute;bb a feladatok (jobs) fel&uuml;gyelet&eacute;t biztos&iacute;t&oacute; szerkezeteket. Nem annyira haszn&aacute;lt mint a Bourne-ra &eacute;p&uuml;l&#337; v&aacute;ltozatok. Jelenleg <span class="command"><strong>tcsh</strong></span> nev&#369; modern v&aacute;ltozat&aacute;t haszn&aacute;lj&aacute;k, &eacute;s legink&aacute;bb a BSD alap&uacute; rendszerekkel.</p>

<p>A Bash (Bourne Again Shell) v&aacute;ltozatot eleve ny&iacute;lt forr&aacute;sk&oacute;d&uacute;nak kezdt&eacute;k fejleszteni, a c&eacute;l a GNU  oper&aacute;ci&oacute;s rendszer h&eacute;j&aacute;nak fejleszt&eacute;se volt, &iacute;gy lett a Linux kernelt haszn&aacute;l&oacute; rendszerek alap&eacute;rtelmezett h&eacute;ja. A kompatibilit&aacute;s szempontj&aacute;b&oacute;l  Bourne &eacute;s Korn h&eacute;jat k&ouml;veti, &eacute;s a legt&ouml;bb ezekre &iacute;rt szkript lefut m&oacute;dos&iacute;t&aacute;s n&eacute;lk&uuml;l a Bash-en is. Mindh&aacute;rom el&#337;z&#337;leg eml&iacute;tett shell-b&#337;l vett &aacute;t megold&aacute;sokat, de fejlesztettek sok saj&aacute;t nyelvi lehet&#337;s&eacute;geket is. A Bash els&#337; fejleszt&#337;je Brian Fox volt, jelenlegi karbantart&oacute;ja &eacute;s fejleszt&#337;je Chet Ramey.</p>

<p>Modern Linux-okon &aacute;ltal&aacute;ban ez az alap&eacute;rtelmezett shell, &eacute;s a leggazdagabb programoz&aacute;si lehet&#337;s&eacute;geket is ez ny&uacute;jtja.</p>

<p>A felsoroltakon k&iacute;v&uuml;l t&ouml;bb m&aacute;s fejleszt&eacute;s is l&eacute;tezik, mint pl. az igen n&eacute;pszer&#369; Z-Shell.</p>


<p>A h&eacute;jak k&ouml;zti k&uuml;l&ouml;nbs&eacute;gek t&aacute;rgyal&aacute;sa meghaladja ennek a tananyagnak a kereteit. &Iacute;gy felt&eacute;telezz&uuml;k, hogy a di&aacute;k valamilyen Linux disztrib&uacute;ci&oacute;val dolgozik, &eacute;s a Bash h&eacute;j legal&aacute;bb 3.0 verzi&oacute;j&aacute;t haszn&aacute;lja. A tananyagban nagyon kis kiv&eacute;tellel klasszikus szerkezeteket mutatunk be, amelyek az eml&iacute;tett h&aacute;rom h&eacute;jb&oacute;l sz&aacute;rmaznak &eacute;s m&#369;k&ouml;dnek a Bash-ben.</p>
<p>A standard UNIX rendszereken &eacute;s a Linuxon k&iacute;v&uuml;l m&aacute;s Unix alap&uacute; oper&aacute;ci&oacute;s rendszerek eset&eacute;ben is haszn&aacute;lhat&oacute; a Bash, mint a BSD rendszereken vagy az Apple g&eacute;peken fut&oacute; OS X alatt (Darwin).</p>


<p>Windows rendszereken is haszn&aacute;lhat&oacute;, amennyiben telep&iacute;tj&uuml;k a Cygwin eszk&ouml;z&ouml;ket (http://www.cygwin.com), b&aacute;r kezdeti tanul&aacute;shoz nem aj&aacute;nljuk ezt, mert ilyen k&ouml;rnyezetben  k&uuml;l&ouml;nbs&eacute;gek ad&oacute;dnak a haszn&aacute;lat&aacute;ban.</p>



<p>A h&eacute;j legfontosabb feladatai: Unix parancsok ind&iacute;t&aacute;sa, &ouml;sszef&#369;z&eacute;se, fel&uuml;gyelete. &Iacute;gy a tananyag r&eacute;szben a fontosabb Unix parancsok bemutat&aacute;s&aacute;val is foglalkozik. Mivel nem tehetj&uuml;k meg ezt kimer&iacute;t&#337;en, a parancsok leggyakoribb haszn&aacute;lati m&oacute;dj&aacute;t &eacute;s opci&oacute;it mutatjuk be. Ezek kimer&iacute;t&#337; tanulm&aacute;nyoz&aacute;s&aacute;hoz a parancsok k&eacute;zik&ouml;nyv (vagy <span class="command"><strong>man</strong></span>) lapjaihoz, esetenk&eacute;nt <span class="command"><strong>info</strong></span> lapjaihoz kell fordulni.</p>

<p>A parancsok haszn&aacute;lat&aacute;nak eset&eacute;ben is felt&eacute;telezz&uuml;k a Linux disztrib&uacute;ci&oacute;k haszn&aacute;lat&aacute;t. UNIX illetve m&aacute;s Unix szer&#369; rendszerek felhaszn&aacute;l&oacute;i esetenk&eacute;nt m&aacute;s vagy m&aacute;sk&eacute;nt haszn&aacute;lhat&oacute; opci&oacute;kkal tal&aacute;lkozhatnak a saj&aacute;t rendszereiken.</p>

<p>A h&eacute;j haszn&aacute;lata sz&aacute;mtalan ir&aacute;nyba &aacute;gazik, a tananyag ebben a vonatkoz&aacute;sban a leggyakrabban haszn&aacute;lt s&eacute;m&aacute;kat mutatja be. Tov&aacute;bbi &eacute;s folyamatos tanul&aacute;shoz a <a class="link" href="#bibliogr" title="Bibliogr&aacute;fia">Bibliogr&aacute;fi&aacute;ban</a> eml&iacute;tett k&ouml;nyveket, illetve Interneten a Bash Reference Manual (<a class="link" href="#BashRef2010">BashRef2010</a>) &eacute;s Advanced Bash-Scripting Guide (<a class="link" href="#Mendel2011">Mendel2011</a>) munk&aacute;kat, valamint magyar nyelven B&uuml;ki Andr&aacute;s: UNIX/Linux h&eacute;jprogramoz&aacute;s c&iacute;m&#369; k&ouml;nyv&eacute;t (<a class="link" href="#Buki2002">Buki2002</a>) aj&aacute;nljuk.</p>
</div>

<div class="sect1" title="A tananyag szerkezete"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e97">A tananyag szerkezete</h2></div></div></div> 

<p>A tananyag folyamatosan vezeti be a h&eacute;j szerkezeteit.</p>

<p>A m&aacute;sodik fejezet a Unix termin&aacute;l haszn&aacute;lat&aacute;hoz ad n&eacute;h&aacute;ny t&aacute;mpontot, a h&eacute;jhoz k&ouml;t&#337;d&#337; fogalmaink itt m&eacute;g nem eg&eacute;szen pontosak, a fejezet c&eacute;lja bevezetni az olvas&oacute;t a Unix parancsok gyakorlati haszn&aacute;lat&aacute;hoz sz&uuml;ks&eacute;ges r&eacute;szletekbe.</p>
<p>A harmadik fejezet a Unix f&aacute;jlrendszer&eacute;hez k&ouml;t&#337;d&#337; fontosabb fogalmakat &eacute;s gyakran haszn&aacute;lt f&aacute;jlkezel&#337; parancsokat ismerteti.</p>

<p>A negyedik fejezet a Unix parancssor kezel&eacute;s &eacute;s parancs v&eacute;grehajt&aacute;s fogalmaiba ny&uacute;jt bevezet&#337;t.</p>

<p>Az &ouml;t&ouml;dik fejezetben a h&eacute;j v&aacute;ltoz&oacute;ival &eacute;s azok egyszer&#369; haszn&aacute;lat&aacute;val foglalkozunk.</p>

<p>A hatodik fejezet a h&eacute;j vez&eacute;rl&#337; szerkezeteit t&aacute;rgyalja.</p>

<p>Mivel a regul&aacute;ris kifejez&eacute;sek sok Unix parancs alapvet&#337; haszn&aacute;lat&aacute;ban jelen vannak, a hetedik fejezetet ennek a k&eacute;rd&eacute;sk&ouml;rnek sz&aacute;njuk.</p>

<p>A nyolcadik fejezetben tov&aacute;bbi szerkezeteket mutatunk be, amelyek nem egy bizonyos t&eacute;mak&ouml;rbe illeszkednek, de igen hasznosak a h&eacute;j haszn&aacute;lata folyam&aacute;n. &Iacute;gy ez a fejezet vegyes tematik&aacute;j&uacute;.</p>

<p>A kilencedik &eacute;s tizedik fejezet a Unix k&eacute;t ismert &eacute;s gyakran haszn&aacute;lt parancs&aacute;nak, a <span class="command"><strong>sed</strong></span>-nek &eacute;s <span class="command"><strong>awk</strong></span>-nak ismertet&eacute;s&eacute;re sz&aacute;njuk.</p>

<p>A tizenegyedik fejezetben a Unix folyamatok kezel&eacute;s&eacute;vel foglalkozunk</p>

<p>A tananyagot els&#337; illetve m&aacute;sod &eacute;ves m&#369;szaki informatika vagy informatika szakos hallgat&oacute;knak sz&aacute;njuk, egy bevezet&#337; UNIX/Linux tananyag egyik r&eacute;szek&eacute;nt, &iacute;gy felt&eacute;telezz&uuml;k, hogy az olvas&oacute; ismeri p&eacute;ld&aacute;ul a C nyelvet. Ett&#337;l f&uuml;ggetlen&uuml;l haszn&aacute;lhat&oacute; az anyag m&aacute;s kontextusban is.</p>


</div>


</div>
 
    	<div class="chapter" title="2. fejezet - A UNIX termin&aacute;l haszn&aacute;lata" id="d5e112"><div class="titlepage"><div><div><h2 class="title">2. fejezet - A UNIX termin&aacute;l haszn&aacute;lata</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e114">T&ouml;rt&eacute;nelemi h&aacute;tt&eacute;r</a></span></dt><dt><span class="sect1"><a href="#d5e124">A termin&aacute;llal val&oacute; munk&aacute;t seg&iacute;t&#337; billenty&#369;k</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e309">Mozg&aacute;s a parancssorok  list&aacute;j&aacute;ban</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e336">A munkaszesszi&oacute;</a></span></dt><dt><span class="sect1"><a href="#d5e362">A parancsok form&aacute;tuma</a></span></dt></dl></div>
		
		<div class="sect1" title="T&ouml;rt&eacute;nelemi h&aacute;tt&eacute;r"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e114">T&ouml;rt&eacute;nelemi h&aacute;tt&eacute;r</h2></div></div></div>
			
			<p>Jelenleg b&aacute;rmely Unix vagy Linux rendszer grafikus, ablakkezel&#337; interf&eacute;sszel is rendelkezik, ha egy szem&eacute;lyi sz&aacute;m&iacute;t&oacute;g&eacute;pen vagy munka&aacute;llom&aacute;son haszn&aacute;ljuk.  A legt&ouml;bb  PC-re telep&iacute;tett Linux  rendszer ezzel indul el. Az ablakkezel&#337; rendszerben viszonylag k&ouml;nny&#369; eligazodni - m&aacute;r ami a programok egyszer&#369; elind&iacute;t&aacute;s&aacute;t illeti.  A h&eacute;jhoz k&ouml;t&#337;d&#337; munk&aacute;t viszont &aacute;ltal&aacute;ban egyszer&#369; sz&ouml;veggel le&iacute;rt parancsokkal v&eacute;gezz&uuml;k, ezeket pedig parancssoron g&eacute;pelj&uuml;k be. &Iacute;gy elegend&#337; egy j&oacute;val egyszer&#369;bb interf&eacute;szt haszn&aacute;lni mint a grafikusat.  Amennyiben grafikus interf&eacute;sz van el&#337;tt&uuml;nk, akkor  ennek az interf&eacute;sznek az el&eacute;r&eacute;s&eacute;re egy kis programot ind&iacute;tunk el, amely &aacute;ltal&aacute;ban egy termin&aacute;l emul&aacute;l&oacute; program. A program egyszer&#369; beviteli eszk&ouml;zt ut&aacute;noz, amelybe csak sz&ouml;vegsorokat lehet beg&eacute;pelni, illetve v&aacute;laszk&eacute;nt sz&ouml;vegsorokat &iacute;r ki. Ez a parancs beviteli m&oacute;d a UNIX rendszerek haszn&aacute;lat&aacute;nak t&ouml;rt&eacute;nelm&eacute;hez k&ouml;t&#337;dik, de ma is aktu&aacute;lis &eacute;s hat&eacute;kony.</p>
            <p><a class="indexterm" name="d5e118"></a>A 70-es &eacute;vek UNIX-&aacute;hoz ember-g&eacute;p interf&eacute;szk&eacute;nt egy k&uuml;ls&#337; hardver eszk&ouml;z csatlakozott, amelyet <span class="emphasis"><em>teletype</em></span>-nek neveztek (ez t&aacute;virati rendszerekben haszn&aacute;lt termin&aacute;l ut&oacute;da volt, &iacute;gy lett a rendszerben a termin&aacute;lt csatlakoztat&oacute; speci&aacute;lis f&aacute;jlok neve tty). A kommunik&aacute;ci&oacute; egy soros kommunik&aacute;ci&oacute;s vonalon kereszt&uuml;l zajlott, a bemenet &iacute;r&oacute;g&eacute;pszer&#369; billenty&#369;zet volt, a g&eacute;p &aacute;ltal vissza&iacute;rt sz&ouml;veget pap&iacute;rra nyomtatta (ez&eacute;rt zajlott a kommunik&aacute;ci&oacute; mindk&eacute;t ir&aacute;nyban sz&ouml;vegsorokon kereszt&uuml;l). K&eacute;s&#337;bb (1978 k&ouml;r&uuml;l) k&eacute;perny&#337;s termin&aacute;lok jelentek meg (CRT - Cathode Ray Tube termin&aacute;lok). Legismertebbek a DEC c&eacute;g VT sorozata, pl. a VT100.  Ezeken a kurzort mozgatni lehetett, ezt a ki&iacute;r&oacute; szoftver vez&eacute;rl&#337;, un. escape szekvenci&aacute;kkal tette. Az els&#337; id&#337;szakban ezek nem tudtak grafikus k&eacute;pet megjelen&iacute;teni. A sz&ouml;veget 80 oszlop, 23 vagy 25 sor m&eacute;retben tudt&aacute;k ki&iacute;rni. Ut&aacute;nuk a grafikus termin&aacute;lok k&ouml;vetkeztek, ezek egy programot futtattak (X server) amely a UNIX-ot futtat&oacute; g&eacute;p grafikus alkalmaz&aacute;sai jelen&iacute;tette meg. Ezek voltak az X termin&aacute;lok.</p>
            <p>K&eacute;s&#337;bb szem&eacute;lyi sz&aacute;m&iacute;t&oacute;g&eacute;peken a hagyom&aacute;nyos termin&aacute;lt egy program jelen&iacute;tette meg a grafikus k&eacute;perny&#337;n, bemeneti eszk&ouml;zk&eacute;nt a g&eacute;p billenty&#369;zet&eacute;t, kimenetk&eacute;nt pedig a k&eacute;perny&#337;t haszn&aacute;lt&aacute;k. Ezek a rendszerhez egy programon kereszt&uuml;l csatlakoztak, ugyanis itt m&aacute;r nem volt sz&uuml;ks&eacute;g egy k&uuml;ls&#337; hardver kapcsolatra. P&eacute;ld&aacute;ul a UNIX rendszerekben haszn&aacute;lt X Window grafikus fel&uuml;let eset&eacute;ben ez a program (X termin&aacute;l) kirajzolt egy termin&aacute;lt, ami &uacute;gy n&eacute;zett ki, mint egy  termin&aacute;l k&eacute;perny&#337;. A g&eacute;pt&#337;l j&ouml;v&#337; inform&aacute;ci&oacute; (karakterek &eacute;s kurzorvez&eacute;rl&eacute;s  tov&aacute;bbra is &uacute;gy &eacute;rkezett mint a CRT termin&aacute;lokn&aacute;l, de a szoftver &aacute;talak&iacute;totta grafikus k&eacute;pp&eacute;).  Mivel a program pont &uacute;gy viselkedett, mint pl. egy igazi VT-100 termin&aacute;l, azt mondjuk, hogy a szoftver a VT-100 termin&aacute;lt emul&aacute;lta.</p> 
            <p>&Iacute;gy pl. a PC-k eset&eacute;ben a parancssor be&uuml;t&eacute;se ugyan&uacute;gy t&ouml;rt&eacute;nik, mintha egy k&uuml;ls&#337; eszk&ouml;zt haszn&aacute;ln&aacute;nk termin&aacute;lk&eacute;nt. A termin&aacute;lt emul&aacute;l&oacute; programnak ez&uacute;ttal nem volt sz&uuml;ks&eacute;ge egy konkr&eacute;t hardware eszk&ouml;zre (pl. a soros port), hanem  az oper&aacute;ci&oacute;s rendszer nyitott a sz&aacute;m&aacute;ra 2 f&aacute;jlt (pontosabban karakter eszk&ouml;zt) amin kereszt&uuml;l a kommunik&aacute;ci&oacute; zajlott. Ez&eacute;rt ezt az eszk&ouml;zt pseudo termin&aacute;lnak nevezik.</p>                    
            <p>
            </p>
    </div>
    <div class="sect1" title="A termin&aacute;llal val&oacute; munk&aacute;t seg&iacute;t&#337; billenty&#369;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e124">A termin&aacute;llal val&oacute; munk&aacute;t seg&iacute;t&#337; billenty&#369;k</h2></div></div></div>
            <p>A termin&aacute;l billenty&#369;j&eacute;n be&uuml;t&ouml;tt karakterek eljutnak egy programhoz, az pedig a karakterekre adott v&aacute;laszt vissza&iacute;rja a termin&aacute;l k&eacute;perny&#337;j&eacute;re. A programmal val&oacute; kapcsolat k&eacute;t ir&aacute;ny&uacute;, ezt <span class="emphasis"><em>full duplex</em></span> m&#369;k&ouml;d&eacute;si m&oacute;dnak nevezz&uuml;k. Ha a billenty&#369;n le&uuml;t&ouml;tt karaktert a vez&eacute;relt program fogadta, vissza&iacute;rja a termin&aacute;l k&eacute;perny&#337;j&eacute;re &#8211; ekkor az megjelenik, ezt nevezz&uuml;k visszhangnak (<span class="emphasis"><em>echo</em></span>).</p>
<p>Az al&aacute;bbi k&eacute;perny&#337;kimenet parancs beviteleket &eacute;s a rendszer &aacute;ltal ki&iacute;rt v&aacute;laszokat tartalmaz:</p>
            <pre class="screen">
$ ls
a.out  echoarg.c  echo.c
$ ls -l -t
total 16
-rwxrwxr-x 1 lszabo lszabo 4847 Feb  7 10:44 a.out
-rw-rw-r-- 1 lszabo lszabo  198 Feb  7 10:43 echoarg.c
-rw-rw-r-- 1 lszabo lszabo  232 Feb  7 10:43 echo.c
$ ls -l echo.c
-rw-rw-r-- 1 lszabo lszabo  232 Feb  7 10:43 echo.c
$ 
</pre>
        <p>A kimeneten a <span class="strong"><strong>$</strong></span> karakter &eacute;s az ut&aacute;na k&ouml;vetkez&#337; sz&oacute;k&ouml;z a h&eacute;j k&eacute;szenl&eacute;ti jele (<span class="emphasis"><em>prompt</em></span>), az <span class="command"><strong><a class="link" href="#cmd_ls" title="Az ls parancs">ls</a></strong></span> a beg&eacute;pelt parancs (ez f&aacute;jlok nev&eacute;t &eacute;s tulajdons&aacute;g&aacute;t list&aacute;zza), amelyet egym&aacute;s ut&aacute;n h&aacute;romszor h&iacute;vunk meg: els&#337; alkalommal <a class="link" href="#cmd_syntax">opci&oacute;k</a> n&eacute;lk&uuml;l, m&aacute;sodik alkalommal a <code class="option">-l</code> &eacute;s <code class="option">-t</code> opci&oacute;val (ami r&eacute;szletes list&aacute;t &eacute;s m&oacute;dos&iacute;t&aacute;s szerinti lista sorrendet k&eacute;r,a  harmadik alkalommal csak az <code class="filename">echo.c</code> nev&#369; programot list&aacute;zzuk r&eacute;szletesen. L&aacute;that&oacute;, hogy a h&eacute;jjal val&oacute; kommunik&aacute;ci&oacute; folyamatos g&eacute;pel&eacute;st jelent, ez&eacute;rt maga a Unix termin&aacute;l kezel&#337; alrendszere, illetve a haszn&aacute;lt programok is biztos&iacute;tanak olyan szerkeszt&eacute;si m&#369;veleteket amelyek felgyors&iacute;tj&aacute;k ezeknek a soroknak a gyors g&eacute;pel&eacute;s&eacute;t. Ezek a m&#369;veletek &aacute;ltal&aacute;ban kontroll karakterekhez vannak rendelve.</p>
<div class="note" title="K&eacute;szenl&eacute;ti jel vagy prompt" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: K&eacute;szenl&eacute;ti jel vagy prompt"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">K&eacute;szenl&eacute;ti jel vagy prompt</th></tr><tr><td align="left" valign="top">

<p>A k&ouml;nyv termin&aacute;l ablak p&eacute;ld&aacute;iban k&eacute;szenl&eacute;ti jelk&eacute;nt a <code class="literal">$</code> jelet &eacute;s az ut&aacute;na k&ouml;vetkez&#337; sz&oacute;k&ouml;zt fogjuk haszn&aacute;lni, amely csak akkor vehet&#337; &eacute;szre ha van valami a parancsoron, &uuml;res parancssoron nem l&aacute;that&oacute;:</p>
<pre class="screen">
$ 
</pre>

<p> Esetenk&eacute;nt ez a k&uuml;l&ouml;nb&ouml;z&#337; rendszereken m&aacute;s &eacute;s m&aacute;s karaktersor lehet, &aacute;ltal&aacute;ban egy praktikusabb &uuml;zenet, p&eacute;ld&aacute;ul a munkak&ouml;nyvt&aacute;r neve. Ezzel kapcsolatban l&aacute;sd a <a class="link" href="#ps1">PS1</a> k&ouml;rnyezeti v&aacute;ltoz&oacute;t. </p>
</td></tr></table></div>
        <p>A termin&aacute;l be&aacute;ll&iacute;t&aacute;sait az <span class="command"><strong>stty</strong></span> paranccsal lehet megn&eacute;zni illetve m&oacute;dos&iacute;tani. Pl. a <code class="option">-a</code>  opci&oacute;ja kilist&aacute;zza a termin&aacute;l be&aacute;ll&iacute;t&aacute;sait, ennek a kontroll billenty&#369;kre vonatkoz&oacute; r&eacute;sze &iacute;gy n&eacute;z ki:</p>
<pre class="screen">
$ stty -a
speed 38400 baud; rows 38; columns 80; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = &lt;undef&gt;;
eol2 = &lt;undef&gt;; swtch = &lt;undef&gt;; start = ^Q; stop = ^S; susp = ^Z; 
rprnt = ^R;werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
$ 
</pre>
        <p>Az al&aacute;bbiakban a kontroll &eacute;s valamilyen m&aacute;s billenty&#369;, pl. a C egyidej&#369; lenyom&aacute;s&aacute;t Ctrl-C -vel, illetve az Alt &eacute;s C egyidej&#369; lenyom&aacute;s&aacute;t Alt-C -vel fogjuk jel&ouml;lni.</p>
        <p>A param&eacute;terek termin&aacute;l jellemz&#337;ket tartalmaznak, t&eacute;m&aacute;nk szempontj&aacute;b&oacute;l az els&#337; n&eacute;h&aacute;ny sor tartalmazza azokat a kontroll karakter - termin&aacute;l m&#369;velet hozz&aacute;rendel&eacute;seket, amelyek a kernel termin&aacute;l alrendszere kezel. P&eacute;ld&aacute;ul a Ctrl-C karakterre a termin&aacute;l az <code class="code">intr</code> (<span class="emphasis"><em>interrupt</em></span>) m&#369;veletet hajtja v&eacute;gre, azaz megszak&iacute;tja a termin&aacute;lon elind&iacute;tott, fut&oacute; programot (pontosabban jelz&eacute;st k&uuml;ld, l&aacute;sd a <a class="link" href="#signal" title="Jelz&eacute;sek">Jelz&eacute;sek</a> c&iacute;m&#369; alfejezetet). Az al&aacute;bbi t&aacute;bl&aacute;zat tartalmazza a fontosabb m&#369;veleteket:</p>
        <div class="table"><a name="d5e156"></a><p class="title"><b>2.1. t&aacute;bl&aacute;zat - A parancssor szerkeszt&eacute;si billenty&#369;i</b></p><div class="table-contents">
                
                <table summary="A parancssor szerkeszt&eacute;si billenty&#369;i" cellpadding="4" border="1"><colgroup><col width="14%" class="col1"><col width="14%" class="col2"><col width="72%" class="col3"></colgroup><thead><tr><th align="center">M&#369;velet neve</th><th align="center">Billenty&#369; (k&oacute;d)</th><th>Mit v&eacute;gez a termin&aacute;l</th></tr></thead><tbody><tr><td align="center">intr</td><td align="center">Ctrl-C</td><td align="left">interrupt: a megszak&iacute;t&oacute; billenty&#369;, a fut&oacute; programot szak&iacute;tja meg</td></tr><tr><td align="center">quit</td><td align="center">Ctrl-\</td><td align="left">szint&eacute;n meg&aacute;ll&iacute;tja a fut&oacute; programot, az un. QUIT jelz&eacute;ssel (l&aacute;sd jelz&eacute;seket t&aacute;rgyal&oacute; fejezet)</td></tr><tr><td align="center">eof</td><td align="center">Ctrl-D</td><td align="left">f&aacute;jl v&eacute;ge jel</td></tr><tr><td align="center">erase</td><td align="center">Ctrl-H vagy BS</td><td align="left">a t&ouml;rl&eacute;sre haszn&aacute;lt karakter (a modern termin&aacute;lokon backspace)</td></tr><tr><td align="center">werase</td><td align="center">Ctrl-W</td><td align="left">egy sz&oacute;t t&ouml;r&ouml;l (word erase)</td></tr><tr><td align="center">kill</td><td align="center">Ctrl-U</td><td align="left">egy teljes parancssort t&ouml;r&ouml;l</td></tr><tr><td align="center">suspend</td><td align="center">Ctrl-Z</td><td align="left">felf&uuml;ggeszti az &eacute;ppen fut&oacute; folyamatot (a folyamat ideiglenesen le&aacute;ll: a felf&uuml;ggesztett folyamat fogalm&aacute;t l&aacute;sd k&eacute;s&#337;bb)</td></tr><tr><td align="center">stop</td><td align="center">Ctrl-S</td><td align="left">meg&aacute;ll&iacute;tja a termin&aacute;lra val&oacute; &iacute;r&aacute;st</td></tr><tr><td align="center">start</td><td align="center">Ctrl-Q</td><td align="left">&uacute;jraind&iacute;tja az &iacute;r&aacute;st</td></tr><tr><td align="center">clear</td><td align="center">Ctrl-L</td><td align="left">t&ouml;rli a termin&aacute;l k&eacute;perny&#337;j&eacute;t, vagy m&aacute;s alkalmaz&aacute;sok eset&eacute;ben &uacute;jrarajzolja a k&eacute;perny&#337;t</td></tr></tbody></table>
        </div></div><br class="table-break">
        <p>Az <span class="command"><strong>stty</strong></span> seg&iacute;ts&eacute;g&eacute;vel ezek a hozz&aacute;rendel&eacute;sek m&oacute;dos&iacute;that&oacute;ak, pl.:</p>
            <pre class="screen">$ stty intr Ctrl-X</pre>        
        <p>megv&aacute;ltoztatja a megszak&iacute;t&oacute; kombin&aacute;ci&oacute;t, Ctrl-C helyett Ctrl-X-re.</p>
        <p>A fenti kombin&aacute;ci&oacute;k minim&aacute;lis szerkeszt&eacute;si lehet&#337;s&eacute;get jelentenek, ez&eacute;rt a fut&oacute; programok enn&eacute;l jobb szerkeszt&eacute;si lehet&#337;s&eacute;geket &eacute;p&iacute;thetnek be a parancssor kezel&eacute;s&eacute;be. A Bash h&eacute;j a GNU Readline nev&#369; sor szerkeszt&eacute;st biztos&iacute;t&oacute; k&ouml;nyvt&aacute;r&aacute;t haszn&aacute;lja, ez eleg&aacute;ns szerkeszt&eacute;si opci&oacute;kat biztos&iacute;t.</p>
        <p>Az al&aacute;bbi t&aacute;bl&aacute;zat a legfontosabbakat tartalmazza a szerkeszt&eacute;si parancsok k&ouml;z&uuml;l.</p>

        <div class="table"><a name="d5e214"></a><p class="title"><b>2.2. t&aacute;bl&aacute;zat - A Readline szerkeszt&eacute;si m&#369;veletei a parancssoron</b></p><div class="table-contents">
                

                <table summary="A Readline szerkeszt&eacute;si m&#369;veletei a parancssoron" cellpadding="4" border="1"><colgroup><col width="16%" class="col1"><col width="84%" class="col2"></colgroup><thead><tr><th align="center">Billenty&#369; (k&oacute;d)</th><th align="center">Szerkeszt&eacute;si m&#369;velet</th></tr></thead><tbody><tr><td align="center">Ctrl-B</td><td align="left">back - balra l&eacute;p egy karaktert</td></tr><tr><td align="center">Ctrl-F</td><td align="left">forward - jobbra egy karaktert</td></tr><tr><td align="center">DEL vagy BS</td><td align="left">a kurzor bal oldal&aacute;n lev&#337; karaktert t&ouml;rli</td></tr><tr><td align="center">Ctrl-A</td><td align="left">a sor elej&eacute;re ugrik</td></tr><tr><td align="center">Ctrl-E</td><td align="left">end - a sor v&eacute;g&eacute;re ugrik</td></tr><tr><td align="center">Alt-F</td><td align="left">egy sz&oacute;t ugrik el&#337;re</td></tr><tr><td align="center">Alt-B</td><td align="left">egy sz&oacute;t ugrik vissza</td></tr><tr><td align="center">Ctrl-U</td><td align="left">t&ouml;rli a teljes sort</td></tr><tr><td align="center">Ctrl-K</td><td align="left">a kurzort&oacute;l a sor v&eacute;g&eacute;ig t&ouml;r&ouml;l el&#337;re</td></tr><tr><td align="center">Ctrl-W</td><td align="left">a kurzort&oacute;l visszafel&eacute; t&ouml;r&ouml;l az els&#337; sz&oacute;k&ouml;zig (gyakorlatilag egy sz&oacute;t t&ouml;r&ouml;l)</td></tr><tr><td align="center">Ctrl-Y</td><td align="left">visszam&aacute;sol (yank): a  t&ouml;r&ouml;lt sz&ouml;veget visszailleszti a kurzor poz&iacute;ci&oacute;j&aacute;t&oacute;l (kiv&eacute;ve a teljes sor t&ouml;rl&eacute;s&eacute;t)</td></tr><tr><td align="center">Ctrl-T</td><td align="left">kicser&eacute;li a kurzor alatti &eacute;s az el&#337;tte lev&#337; karaktereket (ha rossz sorrendben g&eacute;pelt&uuml;k &#337;ket)</td></tr></tbody></table>
        </div></div><br class="table-break"> 
        <p>Amennyiben a termin&aacute;lra hosszabb sz&ouml;veget &iacute;runk &eacute;s az kifut a rendelkez&eacute;sre &aacute;ll&oacute; sorokb&oacute;l, az al&aacute;bbi parancsokkal forgathatjuk illetve t&ouml;r&ouml;lhetj&uuml;k a sz&ouml;veget:</p>

       <div class="table"><a name="d5e261"></a><p class="title"><b>2.3. t&aacute;bl&aacute;zat - K&eacute;perny&#337;t kezel&#337; parancsok</b></p><div class="table-contents">
                
                <table summary="K&eacute;perny&#337;t kezel&#337; parancsok" cellpadding="4" border="1"><colgroup><col width="16%" class="col1"><col width="84%" class="col2"></colgroup><thead><tr><th align="center">Billenty&#369; (k&oacute;d)</th><th align="center">Szerkeszt&eacute;si m&#369;velet</th></tr></thead><tbody><tr><td align="center">Shift-PgUp</td><td align="left">lapozza a k&eacute;perny&#337; tartalm&aacute;t felfel&eacute;</td></tr><tr><td align="center">Shift-PgDown</td><td align="left">lapozza a k&eacute;perny&#337; tartalm&aacute;t lefel&eacute;</td></tr><tr><td align="center">Ctrl-L</td><td align="left">t&ouml;rli a k&eacute;perny&#337;t</td></tr></tbody></table>
        </div></div><br class="table-break"> 


        <p>A szerkeszt&eacute;si opci&oacute;kon k&iacute;v&uuml;l, a g&eacute;pel&eacute;s felgyors&iacute;that&oacute;, ha a parancssort fogad&oacute; program rendelkezik szavakat kieg&eacute;sz&iacute;t&#337; opci&oacute;val (<span class="emphasis"><em>word completion</em></span>). Szavakon a parancsnyelv eset&eacute;ben karakterek sorozat&aacute;t fogjuk &eacute;rteni. Ez azt jelenti, hogy a beg&eacute;pelt szavak kezd&#337;bet&#369;i ut&aacute;n a Readline felismeri, hogy mit akarunk be&iacute;rni, &eacute;s kieg&eacute;sz&iacute;theti a szavakat. A Readline a parancsneveket, f&aacute;jlneveket &eacute;s v&aacute;ltoz&oacute; neveket is k&eacute;pes kieg&eacute;sz&iacute;teni. Az id&#337;trabl&oacute; &aacute;ltal&aacute;ban a f&aacute;jlnevek be&iacute;r&aacute;sa, pr&oacute;b&aacute;lkozzunk el&#337;sz&ouml;r ennek gyakorl&aacute;s&aacute;val. A szavak kieg&eacute;sz&iacute;t&eacute;s&eacute;re a tabul&aacute;tor karaktert haszn&aacute;ljuk (Tab billenty&#369;).</p> 
        <p>Ha a f&aacute;jln&eacute;v els&#337; bet&#369;je (pl. legyen ez <span class="strong"><strong>a</strong></span>) ut&aacute;n egy tabul&aacute;tor karaktert &uuml;t&uuml;nk le , akkor a Readline kieg&eacute;sz&iacute;ti automatikusan a f&aacute;jl nev&eacute;t - amennyiben egy olyan f&aacute;jl vagy k&ouml;nyvt&aacute;r van a munka k&ouml;nyvt&aacute;rban amely a bet&#369;vel kezd&#337;dik.</p>
        <p>Ha nincs ilyen f&aacute;jl, a termin&aacute;l egy csipog&oacute; hangot hallat (legel&aacute;bbis &aacute;ltal&aacute;ban &iacute;gy van be&aacute;ll&iacute;tva, de term&eacute;szetesen a csipog&aacute;s kikapcsolhat&oacute;).</p>
        <p>Ha t&ouml;bb ilyen f&aacute;jl van, akkor ism&eacute;t csipog, ilyenkor egy m&aacute;sodik tabul&aacute;tor le&uuml;t&eacute;s&eacute;vel ki lehet &iacute;ratni ezeket a f&aacute;jlneveket, &eacute;s folytatni lehet a parancssort a f&aacute;jl m&aacute;sodik, harmadik, stb. bet&#369;j&eacute;vel, addig am&iacute;g a sorozat egyedi lesz: ut&aacute;na ism&eacute;t le&uuml;tve a Tab billenty&#369;t kieg&eacute;sz&uuml;l a n&eacute;v.

A Tab le&uuml;t&eacute;sekor, amennyiben karakter egyez&eacute;s van a nevek elej&eacute;n, a kieg&eacute;sz&iacute;t&eacute;s a parancssoron megt&ouml;rt&eacute;nik addig a karaktermint&aacute;ig amely k&ouml;z&ouml;s a nevek els&#337; r&eacute;sz&eacute;ben.
         </p>
        <p>Ugyanez alkalmazhat&oacute; a parancsok nev&eacute;re illetve h&eacute;j <a class="link" href="#valtozok" title="5. fejezet - A h&eacute;j v&aacute;ltoz&oacute;i">v&aacute;ltoz&oacute;k</a> nev&eacute;re is (a szavak parancssori hely&eacute;nek  kontextus&aacute;t&oacute;l f&uuml;gg&#337;en fogja ezeket kieg&eacute;sz&iacute;teni).</p>
        <p>Pl. amennyiben az al&aacute;bbi parancsot akarjuk le&iacute;rni, &eacute;s az el&#337;z&#337; p&eacute;ld&aacute;ban haszn&aacute;lt k&eacute;t f&aacute;jl van a k&ouml;nyvt&aacute;rban (<code class="filename">echoarg.c</code> &eacute;s <code class="filename">echo.c</code>):</p>
        <pre class="screen">$ gcc echoarg.c</pre>

			<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                                        <p>le&iacute;rjuk: <code class="code">gcc e</code></p>
								</li><li class="listitem">
                                        <p>lenyomjuk a Tab billenty&#369;t, az eredm&eacute;ny: <code class="code">gcc echo</code></p>
								</li><li class="listitem">
                                        <p>le&uuml;tj&uuml;k k&eacute;tszer a Tab-ot,  a shell ki&iacute;rja a parancssor al&aacute;: <code class="filename">echoarg.c  echo.c</code> , &iacute;gy l&aacute;that&oacute;, mivel lehet folytatni</p>
								</li><li class="listitem">
                                        <p>be&iacute;runk m&eacute;g egy karaktert a n&eacute;vb&#337;l <code class="code">gcc echoa</code>  &eacute;s ism&eacute;t le&uuml;tj&uuml;k a Tab-ot</p>
								</li><li class="listitem">
									<p>a shell behelyettes&iacute;ti a teljes nevet: <code class="code">gcc echoarg.c</code> .</p>

								</li></ol></div>
           <p>A fenti p&eacute;ld&aacute;ban nem volt l&aacute;tv&aacute;nyos a nyeres&eacute;g, de vannak 30-40 karakteres f&aacute;jlneveink, amikor szinte lehetetlen a kieg&eacute;sz&iacute;t&#337; opci&oacute; n&eacute;lk&uuml;l dolgozni.</p>
           <div class="sect2" title="Mozg&aacute;s a parancssorok list&aacute;j&aacute;ban"><div class="titlepage"><div><div><h3 class="title" id="d5e309">Mozg&aacute;s a parancssorok  list&aacute;j&aacute;ban</h3></div></div></div>
                   <p>A h&eacute;jjal val&oacute; munka gyakran felt&eacute;telezi parancssorok ism&eacute;tl&eacute;s&eacute;t, gyakran kis m&oacute;dos&iacute;t&aacute;sokat v&eacute;gezve egy el&#337;z&#337;leg m&aacute;r haszn&aacute;lt soron.</p>
                   <p>A shell r&ouml;gz&iacute;ti a le&uuml;t&ouml;tt parancsokat, a pontos mechanizmus v&aacute;ltozik a k&uuml;l&ouml;nb&ouml;z&#337; h&eacute;jakn&aacute;l (ha be&iacute;rjuk a <span class="command"><strong>history</strong></span> parancsot, ez l&aacute;that&oacute;v&aacute; v&aacute;lik). A bash eset&eacute;ben az el&#337;z&#337;leg le&uuml;t&ouml;tt parancsok a legk&ouml;nnyebben szint&eacute;n a Readline lehet&#337;s&eacute;gek seg&iacute;ts&eacute;g&eacute;vel kereshet&#337;ek vissza. Az al&aacute;bbi billenty&#369; kombin&aacute;ci&oacute;kkal tessz&uuml;k ezt:</p>

       <div class="table"><a name="d5e314"></a><p class="title"><b>2.4. t&aacute;bl&aacute;zat - A parancssor ism&eacute;tl&eacute;s&eacute;re haszn&aacute;lt billenty&#369;k&oacute;dok</b></p><div class="table-contents">
                
                <table summary="A parancssor ism&eacute;tl&eacute;s&eacute;re haszn&aacute;lt billenty&#369;k&oacute;dok" cellpadding="2" border="1"><colgroup><col width="16%" class="col1"><col width="84%" class="col2"></colgroup><thead><tr><th align="center">Billenty&#369; (k&oacute;d)</th><th align="center">M&#369;velet</th></tr></thead><tbody><tr><td align="center">Ctrl-P vagy &#8593;</td><td align="left">kiv&aacute;lassza az el&#337;z&#337; parancssort</td></tr><tr><td align="center">Ctrl-N vagy &#8595;</td><td align="left">kiv&aacute;lassza a k&ouml;vetkez&#337; parancssort</td></tr><tr><td align="center">Ctrl-R</td><td align="left">elind&iacute;tja a keres&eacute;st visszafele az eddig le&uuml;t&ouml;tt sorok  k&ouml;z&ouml;tt</td></tr></tbody></table>
        </div></div><br class="table-break"> 
        <p>A parancssorok k&ouml;zti keres&eacute;s sor&aacute;n egy bizonyos sztringet tartalmaz&oacute; parancssort lehet gyorsan visszakeresni. A keres&eacute;st a Ctrl-R kombin&aacute;ci&oacute; le&uuml;t&eacute;s&eacute;vel kell kezdeni. Ut&aacute;na, ahogy a keresett sztringet g&eacute;pelj&uuml;k megjelenik visszafele keres&eacute;ssel az els&#337; olyan sor amelyben megtal&aacute;lhat&oacute;. Az al&aacute;bbi p&eacute;ld&aacute;ban a Ctrl-R lenyom&aacute;sa ut&aacute;n egy 2-est &iacute;runk be, ami el&#337;hozza a utols&oacute;, 2-es karaktert tartalmaz&oacute; sort:</p>

<pre class="screen">
$ ls 2.txt
2.txt
$ ls 1.txt
1.txt
(reverse-i-search)`2': ls 2.txt
</pre>

<p>Min&eacute;l t&ouml;bb karaktert g&eacute;pel&uuml;nk be a keresett sztringb&#337;l, a tal&aacute;lat ann&aacute;l pontosabb lesz, &eacute;s dinamikusan v&aacute;ltozok a g&eacute;pelt karakterek hat&aacute;s&aacute;ra. Ha az els&#337; tal&aacute;lat nem megfelel&#337;, &eacute;s tov&aacute;bbi g&eacute;pel&eacute;ssel nem lehet sz&#369;k&iacute;teni, egy m&aacute;sodik Ctrl-R lenyom&aacute;s&aacute;val a m&aacute;sodik tal&aacute;latra lehet ugrani, &eacute;s ezt lehet ism&eacute;telni, am&iacute;g el&#337;ker&uuml;l a keresett sor.  Ekkor a keres&eacute;st az Enter (Ctrl-J) vagy ESC billenty&#369;k egyik&eacute;vel lehet le&aacute;ll&iacute;tani. A keresett sor felker&uuml;l a parancssorra, meg lehet szerkeszteni &eacute;s ism&eacute;t el lehet ind&iacute;tani.</p>
           </div>

    </div>
    <div class="sect1" title="A munkaszesszi&oacute;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e336">A munkaszesszi&oacute;</h2></div></div></div>
            <p>A bejelentkez&eacute;s egy asztali PC-n tal&aacute;lhat&oacute; rendszer eset&eacute;ben, amelyen el van ind&iacute;tva a grafikus felhaszn&aacute;l&oacute;i k&ouml;rnyezet egy grafikus ablak &aacute;ltal megval&oacute;s&iacute;tott n&eacute;v/jelsz&oacute; &#369;rlap kit&ouml;lt&eacute;s&eacute;b&#337;l &aacute;ll. Amennyiben a felhaszn&aacute;l&oacute;t azonos&iacute;tja a rendszer, elind&iacute;tja mindazokat a szolg&aacute;ltat&aacute;sokat amelyre a felhaszn&aacute;l&oacute;nak sz&uuml;ks&eacute;ge van, t&ouml;bbek k&ouml;zt a grafikus fel&uuml;letet.  Linux rendszereken a leggyakoribb a Gnome vagy KDE (K Desktop Environment) elnevez&eacute;s&#369; grafikus fel&uuml;let.</p>
            <p>Amennyiben a g&eacute;pen nincs elind&iacute;tva grafikus k&ouml;rnyezet, akkor a felhaszn&aacute;l&oacute;i interf&eacute;sz gyakorlatilag egy egyszer&#369; sz&ouml;veges termin&aacute;l interf&eacute;sz. Asztali Linux rendszeren k&ouml;nnyen el&#337;h&iacute;vhatunk egy ilyent, m&eacute;g akkor is ha a rendszer elind&iacute;tja a grafikus interf&eacute;szt. A Ctrl-Alt-F1, Ctrl-Alt-F2, ...,Ctrl-Alt-F6 billenty&#369; kombin&aacute;ci&oacute;k hat&aacute;s&aacute;ra egy virtu&aacute;lis termin&aacute;lt h&iacute;v meg a rendszer, a g&eacute;p billenty&#369;zetet &eacute;s &eacute;s k&eacute;perny&#337;j&eacute;t haszn&aacute;lva sz&ouml;veges m&oacute;dban. Linuxon ezt a rendszerben elind&iacute;tott <span class="command"><strong>mingetty</strong></span> nev&#369; folyamatok biztos&iacute;tj&aacute;k, amelyek ind&iacute;t&aacute;skor automatikusan indulnak (a grafikus fel&uuml;letet futtat&oacute; termin&aacute;lhoz &aacute;ltal&aacute;ban a Ctrl-Alt-F7 kombin&aacute;ci&oacute;val jutunk vissza).</p>
            <p>A bejelentkez&eacute;s ebben az esetben is n&eacute;v/jelsz&oacute; p&aacute;r, &eacute;s ami ilyenkor t&ouml;rt&eacute;nik az a klasszikus Unix  bel&eacute;p&eacute;s a rendszerbe (ugyanezt fogjuk tapasztalni, ha egy m&aacute;r megnyitott termin&aacute;lr&oacute;l bel&eacute;p&uuml;nk h&aacute;l&oacute;zaton kereszt&uuml;l egy t&aacute;voli g&eacute;pre). Linux rendszeren a felhaszn&aacute;l&oacute; nevet &aacute;tvev&#337; <span class="command"><strong>mingetty</strong></span> folyamat egy <span class="command"><strong>login</strong></span> nev&#369; programot ind&iacute;t el: ez bek&eacute;ri a jelsz&oacute;t. Ha siker&uuml;lt azonos&iacute;tania a felhaszn&aacute;l&oacute;t elind&iacute;tja a h&eacute;jat, ezt a p&eacute;ld&aacute;nyt <span class="emphasis"><em>login shell</em></span>-nek nevezz&uuml;k.  A h&eacute;jnak parancsokat &iacute;rhatunk be, majd ha munk&aacute;nkat befejezt&uuml;k akkor a <span class="command"><strong>logout</strong></span> vagy <span class="command"><strong>exit</strong></span> parancsokkal l&eacute;phet&uuml;nk ki.</p>
            <p>A bel&eacute;p&eacute;s ut&aacute;n a rendszer elind&iacute;tja sz&aacute;munkra a h&eacute;jat, amelyik a k&ouml;vetkez&#337;ket v&eacute;gzi:</p>

			<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									<p>Beolvas n&eacute;h&aacute;ny konfigur&aacute;ci&oacute;s f&aacute;jlt &eacute;s v&eacute;grehajtja azokat.</p>
								</li><li class="listitem">
									<p>Ki&iacute;r egy un. k&eacute;szenl&eacute;ti jelet, sz&ouml;veget (<span class="emphasis"><em>prompt string</em></span> vagy <span class="emphasis"><em>prompter</em></span>) (ez &aacute;ltal&aacute;ban a g&eacute;p neve, a felhaszn&aacute;l&oacute; neve vagy munkak&ouml;nyvt&aacute;r), a sz&ouml;veg v&eacute;g&eacute;n egy karaktert: ez egy <code class="literal">$</code>, <code class="literal">#</code> vagy <code class="literal">&gt;</code> jel. Ebben a tananyagban egy $ &eacute;s egy ut&aacute;na k&ouml;vetkez&#337; sz&oacute;k&ouml;z a k&eacute;szenl&eacute;ti jel.</p>
								</li><li class="listitem">
									<p>Mindezek ut&aacute;n parancsokat v&aacute;r t&#337;l&uuml;nk, mindaddig am&iacute;g be&uuml;tj&uuml;k az <span class="command"><strong>exit</strong></span> vagy <span class="command"><strong>logout</strong></span> parancsokat vagy a f&aacute;jl v&eacute;ge (Ctrl-D) karaktert.</p>
								</li></ol></div>
    </div>
    <div class="sect1" title="A parancsok form&aacute;tuma"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e362">A parancsok form&aacute;tuma</h2></div></div></div>
            <p><a name="cmd_syntax"></a>Egy parancs szintaxisa a Unix rendszerekn&eacute;l:</p>
            <p><span class="strong"><strong>parancsn&eacute;v [opci&oacute;k] [argumentumok]</strong></span></p>
            <p>A parancs n&eacute;v valamilyen futtathat&oacute; f&aacute;jl neve, az opci&oacute;k (vagy m&aacute;s n&eacute;ven kapcsol&oacute;k, <span class="emphasis"><em>switch</em></span>-ek) egy adott parancs lefut&aacute;si m&oacute;dj&aacute;t befoly&aacute;solj&aacute;k. Az opci&oacute;k &eacute;s argumentumok is lehetnek "opcion&aacute;lisak": nem kell felt&eacute;tlen&uuml;l megadni &#337;ket ahhoz, hogy v&eacute;gre tudjuk hajtani a parancsot. Ezt jelzi a <code class="code">[]</code> z&aacute;r&oacute;jel a parancsok szintaxis&aacute;ban. Opci&oacute;t k&eacute;tf&eacute;lek&eacute;ppen adhatunk meg, r&ouml;vid (egy - jel az opci&oacute; el&#337;tt, ilyenkor az opci&oacute;t egy karakter jel&ouml;li) illetve hossz&uacute; form&aacute;ban (k&eacute;t - jel az opci&oacute; el&#337;tt, az opci&oacute; egy sz&oacute;). Az els&#337; esetben a kapcsol&oacute; &aacute;ltal&aacute;ban egy karakter, a m&aacute;sodikban egy eg&eacute;sz sz&oacute;. Az <span class="command"><strong>ls</strong></span> eset&eacute;ben a <code class="option">-l</code> opci&oacute; r&eacute;szletes list&aacute;t k&eacute;r, a <code class="option">--colo</code>r pedig a sz&iacute;nes list&aacute;z&aacute;st tiltja le:</p>
<pre class="screen">
$ ls -l
total 16
-rwxrwxr-x 1 lszabo lszabo 4847 Feb  7 16:34 a.out
-rw-rw-r-- 1 lszabo lszabo  198 Feb  7 10:43 echoarg.c
-rw-rw-r-- 1 lszabo lszabo  232 Feb  7 10:43 echo.c
$ ls --color=no
a.out  echoarg.c  echo.c
$ 
</pre>
            <p>T&ouml;bb opci&oacute;t megadhatunk csoportos&iacute;tva is:</p>
<pre class="screen">
$ ls -1tr
echo.c
echoarg.c
a.out
$ </pre>
        <p> A parancs nevekben, opci&oacute;kban a kis-nagy bet&#369;k sz&aacute;m&iacute;tanak, a Unix parancsai &aacute;ltal&aacute;ban kisbet&#369;sek. N&eacute;h&aacute;ny p&eacute;lda az ls parancs haszn&aacute;lat&aacute;ra k&uuml;l&ouml;nb&ouml;z&#337; kapcsol&oacute;kkal (a # karakter a shell sz&aacute;m&aacute;ra a megjegyz&eacute;s kezdet&eacute;t jelenti, a '<span class="emphasis"><em>$ </em></span>' pedig az al&aacute;bbi esteben a shell k&eacute;sznl&eacute;ti jele.</p>

<pre class="screen">
$ #hossz&uacute; lista
$ ls -l
total 8
-rw-r--r-- 1 lszabo lszabo  0 Sep 19 14:26 1.txt
-rw-r--r-- 1 lszabo lszabo  8 Sep 19 14:26 2.txt
-rw-r--r-- 1 lszabo lszabo 54 Sep 19 14:27 3.txt
$ #id&#337;rendben list&aacute;z, legel&#337;l a legut&oacute;bb l&eacute;trehozott f&aacute;jl
$ ls -t
3.txt  2.txt  1.txt
$ #ford&iacute;tott sorrendben list&aacute;z
$ ls -rt
1.txt  2.txt  3.txt
$ #ford&iacute;tott sorrendben, id&#337;rendben &eacute;s r&eacute;szletesen
$ ls -ltr  
-rw-r--r-- 1 lszabo lszabo  0 Sep 19 14:26 1.txt
-rw-r--r-- 1 lszabo lszabo  8 Sep 19 14:26 2.txt
-rw-r--r-- 1 lszabo lszabo 54 Sep 19 14:27 3.txt
$ #ezt &iacute;gy is be lehet &uuml;tni:
$ ls -l -t -r
-rw-r--r-- 1 lszabo lszabo  0 Sep 19 14:26 1.txt
-rw-r--r-- 1 lszabo lszabo  8 Sep 19 14:26 2.txt
-rw-r--r-- 1 lszabo lszabo 54 Sep 19 14:27 3.txt
$ #a file1 &eacute;s file2 tulajdons&aacute;gait list&aacute;zza
$ ls -l 1.txt 2.txt
-rw-r--r-- 1 lszabo lszabo 0 Sep 19 14:26 1.txt
-rw-r--r-- 1 lszabo lszabo 8 Sep 19 14:26 2.txt
$ 
</pre>

<p>Ha egy parancs sz&ouml;vege t&uacute;l hossz&uacute; a termin&aacute;l parancssor&aacute;n, az folytathat&oacute; a k&ouml;vetkez&#337; sorban.</p>

<p>P&eacute;ldak&eacute;nt vegy&uuml;k az <span class="command"><strong>echo</strong></span> parancsot, amelyik a parancssori argumentumait &iacute;rja ki:</p>

<pre class="screen">
$ echo ez egy sz&ouml;veg
ez egy sz&ouml;veg
$
</pre>

<p>A sz&ouml;veg folytat&aacute;s&aacute;t egy m&aacute;sodik sorban meg lehet oldani &uacute;gy, hogy a sz&ouml;vegben id&eacute;z&#337;jelet nyitunk &eacute;s le&uuml;tj&uuml;k a RETURN billenty&#369;t, &iacute;gy az a k&ouml;vetkez&#337; sorban lesz folytathat&oacute;. Ott z&aacute;rhatjuk az id&eacute;z&#337;jelet, &eacute;s egy &uacute;jabb RETURN-el ind&iacute;thatjuk a parancsot:</p>

<pre class="screen">
$ echo "ez egy hossz&uacute; sz&ouml;veg els&#337; r&eacute;sze
&gt; ez pedig a m&aacute;sodik"
ez egy hossz&uacute; sz&ouml;veg els&#337; r&eacute;sze
ez pedig a m&aacute;sodik
$
</pre>

<p>L&aacute;that&oacute;, hogy a <code class="code">$</code> helyett egy m&aacute;sik k&eacute;szenl&eacute;ti jel, a  <code class="code">&gt;</code> jelenik meg ilyenkor.</p>

<p>Enn&eacute;l fontosabb, a sorv&eacute;gi vissza-per jel haszn&aacute;lata, amelyikkel b&aacute;rmilyen sort le lehet z&aacute;rni, &eacute;s folytatni a k&ouml;vetkez&#337;ben (nem id&eacute;zett sz&ouml;veget):</p>

<pre class="screen">
$ echo ez egy hossz&uacute; sz&ouml;veg els&#337; r&eacute;sze \
&gt; ez pedig a m&aacute;sodik
ez egy hossz&uacute; sz&ouml;veg els&#337; r&eacute;sze ez pedig a m&aacute;sodik
$
</pre>

<p>L&aacute;that&oacute; a k&uuml;l&ouml;nbs&eacute;g is: az els&#337; esetben az &uacute;jsor beker&uuml;l a parancssorba, a m&aacute;sodikban pedig nem, a m&oacute;dszer arra j&oacute;, hogy egyszer&#369;en folytassuk a sort.</p>

<p>Ezt a megold&aacute;st h&eacute;jprogramokban is alkalmazhatjuk, b&aacute;rmikor.  Ennek az anyagnak a p&eacute;ld&aacute;iban is t&ouml;bbsz&ouml;r alkalmaz&aacute;sra ker&uuml;l az&eacute;rt, hogy a hossz&uacute; sor ne ny&uacute;ljon t&uacute;l az oldal sz&eacute;less&eacute;g&eacute;n. Term&eacute;szetesen munka k&ouml;zben a termin&aacute;lnak lehet hosszabb sorokat is be&iacute;rni mint az ablak sz&eacute;less&eacute;ge.</p>

<p><span class="strong"><strong>Fontos:</strong></span> a sor v&eacute;g&eacute;t lez&aacute;r&oacute; \ ut&aacute;n egyetlen karakter sem j&ouml;het, csak az &uacute;jsor.</p>

    </div>

	</div>

    	<div class="chapter" title="3. fejezet - A f&aacute;jlrendszer" id="d5e394"><div class="titlepage"><div><div><h2 class="title">3. fejezet - A f&aacute;jlrendszer</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e396">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e404">A f&aacute;jlnevek</a></span></dt><dt><span class="sect1"><a href="#d5e413">A UNIX f&aacute;jlrendszer fel&eacute;p&iacute;t&eacute;se, fontos k&ouml;nyvt&aacute;rak</a></span></dt><dt><span class="sect1"><a href="#d5e522">K&ouml;z&ouml;ns&eacute;ges f&aacute;jlok</a></span></dt><dt><span class="sect1"><a href="#d5e533">A hozz&aacute;f&eacute;r&eacute;si jogok</a></span></dt><dt><span class="sect1"><a href="#d5e587">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;z&ouml;ns&eacute;ges f&aacute;jlokon</a></span></dt><dt><span class="sect1"><a href="#d5e611">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;nyvt&aacute;rakon</a></span></dt><dt><span class="sect1"><a href="#cmd_umask">Az umask &eacute;s az implicit jogok</a></span></dt><dt><span class="sect1"><a href="#d5e703">A f&aacute;jlok id&#337;b&eacute;lyegei</a></span></dt><dt><span class="sect1"><a href="#filetypes">F&aacute;jl t&iacute;pusok, eszk&ouml;z&ouml;k </a></span></dt><dt><span class="sect1"><a href="#d5e751">Hivatkoz&aacute;sok (linkek)</a></span></dt><dt><span class="sect1"><a href="#d5e772">A f&aacute;jl nevekben haszn&aacute;lhat&oacute; metakarakterek</a></span></dt><dt><span class="sect1"><a href="#cmd_file">A fejezetben haszn&aacute;lt parancsok</a></span></dt></dl></div> 
            
    <div class="sect1" title="Bevezet&#337;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e396">Bevezet&#337;</h2></div></div></div>
			
			<p><a class="indexterm" name="d5e399"></a>Az &aacute;llom&aacute;nyok vagy f&aacute;jlok n&eacute;vvel el&eacute;rhet&#337; adathalmazok a sz&aacute;m&iacute;t&oacute;g&eacute;p t&aacute;rol&oacute;in. Szervez&eacute;s&uuml;ket az oper&aacute;ci&oacute;s rendszer oldja meg, &eacute;s a h&eacute;jprogramoz&aacute;s sz&aacute;m&aacute;ra az egyik fontos "adatt&iacute;pust" is jelentik. A h&eacute;jprogramok egyik gyakori feladata a f&aacute;jlok kezel&eacute;se (f&aacute;jlokat mozgatnak el, t&ouml;r&ouml;lnek, keresnek, stb.), ez&eacute;rt a Unix rendszerek f&aacute;jl szervez&eacute;s&eacute;t ismerni fontos.</p>
			<p>Aki tiszt&aacute;ban van a Unix rendszerek f&aacute;jlrendszer&eacute;nek strukt&uacute;r&aacute;j&aacute;val &eacute;s a leggyakrabban haszn&aacute;lt f&aacute;jlkezel&#337; parancsokkal, &aacute;tlapozhatja a fejezetet.</p>
			<p>A Unix egy &aacute;ltal&aacute;nos f&aacute;jl fogalommal dolgozik, amelyet egyszer&#369; 8 bites karakter (byte) folyamnak tekint (<span class="emphasis"><em>byte stream</em></span>). Az oper&aacute;ci&oacute;s rendszer szintj&eacute;n nincs k&uuml;l&ouml;n&ouml;sebb jelent&eacute;se a f&aacute;jlok tartalm&aacute;nak. A rendszer egyik szellemes megold&aacute;sa, hogy nem csak a k&uuml;l&ouml;nb&ouml;z&#337; adathordoz&oacute;kon tal&aacute;lhat&oacute; adatokat tekinti f&aacute;jlnak, hanem a hardver eszk&ouml;z&ouml;ket is. Ebben a fejezetben els&#337;sorban a szab&aacute;lyos, adathordoz&oacute;kon tal&aacute;lhat&oacute; f&aacute;jlokkal foglalkozunk.</p>
    </div>    
    <div class="sect1" title="A f&aacute;jlnevek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e404">A f&aacute;jlnevek</h2></div></div></div>
			
            <p>A f&aacute;jl nevek karakterekb&#337;l &aacute;llnak, hosszuk rendszerenk&eacute;nt v&aacute;ltozik, de sz&aacute;m&iacute;thatunk arra, hogy egy modern rendszeren ak&aacute;r 255 karakter hossz&uacute;ak is lehetnek.  B&aacute;rmilyen karaktert tartalmazhatnak kiv&eacute;ve <code class="literal"> /</code> &eacute;s <code class="literal">\0</code> (a C programoz&aacute;sban a sztring v&eacute;gi null) karaktereket. Ennek ellen&eacute;re f&aacute;jl nevekben nem aj&aacute;nlatos speci&aacute;lis karaktereket haszn&aacute;lni, mert az ilyenek zavarhatj&aacute;k a feldolgoz&aacute;sukat. Az aj&aacute;nlott karakterek a bet&#369;k&ouml;n &eacute;s sz&aacute;mokon k&iacute;v&uuml;l a <code class="code">_</code> , - &eacute;s a <code class="code">.</code> . Kis &eacute;s nagybet&#369;k k&ouml;zti k&uuml;l&ouml;nbs&eacute;g sz&aacute;m&iacute;t, teh&aacute;t a <code class="filename">naplo.txt</code> &eacute;s <code class="filename">Naplo.txt</code> nevek nem ugyanarra a f&aacute;jlra mutatnak.</p>
    </div> 
     <div class="sect1" title="A UNIX f&aacute;jlrendszer fel&eacute;p&iacute;t&eacute;se, fontos k&ouml;nyvt&aacute;rak"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e413">A UNIX f&aacute;jlrendszer fel&eacute;p&iacute;t&eacute;se, fontos k&ouml;nyvt&aacute;rak</h2></div></div></div>
			
            <p>A k&ouml;nyvt&aacute;r (<span class="emphasis"><em>directory</em></span>) is egy f&aacute;jl, amely k&ouml;nyvt&aacute;ri bemeneteket tartalmaz. Ezek adj&aacute;k meg a k&ouml;nyvt&aacute;r al&aacute; szervezett f&aacute;jlok, illetve m&aacute;s k&ouml;nyvt&aacute;rak list&aacute;j&aacute;t &eacute;s el&eacute;rhet&#337;s&eacute;g&eacute;t.</p>
            <p>A Unix f&aacute;jlrendszere hierarchikus, fa szer&#369; strukt&uacute;ra, amely els&#337; megk&ouml;zel&iacute;t&eacute;sben k&eacute;t szerkezetb&#337;l, a k&ouml;nyvt&aacute;rakb&oacute;l illetve f&aacute;jlokb&oacute;l &eacute;p&uuml;l fel (amint azt l&aacute;tni fogjuk, tulajdonk&eacute;ppen a k&ouml;nyvt&aacute;rak is f&aacute;jlok, &eacute;s a tartalmazott f&aacute;jlok t&ouml;bb t&iacute;pus&uacute;ak lehetnek). A k&ouml;nyvt&aacute;rszerkezet egy gy&ouml;k&eacute;rnek nevezett k&ouml;nyvt&aacute;rral indul amelynek a neve egy karakter, a per jel: <code class="filename">/</code> (a gy&ouml;k&eacute;r k&ouml;nyvt&aacute;r angol neve: <span class="emphasis"><em>root directory</em></span>).</p>
            <p>A gy&ouml;k&eacute;r alatt az al&aacute;bbiakat l&aacute;thatjuk:</p>

            <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                        <p>fa-szer&#369;en szervezve k&ouml;nyvt&aacute;rak, illetve f&aacute;jlok tal&aacute;lhat&oacute;ak</p>
                    </li><li class="listitem">
                        <p>ez a strukt&uacute;ra megism&eacute;tl&#337;dhet minden k&ouml;nyvt&aacute;r eset&eacute;ben</p>
                    </li><li class="listitem">
                         <p>minden k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; 2 speci&aacute;lis k&ouml;nyvt&aacute;r, a <code class="filename">.</code> &eacute;s a <code class="filename">..</code> (az els&#337; &ouml;nmag&aacute;ra, a m&aacute;sodik k&ouml;zvetlen&uuml;l a fels&#337; szintre mutat&oacute; k&ouml;nyvt&aacute;r).</p>    
                    </li></ul></div>

            

            <p>A Linux <a class="indexterm" name="d5e431"></a><span class="command"><strong>tree</strong></span> parancsa a f&aacute;jlrendszer els&#337; szintj&eacute;t &iacute;gy jelen&iacute;ti meg (valamennyi megjelen&#337; n&eacute;v k&ouml;nyvt&aacute;r, az <code class="option">-L</code> opci&oacute; a list&aacute;zott k&ouml;nyvt&aacute;r szintet adja meg):</p>
<pre class="screen">
$ tree  -L 1 /
/
|-- bin
|-- boot
|-- data
|-- dev
|-- etc
|-- home
|-- lib
|-- lost+found
|-- mediac
|-- mnt
|-- proc
|-- root
|-- sbin
|-- selinux
|-- sys
|-- tmp
|-- usr
`-- var
$ 
</pre> 
<p>Legfel&uuml;l a gy&ouml;k&eacute;r k&ouml;nyvt&aacute;r tal&aacute;lhat&oacute;,  nyilv&aacute;n ez nem tartalmaz .. mutat&oacute;t. Abban az esetben, ha m&eacute;gis haszn&aacute;ln&aacute; valaki, itt alap&eacute;rtelmezetten a <code class="filename">..</code> is a <code class="filename">/</code> -re mutat, teh&aacute;t: <code class="filename">/../bin</code> vagy   <code class="filename">/../../bin</code> az ugyanazt a <code class="filename">/bin</code>-t jel&ouml;l.</p>
    <p>A k&ouml;nyvt&aacute;rrendszer els&#337; szintj&eacute;t &uacute;gy hat&aacute;rozt&aacute;k meg, hogy jellegzetess&eacute;geik szerint csoportos&iacute;tott&aacute;k a f&aacute;jlokat, &iacute;gy ad&oacute;dtak az &aacute;ltal&aacute;nosan haszn&aacute;lt els&#337; szint&#369; k&ouml;nyvt&aacute;rnevek. &Iacute;gy a felhaszn&aacute;l&oacute; gyorsan megtal&aacute;l b&aacute;rmilyen f&aacute;jlt, mert nagy val&oacute;sz&iacute;n&#369;s&eacute;ggel tudja, melyik csoportban tal&aacute;lhat&oacute;. 
Ez a feloszt&aacute;s nem teljesen egyforma a k&uuml;l&ouml;nb&ouml;z&#337; UNIX rendszerek illetve Linux disztrib&uacute;ci&oacute;k eset&eacute;ben, de a feloszt&aacute;si elvek nagyj&aacute;b&oacute;l ugyanazok (Az al&aacute;bbi p&eacute;ld&aacute;k a Red Hat c&eacute;g Fedora disztrib&uacute;ci&oacute;j&aacute;ban tal&aacute;lhat&oacute;ak &iacute;gy).</p>

       <div class="table"><a name="d5e443"></a><p class="title"><b>3.1. t&aacute;bl&aacute;zat - A f&aacute;jlrendszer fontosabb k&ouml;nyvt&aacute;rai</b></p><div class="table-contents">
                
                <table summary="A f&aacute;jlrendszer fontosabb k&ouml;nyvt&aacute;rai" cellpadding="4" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">K&ouml;nyvt&aacute;r neve</th><th align="center">Mit tartalmaz</th></tr></thead><tbody><tr><td align="center"><code class="filename">/boot</code></td><td align="left">A rendszer ind&iacute;t&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges f&aacute;jlokat tartalmazza, itt van a kernelt tartalmaz&oacute; f&aacute;jl is.</td></tr><tr><td align="center"><code class="filename">/home</code></td><td align="left"><p>A felhaszn&aacute;l&oacute;k saj&aacute;t k&ouml;nyvt&aacute;rai, az un. "home" k&ouml;nyvt&aacute;rak vannak itt.</p><p>P&eacute;ld&aacute;ul: <code class="filename">/home/lszabo</code>  .</p> </td></tr><tr><td align="center"><code class="filename">/dev</code></td><td align="left">Az eszk&ouml;z&ouml;kre mutat&oacute; f&aacute;jlok a <code class="filename">/dev</code>  k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;ak.</td></tr><tr><td align="center"><code class="filename">/bin</code></td><td align="left">Bin&aacute;ris, futtathat&oacute; f&aacute;jlok helye. Itt vannak a parancsok.</td></tr><tr><td align="center"><code class="filename">/sbin</code></td><td align="left">Csak a superuser (root) &aacute;ltal v&eacute;grehajthat&oacute; f&aacute;jlok.</td></tr><tr><td align="center"><code class="filename">/usr</code></td><td align="left">A felhaszn&aacute;l&oacute;k &eacute;s rendszer &aacute;ltal haszn&aacute;lt fontos f&aacute;jlok. 
        A /usr alatt tal&aacute;lhat&oacute;ak p&eacute;ld&aacute;ul: <code class="filename">/usr/include</code> C header f&aacute;jlok, <code class="filename">/usr/bin</code> futtathat&oacute; f&aacute;jlok, <code class="filename">/usr/src</code> forr&aacute;s f&aacute;jlok , <code class="filename">/usr/lib</code> k&ouml;nyvt&aacute;rak.
                           </td></tr><tr><td align="center"><code class="filename">/tmp</code></td><td align="left">Mindenki &aacute;ltal &iacute;rhat&oacute; ideiglenes f&aacute;jlok helye.</td></tr><tr><td align="center"><code class="filename">/var</code></td><td align="left">Terjeszked&#337;, rendszer &aacute;ltal &iacute;rt f&aacute;jlok (pl. napl&oacute;z&oacute; f&aacute;jlok).</td></tr><tr><td align="center"><code class="filename">/proc</code></td><td align="left">Ez egy kernel &aacute;ltal l&eacute;trehozott virtu&aacute;lis f&aacute;jlrendszer amely a fut&oacute; folyamatokat &eacute;s egy&eacute;b rendszerparam&eacute;tereket &iacute;rja le.</td></tr></tbody></table>
        </div></div><br class="table-break"> 



<p>A Unix rendszerek haszn&aacute;lata  mindig felhaszn&aacute;l&oacute;i jogosults&aacute;gokhoz k&ouml;t&#337;dik. A felhaszn&aacute;l&oacute;k egy bejelentkez&eacute;si nevet kapnak, a bejelentkez&eacute;s a rendszerbe &aacute;ltal&aacute;ban jelsz&oacute;val t&ouml;rt&eacute;nik. Amikor a rendszerrel dolgozunk,  az al&aacute;bbi  felhaszn&aacute;l&oacute;hoz k&ouml;t&#337;d&#337; helyek adottak a f&aacute;jlrendszerben:</p>
<p>
         </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                            <p>A felhaszn&aacute;l&oacute; saj&aacute;t, vagy home k&ouml;nyvt&aacute;ra, pl: <code class="filename">/home/lszabo</code> .</p>
                    </li><li class="listitem">
                            <p>A munkak&ouml;nyvt&aacute;r (<span class="emphasis"><em>working directory</em></span>): minden egyes fut&oacute; programnak (vagy folyamatnak) van egy munkak&ouml;nyvt&aacute;ra. Implicit ebb&#337;l olvas f&aacute;jlokat, illetve ebbe &iacute;r. Ehhez a k&ouml;nyvt&aacute;rhoz viszony&iacute;tjuk a relat&iacute;v el&eacute;r&eacute;si utakat (l&aacute;sd al&aacute;bb). A munkak&ouml;nyt&aacute;r v&aacute;lt&aacute;sa a <span class="command"><strong>cd</strong></span> paranccsal t&ouml;rt&eacute;nik.</p>
                    </li><li class="listitem">
                            <p>a <code class="filename">.</code> &eacute;s <code class="filename">..</code> k&ouml;nyvt&aacute;rak amelyek az aktu&aacute;lis &eacute;s a f&ouml;l&ouml;tte lev&#337; k&ouml;nyvt&aacute;rat c&iacute;mzik</p>    
                    </li></ul></div><p>
</p>
<p>A  programoz&aacute;sn&aacute;l a f&aacute;jlneveket  kezelni a <code class="filename">basename</code> (egy abszolut el&eacute;r&eacute;si &uacute;t f&aacute;jlnev&eacute;t &iacute;rja ki) &eacute;s a <code class="filename">dirname</code> (egy abszolut el&eacute;r&eacute;si &uacute;t k&ouml;nyvt&aacute;rnev&eacute;t &iacute;rja ki) seg&iacute;t:</p>
<pre class="screen">
$ basename /usr/include/readline/keymaps.h
keymaps.h
$ dirname /usr/include/readline/keymaps.h 
/usr/include/readline        
</pre><p>A f&aacute;jl elnevez&eacute;si konvenci&oacute;k a UNIX alatt nem k&ouml;telez&#337;ek, b&aacute;rmilyen nevet &eacute;s kiterjeszt&eacute;st adhatunk a k&uuml;l&ouml;nb&ouml;z&#337; tartalm&uacute; f&aacute;jloknak. Pl. b&aacute;rmilyen nev&#369; vagy v&eacute;gz&#337;d&eacute;s&#369; f&aacute;jl lehet futtathat&oacute;. Elnevez&eacute;si konvenci&oacute; azonban l&eacute;tezik, &eacute;s t&ouml;bbnyire haszn&aacute;ljuk is, hogy k&uuml;l&ouml;nbs&eacute;get tegy&uuml;nk a f&aacute;jlok k&ouml;zt (gyakran haszn&aacute;lt v&eacute;gz&#337;d&eacute;sek: .c, .o, .h, .txt, .gz, .ps, .tgz, .tar, .sh, .tex, stb.).</p>
<p>A UNIX k&ouml;nyvt&aacute;rakat l&eacute;trehoz&oacute; parancsa a <a class="link" href="#cmd_mkdir" title="A mkdir parancs"><span class="command"><strong>mkdir</strong></span></a>, k&ouml;nyvt&aacute;rat t&ouml;rl&#337; parancsa a <a class="link" href="#cmd_rmdir" title="Az rmdir parancs"><span class="command"><strong>rmdir</strong></span></a>. A k&ouml;nyvt&aacute;r fa strukt&uacute;r&aacute;j&aacute;ban a munkak&ouml;nyvt&aacute;rat a cd paranccsal lehet v&aacute;ltani (r&ouml;vid bemutat&aacute;sukat l&aacute;sd a fejezet v&eacute;g&eacute;n).Egy egyszer&#369; k&ouml;nyvt&aacute;rstrukt&uacute;r&aacute;t a <span class="command"><strong>tree</strong></span> paranccsal &iacute;rhatunk ki.</p>
    </div>    
     <div class="sect1" title="K&ouml;z&ouml;ns&eacute;ges f&aacute;jlok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e522">K&ouml;z&ouml;ns&eacute;ges f&aacute;jlok</h2></div></div></div>
			
            <p>A k&ouml;z&ouml;ns&eacute;ges f&aacute;jlok t&ouml;bbnyire m&aacute;gneses lemezeken vagy m&aacute;s adathordoz&oacute;kon tal&aacute;lhat&oacute;ak. Megk&uuml;l&ouml;nb&ouml;ztet&uuml;nk sz&ouml;veges ("szemmel" is olvashat&oacute;, <span class="emphasis"><em>text</em></span>) illetve bin&aacute;ris f&aacute;jlokat.</p>
            <p>Inform&aacute;ci&oacute;t a f&aacute;jlokr&oacute;l az <a class="link" href="#cmd_ls" title="Az ls parancs"><span class="command"><strong>ls</strong></span></a> (list&aacute;z&aacute;s), <span class="command"><strong>file</strong></span> (t&iacute;pus ki&iacute;rat&aacute;s) &eacute;s <span class="command"><strong>stat</strong></span> (f&aacute;jl rendszer adatai) nyer&uuml;nk.</p>
			<p>A sz&ouml;veges f&aacute;jlok igen fontosak a Unix rendszerek alatt, a legt&ouml;bb program sz&ouml;veges form&aacute;ban tartja konfigur&aacute;ci&oacute;s adatait, valamennyi Unix parancs sz&ouml;vegeket &iacute;r ki a kimenetre &eacute;s sz&ouml;vegeket olvas a bemeneten. A sz&ouml;veges f&aacute;jlok a haszn&aacute;lt karakterk&eacute;szlet olvashat&oacute; karaktereib&#337;l &eacute;p&uuml;lnek fel. A karakterek sz&ouml;vegsorokat alkotnak melyeknek v&eacute;g&eacute;n egy &uacute;jsor karakter tal&aacute;lhat&oacute; (ASCII k&oacute;dja 10).</p>
            <p>A f&aacute;jlok lehetnek 0 byte hossz&uacute;ak (&uuml;res file) is.  Maxim&aacute;lis hosszukat egy el&#337;jeles eg&eacute;sz sz&aacute;mmal t&aacute;rolt f&aacute;jlhossz korl&aacute;tozza. R&eacute;gebbi rendszereken ez 32 bites el&#337;jeles sz&aacute;m, &iacute;gy a maxim&aacute;lis hossz kb. 2 GB. Modern rendszerek k&eacute;pesek a f&aacute;jlhosszat 64 bites sz&aacute;mban t&aacute;rolni, ez elm&eacute;letileg 8 milli&aacute;rd Gigabyte-os f&aacute;jlokat enged meg.</p>
    </div>    
     <div class="sect1" title="A hozz&aacute;f&eacute;r&eacute;si jogok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e533">A hozz&aacute;f&eacute;r&eacute;si jogok<a class="indexterm" name="d5e535"></a></h2></div></div></div>
			
            <p>Minden felhaszn&aacute;l&oacute;nak (<span class="emphasis"><em>user</em></span>)  bejelentkez&eacute;si neve van (<span class="emphasis"><em>login name</em></span>) &eacute;s egy csoporthoz (<span class="emphasis"><em>group</em></span>) tartozik. A felhaszn&aacute;l&oacute; jelsz&oacute;val jelentkezik be. A felhaszn&aacute;l&oacute;k illetve csoportok neveit a rendszer a nyilv&aacute;nos password f&aacute;jlban, illetve a  csoportokat tartalmaz&oacute; f&aacute;jlokban tartja (<code class="filename">/etc/passwd</code>, <code class="filename">/etc/group</code>).</p>
			<p>Modern rendszerekre val&oacute; bejelentkez&eacute;s t&ouml;rt&eacute;nhet valamilyen h&aacute;l&oacute;zaton kereszt&uuml;li azonos&iacute;t&aacute;ssal, amikor a felhaszn&aacute;l&oacute;t azonos&iacute;t&oacute; adatokat nem az a g&eacute;p t&aacute;rolja amelyre bejelentkez&uuml;nk.</p>
            <p>A rendszerben egyetlen felhaszn&aacute;l&oacute;nak van jogosults&aacute;ga b&aacute;rmilyen m&#369;veletet elv&eacute;gezni, ezt a felhaszn&aacute;l&oacute;t a Unix rendszerek <span class="strong"><strong>root</strong></span>-nak nevezik (&#337; a rendszergazda vagy <span class="emphasis"><em>superuser</em></span>). Az t&ouml;bbi felhaszn&aacute;l&oacute; jogai korl&aacute;tozottak, &eacute;s &aacute;ltal&aacute;ban a tulajdon&aacute;ban &aacute;ll&oacute; objektumok (pl. f&aacute;jlok) vonatkoz&aacute;s&aacute;ban korl&aacute;tlanok (ezekkel b&aacute;rmit tehet), a m&aacute;s felhaszn&aacute;l&oacute; tulajdon&aacute;ban &aacute;ll&oacute; objektumok vonatkoz&aacute;s&aacute;ban korl&aacute;tozottak.</p>
            <p>A felhaszn&aacute;l&oacute;kat a rendszer a felhaszn&aacute;l&oacute; neve &eacute;s jelsz&oacute; szerint azonos&iacute;tja, a rendszerben viszont eg&eacute;sz sz&aacute;mokkal tartja nyilv&aacute;n (<code class="literal">user id</code> vagy <code class="literal">uid</code>, <code class="literal">group id</code> vagy <code class="literal">gid</code>). A bejelentkezett felhaszn&aacute;l&oacute; az <span class="command"><strong>id</strong></span> paranccsal list&aacute;zhatja ezeket ki (illetve megtal&aacute;lja &#337;ket a <code class="filename">passwd</code> f&aacute;jlban):</p>
            <pre class="screen">
$ id 
uid=500(lszabo) gid=500(lszabo) groups=500(lszabo) 
$ 
            </pre>
            <p>A f&aacute;jlokat a felhaszn&aacute;l&oacute; &aacute;ltal futtatott programok hozz&aacute;k l&eacute;tre. A Unix alap&uacute; rendszerekben k&eacute;tf&eacute;le tulajdonjog l&eacute;tezik a f&aacute;jlokon: felhaszn&aacute;l&oacute;i (<span class="emphasis"><em>user</em></span>) &eacute;s csoport (<span class="emphasis"><em>group</em></span>). &Iacute;gy minden f&aacute;jl valamelyik felhaszn&aacute;l&oacute; illetve valamelyik csoport tulajdona. L&eacute;trehoz&aacute;sn&aacute;l egy &uacute;j f&aacute;jl mindig a felhaszn&aacute;l&oacute; &eacute;s annak csoportja tulajdonak&eacute;nt j&ouml;n l&eacute;tre, egy implicit el&eacute;r&eacute;si joggal (l&aacute;sd al&aacute;bb). Ezek a jogosults&aacute;gok a <a class="link" href="#cmd_chmod" title="A chmod parancs"><span class="command"><strong>chmod</strong></span></a> paranccsal v&aacute;ltoztathat&oacute;ak, a f&aacute;jlhoz rendelt (tulajdonos) felhaszn&aacute;l&oacute; &eacute;s csoport pedig a <span class="command"><strong>chown</strong></span> &eacute;s <span class="command"><strong>chgrp</strong></span> parancsokkal.</p>
            <p>A f&aacute;jlok nev&eacute;nek &eacute;s tulajdons&aacute;gainak list&aacute;z&aacute;s&aacute;ra az <a class="link" href="#cmd_ls" title="Az ls parancs"><span class="command"><strong>ls</strong></span></a> parancsot haszn&aacute;ljuk.</p>
            <p>A <span class="command"><strong>chmod</strong></span> parancs n&eacute;gy csoportra osztja a felhaszn&aacute;l&oacute;kat az el&eacute;r&eacute;si jogok meg&aacute;llap&iacute;t&aacute;sa kapcs&aacute;n (a <span class="command"><strong>chmod</strong></span> parancs egy-egy bet&#369;t haszn&aacute;l a csoportok megjel&ouml;l&eacute;s&eacute;re):</p>
            <p>

     </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                            <p>a felhaszn&aacute;l&oacute; (<span class="emphasis"><em>user</em></span>) jogai (a <span class="command"><strong>chmod</strong></span> parancsban szimb&oacute;luma: <code class="literal">u</code>) ,</p>
                    </li><li class="listitem">
                            <p>a csoport (<span class="emphasis"><em>group</em></span>) jogai, szimb&oacute;luma: <code class="literal">g</code> ,</p>
                    </li><li class="listitem">
                            <p>a t&ouml;bbiek (<span class="emphasis"><em>others</em></span>) jogai: <code class="literal">o</code> (azok akik a tulajdonos szempontj&aacute;b&oacute;l sem a felhaszn&aacute;l&oacute;t, sem annak csoportj&aacute;t nem jelentik) ,</p>    
                    </li><li class="listitem">
        <p>mindenki jogai (<span class="emphasis"><em>all</em></span>), szimb&oacute;lum: <code class="literal">a</code> .</p></li></ul></div><p>
            
            </p>
    </div>    
     <div class="sect1" title="Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;z&ouml;ns&eacute;ges f&aacute;jlokon"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e587">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;z&ouml;ns&eacute;ges f&aacute;jlokon</h2></div></div></div>
			
			<p>A <a class="indexterm" name="d5e590"></a>jogokat egy 3 jegy&#369; okt&aacute;l sz&aacute;mmal &aacute;br&aacute;zolja a rendszer, mert 3 jog &aacute;ll&iacute;that&oacute; be minden f&aacute;jlon 3 kateg&oacute;ria sz&aacute;m&aacute;ra (user, group, others). Ezek a jogok, valamint bet&#369;jel&uuml;k:</p>

     <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                            <p>olvas&aacute;s:<code class="literal"> r</code> </p>
                    </li><li class="listitem">
                            <p>&iacute;r&aacute;s:<code class="literal"> w</code> </p>
                    </li><li class="listitem">
                            <p>v&eacute;grehajt&aacute;s:<code class="literal"> x</code> </p>    
                    </li></ul></div>
			<p>Teh&aacute;t egy f&aacute;jlon be&aacute;ll&iacute;tott, tulajdonos-csoport-m&aacute;sok sz&aacute;m&aacute;ra be&aacute;ll&iacute;tott jog &iacute;gy n&eacute;z ki, ha ezeket a szimb&oacute;lumokat egym&aacute;s mell&eacute; &iacute;rjuk:</p>
            <p><span class="strong"><strong>rwxr--r--</strong></span></p>
            <p>A h&aacute;rom okt&aacute;l sz&aacute;m <code class="literal">ugo</code>, mindegyiknek 3 bitje lehet: <code class="literal">rwx</code>, amennyiben egy bit nincs be&aacute;ll&iacute;tva, helyette k&ouml;t&#337;jelet &iacute;r ki p&eacute;ld&aacute;ul az <span class="command"><strong>ls</strong></span> parancs. A fenti p&eacute;lda jelent&eacute;se: a tulajdonos &iacute;rhatja, olvashatja, v&eacute;grehajthatja m&iacute;g a csoport tagjai illetve m&aacute;sok csak olvashatj&aacute;k (okt&aacute;lban a kombin&aacute;ci&oacute;t &iacute;gy fejezz&uuml;k ki: 744). Az al&aacute;bbi jog kombin&aacute;ci&oacute; eset&eacute;ben a tulajdonos b&aacute;rmit tehet az &aacute;llom&aacute;nnyal, a t&ouml;bbiek olvashatj&aacute;k &eacute;s futtathatj&aacute;k de nem m&oacute;dos&iacute;thatj&aacute;k (okt&aacute;l 755):
            </p>
            <p><span class="strong"><strong>rwxr-xr-x</strong></span></p>
    </div>    
     <div class="sect1" title="Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;nyvt&aacute;rakon"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e611">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;nyvt&aacute;rakon</h2></div></div></div>
			
            <p>A k&ouml;nyvt&aacute;rak tartalmazz&aacute;k a f&aacute;jlok neveit: a Unix rendszerek fizikai f&aacute;jlszervez&eacute;s&eacute;ben a f&aacute;jl nevek nincsenek hozz&aacute;k&ouml;tve a fizikai t&aacute;rol&aacute;s le&iacute;r&aacute;s&aacute;t tartalmaz&oacute; strukt&uacute;r&aacute;khoz. Ezeket a strukt&uacute;r&aacute;kat &aacute;ltal&aacute;ban egy azonos&iacute;t&oacute; eg&eacute;sz sz&aacute;mon kereszt&uuml;l &eacute;rj&uuml;k el, a strkt&uacute;ra neve <span class="emphasis"><em>i-node</em></span> (a n&eacute;vnek t&ouml;rt&eacute;nelmi gy&ouml;kerei vannak, az els&#337; UNIX tervez&eacute;s&eacute;hez k&ouml;t&#337;dik). A k&ouml;nyvt&aacute;rak val&oacute;s&iacute;tj&aacute;k meg a n&eacute;v &eacute;s i-node-ok k&ouml;zti kapcsolatot, &iacute;gy ezek list&aacute;kat t&aacute;rolnak, melyben a n&eacute;v &eacute;s i-node egym&aacute;shoz rendel&eacute;sek tal&aacute;lhat&oacute;ak.</p>
            <p>A k&ouml;nyvt&aacute;rak eset&eacute;ben az <code class="literal">r</code> jog jelent&eacute;se a k&ouml;nyvt&aacute;r f&aacute;jl "olvas&aacute;sa": ez gyakorlatilag azt jelenti, hogy a benne lev&#337; n&eacute;v lista leolvashat&oacute; &eacute;s list&aacute;zhat&oacute; (teh&aacute;t nem a k&ouml;nyvt&aacute;r tartalma, hanem a k&ouml;nyvt&aacute;r f&aacute;jl tartalm&aacute;ra vonatkozik az olvashat&oacute;s&aacute;g).</p>
            <p>A <code class="literal">w</code> jog a k&ouml;nyvt&aacute;r f&aacute;jl "&iacute;rhat&oacute;s&aacute;g&aacute;t" jelenti: teh&aacute;t a k&ouml;nyvt&aacute;rban l&eacute;trehozhat&oacute; &uacute;j f&aacute;jl, t&ouml;r&ouml;lhet&#337;ek a meglev&#337;ek.</p>
            <p>Az <code class="literal">x</code> v&eacute;grehajt&aacute;si jognak megfelel&#337; bit viszont itt eg&eacute;szen m&aacute;st jelent: a k&ouml;nyvt&aacute;r "&aacute;tj&aacute;rhat&oacute;", azaz amennyiben egy felhaszn&aacute;l&oacute; a f&aacute;jlrendszer fastrukt&uacute;r&aacute;j&aacute;ban keres, keresheti az illet&#337; k&ouml;nyvt&aacute;r alatti f&aacute;jlokat, illetve k&ouml;nyvt&aacute;rakat, &eacute;s leolvashatja (&iacute;rhatja) azokat amennyiben joga van r&aacute;. Ugyanakkor <span class="command"><strong>cd</strong></span> paranccsal bel&eacute;phet az ilyen k&ouml;nyvt&aacute;rakba, &eacute;s haladhat lefel&eacute; a k&ouml;nyvt&aacute;rstrukt&uacute;r&aacute;n.</p>
<p>Az <code class="literal">x</code> jog megvon&aacute;sa mindezen jogok elveszt&eacute;s&eacute;t jelenti.</p>
            <p>A root felhaszn&aacute;l&oacute; mindent leolvashat illetve &iacute;rhat a rendszerben, &eacute;s azokat a f&aacute;jlokat amelyeken legal&aacute;bb egy <code class="literal">x</code> bit be van &aacute;ll&iacute;tva (b&aacute;rkinek) v&eacute;grehajthatja.</p>
            <p>A hozz&aacute;f&eacute;r&eacute;si jogok &aacute;ll&iacute;t&aacute;sa a <span class="command"><strong>chmod</strong></span>, a tulajdonos be&aacute;ll&iacute;t&aacute;sa a <span class="command"><strong>chown</strong></span> parancsokkal t&ouml;rt&eacute;nik, list&aacute;z&aacute;suk az <span class="command"><strong>ls</strong></span> parancs <code class="option">-l</code> opci&oacute;j&aacute;val. A chown parancs v&eacute;grehajt&aacute;sa  k&ouml;z&ouml;ns&eacute;ges felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra nem megengedett a setuid mechanizmus vesz&eacute;lyei miatt (l&aacute;sd al&aacute;bb).</p>
            <p>A <a class="link" href="#cmd_chmod" title="A chmod parancs"><span class="command"><strong>chmod</strong></span></a> bemutat&aacute;s&aacute;t l&aacute;sd a <a class="link" href="#cmd_chmod" title="A chmod parancs">fejezet v&eacute;g&eacute;n</a>, itt n&eacute;h&aacute;ny p&eacute;ld&aacute;t adunk a haszn&aacute;lat&aacute;ra.</p>
            <p>A <code class="filename">1.txt</code> f&aacute;jlra az <code class="literal">rwxr--r--</code> jogot az al&aacute;bbi parancs seg&iacute;ts&eacute;g&eacute;vel &aacute;ll&iacute;tjuk:</p>
<pre class="screen">
$ chmod 744 1.txt                    
$ 
</pre>
            <p>az okt&aacute;l sz&aacute;mok seg&iacute;ts&eacute;g&eacute;vel. Ha ezt m&oacute;dos&iacute;tani akarjuk a <code class="literal">rwxr-xr--</code> jogra (a csoportomnak v&eacute;grehajt&aacute;si jogot adok) akkor az al&aacute;bbit tehetj&uuml;k, ha szimb&oacute;lumokkal akarjuk megadni a jogokat a <span class="command"><strong>chown</strong></span> parancsnak:</p>
<pre class="screen">
$ chmod g+x 1.txt                   
$ 
</pre>
            <p>Az implicit jogokat amelyeket a rendszer akkor haszn&aacute;l ha egy bizonyos felhaszn&aacute;l&oacute; egy &uacute;j f&aacute;jlt  hoz l&eacute;tre az <span class="command"><strong><a class="link" href="#cmd_umask" title="Az umask &eacute;s az implicit jogok">umask</a></strong></span> paranccsal &aacute;ll&iacute;tjuk be (l&aacute;sd al&aacute;bb).</p>
            <p>Az eml&iacute;tett jogokon k&iacute;v&uuml;l egy negyedik okt&aacute;l sz&aacute;m speci&aacute;lis inform&aacute;ci&oacute;kat tartalmaz a jogosults&aacute;gi bitek k&ouml;zt:</p>

       <div class="informaltable">
                <table cellpadding="4" border="1"><colgroup><col width="12%" class="col1"><col width="25%" class="col2"><col width="63%" class="col3"></colgroup><thead><tr><th align="center">Jog bit neve</th><th align="center">Milyen f&aacute;jl?</th><th align="center">Jelent&eacute;se</th></tr></thead><tbody><tr><td align="center">Sticky bit</td><td align="center">Futtathat&oacute; f&aacute;jl vagy k&ouml;nyvt&aacute;r</td><td align="left">Ha f&aacute;jl: &Aacute;lland&oacute;an a mem&oacute;ri&aacute;ban marad (ha t&ouml;bb felhaszn&aacute;l&oacute; futtatja ugyanazt a programot). A r&eacute;gi UNIX rendszerek haszn&aacute;lt&aacute;k, ma m&aacute;r nincs sz&uuml;ks&eacute;g erre pl. Linuxon. Amennyiben k&ouml;nyvt&aacute;rra van megadva, ha t&ouml;bben &iacute;rnak ugyanabba a k&ouml;nyvt&aacute;rba, a f&aacute;jlt csak a tulajdonos m&oacute;dos&iacute;thatja pl. ilyen a <code class="filename">/tmp</code> be&aacute;ll&iacute;t&aacute;sa. Okt&aacute;l &eacute;rt&eacute;ke : 1
jele az <span class="command"><strong>ls</strong></span>-ben: t, m&aacute;sok jogait jelz&#337; x helyett &aacute;ll az <span class="command"><strong>ls</strong></span> list&aacute;j&aacute;ban.</td></tr><tr><td align="center">Set Group Id bit</td><td align="center">f&aacute;jl vagy k&ouml;nyvt&aacute;r</td><td align="left">Ha a Set Group Id bit k&ouml;nyvt&aacute;ron van be&aacute;ll&iacute;tva, akkor az alatta l&eacute;trehozott k&ouml;nyvt&aacute;rak a fels&#337; szint&#369; k&ouml;nyvt&aacute;r  tulajdonos&aacute;&eacute;  lesznek, &eacute;s nem a l&eacute;trehoz&oacute;&eacute;. F&aacute;jlon ugyanaz &eacute;rv&eacute;nyes mint al&aacute;bb a Set User Id bit-re. Okt&aacute;l &eacute;rt&eacute;ke: 2, jele: s vagy S (s = S+x) az <span class="command"><strong>ls</strong></span> list&aacute;j&aacute;ban.</td></tr><tr><td align="center">Set User Id Bit</td><td align="center">Futtathat&oacute; f&aacute;jl</td><td align="left">Ha egy programon be van &aacute;ll&iacute;tva valamelyik a bitek k&ouml;z&uuml;l, akkor b&aacute;rki ind&iacute;tja el a programot, a program a tulajdonos, &eacute;s nem a futtat&oacute; jogosults&aacute;g&aacute;val fog futni. Pl.: a <span class="command"><strong>passwd</strong></span> parancs tulajdonosa root, &iacute;gy root-k&eacute;nt fut, b&aacute;rki ind&iacute;tja el.</td></tr></tbody></table>
        </div> 

        <p>Okt&aacute;lban a <span class="command"><strong>chmod</strong></span> parancs egy negyedik sz&aacute;mjegyet haszn&aacute;l a fenti bitek be&aacute;ll&iacute;t&aacute;sakor, ennek &eacute;rt&eacute;ke: 4: setuid, 2: setgid, 1:sticky bit. P&eacute;ld&aacute;ul a <code class="filename">/tmp</code> k&ouml;nyvt&aacute;r jogainak be&aacute;ll&iacute;t&aacute;sakor az al&aacute;bbi parancsot kellene kiadni ha bet&#369;kombin&aacute;ci&oacute;t haszn&aacute;lunk:</p>
<pre class="screen">
$ chmod a+rwx /tmp
$ chmod +t /tmp                
$
</pre>
<p>&eacute;s az al&aacute;bbit ha okt&aacute;l sz&aacute;mot:</p>
<pre class="screen">
$ chmod  1777  /tmp        
$
</pre>
<p>Ezek ut&aacute;n &eacute;rthet&#337;ek az <span class="command"><strong><a class="link" href="#cmd_ls" title="Az ls parancs">ls</a></strong></span> parancs &aacute;ltal kiadott list&aacute;k. Az <code class="literal">rwx</code> jogok kijelz&eacute;se el&#337;tt van meg egy karakter, amely a file t&iacute;pus&aacute;t jelzi. Regul&aacute;ris file eset&eacute;ben egy k&ouml;t&#337;jel &aacute;ll ott, m&aacute;s speci&aacute;lis esetekben az al&aacute;bbi karakterek: d - k&ouml;nyvt&aacute;r,  l - szimbolikus link, b - blokk eszk&ouml;z, c - karakter eszk&ouml;z (l&aacute;sd <a class="link" href="#filetypes" title="F&aacute;jl t&iacute;pusok, eszk&ouml;z&ouml;k">eszk&ouml;z&ouml;k</a>).</p>
<pre class="screen">
$ ls -l
total 4
drwx------ 2 lszabo lszabo 4096 Oct  3 19:36 piros        
-rw-rw-r-- 1 lszabo lszabo    0 Oct  3 19:35 1.txt
lrwxrwxrwx 1 lszabo lszabo    5 Oct  3 19:36 2.txt -&gt; 1.txt
$ 
</pre>
<p>A GNU <span class="command"><strong>ls</strong></span> eset&eacute;ben a k&uuml;l&ouml;nb&ouml;z&#337; t&iacute;pus&uacute; f&aacute;jlokat m&aacute;s-m&aacute;s sz&iacute;nnel sz&iacute;nezi az <span class="command"><strong>ls</strong></span> ha interakt&iacute;v m&oacute;dban haszn&aacute;ljuk.</p>
    </div>    

    <div class="sect1" title="Az umask &eacute;s az implicit jogok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_umask">Az umask &eacute;s az implicit jogok</h2></div></div></div>
            <p>Az &uacute;jonnan l&eacute;trehozott f&aacute;jlok sz&aacute;m&aacute;ra a h&eacute;j kap a rendszert&#337;l egy be&aacute;ll&iacute;t&aacute;st, ami meghat&aacute;rozza milyen jogosults&aacute;gokkal j&ouml;n l&eacute;tre egy &uacute;j f&aacute;jl. A be&aacute;ll&iacute;t&aacute;st egy maszk tartalmazza, amelyet <span class="emphasis"><em>umask</em></span>-nak neveznek, &eacute;s inform&aacute;ci&oacute;k&eacute;nt azt tartalmazza, milyen jogosults&aacute;got ne &aacute;ll&iacute;tson be a shell amikor l&eacute;trehoz egy &uacute;j f&aacute;jlt. A maszk be&aacute;ll&iacute;t&aacute;sa felt&eacute;telezi, hogy a v&eacute;grehajt&aacute;si jogot am&uacute;gy sem kell implicit be&aacute;ll&iacute;tani (ezt mindig tudatosan &aacute;ll&iacute;tja be egy program ha sz&uuml;ks&eacute;ges), a t&ouml;bbi jogra pedig egy 3 okt&aacute;l sz&aacute;mb&oacute;l &aacute;ll&oacute; maszkot ad meg. Ennek eredeti &eacute;rt&eacute;ke 0002 vagy 0022 (a sz&aacute;m 4 jegy&#369;, az <code class="literal">rwx</code> biteken k&iacute;v&uuml;l a kieg&eacute;sz&iacute;t&#337; biteket is tartalmazza). A 0002 jelent&eacute;se a l&eacute;trehozand&oacute; f&aacute;jl <code class="literal">ugo</code> csoportjainak <code class="literal">rwx</code> bitjeire vonatkozik, &eacute;s az egyetlen be&aacute;ll&iacute;tott bit azt jelenti, hogy egy &uacute;jonnan l&eacute;trehozott f&aacute;jl nem lehet m&aacute;sok &aacute;ltal &iacute;rhat&oacute; (a 0022 eset&eacute;ben a csoport &aacute;ltal sem).</p>
            <p>Az implicit jogokat egy &uacute;j f&aacute;jl l&eacute;trehoz&aacute;sakor az <span class="command"><strong>umask</strong></span> paranccsal &aacute;ll&iacute;thatjuk be. A parancs egy argumentumot fogad el, amivel &aacute;t&aacute;ll&iacute;thatjuk a maszkot. P&eacute;ld&aacute;ul az al&aacute;bbi parancsok kiad&aacute;sa ut&aacute;n:</p>
<pre class="screen">
$ umask 0002
$ touch test.txt
$ ls -l test.txt
-rw-rw-r-- 1 lszabo lszabo 0 Mar  3 15:28 test.txt
$ umask 0022
$ touch test1.txt
$ ls -l test1.txt
-rw-r--r-- 1 lszabo lszabo 0 Mar  3 15:28 test1.txt 
</pre>            
<p>az &uacute;jonnan l&eacute;trehozott <code class="filename">test1.txt</code> f&aacute;jl  sem m&aacute;sok, sem a csoport &aacute;ltal nem lesz  &iacute;rhat&oacute; &#8211; az el&#337;z&#337; <code class="filename">test.txt</code> pedig &iacute;rhat&oacute; a csoport &aacute;ltal.</p>
    </div>
    <div class="sect1" title="A f&aacute;jlok id&#337;b&eacute;lyegei"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e703">A f&aacute;jlok id&#337;b&eacute;lyegei</h2></div></div></div>
            <p>Minden f&aacute;jl  3 id&#337;b&eacute;lyeget tartalmaz, ezek a f&aacute;jlt le&iacute;r&oacute; adatstrukt&uacute;r&aacute;ban, az i-node-ban vannak t&aacute;rolva.</p>

     <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                            <p>az utols&oacute; hozz&aacute;f&eacute;r&eacute;s ideje: atime (<span class="emphasis"><em>access time</em></span>), ezt <span class="command"><strong>ls -ltu</strong></span> mutatja</p>
                    </li><li class="listitem">
                            <p>az utols&oacute; m&oacute;dos&iacute;t&aacute;s ideje:  mtime (<span class="emphasis"><em>modification time</em></span>), ezt <span class="command"><strong>ls -lt</strong></span>  mutatja</p>
                    </li><li class="listitem">
                            <p>az utols&oacute; &aacute;llapotv&aacute;ltoz&aacute;s ideje (tk. az i-node-ban t&aacute;rolt tulajdons&aacute;gok v&aacute;ltoz&aacute;sa, jogok, tulajdonos, linkek sz&aacute;ma): ctime (<span class="emphasis"><em>status change time</em></span>), ezt <span class="command"><strong>ls -lct </strong></span>   mutatja</p>    
                    </li></ul></div>
    <p>A fenti <span class="command"><strong>ls</strong></span> parancsok, amennyiben a  <code class="option">-t</code> kapcsol&oacute; n&eacute;lk&uuml;l haszn&aacute;ljuk &#337;ket kijelzik a megfelel&#337; id&#337;b&eacute;lyeget &eacute;s n&eacute;v szerint rendeznek. A  <code class="option">-t</code> kapcsol&oacute;val a megfelel&#337; id&#337;b&eacute;lyeg szerint lesznek rendezve</p>
<pre class="screen">
$ ls -lt
total 16
-rwxrwxr-x 1 lszabo lszabo 4847 Feb  7 16:34 a.out
-rw-rw-r-- 1 lszabo lszabo  198 Feb  7 10:43 echoarg.c
-rw-rw-r-- 1 lszabo lszabo  232 Feb  7 10:43 echo.c
$ ls -ltr
total 16
-rw-rw-r-- 1 lszabo lszabo  232 Feb  7 10:43 echo.c
-rw-rw-r-- 1 lszabo lszabo  198 Feb  7 10:43 echoarg.c
-rwxrwxr-x 1 lszabo lszabo 4847 Feb  7 16:34 a.out
$ 
</pre>
<p>Az id&#337;b&eacute;lyegek egy eg&eacute;sz sz&aacute;mot tartalmaznak a f&aacute;jlt le&iacute;r&oacute; adatstrukt&uacute;r&aacute;ban, amelynek t&iacute;pusa UNIX id&#337;b&eacute;lyeg (UNIX timestamp). Ez az 1970 janu&aacute;r 1 &eacute;jf&eacute;l &oacute;ta eltelt szekundumok sz&aacute;m&aacute;t jelenti.</p>
    </div>

     <div class="sect1" title="F&aacute;jl t&iacute;pusok, eszk&ouml;z&ouml;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="filetypes">F&aacute;jl t&iacute;pusok, eszk&ouml;z&ouml;k </h2></div></div></div>
			
			<p>Mivel a legt&ouml;bb program bemenetet olvas &eacute;s kimenetre &iacute;r, ezek pedig nem felt&eacute;tlen&uuml;l igazi f&aacute;jlok, hanem sokszor k&uuml;l&ouml;nb&ouml;z&#337; bemeneti eszk&ouml;z&ouml;k, ez&eacute;rt ezeket illetve m&aacute;s speci&aacute;lis adatot is a rendszer f&aacute;jlk&eacute;nt kezel. &Iacute;gy pl. a k&ouml;nyvt&aacute;rakat is f&aacute;jloknak tekinti. A rendszer az al&aacute;bbi f&aacute;jlt&iacute;pusokat k&uuml;l&ouml;n&iacute;ti el:</p>
            
     <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                        <p>k&ouml;z&ouml;ns&eacute;ges f&aacute;jl  (regular file)</p>
                    </li><li class="listitem">
                        <p>k&ouml;nyvt&aacute;r  (directory)</p>
                    </li><li class="listitem"><p>eszk&ouml;z file (special device file), k&eacute;tf&eacute;le van: karakter &eacute;s blokk eszk&ouml;z</p>    
                    </li><li class="listitem">
                         <p>hivatkoz&aacute;sok vagy linkek</p>    
                 </li><li class="listitem">
                         <p>socket-ek - a h&aacute;l&oacute;zati kapcsolatokat oldj&aacute;k meg </p>    
                 </li></ul></div>

<p>Megjegyz&eacute;s: a lista azokat a t&iacute;pusokat tartalmazza, amelyekkel a leggyakrabban tal&aacute;lkozunk, a k&uuml;l&ouml;nb&ouml;z&#337; Unix v&aacute;ltozatokon m&aacute;s t&iacute;pusok is vannak, mint a <span class="emphasis"><em>pipe</em></span> vagy <span class="emphasis"><em>door</em></span>.</p>

            <p>Az eszk&ouml;zilleszt&eacute;st csatlakoztat&oacute; f&aacute;jlok, a <code class="filename">/dev</code> k&ouml;nyvt&aacute;rban vannak. Jelleg&uuml;ket tekintve h&aacute;romf&eacute;le eszk&ouml;z van: blokk eszk&ouml;z (pl. merevlemez part&iacute;ci&oacute;), karakter eszk&ouml;z (pl. termin&aacute;l) illetve pseudo eszk&ouml;z&ouml;k (ilyen pl. a <code class="filename">/dev/null</code>  vagy a <code class="filename">/dev/zero</code>).</p>
            <p>Linux rendszerekn&eacute;l itt tal&aacute;lhat&oacute;ak p&eacute;ld&aacute;ul a merevlemezekre mutat&oacute; eszk&ouml;zf&aacute;jlok, pl. <code class="filename">/dev/hda1</code>  az els&#337; lemez els&#337; part&iacute;ci&oacute;ja, <code class="filename">/dev/hda2</code>  az els&#337; lemez m&aacute;sodik part&iacute;ci&oacute;ja, <code class="filename">/dev/sda1</code> az els&#337; SCSI vagy soros IDE lemez els&#337; part&iacute;ci&oacute;ja.</p>
            <p>Ezekkel a speci&aacute;lis f&aacute;jlokkal &aacute;ltal&aacute;ban rendszergazdai szerepk&ouml;rben tal&aacute;lkozunk, a mindennapi interakt&iacute;v munk&aacute;ban viszont gyakran haszn&aacute;lunk hivatkoz&aacute;sokat vagy linkeket.</p>
    </div>       

    <div class="sect1" title="Hivatkoz&aacute;sok (linkek)"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e751">Hivatkoz&aacute;sok (linkek)</h2></div></div></div>
    <p>A UNIX f&aacute;jlrendszerben gyakran dolgozunk &uacute;n. hivatkoz&aacute;sokkal: ez azt jelenti, hogy egy f&aacute;jl vagy k&ouml;nyvt&aacute;rnak kett&#337; vagy ak&aacute;r t&ouml;bb nevet is adunk, t&ouml;bbnyire az&eacute;rt hogy k&eacute;nyelmesebben dolgozzunk a rendszerrel, vagy elker&uuml;lj&uuml;k a sz&uuml;ks&eacute;gtelen kett&#337;z&eacute;seket.
K&eacute;tf&eacute;le hivatkoz&aacute;st alkalmaz a rendszer: a kem&eacute;ny vagy hard linket &eacute;s a szimbolikus linket.</p>
<p>A kem&eacute;ny linkek eset&eacute;ben k&eacute;t n&eacute;vvel hivatkozunk egy f&aacute;jlra, mindk&eacute;t n&eacute;v egyen&eacute;rt&eacute;k&#369;. Ilyenkor ha az egyiket megsz&uuml;ntetj&uuml;k (t&ouml;r&ouml;lj&uuml;k a f&aacute;jlt), a f&aacute;jl megmarad a m&aacute;sik n&eacute;v alatt (mindegy, hogy melyik n&eacute;vvel volt l&eacute;trehozva).</p>
<p>A szimbolikus linkek eset&eacute;ben a m&aacute;sodik n&eacute;v csak egy mutat&oacute; az els&#337;re. Ilyenkor, ha az els&#337; n&eacute;v szerint t&ouml;r&ouml;lj&uuml;k a f&aacute;jlt, a f&aacute;jl is t&ouml;rl&#337;dik, &eacute;s a m&aacute;sodik n&eacute;v a semmibe mutat.
Ak&aacute;rh&aacute;ny linket l&eacute;trehozhatunk egy f&aacute;jlra. Kem&eacute;ny (hard) hivatkoz&aacute;sokat csak ugyanazon a f&aacute;jlrendszeren tal&aacute;lhat&oacute; f&aacute;jlnevek k&ouml;zt hozhatunk l&eacute;tre, a szimbolikus linkek &aacute;tmutathatnak f&aacute;jlrendszerek f&ouml;l&ouml;tt (f&aacute;jlrendszer alatt itt p&eacute;ld&aacute;ul egy merevlemez part&iacute;ci&oacute;n tal&aacute;lhat&oacute; f&aacute;jlrendszert &eacute;rt&uuml;nk, amelyet felcsatolunk a k&ouml;nyvt&aacute;rstrukt&uacute;r&aacute;ba).</p><p> K&ouml;nyvt&aacute;rakra nem hozhat&oacute;ak l&eacute;tre kem&eacute;ny hivatkoz&aacute;sok.</p>

<p>L&eacute;trehoz&aacute;suk az <span class="command"><strong>ln</strong></span> paranccsal t&ouml;rt&eacute;nik, haszn&aacute;lata:</p>

<p><span class="strong"><strong>ln  eredeti_n&eacute;v  &uacute;j_n&eacute;v</strong></span></p>
<p>A szimbolikus linkek eset&eacute;ben ezen k&iacute;v&uuml;l a <code class="option">-s</code> kapcsol&oacute;t kell alkalmazni, teh&aacute;t:</p>
<pre class="screen">
$ ln 1.txt 2.txt         
$ 
</pre>
<p>parancs hard linket hoz l&eacute;tre, a</p>
<pre class="screen">
$ ln -s 1.txt 3.txt         
</pre>
<p>pedig szimb&oacute;likusat. Az al&aacute;bbi list&aacute;n l&aacute;tszik, hogy a <code class="filename">3.txt</code> szimbolikus link (kis <code class="code">l</code> bet&#369; a sor elej&eacute;n). A GNU <span class="command"><strong>ls</strong></span> parancsa a n&eacute;v mellett egy <code class="code">-&gt;</code> jellel is jelzi a hivatkoz&aacute;st. A lista m&aacute;sodik oszlopa pedig a f&aacute;jlra mutat&oacute; kem&eacute;ny hivatkoz&aacute;sok sz&aacute;m&aacute;t jelzi.</p>
<pre class="screen">
$ ls -l
-rw-rw-r-- 2 lszabo lszabo 5 Sep 21 11:37 1.txt
-rw-rw-r-- 2 lszabo lszabo 5 Sep 21 11:37 2.txt
lrwxrwxrwx 1 lszabo lszabo 5 Sep 21 11:38 3.txt -&gt; 1.txt        
$ 
</pre>

    </div>
     <div class="sect1" title="A f&aacute;jl nevekben haszn&aacute;lhat&oacute; metakarakterek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e772">A f&aacute;jl nevekben haszn&aacute;lhat&oacute; metakarakterek</h2></div></div></div>
             <p>A parancssoron speci&aacute;lis karaktereket haszn&aacute;lhatunk akkor, amikor f&aacute;jlnevekre hivatkozunk. Ezek megengedik az &aacute;ltal&aacute;nosabb neveket, &eacute;s egyszerre a t&ouml;bb f&aacute;jlra val&oacute; hivatkoz&aacute;st. Az al&aacute;bbi t&aacute;bl&aacute;zatban tal&aacute;lhat&oacute; jel&ouml;l&eacute;seket lehet haszn&aacute;lni. Amint l&aacute;tni fogjuk, ezeknek a kezel&eacute;s&eacute;t a h&eacute;j  v&eacute;gzi.</p>
             <p>Bizonyos karaktereknek a h&eacute;j sz&aacute;m&aacute;ra m&aacute;s jelent&eacute;ssel b&iacute;rnak, mint eredeti jelent&eacute;s&uuml;k. Miel&#337;tt a shell v&eacute;grehajtan&aacute; a parancsainkat, &aacute;t&iacute;rja (behelyettes&iacute;ti) ezeket, ez&eacute;rt <span class="emphasis"><em>metakaraktereknek</em></span> nevezz&uuml;k &#337;ket. Jellegzetes p&eacute;lda a <code class="literal">*</code>, amely a shell sz&aacute;m&aacute;ra a munkak&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; f&aacute;jlok list&aacute;j&aacute;t jelenti.</p>

       <div class="table"><a name="d5e778"></a><p class="title"><b>3.2. t&aacute;bl&aacute;zat - A f&aacute;jlnevekben haszn&aacute;lhat&oacute; metakarakterek</b></p><div class="table-contents">
                
                <table summary="A f&aacute;jlnevekben haszn&aacute;lhat&oacute; metakarakterek" cellpadding="4" border="1"><colgroup><col width="25%" class="col1"><col width="75%" class="col2"></colgroup><thead><tr><th align="center">Metakarakterek</th><th align="center">Jelent&eacute;s</th></tr></thead><tbody><tr><td align="center">*</td><td align="left">A megadott k&ouml;nyvt&aacute;rban minden &aacute;llom&aacute;ny nevet jel&ouml;l ha egyed&uuml;l &aacute;ll: <code class="literal">*</code> , de haszn&aacute;lhat&oacute; m&aacute;s karakterekkel kombin&aacute;lva is: <code class="literal">*.txt</code> minden <code class="literal">.txt</code> t&iacute;pus&uacute; f&aacute;jlt jelent.</td></tr><tr><td align="center">?</td><td align="left">Az &aacute;llom&aacute;nyn&eacute;vben egy karaktert helyettes&iacute;t: <code class="literal">1?.txt</code> (minden <code class="literal">.txt</code> t&iacute;pus&uacute; &aacute;llom&aacute;ny amelynek neve 1-el kezd&#337;dik, &eacute;s ut&aacute;na b&aacute;rmilyen karakter &aacute;ll a pont el&#337;tt).</td></tr><tr><td align="center">[halmaz]</td><td align="left">Karakterhalmazt defini&aacute;l: a k&eacute;t sz&ouml;gletes z&aacute;r&oacute;jel k&ouml;z&eacute; azok a karakterek ker&uuml;lnek amelyek r&eacute;szei a halmaznak. A halmazzal egy karakterre hivatkozunk.  <code class="literal">[abx]</code>  - jelenti az <code class="literal">a</code>, <code class="literal">b</code> vagy <code class="literal">x</code> karaktereket;  <code class="literal">[a-z]</code> - jelenti a kisbet&#369;ket P&eacute;ld&aacute;ul: <code class="literal">1[0-9].txt</code> (minden <code class="literal">.txt</code> t&iacute;pus&uacute; &aacute;llom&aacute;ny amely neve 1 -el kezd&#337;dik, &eacute;s ut&aacute;na sz&aacute;mjegy  &aacute;ll a pont el&#337;tt).</td></tr><tr><td align="center">{felsorol&aacute;s}</td><td align="left">B&aacute;r nem egyetlen metakarakterr&#337;l van sz&oacute;, itt besz&eacute;l&uuml;nk a h&eacute;jnak err&#337;l a megold&aacute;s&aacute;r&oacute;l, mert f&aacute;jlnevekben haszn&aacute;lhat&oacute;. Sztringek felsorol&aacute;s&aacute;t adjuk meg. A shell azokat a f&aacute;jl neveket v&aacute;lassza ki, amelyekben a felsorolt sztringek alternat&iacute;v szerepelnek: <code class="literal">{ab,cd}</code> ak&aacute;r az ab, ak&aacute;r a cd sztringet jel&ouml;li:
<pre class="screen">
$ ls {a,b}.txt
a.txt  b.txt
$
</pre>
                                        </td></tr></tbody></table>
        </div></div><br class="table-break"> 

<p>A <code class="literal">*</code> &eacute;s <code class="literal">?</code> nem illeszkedik ha a f&aacute;jln&eacute;vben az els&#337; karakter a pont: <code class="literal">.</code> . Ezek a rendszerben az un. l&aacute;thatatlan f&aacute;jlok, p&eacute;ld&aacute;ul: <code class="filename">.bash_profile</code> .</p>

<p>Ha a f&aacute;jl  nevekben  a metakarakterek liter&aacute;lisan fordulnak el&#337;, vissza-per jel&ouml;l&eacute;ssel haszn&aacute;lhatjuk &#337;ket, ak&aacute;rcsak az elv&aacute;laszt&oacute; (sz&oacute;k&ouml;z) karaktert. Pl: "<code class="filename">piros alma.txt</code>" f&aacute;jl nevet megadhatjuk &iacute;gy is: <code class="filename">piros\ alma.txt</code>. Ennek ellen&eacute;re, sem a metakatraktereket sem az elv&aacute;laszt&oacute; karaktereket nem c&eacute;lszer&#369; f&aacute;jlnevekben haszn&aacute;lni.</p>

     </div>

    <div class="sect1" title="A fejezetben haszn&aacute;lt parancsok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_file">A fejezetben haszn&aacute;lt parancsok</h2></div></div></div>

<p>Itt megadjuk a fejezetben haszn&aacute;lt parancsok r&ouml;vid le&iacute;r&aacute;s&aacute;t. R&eacute;szletes inform&aacute;ci&oacute;k&eacute;rt a parancsok k&eacute;zik&ouml;nyv vagy info lapjait kell &aacute;tolvasni.</p>



            <div class="simplesect" title="Az ls parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_ls"><a class="indexterm" name="d5e827"></a>
Az ls parancs</h3></div></div></div>
<p>Kilist&aacute;zza egy vagy t&ouml;bb k&ouml;nyvt&aacute;r tartalm&aacute;t.</p>
<h4><a name="d5e830"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">ls</code> 
   [-lhdirSt]
    <em class="replaceable"><code>f&aacute;jl(ok)</code></em> 
</p></div>
 <h4><a name="d5e836"></a>Fontosabb opci&oacute;k:</h4>
          <p><code class="option">-1</code> egy oszlopos kimenetet gener&aacute;l, minden f&aacute;jl neve &uacute;j sorba ker&uuml;l.</p>   
          <p><code class="option">-a</code> Kilist&aacute;zza  a rejtet f&aacute;jlokat is (all). Rejtett f&aacute;jlok azok, amelynek neve egy ponttal kezd&#337;dik (pl. <code class="filename">.bash_profile</code> ).</p>
           <p><code class="option">-d</code> K&ouml;nyvt&aacute;rak tulajdons&aacute;gait list&aacute;zza.</p>
           <p><code class="option">-h</code> Emberi szemmel k&ouml;nnyen olvashat&oacute;ian &iacute;rja ki a f&aacute;jl hosszakat(K, M, G &#8211; kil&oacute;, mega, gigabyte).</p>
           <p><code class="option">-i</code> Az inode sz&aacute;mokat list&aacute;zza.</p>
           <p><code class="option">-l</code> Hossz&uacute; lista: minden fontos f&aacute;jl tulajdons&aacute;got ki&iacute;r.</p>
           <p><code class="option">-S</code> A f&aacute;jlok hossza szerint rendez.</p>
           <p><code class="option">-t</code> A f&aacute;jlok m&oacute;dos&iacute;t&aacute;si ideje szerint rendez.</p>
           <p><code class="option">-r</code> Megford&iacute;tja az &eacute;ppen alkalmazott rendez&eacute;si list&aacute;t.</p>

          <h4><a name="d5e856"></a>Le&iacute;r&aacute;s:</h4>
          <p>Az <span class="command"><strong>ls</strong></span> egy vagy t&ouml;bb k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; f&aacute;jl nev&eacute;t &iacute;rja ki. Argumentuma hi&aacute;nyozhat, ekkor a munkak&ouml;nyvt&aacute;r tartalm&aacute;t list&aacute;zza. Ha van argumentum, akkor az a c&eacute;l f&aacute;jl vagy k&ouml;nyvt&aacute;r. Ha t&ouml;bb inform&aacute;ci&oacute;ra van sz&uuml;ks&eacute;g&uuml;nk, akkor azt kapcsol&oacute;val kell k&eacute;rni. Implicit a f&aacute;jlok neve szerint rendezi a list&aacute;t, ez m&oacute;dos&iacute;that&oacute; pl. a <code class="option">-t</code> vagy <code class="option">-S</code> kapcsol&oacute;kkal.</p>
          <p>P&eacute;ld&aacute;ul a <code class="option">-l</code> opci&oacute;val r&eacute;szletes list&aacute;t ad:</p>
<pre class="screen">
$ ls
1.txt  a.txt  test.txt  x.txt
$ ls -l
total 4
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 1.txt
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 a.txt
-rw-rw-r-- 1 lszabo lszabo 55 Oct  2 21:30 test.txt
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 x.txt
$ 
</pre>
        <p>A <code class="option">-t</code> opci&oacute;val m&oacute;dos&iacute;t&aacute;si id&#337; szerint rendez.</p>
<pre class="screen">        
$ ls -lt
total 4
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 1.txt
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 a.txt
-rw-rw-r-- 1 lszabo lszabo 55 Oct  2 21:30 test.txt
-rw-rw-r-- 1 lszabo lszabo  0 Oct  2 21:30 x.txt
$ 
</pre>
</div>

            <div class="simplesect" title="A mkdir parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_mkdir"><a class="indexterm" name="d5e869"></a>
A mkdir parancs</h3></div></div></div>
<p>L&eacute;trehozza az argumentum&aacute;ban megadott k&ouml;nyvt&aacute;rakat. .</p>
<h4><a name="d5e872"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">mkdir</code> 
   [-pv]
    <em class="replaceable"><code>k&ouml;nyt&aacute;r(ak)</code></em> 
</p></div>
 <h4><a name="d5e878"></a>Fontosabb opci&oacute;k:</h4>
           <p><code class="option">-p</code> parent: megengedi t&ouml;bb szint l&eacute;trehoz&aacute;s&aacute;t egy paranccsal</p>
           <p><code class="option">-v</code> verbose: ki&iacute;rja amit v&eacute;gez</p> 
   <h4><a name="d5e883"></a>Le&iacute;r&aacute;s:</h4>
<p>L&eacute;trehozza az argumentum&aacute;ban megadott k&ouml;nyvt&aacute;rakat. Ak&aacute;r t&ouml;bbet is megadhatunk egyszerre. P&eacute;ld&aacute;ul:</p>
<pre class="screen">
$ mkdir alpha
$ mkdir -p gamma/beta
$
</pre>
</div>

            <div class="simplesect" title="Az rmdir parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_rmdir"><a class="indexterm" name="d5e888"></a>
Az rmdir parancs</h3></div></div></div>
<p>K&ouml;nyvt&aacute;rat vagy k&ouml;nyvt&aacute;rakat t&ouml;r&ouml;l.</p>
<h4><a name="d5e891"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">rmdir</code> 
   [-vp]
    <em class="replaceable"><code>k&ouml;nyvt&aacute;r(ak)</code></em> 
</p></div>
 <h4><a name="d5e897"></a>Fontosabb opci&oacute;k:</h4>
     <p><code class="option">-p</code> parent: megengedi t&ouml;bb szint t&ouml;rl&eacute;s&eacute;t</p>
     <p><code class="option">-v</code> verbose: ki&iacute;rja amit v&eacute;gez</p> 
 <h4><a name="d5e902"></a>Le&iacute;r&aacute;s:</h4>
<p>T&ouml;rli az argumentum&aacute;ban megadott k&ouml;nyvt&aacute;rakat. Csak akkor t&ouml;rli &#337;ket, ha a k&ouml;nyvt&aacute;rak &uuml;resek.</p>

<p>P&eacute;ld&aacute;ul:</p>
<pre class="screen">
$ rmdir elso
$ rmdir masodik harmadik
$ rmdir -p negyedik/otodik
$ 
</pre>
</div>

            <div class="simplesect" title="A chmod parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_chmod"><a class="indexterm" name="d5e908"></a>
A chmod parancs</h3></div></div></div>
<p>Jogokat &aacute;ll&iacute;t be a f&aacute;jlrendszerben.</p>
<h4><a name="d5e911"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">chmod</code> 
   [-fR]
    <em class="replaceable"><code>m&oacute;d</code></em> 
    <em class="replaceable"><code>f&aacute;jl(ok)</code></em> 
</p></div>
 <h4><a name="d5e919"></a>Fontosabb opci&oacute;k:</h4>
<p><code class="option">-f</code>  Er&#337;lteti a jog v&aacute;ltoztat&aacute;st &eacute;s nem ad ki figyelmeztet&#337; &uuml;zenetet (force).</p>
<p><code class="option">-R</code> A v&aacute;ltoztat&aacute;sokat elv&eacute;gzi rekurz&iacute;van lefel&eacute; a k&ouml;nyvt&aacute;rstrukt&uacute;r&aacute;n.</p>

          <h4><a name="d5e924"></a>Le&iacute;r&aacute;s:</h4>
          <p>A parancs megv&aacute;ltoztatja a <span class="emphasis"><em>m&oacute;d</em></span> argumentumban megadott jogokat a param&eacute;terk&eacute;nt megadott f&aacute;jlon vagy f&aacute;jlokon. A <span class="emphasis"><em>m&oacute;d</em></span> argumentum k&ouml;telez&#337;. K&eacute;tf&eacute;lek&eacute;ppen adhat&oacute; meg: okt&aacute;l form&aacute;ban vagy szimb&oacute;likus jel&ouml;l&eacute;ssel. Okt&aacute;l jel&ouml;l&eacute;ssel p&eacute;ld&aacute;ul:</p>
<pre class="screen">
$ chmod 755 a.txt
$ 
</pre>        
<p>A szimb&oacute;likus jel&ouml;l&eacute;sn&eacute;l az <code class="literal">ugoa</code> szimb&oacute;lumokat haszn&aacute;lva adjuk meg a param&eacute;tert (<code class="literal">u</code>: user, <code class="literal">g</code>: group, <code class="literal">o</code>: others, <code class="literal">a</code>: all). A  + jel hozz&aacute;ad&aacute;st, a - megvon&aacute;st jelent, a hozz&aacute;rendel&eacute;st az = jellel jel&ouml;lj&uuml;k. Pl.:</p>
<pre class="screen">
$ chmod u+x elso.sh
$ 
</pre>
<p>v&eacute;grehajt&aacute;si jogot &aacute;ll&iacute;tunk be;</p>
<pre class="screen">
$ chmod  u-x, o-w 1.txt        
$ 
</pre>
<p>a felhaszn&aacute;l&oacute;t&oacute;l a v&eacute;grehajt&aacute;si jogot, a t&ouml;bbiekt&#337;l az &iacute;r&aacute;sjogot vonjuk meg.</p>

<p>A rekurz&iacute;v haszn&aacute;lat vesz&eacute;lyes (egyszerre &aacute;ll&iacute;that be k&ouml;nyvt&aacute;rakon &eacute;s f&aacute;jlokon jogokat, ami nem v&aacute;rt eredm&eacute;nyhez vezethet).</p>
</div>

            <div class="simplesect" title="A cp parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_cp"><a class="indexterm" name="d5e942"></a>
A cp parancs</h3></div></div></div>
<p>F&aacute;jlokat m&aacute;sol.</p>
<h4><a name="d5e945"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">cp</code> 
   [-viprlf]
    <em class="replaceable"><code>forr&aacute;s</code></em> 
    <em class="replaceable"><code>c&eacute;l</code></em> 
</p></div>
<div class="cmdsynopsis"><p>
  <code class="command">cp</code> 
   [-viprlf]
    <em class="replaceable"><code>forr&aacute;s(ok)</code></em>... 
    <em class="replaceable"><code>k&ouml;nyvt&aacute;r</code></em> 
</p></div>
<div class="cmdsynopsis"><p>
  <code class="command">cp</code> 
   [-viprlf]
    -t 
    <em class="replaceable"><code>k&ouml;nyvt&aacute;r</code></em> 
    <em class="replaceable"><code>forr&aacute;s(ok)</code></em>... 
</p></div>
 <h4><a name="d5e968"></a>Fontosabb opci&oacute;k:</h4>
<p><code class="option">-i</code> interakt&iacute;van fut (k&eacute;rdez, ha fel&uuml;l&iacute;r&aacute;s esete &aacute;ll fenn)</p>
<p><code class="option">-v</code> verbose: ki&iacute;rja amit v&eacute;gez</p>
<p><code class="option">-r</code> rekurz&iacute;van m&aacute;sol egy k&ouml;nyvt&aacute;rstrukt&uacute;r&aacute;t lefele</p>
<p><code class="option">-p</code> a c&eacute;l f&aacute;jl felveszi a forr&aacute;s jogait</p>
<p><code class="option">-l</code> m&aacute;sol&aacute;s helyett hivatkoz&aacute;st k&eacute;sz&iacute;t</p>
<p><code class="option">-f</code> force: ha olyan f&aacute;jlt tal&aacute;l, amire nem tud m&aacute;solni, megpr&oacute;b&aacute;lja t&ouml;r&ouml;lni &eacute;s megism&eacute;telni a m&#369;veletet</p>
          <h4><a name="d5e981"></a>Le&iacute;r&aacute;s:</h4>
        <p>&Aacute;llom&aacute;nyokat m&aacute;sol. Az els&#337; alakban egy forr&aacute;s f&aacute;jlt egy c&eacute;lba, a m&aacute;sodik alakban ak&aacute;r t&ouml;bb f&aacute;jlt egy c&eacute;l k&ouml;nyvt&aacute;r al&aacute;. A harmadik alakban, ha a <code class="option">-t</code> kapcsol&oacute;t haszn&aacute;ljuk, a c&eacute;lk&ouml;nyvt&aacute;r a <code class="option">-t</code> ut&aacute;ni els&#337; param&eacute;ter. Ha ugyanolyan nev&#369; a c&eacute;l f&aacute;jl mint a forr&aacute;s, sz&oacute; n&eacute;lk&uuml;l fel&uuml;l&iacute;rja: ezt a <code class="option">-i</code> kapcsol&oacute;val ker&uuml;lhetj&uuml;k el. 
          </p>
<pre class="screen">
$ mkdir elso
$ touch 1.txt
$ #f&aacute;jlt f&aacute;jlba
$ cp 1.txt 2.txt
$ #egy f&aacute;jlt k&eacute;t k&uuml;l&ouml;nb&ouml;z&#337; helyre
$ #t&ouml;bb &aacute;llomnyt ugyanabba a k&ouml;nyvt&aacute;rba
$ cp 1.txt 2.txt elso/
$ mkdir masodik
$ cp -t masodik/ 1.txt 2.txt
$ tree
.
|-- 1.txt
|-- 2.txt
|-- elso
|   |-- 1.txt
|   `-- 2.txt
`-- masodik
    |-- 1.txt
    `-- 2.txt

2 directories, 6 files
$ # m&aacute;sol&aacute;s j&oacute;v&aacute;hagy&aacute;ssal
$ cp -i 1.txt 2.txt
cp: overwrite `2.txt'? y
$
</pre>
<p>A <span class="command"><strong>cp</strong></span> implicit csak f&aacute;jlokat m&aacute;sol. K&ouml;nyvt&aacute;rakat csak a <code class="option">-r</code> kapcsol&oacute;val m&aacute;solhatunk: &iacute;gy nem csak a forr&aacute;sk&ouml;nyvt&aacute;rat, hanem annak teljes tartalm&aacute;t &aacute;tm&aacute;solja Az al&aacute;bbi p&eacute;ld&aacute;ban az <code class="filename">elso</code> &eacute;s <code class="filename">masodik</code> is k&ouml;nyvt&aacute;r:</p>
<pre class="screen">
$ ls
elso  masodik
$ cp elso harmadik
cp: omitting directory `elso'
$ cp -r elso harmadik
$ 
</pre>


</div>

            <div class="simplesect" title="A rm parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_rm"><a class="indexterm" name="d5e995"></a>
A rm parancs</h3></div></div></div>
<p>F&aacute;jlokat vagy k&ouml;nyvt&aacute;rakat t&ouml;r&ouml;l.</p>
<h4><a name="d5e998"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">rm</code> 
   [-viprlf]
    <em class="replaceable"><code>f&aacute;jl(ok)</code></em>... 
</p></div>
 <h4><a name="d5e1004"></a>Fontosabb opci&oacute;k:</h4>
          <p><code class="option">-i</code> <span class="emphasis"><em>interactive</em></span>: k&eacute;rdez minden t&ouml;rl&eacute;s el&#337;tt	</p>
          <p><code class="option">-v</code> ki&iacute;rja amit v&eacute;gez</p>
          <p><code class="option">-f</code> <span class="emphasis"><em>force</em></span>: akkor is elv&eacute;gzi a t&ouml;rl&eacute;st ha az &aacute;llom&aacute;ny &iacute;r&aacute;sv&eacute;dett (de a felhaszn&aacute;l&oacute;&eacute;)</p>
          <p><code class="option">-r</code> rekurz&iacute;van t&ouml;r&ouml;l: ilyenkor k&ouml;nyvt&aacute;rakat is t&ouml;r&ouml;l</p>

          <h4><a name="d5e1015"></a>Le&iacute;r&aacute;s:</h4>
          <p>T&ouml;rli a megadott f&aacute;jlokat. Ak&aacute;r t&ouml;bbet is megadhatunk egyszerre. Csak f&aacute;jlokat t&ouml;r&ouml;l, de ha megadjuk a <code class="option">-r</code> kapcsol&oacute;t akkor k&ouml;nyvt&aacute;rat is, az alatta tal&aacute;lhat&oacute; teljes tartalommal.</p>
<pre class="screen">
$ # egy f&aacute;jl t&ouml;rl&eacute;se
$ rm 1.txt
$ # t&ouml;bb f&aacute;jl t&ouml;rl&eacute;se
$ rm 2.txt 3.txt 4.txt 
$ #egy k&ouml;nyvt&aacute;r t&ouml;rl&eacute;se az alatta lev&#337; tartalommal egy&uuml;tt
$ rm -rf elso
$ 
</pre>

<p>A parancssoron kiadott t&ouml;rl&eacute;s a Unix alatt v&eacute;gleges: nincs m&oacute;dszer az &aacute;llom&aacute;ny vissza&aacute;ll&iacute;t&aacute;s&aacute;ra t&ouml;rl&eacute;s ut&aacute;n, ez&eacute;rt a m&#369;veletet, k&uuml;l&ouml;n&ouml;sen ha a -r opci&oacute;t is haszn&aacute;ljuk, k&eacute;tszer meg kell gondolni, aj&aacute;nlott el&#337;tte list&aacute;zni a parancssoron megadott &aacute;llom&aacute;nyokat ugyanazzal a n&eacute;vvel ellen&#337;rz&eacute;s v&eacute;gett. Az: </p>
<pre class="screen">
$ rm * 
$ 
</pre>
<p>alak&uacute; parancst&oacute;l &oacute;vakodni kell, aj&aacute;nlott a <code class="option">&#8211;i</code> kapcsol&oacute;val haszn&aacute;lni:</p>
<pre class="screen">
$ rm -i * 
$ 
</pre>

<p>vagy el&#337;tte ellen&#337;rizni, hogy <span class="command"><strong>ls *</strong></span> mit list&aacute;z.</p>

</div>

            <div class="simplesect" title="Az mv parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_mv"><a class="indexterm" name="d5e1028"></a>
Az mv parancs</h3></div></div></div>
<p>F&aacute;jlokat nevez &aacute;t (mozgat el).</p>
<h4><a name="d5e1031"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">mv</code> 
   [-vif]
    <em class="replaceable"><code>forr&aacute;s</code></em> 
    <em class="replaceable"><code>c&eacute;l</code></em> 
</p></div>
<div class="cmdsynopsis"><p>
  <code class="command">mv</code> 
   [-vif]
    <em class="replaceable"><code>forr&aacute;s(ok)</code></em>... 
    <em class="replaceable"><code>c&eacute;l</code></em> 
</p></div>
 <h4><a name="d5e1046"></a>Fontosabb opci&oacute;k:</h4>
          <p><code class="option">-i</code> interactive: k&eacute;rdez, ha fel&uuml;l&iacute;r&aacute;s esete &aacute;ll fenn</p>
          <p><code class="option">-f</code> nem jelzi, ha fel&uuml;l&iacute;r egy &aacute;llom&aacute;nyt  ami &iacute;r&aacute;sv&eacute;dett</p>
          <p><code class="option">-v</code> verbose: ki&iacute;rja amit v&eacute;gez</p>

          <h4><a name="d5e1053"></a>Le&iacute;r&aacute;s:</h4>
          <p>Az els&#337; alak elk&ouml;lt&ouml;ztet egy &aacute;llom&aacute;ny m&aacute;s n&eacute;v al&aacute;. Ha a c&eacute;l ugyanazon a f&aacute;jlrendszeren tal&aacute;lhat&oacute; (pl. merevlemezek eset&eacute;ben ugyanazon a lemezpart&iacute;ci&oacute;n), akkor tulajdonk&eacute;ppen csak &aacute;tnevez. Ha m&aacute;sikon, akkor &aacute;t is kell m&aacute;solnia a tartalm&aacute;t. Az eredeti &aacute;llom&aacute;ny ilyenkor t&ouml;rl&#337;dik. &Aacute;llom&aacute;nyokat &eacute;s k&ouml;nyvt&aacute;rakat egyar&aacute;nt elmozgat. Ha t&ouml;bb f&aacute;jon v&eacute;gezz&uuml;k egyszerre (m&aacute;sodik alak), akkor a c&eacute;l k&ouml;nyvt&aacute;r, &eacute;s a  f&aacute;jlokat a k&ouml;nyvt&aacute;r al&aacute; viszi.</p>
<pre class="screen">
$ #l&eacute;trehozunk 2 k&ouml;nyvt&aacute;rat &eacute;s 2 f&aacute;jlt
$ mkdir elso masodik
$ touch 1.txt 2.txt
$ #az 1.txt &aacute;tnevez&#337;dik 3.txt-v&eacute;
$ mv 1.txt 3.txt
$ #minden .txt t&iacute;pus&uacute; f&aacute;jlt az elso k&ouml;nyvt&aacute;r al&aacute; visz
$ mv *.txt elso/
$ #az elso k&ouml;nyvt&aacute;r a m&aacute;sodik al&aacute; ker&uuml;l
$ mv elso/ masodik
$ tree
.
`-- masodik
    `-- elso
        |-- 2.txt
        `-- 3.txt

2 directories, 2 files

$
</pre>

</div>

    </div> 
	</div>


    	<div class="chapter" title="4. fejezet - Alapfogalmak a h&eacute;j (shell) haszn&aacute;lat&aacute;hoz" id="d5e1056"><div class="titlepage"><div><div><h2 class="title">4. fejezet - Alapfogalmak a h&eacute;j (shell) haszn&aacute;lat&aacute;hoz</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e1058">H&eacute;jprogramok</a></span></dt><dt><span class="sect1"><a href="#d5e1109">A h&eacute;j &aacute;ltal v&eacute;grehajtott parancsok</a></span></dt><dt><span class="sect1"><a href="#cmd_alias">Alias-ok vagy helyettes&iacute;t&#337; nevek</a></span></dt><dt><span class="sect1"><a href="#d5e1156">A parancsv&eacute;grehajt&aacute;s</a></span></dt><dt><span class="sect1"><a href="#d5e1180">H&aacute;tt&eacute;rben val&oacute; v&eacute;grehajt&aacute;s</a></span></dt><dt><span class="sect1"><a href="#environ">A k&ouml;rnyezeti v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e1215">A h&eacute;j ind&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1248">Nyelvi karakterk&eacute;szlet be&aacute;ll&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1263">A standard bemenet &eacute;s kimenet</a></span></dt><dt><span class="sect1"><a href="#redirection">&Aacute;tir&aacute;ny&iacute;t&aacute;sok</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e1284">A standard bemenet &aacute;tir&aacute;ny&iacute;t&aacute;sa ( &lt; )</a></span></dt><dt><span class="sect2"><a href="#d5e1294">A standard kimenet f&aacute;jlba ir&aacute;ny&iacute;t&aacute;sa ( &gt; )</a></span></dt><dt><span class="sect2"><a href="#d5e1310">A kimenet hozz&aacute;f&#369;z&eacute;se egy f&aacute;jlhoz ( &gt;&gt; )</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e1314">Cs&#337;vezet&eacute;kek</a></span></dt><dt><span class="sect1"><a href="#d5e1351">Speci&aacute;lis eszk&ouml;z&ouml;k</a></span></dt><dt><span class="sect1"><a href="#d5e1382">A  standard  kimenet &eacute;s hibakimenet egyszerre t&ouml;rt&eacute;n&#337; &aacute;tir&aacute;ny&iacute;t&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1399">Egyszer&#369; sz&ouml;vegsz&#369;r&eacute;s</a></span></dt><dt><span class="sect1"><a href="#cmd_shell">A fejezetben haszn&aacute;lt parancsok</a></span></dt></dl></div> 
            
    <div class="sect1" title="H&eacute;jprogramok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1058">H&eacute;jprogramok</h2></div></div></div>
            
			<p><a class="indexterm" name="d5e1061"></a>Egy h&eacute;jprogram  vagy shell szkript egyszer&#369; sz&ouml;veges f&aacute;jl, amelyet a h&eacute;j soronk&eacute;nt &eacute;rtelmez. Minden egyes sort k&uuml;l&ouml;n parancsnak &eacute;rtelmez (<span class="emphasis"><em>mintha</em></span> a parancssorr&oacute;l &uuml;t&ouml;tt&uuml;k volna be), &eacute;s egyenk&eacute;nt v&eacute;grehajtja &#337;ket. A parancsok ind&iacute;t&aacute;s&aacute;nak szintaxis&aacute;t l&aacute;ttuk m&aacute;r a termin&aacute;l haszn&aacute;latakor: a parancs nev&eacute;b&#337;l, opci&oacute;kb&oacute;l (kapcsol&oacute;k) &eacute;s argumentumokb&oacute;l &aacute;ll.</p>
            <p>A h&eacute;j sz&aacute;m&aacute;ra a megjegyz&eacute;st deklar&aacute;l&oacute; karakter a # (kett&#337;s kereszt vagy diez, angol: <span class="emphasis"><em>hash mark</em></span>). Azokat a sorokat amelyekben megjelenik, a kett&#337;s kereszt karaktert&#337;l a sor v&eacute;g&eacute;ig megjegyz&eacute;snek tekinti a h&eacute;j, ak&aacute;r interakt&iacute;v m&oacute;dban adtuk meg, ak&aacute;r egy h&eacute;j programban (az al&aacute;bbi p&eacute;ld&aacute;ban a h&eacute;j k&eacute;szenl&eacute;ti jele a <code class="prompt">$ </code> &eacute;s a <span class="command"><strong>cat</strong></span> valamint a <span class="command"><strong>sort</strong></span> programokat ind&iacute;tjuk el egy kis sz&ouml;veges &aacute;llom&aacute;nnyal).</p>
<pre class="screen">
$ #f&aacute;jl tartalm&aacute;nak list&aacute;z&aacute;sa
$ cat lista.txt
delta
omega
alpha
beta
$ #itt rendezz&uuml;k a f&aacute;jlt
$ sort lista.txt
alpha
beta
delta
omega
</pre>
<p><a name="cmd_cat"></a>A <span class="command"><strong>cat</strong></span> parancs a standard kimenetre &iacute;rja a parancssor&aacute;n megadott sz&ouml;veges f&aacute;jlt vagy f&aacute;jlokat, &ouml;sszef&#369;zi &#337;ket (<span class="emphasis"><em>concatenate</em></span>), haszn&aacute;lata:</p>
<div class="cmdsynopsis"><p>
  <code class="command">cat</code> 
   [<em class="replaceable"><code>f&aacute;jl</code></em>...]
</p></div>
<p>A <span class="command"><strong>sort</strong></span> az argumentumak&eacute;nt megadott sz&ouml;veges f&aacute;jl sorait rendezi ebben az egyszer&#369; haszn&aacute;lati m&oacute;dban, rendez&eacute;s ut&aacute;n ki&iacute;rja &#337;ket a termin&aacute;lra.</p>
	<p>A h&eacute;j programok sz&ouml;veg&eacute;nek els&#337; sora speci&aacute;lis. Itt adunk meg inform&aacute;ci&oacute;t arr&oacute;l, hogy a sz&ouml;veges f&aacute;jlt milyen &eacute;rtelmez&#337;vel szeretn&eacute;nk v&eacute;grehajtani. A sor egy olyan megjegyz&eacute;st tartalmaz, amelyben a kett&#337;s keresztet azonnal egy felki&aacute;lt&oacute;jel k&ouml;vet (teh&aacute;t: #!) , ut&aacute;na pedig a k&iacute;v&aacute;nt &eacute;rtelmez&#337; teljes el&eacute;r&eacute;si &uacute;tja &aacute;ll.</p>
    <p>&Iacute;gy egy egyszer&#369; szkript  &iacute;gy n&eacute;z ki:</p>
<pre class="programlisting">
#!/bin/bash
echo hell&oacute;
echo v&eacute;ge
</pre>    
<p>A v&eacute;grehajt&aacute;s azt jelenti, hogy elind&iacute;tjuk a  parancs&eacute;rtelmez&#337;t (&eacute;s ez egy &uacute;j h&eacute;j lesz &#8211; &uacute;j folyamat - nem ugyanaz ami al&oacute;l ind&iacute;tottuk) &uacute;gy, hogy argumentumk&eacute;nt megadjuk a programot tartalmaz&oacute; f&aacute;jlt. A k&eacute;t <span class="command"><strong>echo</strong></span> hely&eacute;n b&aacute;rmilyen a h&eacute;j sz&aacute;m&aacute;ra &eacute;rtelmes program sz&ouml;veg &aacute;llhat, egym&aacute;s ut&aacute;ni parancssorok amelyeket a h&eacute;j egym&aacute;s ut&aacute;n: mindig az el&#337;z&#337; lefut&aacute;s&aacute;t megv&aacute;rva hajt v&eacute;gre. Ugyanez t&ouml;rt&eacute;nik, ha a parancsokat tartalmaz&oacute; sz&ouml;veges f&aacute;jlnak v&eacute;grehajt&aacute;si jogot adunk, &eacute;s azt ind&iacute;tjuk, mintha egy parancs lenne:</p>
<pre class="screen">
$ chmod u+x hello.sh
$ ./hello.sh
hell&oacute;
v&eacute;ge
</pre>
<p>Ebben az esetben a h&eacute;j a fentebb bemutatott els&#337; program sor szerint v&aacute;lassza ki a parancs&eacute;rtelmez&#337;t, &eacute;s ugyan&uacute;gy &uacute;j folyamatot ind&iacute;t. Az ind&iacute;t&aacute;sn&aacute;l sz&uuml;ks&eacute;g&uuml;nk van a <code class="filename">./</code> relat&iacute;v &uacute;tvonal megad&aacute;s&aacute;ra, mert alaphelyzetben a munkak&ouml;nyvt&aacute;r - ahol a programunk van - nincs a h&eacute;j PATH v&aacute;ltoz&oacute;j&aacute;nak list&aacute;j&aacute;ban.</p>
<p>Amennyiben a <span class="command"><strong>bash</strong></span>-t megjel&ouml;l&#337; sor hi&aacute;nyzik, a h&eacute;j megpr&oacute;b&aacute;lja a sz&ouml;veget a felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra be&aacute;ll&iacute;tott alap&eacute;rtelmezett h&eacute;jjal v&eacute;grehajtani (ennek nev&eacute;t a <code class="varname">SHELL</code> <a class="link" href="#environ" title="A k&ouml;rnyezeti v&aacute;ltoz&oacute;k">k&ouml;rnyezeti v&aacute;ltoz&oacute;</a> tartalmazza):</p>
<pre class="screen">
$ echo $SHELL
/bin/bash
$
</pre>

	<p>A jel&ouml;l&eacute;s m&aacute;s szkript nyelvek eset&eacute;ben is &eacute;rv&eacute;nyes, &aacute;ltal&aacute;nosan, ha a shell egy sz&ouml;veget &eacute;rtelmez&#337; programot akar elind&iacute;tani, pl. egy Perl szkript eset&eacute;ben a sor:</p>
<pre class="programlisting">
#!/bin/perl
</pre>

<p>Az h&eacute;j el&eacute;r&eacute;s&eacute;nek &uacute;tvonala rendszerenk&eacute;nt v&aacute;ltozhat, ellen&#337;rizni kell, ezt a <span class="command"><strong>which</strong></span> paranccsal tehetj&uuml;k meg, amely ki&iacute;rja egy v&eacute;grehajthat&oacute;, &eacute;s a shell &aacute;ltal megtal&aacute;lhat&oacute; (l&aacute;sd k&eacute;s&#337;bb a <code class="envar">PATH</code> v&aacute;ltoz&oacute;t) program el&eacute;r&eacute;si &uacute;tj&aacute;t:</p>
<pre class="screen">
$ which bash
/bin/bash
</pre>
<p>A szkript m&aacute;sik v&eacute;grehajt&aacute;si m&oacute;dja azzal a h&eacute;jjal val&oacute; v&eacute;grehajt&aacute;s amellyel dolgozunk, ezt a <span class="command"><strong><a class="link" href="#cmd_dot" title="A . &eacute;s a source parancs">source</a></strong></span> paranccsal tessz&uuml;k (ugyanezt a m&#369;veletet v&eacute;gzi a <span class="command"><strong>.</strong></span> - <a class="link" href="#cmd_dot" title="A . &eacute;s a source parancs"><span class="command"><strong>dot</strong></span></a> parancs is):</p>
<pre class="screen">
$ source hello.sh
hell&oacute;
v&eacute;ge
</pre>

<p>A fenti programban haszn&aacute;ltunk &eacute;kezetes karaktereket is, r&eacute;gi rendszerek &aacute;ltal&aacute;ban csak ASCII k&oacute;dol&aacute;ssal tudt&aacute;k a karakteret ki&iacute;rni a termin&aacute;lra. A jelenlegi rendszerek nagy r&eacute;sze, k&ouml;zt&uuml;k valamennyi Linux disztrib&uacute;ci&oacute; implicit UTF-8 k&oacute;dol&aacute;st haszn&aacute;l, teh&aacute;t elvileg lehet &eacute;kezetes karaktereket is haszn&aacute;lni. A shell <code class="envar">LANG</code> vagy <code class="envar">LC_ALL</code> v&aacute;ltoz&oacute;i  tartalmazz&aacute;k a be&aacute;ll&iacute;tott nyelvet &eacute;s k&oacute;dol&aacute;st. Ezt, valamint ha t&aacute;voli termin&aacute;lr&oacute;l l&eacute;p&uuml;nk a rendszerre, akkor a termin&aacute;l k&oacute;dol&aacute;s&aacute;t is ellen&#337;rizni kell. </p>
<pre class="screen">
$ echo $LANG
en_US.UTF-8
$
</pre>

    </div>    

    <div class="sect1" title="A h&eacute;j &aacute;ltal v&eacute;grehajtott parancsok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1109">A h&eacute;j &aacute;ltal v&eacute;grehajtott parancsok</h2></div></div></div>
            
	<p>Amikor a h&eacute;j megkap egy parancsnevet, az al&aacute;bbi lehet&#337;s&eacute;gek k&ouml;zt kezdi keresni a nevet a v&eacute;grehajt&aacute;s elv&eacute;gz&eacute;s&eacute;hez:</p>

     <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="strong"><strong>Alias</strong></span>-ok: helyettes&iacute;t&#337; nevek vagy pszeudo parancsok (<a class="link" href="#cmd_alias" title="Alias-ok vagy helyettes&iacute;t&#337; nevek">l&aacute;sd al&aacute;bb</a>).</p>
                    </li><li class="listitem">
                            <p><span class="strong"><strong>F&uuml;ggv&eacute;nyek</strong></span> (<span class="emphasis"><em>function</em></span>) - a h&eacute;j nyelv&eacute;n <a class="link" href="#function" title="F&uuml;ggv&eacute;nyek">f&uuml;ggv&eacute;nyeket</a> lehet meghat&aacute;rozni az olyan feladatokra amelyeket t&ouml;bbsz&ouml;r  h&iacute;vunk meg. K&eacute;s&#337;bb t&aacute;rgyaljuk &#337;ket.</p>
                    </li><li class="listitem">
                            <p><span class="strong"><strong>Be&eacute;p&iacute;tett parancsok</strong></span> (<span class="emphasis"><em>builtin commands</em></span>)- a nagyon gyakran haszn&aacute;lt parancsokat be&eacute;p&iacute;tik a h&eacute;jba. &Iacute;gy ezeket sokkal gyorsabban lehet v&eacute;grehajtani. Ilyen p&eacute;ld&aacute;ul az <span class="command"><strong>echo</strong></span>,  <span class="command"><strong>pwd</strong></span>, <span class="command"><strong>test</strong></span> (hamarosan haszn&aacute;lni fogjuk ez ut&oacute;bbiakat). Ugyanakkor ezek l&eacute;teznek &ouml;n&aacute;ll&oacute; parancsk&eacute;nt is (bin&aacute;ris programk&eacute;nt). A be&eacute;p&iacute;t&eacute;snek k&eacute;t oka lehet: a sebess&eacute;g (nem kell &uacute;j folyamatot ind&iacute;tani) vagy a h&eacute;j bels&#337; v&aacute;ltoz&oacute;ihoz val&oacute; hozz&aacute;f&eacute;r&eacute;s.</p>
                    </li><li class="listitem">
                            <p><span class="strong"><strong>K&uuml;ls&#337; parancsok</strong></span> - azok a parancsok amelyek programok form&aacute;j&aacute;ban valahol a f&aacute;jlrendszerben tal&aacute;lhat&oacute;ak.</p>    
                    </li></ul></div>
            <p>Ugyanolyan n&eacute;v eset&eacute;n a priorit&aacute;si sorrend alias, f&uuml;ggv&eacute;ny, be&eacute;p&iacute;tett majd k&uuml;ls&#337; parancs.</p>
            <p><a name="cmd_help"></a><a class="indexterm" name="d5e1134"></a>A Bash h&eacute;jba &eacute;p&iacute;tett parancsokra le&iacute;r&aacute;st a Linux rendszerekben a <span class="command"><strong>help</strong></span> paranccsal kapunk. A <span class="command"><strong>help</strong></span> argumentum n&eacute;lk&uuml;l a be&eacute;p&iacute;tett parancsokat, argumentummal egy parancs seg&eacute;dlet&eacute;t list&aacute;zza. Teh&aacute;t a  <span class="command"><strong>man 1 echo</strong></span> a Linux k&uuml;ls&#337; <span class="command"><strong>echo</strong></span>-j&aacute;nak, a <span class="command"><strong>help echo </strong></span>pedig a bels&#337; <span class="command"><strong>echo</strong></span> seg&eacute;dlet&eacute;t &iacute;rja ki. Bash alatt az ugyanolyan nev&#369; be&eacute;p&iacute;tett parancs fut a k&uuml;ls&#337; helyett (ha nem hivatkozunk a k&uuml;ls&#337;re speci&aacute;lisan).</p>
            <p>A k&uuml;ls&#337; parancsok programokat jelentenek, amelyeket a h&eacute;j meg tud keresni a f&aacute;jlrendszerben, &eacute;s a h&eacute;jat futtat&oacute; felhaszn&aacute;l&oacute;nak v&eacute;grehajt&aacute;si joga van re&aacute;juk. Ezeket, ha csak parancsnev&uuml;kkel adjuk meg a <code class="envar">PATH</code> k&ouml;rnyezeti v&aacute;ltoz&oacute;ban le&iacute;rt &uacute;tvonalakon keresi a h&eacute;j. Ennek tartalma egy el&eacute;r&eacute;si &uacute;t lista, az elemek kett&#337;sponttal vannak elv&aacute;lasztva:</p>
<pre class="screen">
$ echo $PATH
/usr/local/bin:/bin:/usr/bin:/home/lszabo/bin:
</pre>            

	<p>Ezekben a k&ouml;nyvt&aacute;rakban fogja a h&eacute;j a v&eacute;grehajthat&oacute; parancsokat keresni.</p>


  </div>
  <div class="sect1" title="Alias-ok vagy helyettes&iacute;t&#337; nevek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_alias">Alias-ok vagy helyettes&iacute;t&#337; nevek</h2></div></div></div>
          <p>Az alias-ok vagy helyettes&iacute;t&#337; nevek arra szolg&aacute;lnak, hogy a gyakran haszn&aacute;lt, t&ouml;bb opci&oacute;val megh&iacute;vott programoknak egy helyettes&iacute;t&#337; nevet adjunk, &eacute;s gyorsabban, egyszer&#369;bben hivatkozzunk r&aacute;juk.  Jellegzetes p&eacute;lda a Linuxon az <span class="command"><strong>ls</strong></span> parancsot helyettes&iacute;t&#337; alias, amely sz&iacute;nes ki&iacute;r&aacute;ssal h&iacute;vja meg az <span class="command"><strong>ls</strong></span>-t. L&eacute;trehoz&aacute;sa az <span class="command"><strong>alias</strong></span> paranccsal t&ouml;rt&eacute;nik:
  </p>
  <pre class="screen">
$ alias ls='ls --color=tty'
  </pre>


<p>Amint l&aacute;that&oacute;, az alias l&eacute;trehoz&aacute;s tulajdonk&eacute;ppen a n&eacute;vnek egy karakterl&aacute;ncot feleltet meg, &eacute;s megh&iacute;v&aacute;sakor ez helyettes&iacute;t&#337;dik a parancssorra. A helyettes&iacute;t&#337; neveknek els&#337;bbs&eacute;g&uuml;k van az ugyanolyan nev&#369; parancsokhoz k&eacute;pest amikor megh&iacute;vjuk &#337;ket. T&ouml;rl&eacute;s&uuml;k az <span class="command"><strong>unalias</strong></span> , a m&aacute;r defini&aacute;lt alias-ok list&aacute;z&aacute;sa egyszer&#369;en az <span class="command"><strong>alias</strong></span> paranccsal t&ouml;rt&eacute;nik.</p>
  </div>     
  <div class="sect1" title="A parancsv&eacute;grehajt&aacute;s"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1156">A parancsv&eacute;grehajt&aacute;s</h2></div></div></div>
          <p>Hogyan fut le egy egyszer&#369; parancsv&eacute;grehajt&aacute;s? Be&eacute;p&iacute;tett parancsok eset&eacute;ben a  h&eacute;j v&eacute;gzi ezt. K&uuml;ls&#337; parancsok, azaz programok futtat&aacute;sa sor&aacute;n, pl. ha be&iacute;rjuk parancsk&eacute;nt az <span class="command"><strong>ls</strong></span> parancsot, az al&aacute;bbi t&ouml;rt&eacute;nik:
          </p>

  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
            <p>a h&eacute;j elind&iacute;tja az <span class="command"><strong>ls</strong></span>-t (&uacute;j fi&uacute; folyamatot ind&iacute;t, &eacute;s abban fut az <span class="command"><strong>ls</strong></span>)</p>
    </li><li class="listitem">
            <p>"h&aacute;tt&eacute;rbe vonul" (v&aacute;r am&iacute;g az <span class="command"><strong>ls</strong></span> lefut)</p>
    </li><li class="listitem">
            <p>ez alatt amennyiben az <span class="command"><strong>ls</strong></span> &iacute;r, a sz&ouml;veg a termin&aacute;lra ker&uuml;l, ha olvasna, a termin&aacute;lr&oacute;l olvas</p>    
    </li><li class="listitem">
            <p>ha az <span class="command"><strong>ls</strong></span> lefutott &eacute;s kil&eacute;pett a h&eacute;j ki&iacute;rja a k&eacute;szenl&eacute;ti jelet.</p>    
    </li></ul></div>
  
  <p>Egy parancssoron (az &uacute;j sor elv&aacute;laszt&oacute; karakterig tart&oacute; karakterl&aacute;nc) &aacute;ltal&aacute;ban egy programot ind&iacute;tunk el. Megtehetj&uuml;k, hogy t&ouml;bbet ind&iacute;tsunk el egyszerre, ha k&ouml;zt&uuml;k a <span class="command"><strong>;</strong></span>-t haszn&aacute;ljuk mint elv&aacute;laszt&oacute; jelet.</p>
  <pre class="screen">
$ echo "rendez&eacute;s indul" ; sort szoveg.txt;  echo "v&eacute;ge" 
rendez&eacute;s indul
v&eacute;ge
$ 
</pre>  
  <p>Ilyenkor a m&aacute;sodik parancs megv&aacute;rja az els&#337;t, teh&aacute;t nem p&aacute;rhuzamosan hajt&oacute;dnak v&eacute;gre, ugyanaz t&ouml;rt&eacute;nik mintha 2 parancssort &iacute;rtunk volna.</p>
  <p>A parancssoron elind&iacute;tott programr&oacute;l azt mondjuk, hogy "el&#337;t&eacute;rben fut"; mivel a termin&aacute;lra &iacute;r, &eacute;s ilyenkor a h&eacute;j nem adja vissza a k&eacute;szenl&eacute;ti jelet (<span class="emphasis"><em>prompt</em></span>): azt jelzi ezzel, hogy nem fogad el &uacute;j parancsot az el&#337;z&#337;leg elind&iacute;tott befejez&eacute;s&eacute;ig.</p> 

  </div>
  <div class="sect1" title="H&aacute;tt&eacute;rben val&oacute; v&eacute;grehajt&aacute;s"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1180">H&aacute;tt&eacute;rben val&oacute; v&eacute;grehajt&aacute;s</h2></div></div></div>
          <p>Megtehetj&uuml;k, hogy a parancsot "<span class="emphasis"><em>h&aacute;tt&eacute;rben</em></span>" futtassunk; ilyenkor a h&eacute;j visszaadja a k&eacute;szenl&eacute;ti jelet, &eacute;s &uacute;j parancsot &uuml;thet&uuml;nk be. A h&aacute;tt&eacute;rben futtat&aacute;st k&eacute;tf&eacute;lek&eacute;ppen v&aacute;lthatjuk ki:</p>
          
   <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
              <p>a parancssort a parancs ind&iacute;t&aacute;sakor az <span class="command"><strong>&amp;</strong></span> jellel z&aacute;rjuk, ilyenkor a folyamat azonnal a h&aacute;tt&eacute;rben indul</p>
	  </li><li class="listitem">
              <p>az el&#337;t&eacute;rben fut&oacute; folyamatot felf&uuml;ggesztj&uuml;k (<span class="emphasis"><em>suspend</em></span>) a Ctrl-Z billenty&#369; kombin&aacute;ci&oacute;val a termin&aacute;lr&oacute;l , majd a <span class="command"><strong>bg</strong></span> (<span class="emphasis"><em>background</em></span>) paranccsal h&aacute;tt&eacute;rben ind&iacute;tjuk</p>
	  </li></ol></div>

      <p>A folyamatnak a <code class="literal">Ctrl-Z</code> kombin&aacute;ci&oacute;val <span class="emphasis"><em><a class="link" href="#signal" title="Jelz&eacute;sek">jelz&eacute;st</a></em></span> k&uuml;ld&uuml;nk: a felf&uuml;ggeszt&eacute;s tipikus p&eacute;lda erre. Lenyomunk egy billenty&#369;t amelyet egy megszak&iacute;t&aacute;s k&ouml;zvet&iacute;t&eacute;s&eacute;re haszn&aacute;lunk, &eacute;s azt a h&eacute;j rendszert vez&eacute;rl&#337; kernelen kereszt&uuml;l eljuttatja a folyamathoz.</p>
      <p>Mindk&eacute;t esetben a h&eacute;j 2 sz&aacute;mot, egy <a class="link" href="#job" title="A Unix feladat (job) fogalma">feladat</a> (<span class="emphasis"><em>job</em></span>) azonos&iacute;t&oacute;t illetve egy folyamat azonos&iacute;t&oacute;t &iacute;r ki sz&aacute;munkra.</p>
<pre class="screen">
$ sort rendezetlen.txt &gt; rendezett.txt &amp;
[1] 4467
$
</pre>
<p>Ezek seg&iacute;ts&eacute;g&eacute;vel hivatkozhatunk k&eacute;s&#337;bb az elind&iacute;tott munk&aacute;ra, p&eacute;ld&aacute;ul az el&#337;t&eacute;rbe h&iacute;vhatjuk az <span class="command"><strong>fg</strong></span> (<span class="emphasis"><em>foreground</em></span>) paranccsal.</p>
<p>A munk&aacute;k illetve folyamatok kezel&eacute;s&eacute;vel, valamint ezek k&uuml;l&ouml;nb&ouml;z&#337; ind&iacute;t&aacute;si m&oacute;dj&aacute;val k&eacute;s&#337;bb, a <a class="link" href="#process" title="11. fejezet - Folyamatok kezel&eacute;se">Folyamatok kezel&eacute;se</a> c. fejezetben foglalkozunk, itt  r&ouml;viden megadtuk a haszn&aacute;lathoz sz&uuml;ks&eacute;ges szintaxist.</p>


  </div>


  <div class="sect1" title="A k&ouml;rnyezeti v&aacute;ltoz&oacute;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="environ">A k&ouml;rnyezeti v&aacute;ltoz&oacute;k</h2></div></div></div>
          <p>A h&eacute;j, hasonl&oacute;an m&aacute;s programnyelvekhez az inform&aacute;ci&oacute;kat, adatokat n&eacute;vvel l&aacute;tja el &eacute;s v&aacute;ltoz&oacute;knak nevezi &#337;ket. R&eacute;szletesen a k&ouml;vetkez&#337; fejezetben foglalkozunk ezekkel. Ebben a fejezetben kimondottan a parancshaszn&aacute;lattal kapcsolatos k&ouml;rnyezeti v&aacute;ltoz&oacute;k miatt eml&iacute;tj&uuml;k &#337;ket.</p>
          <p>Egy folyamat a k&ouml;rnyezet&eacute;r&#337;l (az &#337;t futtat&oacute; oper&aacute;ci&oacute;s rendszerr&#337;l, g&eacute;pr&#337;l, be&aacute;ll&iacute;t&aacute;sokr&oacute;l) inform&aacute;ci&oacute;kat tudhat meg. Ezeket az inform&aacute;ci&oacute;kat v&aacute;ltoz&oacute;kon kereszt&uuml;l kapja (n&eacute;v-&eacute;rt&eacute;k p&aacute;rok). Nagy bet&#369;s v&aacute;ltoz&oacute; nevekkel adjuk meg ezeket, k&uuml;l&ouml;nbs&eacute;get t&eacute;ve &iacute;gy (a programoz&oacute; sz&aacute;m&aacute;ra) a saj&aacute;t, illetve az oper&aacute;ci&oacute;s rendszert&#337;l kapott v&aacute;ltoz&oacute;k k&ouml;zt. ilyen v&aacute;ltoz&oacute;t m&aacute;r l&aacute;ttunk: p&eacute;ld&aacute;ul a v&eacute;grehajthat&oacute; f&aacute;jlok el&eacute;r&eacute;si &uacute;tja, a <code class="envar">PATH</code> v&aacute;ltoz&oacute;.</p>
          <p>N&eacute;h&aacute;ny k&ouml;rnyezeti v&aacute;ltoz&oacute;t az al&aacute;bbi list&aacute;ban l&aacute;thatunk. a be&aacute;ll&iacute;tott v&aacute;ltoz&oacute;kat a <span class="command"><strong>printenv</strong></span> vagy <span class="command"><strong>env</strong></span> parancsokkal lehet kilist&aacute;zni. P&eacute;ld&aacute;ul az al&aacute;bbi v&aacute;ltoz&oacute;k szinte minden g&eacute;pen be vannak &aacute;ll&iacute;tva:</p>
<pre class="programlisting">
TERM=xterm
SHELL=/bin/bash
USER=lszabo
MAIL=/var/spool/mail/lszabo
PATH=/bin:/usr/local/bin:/bin:/usr/bin:/home/lszabo/bin
PWD=/home/lszabo
EDITOR=/usr/bin/vim
LANG=en_US.UTF-8
HOME=/home/lszabo
</pre>

  </div>

  <div class="sect1" title="A h&eacute;j ind&iacute;t&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1215">A h&eacute;j ind&iacute;t&aacute;sa</h2></div></div></div>
          <p>Ind&iacute;t&aacute;skor a h&eacute;j v&eacute;gigolvas n&eacute;h&aacute;ny konfigur&aacute;ci&oacute;s f&aacute;jlt, ezek v&aacute;ltoz&oacute;kat &aacute;ll&iacute;thatnak vagy programokat ind&iacute;thatnak, amelyek meghat&aacute;rozz&aacute;k azt a k&ouml;rnyezetet amelyben a h&eacute;j indul.</p>
<p>A konfigur&aacute;ci&oacute;s f&aacute;jlok k&uuml;l&ouml;nb&ouml;znek, att&oacute;l f&uuml;gg&#337;en, hogy a h&eacute;j interakt&iacute;van fut vagy szkriptet hajt v&eacute;gre. Az interakt&iacute;van futtatott h&eacute;j eset&eacute;ben a bejelentkez&eacute;skor indul&oacute; h&eacute;j (<span class="emphasis"><em>login shell</em></span>) is k&uuml;l&ouml;n f&aacute;jlokat olvas. Interakt&iacute;v h&eacute;jnak nevezz&uuml;k azokat a h&eacute;jakat amelyek direkt a termin&aacute;llal dolgoznak - onnan kapj&aacute;k a parancsokat. Egy adott szkriptet futtat&oacute; h&eacute;j &aacute;ltal&aacute;ban nem interakt&iacute;v.</p>
          <div class="note" title="M&aacute;s shell" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: M&aacute;s shell"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">M&aacute;s shell</th></tr><tr><td align="left" valign="top"><p>Az al&aacute;bbi konfigur&aacute;ci&oacute;s f&aacute;jl nevek a Bash-re &eacute;rv&eacute;nyesek, m&aacute;s h&eacute;jak esetenk&eacute;nt m&aacute;s ind&iacute;t&oacute; f&aacute;jlokat haszn&aacute;lhatnak.</p></td></tr></table></div>
          
          <p>Egyes konfigur&aacute;ci&oacute;s f&aacute;jlok  k&ouml;z&ouml;sek, teh&aacute;t b&aacute;rmely felhaszn&aacute;l&oacute; bel&eacute;p&eacute;sekor &eacute;rtelmez&#337;dnek, &eacute;s a rendszer <code class="filename">/etc</code>, konfigur&aacute;ci&oacute;s f&aacute;jlokat tartalmaz&oacute; k&ouml;nyvt&aacute;r&aacute;ban tal&aacute;lhat&oacute;ak (pl.: <code class="filename">/etc/profile</code>, <code class="filename">/etc/bashrc</code>). Ezen k&iacute;v&uuml;l minden felhaszn&aacute;l&oacute;nak saj&aacute;t f&aacute;jlai vannak a home k&ouml;nyvt&aacute;r&aacute;ban (<code class="filename">.profile</code>, <code class="filename">.bash_profile</code>, <code class="filename">.bashrc</code>). Ezeket szabadon szerkesztheti, &eacute;s amennyiben ind&iacute;t&aacute;skor automata m&oacute;don akar v&aacute;ltoz&oacute;kat, alias defin&iacute;ci&oacute;kat, stb. be&aacute;ll&iacute;tani, azt innen teheti meg. A <code class="filename">.profile</code> &eacute;s <code class="filename">.bash_profile</code> f&aacute;jlok a bejelentkez&eacute;si interakt&iacute;v h&eacute;j ind&iacute;t&aacute;sn&aacute;l &eacute;rtelmez&#337;dnek (a megadott sorrendben).</p>
          <p>A <code class="filename">.bashrc</code> f&aacute;jl is tartalmaz be&aacute;ll&iacute;t&aacute;sokat, ezek m&aacute;s  interakt&iacute;van ind&iacute;tott h&eacute;j ind&iacute;t&aacute;sakor &eacute;rtelmez&#337;dnek.</p>
<p>A nem interakt&iacute;v h&eacute;jaknak k&uuml;l&ouml;n ind&iacute;t&oacute; &aacute;llom&aacute;ny jel&ouml;lhet&uuml;nk ki a BASH_ENV v&aacute;ltoz&oacute; seg&iacute;ts&eacute;g&eacute;vel.</p>
          <p>Ha &aacute;lland&oacute; jelleg&#369; be&aacute;ll&iacute;t&aacute;sokat akarunk v&eacute;gezni, akkor ezeket a f&aacute;jlokat kell megv&aacute;ltoztatni. P&eacute;ld&aacute;ul, ha gyorsabb interakt&iacute;v munka miatt l&eacute;tre akarunk hozni egy <span class="command"><strong>alias</strong></span>-t, akkor ezt a <code class="filename">.bash_profile</code> f&aacute;jl v&eacute;g&eacute;re &iacute;rjuk. A <span class="command"><strong>locate</strong></span> program f&aacute;jlnevek gyors keres&eacute;s&eacute;re szolg&aacute;l, haszn&aacute;lata:</p>
<div class="cmdsynopsis"><p>
  <code class="command">locate</code> 
    <em class="replaceable"><code>sztring</code></em> 
</p></div>
<p>, kilist&aacute;zza azokat a rendszeren tal&aacute;lhat&oacute; f&aacute;jlneveket amelyekben megtal&aacute;lhat&oacute; az adott sztring. Ha r&ouml;vid&iacute;tve szeretn&eacute;nk haszn&aacute;lni, pl. csak:</p>

<pre class="screen">
$ l sztring
</pre>
<p>, &eacute;s azt szeretn&eacute;nk, hogy ezt minden shell ind&iacute;t&aacute;skor megtehess&uuml;k, ezt kell &iacute;rnunk a <code class="filename">.bash_profile</code> v&eacute;g&eacute;re:</p>
<pre class="programlisting">
alias l='locate'
</pre>

  </div>

  <div class="sect1" title="Nyelvi karakterk&eacute;szlet be&aacute;ll&iacute;t&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1248">Nyelvi karakterk&eacute;szlet be&aacute;ll&iacute;t&aacute;sa</h2></div></div></div>
          <p>A h&eacute;j karakterk&eacute;szlet&eacute;nek be&aacute;ll&iacute;t&aacute;sa fontos, amennyiben p&eacute;ld&aacute;ul a magyar nyelv karaktereit akarjuk haszn&aacute;lni. Ezt a <code class="envar">LANG</code> illetve az <code class="envar">LC_</code> kezd&#337;bet&#369;ket tartalmaz&oacute; h&eacute;j v&aacute;ltoz&oacute;kkal tehetj&uuml;k. K&eacute;t param&eacute;tert kell ilyenkor be&aacute;ll&iacute;tani: a karakterk&oacute;dol&aacute;st (<span class="emphasis"><em>encoding</em></span>) &eacute;s a nyelvet, esetleg orsz&aacute;got amelyben az illet&#337; nyelvet besz&eacute;lik. Az <code class="envar">LC_</code> nev&#369; v&aacute;ltoz&oacute;kkal (<code class="envar">LC_ALL</code>, <code class="envar">LC_TIME</code>, <code class="envar">LC_NUMERIC</code>) a nyelven k&iacute;v&uuml;l k&uuml;l&ouml;nb&ouml;z&#337; helyi be&aacute;ll&iacute;t&aacute;sokat lehet megadni (id&#337;, sz&aacute;mok, stb. form&aacute;z&aacute;sa).          </p>
          <p>A nyelvi be&aacute;ll&iacute;t&aacute;st, amennyiben nincsenek <code class="envar">LC_</code> v&aacute;ltoz&oacute;k megadva, els&#337;dlegesen a <code class="envar">LANG</code> v&aacute;ltoz&oacute; adja meg, ennek lehets&eacute;ges &eacute;rt&eacute;keit (ami f&uuml;gg att&oacute;l, hogy fel vannak-e telep&iacute;tve a sz&uuml;ks&eacute;ges szoftverek a rendszerre), a <span class="command"><strong>locale -a</strong></span> paranccsal lehet kilist&aacute;zni.</p> 

          <p>Az UTF-8 k&oacute;dol&aacute;s haszn&aacute;lata ma m&aacute;r jelent&#337;sen megk&ouml;nny&iacute;ti ezeket a be&aacute;ll&iacute;t&aacute;sokat.</p>
  </div>

  <div class="sect1" title="A standard bemenet &eacute;s kimenet"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1263">A standard bemenet &eacute;s kimenet</h2></div></div></div>
          <p>A UNIX egyik alapelve, hogy minden eszk&ouml;zt, hardvert, stb.-it f&aacute;jlk&eacute;nt kezel a virtu&aacute;lis f&aacute;jlrendszere. &Iacute;gy az eszk&ouml;z&ouml;kre val&oacute; &iacute;r&aacute;s mindig egyszer&#369; f&aacute;jlba val&oacute; &iacute;r&aacute;sra vezethet&#337; vissza a programok szintj&eacute;n, ami nagyon leegyszer&#369;s&iacute;ti kezel&eacute;s&uuml;ket. Gyakorlatilag minden rendszer komponens, amelyre &iacute;rni illetve ahonnan olvasni lehet f&aacute;jlk&eacute;nt viselkedik (a k&ouml;z&ouml;ns&eacute;ges f&aacute;jlt&oacute;l kezdve a termin&aacute;l billenty&#369;zet&eacute;t kereszt&uuml;l a merevlemezig). </p>

<p>Megjegyz&eacute;s: a "minden eszk&ouml;z f&aacute;jl" &aacute;ll&iacute;t&aacute;s (b&aacute;r &aacute;ltal&aacute;ban igaz, &eacute;s j&oacute;l haszn&aacute;lhat&oacute;) al&oacute;l vannak kiv&eacute;telek, mint pl. Linux alatt a h&aacute;l&oacute;zati k&aacute;rty&aacute;k.</p>

  <p>Egy C nyelven &iacute;rt program mindig (legkevesebb) 3 f&aacute;jlt tal&aacute;l nyitva ind&iacute;t&aacute;skor. Ezeket a programoz&oacute;nak nem kell k&uuml;l&ouml;n el&#337;k&eacute;sz&iacute;tenie vagy megnyitnia. Ezek: a standard bemenet, kimenet &eacute;s hibakimenet. Mindh&aacute;rmat f&aacute;jlk&eacute;nt kezeli a h&eacute;j (ak&aacute;rcsak a C nyelv). Jel&ouml;l&eacute;s&uuml;kre eg&eacute;sz sz&aacute;mot tartalmaz&oacute; azonos&iacute;t&oacute;kat haszn&aacute;l a C nyelv akkor, amikor els&#337; szint&#369; f&aacute;jlkezel&#337; f&uuml;ggv&eacute;nyeket haszn&aacute;l.</p>


  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
      <p>standard bemenet, azonos&iacute;t&oacute;: 0</p>
    </li><li class="listitem">
       <p>standard kimenet, azonos&iacute;t&oacute;: 1</p>
    </li><li class="listitem">
       <p>standard hibakimenet, azonos&iacute;t&oacute;: 2</p>    
    </li></ul></div>
  <p>Ezeket az azonos&iacute;t&oacute;kat a h&eacute;j is haszn&aacute;lja, &eacute;s a h&eacute;j &aacute;ltal elind&iacute;tott programok gyakran haszn&aacute;lj&aacute;k ezt a 3 f&aacute;jlt.</p>
  <p>Amennyiben a <span class="command"><strong>cat</strong></span> parancsot argumentum n&eacute;lk&uuml;l ind&iacute;tjuk, a bemeneti f&aacute;jl helyett a standard bemenetet fogja olvasni &eacute;s &eacute;rtelemszer&#369;en a standard kimenetre &iacute;r. &Iacute;gy gyakorlatilag a standard bemenetet (ami a termin&aacute;l haszn&aacute;lata eset&eacute;ben a billenty&#369;zet) &aacute;tm&aacute;solja termin&aacute;l kimenet&eacute;re, ha sorokat kezd&uuml;nk be&iacute;rni:</p>

<pre class="screen">
$ cat
alpha
alpha
beta
beta
gamma
gamma
$ 
</pre>


<p>T&ouml;bb Unix sz&ouml;veget feldolgoz&oacute; program m&#369;k&ouml;dik ezzel a logik&aacute;val, &aacute;ltal&aacute;ban valamilyen m&#369;veletet is v&eacute;geznek a beolvasott sz&ouml;vegsoron, &iacute;gy sz&#369;r&#337;knek nevezz&uuml;k &#337;ket. A <span class="command"><strong>cat</strong></span> a fenti m&#369;k&ouml;d&eacute;si m&oacute;dban egyszer&#369;en &aacute;tm&aacute;solja a standard bemenetet a kimenetre.</p>


  </div>

  <div class="sect1" title="&Aacute;tir&aacute;ny&iacute;t&aacute;sok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="redirection">&Aacute;tir&aacute;ny&iacute;t&aacute;sok</h2></div></div></div>
          <p>&Aacute;tir&aacute;ny&iacute;t&aacute;snak nevezz&uuml;k az a m&#369;veletet, amikor egy adott kimenetre (vagy bemenetr&#337;l) &eacute;rkez&#337; adatsort egy, az eredetit&#337;l k&uuml;l&ouml;nb&ouml;z&#337; kimenetre k&uuml;ld&uuml;nk (illetve bemenetr&#337;l fogadunk). P&eacute;ld&aacute;ul, egy standard bemenetr&#337;l olvas&oacute; programnak egy f&aacute;jlb&oacute;l &eacute;rkez&#337; sz&ouml;veget vagy adatsort k&uuml;ld&uuml;nk, &uacute;gy, hogy a programnak nem lesz tudom&aacute;sa, honnan &eacute;rkezik a sz&ouml;veg. A h&eacute;j n&eacute;h&aacute;ny metakaraktert haszn&aacute;l a standard bemenet &eacute;s kimenet illetve hibakimenet &aacute;tir&aacute;ny&iacute;t&aacute;s&aacute;ra, ezeket &aacute;tir&aacute;ny&iacute;t&aacute;si oper&aacute;toroknak nevezz&uuml;k.</p>
          <div class="sect2" title="A standard bemenet &aacute;tir&aacute;ny&iacute;t&aacute;sa ( < )"><div class="titlepage"><div><div><h3 class="title" id="d5e1284">A standard bemenet &aacute;tir&aacute;ny&iacute;t&aacute;sa ( &lt; )</h3></div></div></div>
                  <p>A <span class="command"><strong>sort</strong></span>, ak&aacute;rcsak a <span class="command"><strong>cat</strong></span>, argumentum n&eacute;lk&uuml;l ind&iacute;tva a standard bemenetet olvassa, &eacute;s az ott &eacute;rkez&#337; sorokat rendezi.  Az al&aacute;bbi p&eacute;ld&aacute;ban a <span class="command"><strong>sort</strong></span> program bemenete nem a termin&aacute;l &aacute;ltal gener&aacute;lt standard bemenetr&#337;l j&ouml;n, ahogy az a <span class="command"><strong>sort</strong></span> egyszer&#369; futtat&aacute;s&aacute;n&aacute;l tenn&eacute;, hanem a <code class="filename">lista.txt</code> nev&#369; f&aacute;jlb&oacute;l. A &lt; jel (oper&aacute;tor) megv&aacute;ltoztatja a <span class="command"><strong>sort</strong></span> standard bemenet&eacute;nek forr&aacute;s&aacute;t, &eacute;s a jel jobb oldal&aacute;n &aacute;ll&oacute; f&aacute;jl tartalm&aacute;t ir&aacute;ny&iacute;tja a program bemenet&eacute;re. A <span class="command"><strong>sort</strong></span> nem tud arr&oacute;l, hogy pontosan honnan kapja a bemenetet: rendezi a standard bemenetre &eacute;rkez&#337; sz&ouml;veget.
                  </p>
          </div>        
          <div class="sect2" title="A standard kimenet f&aacute;jlba ir&aacute;ny&iacute;t&aacute;sa ( &gt; )"><div class="titlepage"><div><div><h3 class="title" id="d5e1294">A standard kimenet f&aacute;jlba ir&aacute;ny&iacute;t&aacute;sa ( &gt; )</h3></div></div></div>
                  <p>Az al&aacute;bbi p&eacute;ld&aacute;ban a <span class="command"><strong>cat</strong></span> program nem a termin&aacute;lra, hanem a <code class="filename">lista.txt</code> nev&#369; f&aacute;jlba &iacute;r, &eacute;s a standard bemenetr&#337;l olvas:</p>
<pre class="screen">
#a cat-tel a standard bemenetr&#337;l olvasunk &eacute;s standard
#kimenet&eacute;t egy f&aacute;jlba k&uuml;ldj&uuml;k
$ cat &gt; lista.txt
delta
omega
alpha
beta
#a termin&aacute;lra list&aacute;zzuk a f&aacute;jlt
$ cat lista.txt
delta
omega
alpha
beta 
$ 
</pre>                  

<p>A &gt; jel (f&aacute;jlba ir&aacute;ny&iacute;t&aacute;s oper&aacute;tor) v&eacute;grehajt&aacute;s el&#337;tt t&ouml;rli a r&eacute;gi f&aacute;jlt ha ilyen nev&#369; m&aacute;r l&eacute;tezik. A sz&ouml;veg bevitel&eacute;t a Ctrl-D karakterrel z&aacute;rjuk (f&aacute;jl v&eacute;ge jel). A parancs &iacute;gy alkalmas egy kis sz&ouml;veges f&aacute;jl l&eacute;trehoz&aacute;s&aacute;ra, amelyet a fejezet p&eacute;ld&aacute;iban haszn&aacute;ltunk.</p>

<p>A k&eacute;t t&iacute;pus&uacute; &aacute;tir&aacute;ny&iacute;t&aacute;st egyszerre is haszn&aacute;lhatjuk a parancssoron:</p>
<pre class="screen">
$ sort &lt; lista.txt &gt; rendezett.txt
</pre>
<p>a <span class="command"><strong>sort</strong></span> a <code class="filename">lista.txt</code> f&aacute;jlb&oacute;l olvas &eacute;s a <code class="filename">rendezett.txt</code> f&aacute;jlba &iacute;r.</p>

<p>A fenti &aacute;tir&aacute;ny&iacute;t&aacute;sok tulajdonk&eacute;ppen az al&aacute;bbit jelentik:</p>
<pre class="screen">
$ sort &lt; lista.txt  1&gt; rendezett.txt
$ 
</pre>
<p>de a standard bemenet &eacute;s kimenetet jelent&#337; f&aacute;jl azonos&iacute;t&oacute;kat nem kell ki&iacute;rni.</p>

          </div>

          <div class="sect2" title="A kimenet hozz&aacute;f&#369;z&eacute;se egy f&aacute;jlhoz ( &gt;&gt; )"><div class="titlepage"><div><div><h3 class="title" id="d5e1310">A kimenet hozz&aacute;f&#369;z&eacute;se egy f&aacute;jlhoz ( &gt;&gt; )</h3></div></div></div>
                  <p>Ezzel az &aacute;tir&aacute;ny&iacute;t&aacute;ssal hozz&aacute;f&#369;z&eacute;s m&oacute;dban &iacute;runk a kimeneti f&aacute;jlba, teh&aacute;t a f&aacute;jl tartalma amennyiben l&eacute;tezik megmarad, &eacute;s az &uacute;j sorok a f&aacute;jl v&eacute;g&eacute;re ker&uuml;lnek.</p>

                  <pre class="screen">
$ echo elso &gt; f.txt
$ echo masodik &gt;&gt; f.txt
$ echo harmadik &gt;&gt; ff.txt
$ cat f.txt
elso
masodik
harmadik
$ 
</pre>                  
          </div>
  </div>
  <div class="sect1" title="Cs&#337;vezet&eacute;kek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1314">Cs&#337;vezet&eacute;kek</h2></div></div></div>
          <p>A cs&#337;vezet&eacute;kek kommunik&aacute;ci&oacute;s csatorn&aacute;k, amelyeken kereszt&uuml;l egy folyamat kimenete egy m&aacute;sik bemenet&eacute;re ir&aacute;ny&iacute;that&oacute; egy rendk&iacute;v&uuml;l egyszer&#369; szintaxissal a parancssoron.  A deklar&aacute;l&aacute;shoz haszn&aacute;lt jel a <code class="literal">|</code> elv&aacute;laszt&oacute;jel. Az al&aacute;bbi p&eacute;ld&aacute;ban a <span class="command"><strong>cat</strong></span> kimenet&eacute;t a <span class="command"><strong>sort</strong></span> standard bemenet&eacute;re ir&aacute;ny&iacute;tjuk:
          </p>
<pre class="screen">
$ cat lista.txt | sort
alpha
beta
delta
omega
$ 
</pre>
<p>Az &aacute;tvitel szinkroniz&aacute;ci&oacute;r&oacute;l az oper&aacute;ci&oacute;s rendszer (a kernel) gondoskodik. Az eml&iacute;tett &aacute;tir&aacute;ny&iacute;t&aacute;sok t&ouml;bbsz&ouml;r is alkalmazhat&oacute;ak ugyanazon a parancssoron. Az al&aacute;bbi parancssoron a <code class="filename">lista.txt</code> f&aacute;jl a <span class="command"><strong>cat</strong></span>-b&#337;l a <span class="command"><strong>sort</strong></span>-ra, onnan pedig a <span class="command"><strong>head</strong></span> parancs bemenet&eacute;re ker&uuml;l:</p>
<pre class="screen">
$ cat lista.txt | sort | head -1
alpha
$ 
</pre>


<p><a name="cmd_head"></a>A <a class="indexterm" name="d5e1328"></a> <span class="command"><strong>head</strong></span> szint&eacute;n sz&ouml;vegsorokat sz&#369;r&#337; parancs: a bemenet&eacute;re ker&uuml;l&#337; sz&ouml;veges f&aacute;jl vagy f&aacute;jlok els&#337; sorait list&aacute;zza, m&eacute;gpedig annyi sort, amennyit eg&eacute;sz sz&aacute;mot tartalmaz&oacute; opci&oacute;ja megad. &Iacute;gy a fenti parancs kimenete csak  a rendezett lista els&#337; sora. A <span class="command"><strong>head</strong></span> haszn&aacute;lata:</p>
<div class="cmdsynopsis"><p>
  <code class="command">head</code> 
   [-n]
   {<em class="replaceable"><code>f&aacute;jl</code></em>...}
</p></div>
<p>A list&aacute;zand&oacute; sorok sz&aacute;m&aacute;t megad&oacute; kapcsol&oacute; opcion&aacute;lis, amennyiben nem adjuk meg, implicit &eacute;rt&eacute;ke 10.</p>
<p>Itt eml&iacute;tj&uuml;k meg a <span class="command"><strong>tee</strong></span> parancsot is, amely sorozatos feldolgoz&aacute;s eset&eacute;n biztos&iacute;thatja egy k&ouml;ztes kimenet elment&eacute;s&eacute;t, ha arra k&eacute;s&#337;bb sz&uuml;ks&eacute;g lehet. A <span class="command"><strong>tee</strong></span> haszn&aacute;lata az al&aacute;bbi:</p>
<div class="cmdsynopsis"><p>
  <code class="command">tee</code> 
   [-a]
   {<em class="replaceable"><code>f&aacute;jl</code></em>}
</p></div>


<p>A parancs a bemenetet a kimenetre &eacute;s az megadott nev&#369; f&aacute;jlba &iacute;rja (a <code class="option">-a</code> kapcsol&oacute;val hozz&aacute;f&#369;zi, n&eacute;lk&uuml;le &uacute;j f&aacute;jlt nyit). Az al&aacute;bbi esetben v&eacute;grehajt&oacute;dik ugyanaz a feldolgoz&aacute;s mint a fenti p&eacute;ld&aacute;ban, de ez&uacute;ttal a <span class="command"><strong>sort</strong></span> &aacute;ltal el&#337;&aacute;ll&iacute;tott teljes rendezett lista is elmen&eacute;sre ker&uuml;l a <code class="filename">rendezett.txt</code> f&aacute;jlba:</p>
<pre class="screen">
$ cat lista.txt | sort | tee rendezett.txt | head -1
alpha
$ 
</pre>
</div>
<div class="sect1" title="Speci&aacute;lis eszk&ouml;z&ouml;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1351">Speci&aacute;lis eszk&ouml;z&ouml;k</h2></div></div></div>

        <p>A f&aacute;jlokon k&iacute;v&uuml;l eszk&ouml;z&ouml;ket is haszn&aacute;lhatunk a ki-&eacute;s bemenetek &aacute;tir&aacute;ny&iacute;t&aacute;sakor. Ilyen p&eacute;ld&aacute;ul a <code class="filename">/dev/null</code> eszk&ouml;z, amely v&eacute;gtelen sok karaktert teljesen elnyel&#337; kimenetk&eacute;nt viselkedik. Erre lehet minden olyan kimenetet ir&aacute;ny&iacute;tani, amelyre nincs sz&uuml;ks&eacute;g: jelenl&eacute;te felesleges vagy zavar&oacute;.</p>
        <p>A standard hiba kimenet azonos&iacute;t&oacute;ja a 2-es, erre &iacute;r&oacute;dnak a parancsok hiba&uuml;zenetei. Ez lehet&#337;v&eacute; teszi a parancsok hasznos kimenet&eacute;nek &eacute;s a hiba&uuml;zeneteknek a kett&eacute;v&aacute;laszt&aacute;s&aacute;t. Interakt&iacute;van dolgozva a termin&aacute;lon, a parancsok &aacute;ltal az 1-es &eacute;s 2-es kimenetekre &iacute;rt sz&ouml;vegek egy&uuml;tt ker&uuml;lnek a termin&aacute;l kimenet&eacute;re.  Ha a hiba&uuml;zenetek nem &eacute;rdekelnek, csak a hasznos kimenet &aacute;t lehet ir&aacute;ny&iacute;tani &#337;ket a null eszk&ouml;zre. Ha az <code class="filename">1.txt</code> &eacute;s <code class="filename">2.txt</code> f&aacute;jlokr&oacute;l k&eacute;r&uuml;nk egy list&aacute;t az <span class="command"><strong>ls</strong></span>-el, amennyiben valamelyik nem l&eacute;tezik az <span class="command"><strong>ls</strong></span> hiba&uuml;zenete &ouml;sszekeveredik a kimeneten a hasznos inform&aacute;ci&oacute;val. Az al&aacute;bbi p&eacute;ld&aacute;ban a <span class="command"><strong>wc</strong></span> (<span class="emphasis"><em>word count</em></span>) paranccsal pr&oacute;b&aacute;lunk inform&aacute;ci&oacute;t nyerni sz&ouml;veges f&aacute;jlokr&oacute;l.</p>
<pre class="screen">
$ wc 1.txt
2 2 8 1.txt
</pre>
<p>A <span class="command"><strong>wc</strong></span>  az argumentum&aacute;ban megadott sz&ouml;veges f&aacute;jl sorainak, szavainak &eacute;s karaktereinek sz&aacute;m&aacute;t &iacute;rja ki, a h&aacute;rom sz&aacute;m ut&aacute;n a f&aacute;jl nev&eacute;vel. Haszn&aacute;lata</p>
<div class="cmdsynopsis"><p>
  <code class="command">wc</code> 
       [-l]
       [-w]
       [-c]
 
   [<em class="replaceable"><code>file</code></em>...]
</p></div>

<p>Opci&oacute;i megengedik k&uuml;l&ouml;n a sorok (<code class="option">-l</code>), szavak (<code class="option">-w</code>) vagy karakterek (<code class="option">-c</code>) list&aacute;z&aacute;s&aacute;t. T&ouml;bb f&aacute;jlt is megadhatunk a parancssor&aacute;n:</p>
<pre class="screen">
$ wc 1.txt 2.txt
 2  2  8 1.txt
 1  1 11 2.txt
 3  3 19 total
$ 
</pre>

<p>Ellenben ha p&eacute;ld&aacute;ul a <code class="filename">2.txt</code> nem l&eacute;tezik, ezt kapjuk:</p>
<pre class="screen">
$ wc 1.txt 2.txt
2 2 8 1.txt
wc: 2.txt: No such file or directory
2 2 8 total
$ 
</pre>


<p>Ha a 2-es kimenetet &aacute;tir&aacute;ny&iacute;tjuk a null perif&eacute;ri&aacute;ra, megszabadulunk a hiba&uuml;zenet kimenetbe val&oacute; besz&uacute;r&aacute;s&aacute;t&oacute;l:</p>
<pre class="screen">
$ wc 1.txt 2.txt 2&gt;/dev/null
2 2 8 1.txt
2 2 8 total
$ 
</pre>
  </div>

  <div class="sect1" title="A standard kimenet &eacute;s hibakimenet egyszerre t&ouml;rt&eacute;n&#337; &aacute;tir&aacute;ny&iacute;t&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1382">A  standard  kimenet &eacute;s hibakimenet egyszerre t&ouml;rt&eacute;n&#337; &aacute;tir&aacute;ny&iacute;t&aacute;sa</h2></div></div></div>
          <p>Vannak esetek, amikor mindk&eacute;t standard kimenetet (kimenet &eacute;s hibakimenet) k&uuml;l&ouml;n-k&uuml;l&ouml;n f&aacute;jlba vagy ugyanabba a f&aacute;jlba akarjuk ir&aacute;ny&iacute;tani. A k&uuml;l&ouml;n-k&uuml;l&ouml;n f&aacute;jlba val&oacute; ir&aacute;ny&iacute;t&aacute;shoz mindk&eacute;t kimenetnek meg kell adni az   &aacute;tir&aacute;ny&iacute;t&aacute;st:</p>
<pre class="screen">
$ sort lista.txt  &gt; rendezett.txt  2&gt; hibak.txt
$ 
</pre>          



<p>A parancs lefut&aacute;s&aacute;nak eredm&eacute;nye &eacute;s  hib&aacute;i k&uuml;l&ouml;n f&aacute;jlokban lesznek r&ouml;gz&iacute;tve.</p>

<p>A k&eacute;t kimenet ugyanabba a f&aacute;jlba val&oacute; ir&aacute;ny&iacute;t&aacute;s&aacute;ra a megold&aacute;s a k&ouml;vetkez&#337;: a kimenetet egy f&aacute;jlba ir&aacute;ny&iacute;tjuk &eacute;s ut&aacute;na a hiba kimenetet a kimenetre (a k&eacute;t &aacute;tir&aacute;ny&iacute;t&aacute;s sorrendje sz&aacute;m&iacute;t):</p>
<pre class="screen">
$ sort lista.txt  &gt;  rendezett.txt  2&gt;&amp;1
$
</pre>


<p>Ilyenkor nyilv&aacute;n semmit sem l&aacute;tunk a termin&aacute;lon, minden ki&iacute;rt sz&ouml;veg (ak&aacute;r eredm&eacute;ny, ak&aacute;r hiba) a <code class="filename">naplo.txt</code> nev&#369; f&aacute;jlba ker&uuml;l, &eacute;s onnan olvashatjuk el k&eacute;s&#337;bb. A parancs lefut&aacute;s&aacute;t pedig   meg kell v&aacute;rnunk (nincs k&eacute;szenl&eacute;ti jel csak ha a <span class="command"><strong>sort</strong></span> lefutott).  Ilyenkor megtehetj&uuml;k, hogy a feladatot a h&aacute;tt&eacute;rben futtatjuk (hiszen am&uacute;gy sem l&aacute;tunk semmit), az al&aacute;bbi  ind&iacute;t&aacute;ssal:</p>
<pre class="screen">
$ sort rendezetlen.txt &gt; rendezett.txt 2&gt;&amp;1  &amp;
[1] 5039
$
</pre>

<p>&Iacute;gy azonnal &uacute;j paranccsal foglalkozhatunk, nem kell a <span class="command"><strong>sort</strong></span> v&eacute;g&eacute;re v&aacute;rnunk.</p>
<p>Van olyan eset, amikor a k&eacute;t kimenetet ugyanabba a cs&#337;vezet&eacute;kbe szeretn&eacute;nk ir&aacute;ny&iacute;tani, ezt az al&aacute;bbi megold&aacute;ssal &eacute;rj&uuml;k el:</p>
<pre class="screen">
$ sort rendezetlen.txt 2&gt;&amp;1  |  cat  &gt; rendezett.txt
$
</pre>


<p>El&#337;sz&ouml;r a hibakimenetet a standard kimenetre ir&aacute;ny&iacute;tjuk, majd a standard kimenetet vezetj&uuml;k egy cs&#337;vezet&eacute;kbe. Ut&aacute;na a cs&#337;vezet&eacute;k&eacute;ket egy m&aacute;sik program, jelen esetben a <span class="command"><strong>cat</strong></span> bemenet&eacute;re.</p>

  </div>

  <div class="sect1" title="Egyszer&#369; sz&ouml;vegsz&#369;r&eacute;s"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1399">Egyszer&#369; sz&ouml;vegsz&#369;r&eacute;s</h2></div></div></div>
          <p>A Unix alap&uacute; rendszerek a rendszerrel kapcsolatos inform&aacute;ci&oacute;kat, konfigur&aacute;ci&oacute;s be&aacute;ll&iacute;t&aacute;sokat sz&ouml;veges &aacute;llom&aacute;nyokban t&aacute;rolj&aacute;k. Ennek klasszikus p&eacute;ld&aacute;ja az <code class="filename">/etc</code> k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; <code class="filename">passwd</code> nev&#369; f&aacute;jl, amelyik a rendszeren regisztr&aacute;lt felhaszn&aacute;l&oacute;k adatait t&aacute;rolja. A f&aacute;jl egy sora &iacute;gy n&eacute;z ki:</p>
<pre class="programlisting">
lszabo:x:500:500:Laszlo Szabo:/home/lszabo:/bin/bash
</pre>          
  <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                  <p>a felhaszn&aacute;l&oacute; rendszeren haszn&aacute;lt neve</p>
          </li><li class="listitem">
                  <p>jelenleg nem haszn&aacute;lt mez&#337; (a felhaszn&aacute;l&oacute; jelszav&aacute;nak hash k&oacute;dja &aacute;llt itt r&eacute;gi rendszereken) </p>
          </li><li class="listitem">
                  <p>a felhaszn&aacute;l&oacute; azonos&iacute;t&oacute;ja (egy eg&eacute;sz sz&aacute;m)
                  </p>
          </li><li class="listitem">
                  <p>a felhaszn&aacute;l&oacute; csoportj&aacute;nak azonos&iacute;t&oacute;ja (ez is egy eg&eacute;sz sz&aacute;m)
                  </p>
          </li><li class="listitem">
                  <p>a felhaszn&aacute;l&oacute; val&oacute;di neve  
                  </p>
          </li><li class="listitem">
                  <p>a saj&aacute;t k&ouml;nyvt&aacute;ra
                  </p>
          </li><li class="listitem">
                  <p>a shell neve ami elindul, ha a felhaszn&aacute;l&oacute; bel&eacute;p a rendszerbe 
                  </p>
          </li></ol></div>

  <p>A <code class="filename">passwd</code> &aacute;llom&aacute;nyhoz hasonl&oacute;, sz&ouml;veges mez&#337;ket tartalmaz&oacute; &aacute;llom&aacute;nyokb&oacute;l egy bizonyos mez&#337;t (pl. ebben az esetben a felhaszn&aacute;l&oacute;k nev&eacute;t) kiv&aacute;gni soronk&eacute;nt p&eacute;ld&aacute;ul a <span class="command"><strong>cut</strong></span><a class="indexterm" name="d5e1423"></a> nev&#369; paranccsal lehet, bemutat&aacute;s&aacute;t l&aacute;sd a <a class="link" href="#cmd_cut" title="A cut parancs">fejezet v&eacute;g&eacute;n</a>.</p>


<p>A <code class="filename">passwd</code> &aacute;llom&aacute;nyra alkalmazva, a felhaszn&aacute;l&oacute;k list&aacute;j&aacute;t &iacute;gy lehet kiv&aacute;gni:</p>
<pre class="screen">
$ cut -f 1 -d : /etc/passwd
root
bin
daemon
adm
lp
sync
 ... 
</pre>
<p>Ha sz&uuml;ks&eacute;g&uuml;nk lenne p&eacute;ld&aacute;ul az els&#337; 5 felhaszn&aacute;l&oacute;n&eacute;vre rendezett sorrendben, azt &iacute;gy kapn&aacute;nk meg:</p>
<pre class="screen">
$ cut -f 1 -d : /etc/passwd | sort | head -5
adm
apache
avahi
beaglidx
bin
</pre>


  </div>
<div class="sect1" title="A fejezetben haszn&aacute;lt parancsok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_shell">A fejezetben haszn&aacute;lt parancsok</h2></div></div></div>

<div class="simplesect" title="A cut parancs"><div class="titlepage"><div><div><h3 class="title" id="cmd_cut"><a class="indexterm" name="d5e1435"></a>A cut parancs</h3></div></div></div>
<p>Sz&ouml;vegmez&#337;ket vagy karaktereket v&aacute;g ki sz&ouml;vegsorokb&oacute;l.</p>
<h4><a name="d5e1438"></a>Haszn&aacute;lat:</h4>
<div class="cmdsynopsis"><p>
  <code class="command">cut</code> 
    -c 
    <em class="replaceable"><code>lista</code></em>... 
   [<em class="replaceable"><code>f&aacute;jl(ok)</code></em>]
</p></div>
<div class="cmdsynopsis"><p>
  <code class="command">cut</code> 
    -f 
    <em class="replaceable"><code>lista</code></em>... 
   [
       -d karakter 
    ]

   [<em class="replaceable"><code>f&aacute;jl(ok)</code></em>]
</p></div>
 <h4><a name="d5e1455"></a>Fontosabb opci&oacute;k:</h4>
        <p><code class="option">-c lista</code> Megadjuk azoknak a karaktereknek a sorsz&aacute;m&aacute;t a bemeneti sorokb&oacute;l, amelyeket ki akarunk v&aacute;lasztani. Pl. -c 6  vagy  -c 6-8  vagy -c 6,9-12,10-22 .</p>
        <p><code class="option">-d  kar</code> Megadjuk azt az elv&aacute;laszt&oacute; karaktert, amelyiket a -f opci&oacute;val egy&uuml;tt, sz&ouml;vegmez&#337;k kiemel&eacute;s&eacute;re haszn&aacute;lunk. Ha nem adunk meg semmit, az alap&eacute;rtelmezett elv&aacute;laszt&oacute; a tabul&aacute;tor karakter.</p>
        <p><code class="option">-f lista</code> Megadjuk azoknak az elv&aacute;laszt&oacute; karakterrel elv&aacute;lasztott mez&#337;knek a list&aacute;j&aacute;t amelyet a kimenetre akarunk &iacute;rni. Pl.:  -f 2  (m&aacute;sodik mez&#337;) vagy -f 7,8  a hetedik &eacute;s nyolcadik mez&#337;.</p>
          <h4><a name="d5e1462"></a>Le&iacute;r&aacute;s:</h4>
    <p>A cut a bemenet minden sor&aacute;b&oacute;l ugyanazokat a mez&#337;ket vagy karaktereket v&aacute;gja ki &eacute;s azokat soronk&eacute;nt k&uuml;ldi a kimenetre. Alapvet&#337;en k&eacute;t feladatot oldhatunk meg vele: karaktereket v&aacute;gunk ki a bemeneti sorokb&oacute;l vagy mez&#337;ket, ez ut&oacute;bbiak eset&eacute;ben meg kell adnunk egy elv&aacute;laszt&oacute; karaktert.  Bemenetk&eacute;nt a param&eacute;terk&eacute;nt megadott &aacute;llom&aacute;nyokat vagy a standard bemenetet haszn&aacute;lja ha nem adunk meg &aacute;llom&aacute;nyt. Pl.:</p>
<pre class="screen">
$ echo a b cd | cut -f 2 -d " " 
b 
$ echo abcdef | cut -c 2,4 
bd 
$ echo ab cd ef | cut -f2 -d " " 
cd  
$ 
</pre>    
        <h4><a name="d5e1465"></a>Megjegyz&eacute;s:</h4>
        <p>POSIX standardot megval&oacute;s&iacute;t&oacute; rendszereken kezeli a t&ouml;bb byte-os karaktereket is (pl. UTF-8). Ilyenek a modern Linux disztrib&uacute;ci&oacute;k, ahol pl.:</p>
<pre class="screen">
$ echo &aacute; &oacute; &#369; | cut -f 2 -d " "
&oacute;
$  
</pre>
        <p>az &oacute; karaktert &iacute;rja ki.</p>        
</div>

</div> 
    </div>


    <div class="chapter" title="5. fejezet - A h&eacute;j v&aacute;ltoz&oacute;i" id="valtozok"><div class="titlepage"><div><div><h2 class="title">5. fejezet - A h&eacute;j v&aacute;ltoz&oacute;i</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e1471">A h&eacute;j v&aacute;ltoz&oacute;inak t&iacute;pusa</a></span></dt><dt><span class="sect1"><a href="#d5e1482">V&aacute;ltoz&oacute;k l&eacute;trehoz&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1514">Az id&eacute;z&#337;jelek haszn&aacute;lata</a></span></dt><dd><dl><dt><span class="sect2"><a href="#doublequote">A kett&#337;s id&eacute;z&#337;jel</a></span></dt><dt><span class="sect2"><a href="#singlequote">Az aposztr&oacute;f</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e1591">A {} jel&ouml;l&eacute;s</a></span></dt><dt><span class="sect1"><a href="#cmd_echo">Az echo parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1700">A h&eacute;j saj&aacute;t v&aacute;ltoz&oacute;i</a></span></dt><dt><span class="sect1"><a href="#d5e1725">Az k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s az  export parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1763">A h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;i vagy param&eacute;terei</a></span></dt><dt><span class="sect1"><a href="#commandsubst">A parancs helyettes&iacute;t&eacute;s</a></span></dt><dt><span class="sect1"><a href="#d5e1820">A parancssor &aacute;t&iacute;r&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e1852">A here document &aacute;tir&aacute;ny&iacute;t&aacute;s ("itt dokumentum")</a></span></dt><dt><span class="sect1"><a href="#cmd_dot">A . &eacute;s a source parancs</a></span></dt><dt><span class="sect1"><a href="#d5e1892">P&eacute;ldaprogramok</a></span></dt></dl></div> 
            
<div class="sect1" title="A h&eacute;j v&aacute;ltoz&oacute;inak t&iacute;pusa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1471">A h&eacute;j v&aacute;ltoz&oacute;inak t&iacute;pusa</h2></div></div></div>
<p>A h&eacute;j az adatok, inform&aacute;ci&oacute;k t&aacute;rol&aacute;s&aacute;ra v&aacute;ltoz&oacute;kat haszn&aacute;l. A h&eacute;j v&aacute;ltoz&oacute;i h&aacute;rom kateg&oacute;ri&aacute;ba sorolhat&oacute;ak:</p>


<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>saj&aacute;t v&aacute;ltoz&oacute;k, amelyekben m&#369;k&ouml;d&eacute;s&eacute;hez sz&uuml;ks&eacute;ges inform&aacute;ci&oacute;kat t&aacute;rol, ezek egy h&eacute;jra jellemz&#337;ek, &eacute;s a felhaszn&aacute;l&oacute; szempontj&aacute;b&oacute;l automatikusan j&ouml;nnek l&eacute;tre,</p>
</li><li class="listitem">
<p>k&ouml;rnyezeti v&aacute;ltoz&oacute;k, amelyek p&eacute;ld&aacute;ul az oper&aacute;ci&oacute;s rendszerr&#337;l adnak inform&aacute;ci&oacute;t, &eacute;s minden ind&iacute;tott &uacute;j h&eacute;j megkap,</p>
</li><li class="listitem">
<p>a felhaszn&aacute;l&oacute; vagy fut&oacute; szkript &aacute;ltal l&eacute;trehozott v&aacute;ltoz&oacute;k.</p>
</li></ol></div>

<p>El&#337;sz&ouml;r &aacute;ttekintj&uuml;k a v&aacute;ltoz&oacute;k l&eacute;trehoz&aacute;s&aacute;nak m&oacute;dj&aacute;t a felhaszn&aacute;l&oacute; &aacute;ltal. Ezeket param&eacute;tereknek is nevezik, megk&uuml;l&ouml;nb&ouml;ztetve a h&eacute;j saj&aacute;t illetve k&ouml;rnyezeti v&aacute;ltoz&oacute;it&oacute;l.</p>

</div>


 <div class="sect1" title="V&aacute;ltoz&oacute;k l&eacute;trehoz&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1482">V&aacute;ltoz&oacute;k l&eacute;trehoz&aacute;sa</h2></div></div></div>
  
  <p> Mivel a h&eacute;j parancssorai sz&ouml;vegekb&#337;l &eacute;p&uuml;lnek fel, a v&aacute;ltoz&oacute;k nev&eacute;t &eacute;s &eacute;rt&eacute;k&eacute;t is egyar&aacute;nt sztringekben t&aacute;rolja. A n&eacute;v-&eacute;rt&eacute;k hozz&aacute;rendel&eacute;st  az = jel seg&iacute;ts&eacute;g&eacute;vel adjuk meg. P&eacute;ld&aacute;ul a:</p>
<pre class="screen">
$ szin=piros
$ 
</pre>

<p>sor v&eacute;grehajt&aacute;sa sor&aacute;n l&eacute;trej&ouml;n az a <code class="varname">szin</code> v&aacute;ltoz&oacute; <code class="literal">piros</code> &eacute;rt&eacute;kkel. A v&aacute;ltoz&oacute;nevek az angol Abc bet&#369;ib&#337;l (kis &eacute;s nagybet&#369; k&ouml;zti elt&eacute;r&eacute;s sz&aacute;m&iacute;t) valamint sz&aacute;mjegyekb&#337;l &eacute;s az  <code class="literal">_</code> al&aacute;h&uacute;z&aacute;sjel karakterb&#337;l &aacute;llhatnak, de nem kezd&#337;dhetnek sz&aacute;mjeggyel.</p>

<p>Az <code class="literal">=</code> jel k&ouml;zvetlen&uuml;l a v&aacute;ltoz&oacute; neve ut&aacute;n kell elhelyezkedjen, az &eacute;rt&eacute;k pedig k&ouml;zvetlen&uuml;l az <code class="literal">=</code> jel ut&aacute;n, &iacute;gy hib&aacute;s az al&aacute;bbi hozz&aacute;rendel&eacute;s:</p>

<pre class="screen">
$ szin= piros
-bash: piros: command not found
$
</pre>
<p>mert &iacute;gy k&ouml;zvetlen&uuml;l az <code class="literal">=</code> jel ut&aacute;n a sz&oacute;k&ouml;z &aacute;ll.</p>

<p>A v&aacute;ltoz&oacute; l&eacute;trehoz&aacute;sa dinamikus: akkor j&ouml;n l&eacute;tre amikor &eacute;rt&eacute;ket adunk neki, nincs sz&uuml;ks&eacute;g el&#337;zetes deklar&aacute;ci&oacute;ra.  Amikor a l&eacute;trej&ouml;tt v&aacute;ltoz&oacute;t k&eacute;s&#337;bb h&eacute;j parancsok argumentumaiban haszn&aacute;ljuk, egy <code class="literal">$</code> jellel &eacute;s a v&aacute;ltoz&oacute; nev&eacute;vel hivatkozunk r&aacute; (a h&eacute;j k&eacute;szenl&eacute;ti jelek&eacute;nt tov&aacute;bbra is a <code class="literal">$</code> karaktert haszn&aacute;ljuk az al&aacute;bbi p&eacute;ld&aacute;kban, ne t&eacute;vessz&uuml;k ezt &ouml;ssze a nevek el&#337;tti $ karakterrel). Teh&aacute;t <code class="literal">$szin</code> lesz a hivatkozott v&aacute;ltoz&oacute;, &eacute;s legk&ouml;nnyebben az <span class="command"><strong>echo</strong></span> paranccsal (r&eacute;szletes bemutat&aacute;s&aacute;t l&aacute;sd a k&ouml;vetkez&#337; pontban) tudjuk ki&iacute;rni:</p>
<pre class="screen">
$ echo $szin
piros 
$ 
</pre>
<p>A v&aacute;ltoz&oacute;k teh&aacute;t sztringeket tartalmaznak, &iacute;gy megt&ouml;rt&eacute;nhet az is, hogy &uuml;res sztringet tartalmaznak, teh&aacute;t nincs &eacute;rt&eacute;k&uuml;k. A Bash alap be&aacute;ll&iacute;t&aacute;sban a nem defini&aacute;lt v&aacute;ltoz&oacute;neveket is &uuml;res sztringk&eacute;nt &eacute;rt&eacute;keli ki (ez a viselked&eacute;s megv&aacute;ltoztathat&oacute; Bash opci&oacute;k be&aacute;ll&iacute;t&aacute;s&aacute;val, illetve tesztelhet&#337;, hogy l&eacute;tezik-e a v&aacute;ltoz&oacute;n&eacute;v, <a class="link" href="#checkvar" title="5.1. t&aacute;bl&aacute;zat - V&aacute;ltoz&oacute;k kezdeti &eacute;rt&eacute;k&eacute;t kezel&#337; oper&aacute;torok">l&aacute;sd al&aacute;bb</a>).</p>
<pre class="screen">
$ echo $NEMLETEZO

$ 
</pre>
<p>A v&aacute;ltoz&oacute;k &eacute;rt&eacute;k&eacute;t id&eacute;z&#337;jelek k&ouml;z&eacute; is tehetj&uuml;k, ha a v&aacute;ltoz&oacute; &eacute;rt&eacute;ke olyan sztring amelyik elv&aacute;laszt&oacute; karaktert is tartalmaz, akkor ezt kell tenn&uuml;nk. P&eacute;ld&aacute;ul, ha egy v&aacute;ltoz&oacute; &eacute;rt&eacute;ke a <code class="literal">piros alma</code> karaktersor, akkor ezt &iacute;gy adjuk meg:</p>
<pre class="screen">
$ valt="piros alma"
$ 
</pre>

<p>Egy&eacute;bk&eacute;nt a h&eacute;j csak a piros sztringet rendeln&eacute; a v&aacute;ltoz&oacute;hoz &eacute;s &uacute;gy &eacute;rtelmezn&eacute;, hogy az alma egy k&ouml;vetkez&#337; parancs.</p>


<p>Megjegyz&eacute;s: a m&aacute;sik megold&aacute;s a vissza-per szekvencia haszn&aacute;lata:</p>

<pre class="screen">
$ valt=piros\ alma
$ echo $valt
piros alma
$
</pre>

<p>V&aacute;ltoz&oacute; nevet a h&eacute;jb&oacute;l az <span class="command"><strong>unset</strong></span> paranccsal t&ouml;r&ouml;lhet&uuml;nk:</p>
<pre class="screen">
$ szin=piros
$ echo $szin
piros
$ unset szin
$ echo $szin

$
</pre>


</div>


<div class="sect1" title="Az id&eacute;z&#337;jelek haszn&aacute;lata"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1514">Az id&eacute;z&#337;jelek haszn&aacute;lata</h2></div></div></div>


<p>H&aacute;romf&eacute;le id&eacute;z&#337;jelet haszn&aacute;lhatunk a h&eacute;j programokban: <code class="literal">"</code> (id&eacute;z&#337;jel, macskak&ouml;r&ouml;m angolul: <span class="emphasis"><em>double quote</em></span>), <code class="literal">'</code> (aposztr&oacute;f, <span class="emphasis"><em>single quote</em></span> vagy <span class="emphasis"><em>forward tick</em></span>) &eacute;s <code class="literal">`</code> (ford&iacute;tott id&eacute;z&#337;jel, <span class="emphasis"><em>backtick</em></span>).</p>
<p>Az id&eacute;z&eacute;st az els&#337; kett&#337;vel val&oacute;s&iacute;tjuk meg, ezzel a m&#369;velettel lev&eacute;dj&uuml;k a l&eacute;trehozott sztringet, &iacute;gy a speci&aacute;lis karakterek egy r&eacute;sz&eacute;nek &eacute;s a kulcsszavaknak a jelent&eacute;se megsz&#369;nik.</p>

<p>A ford&iacute;tott id&eacute;z&#337;jel a h&eacute;j parancs helyettes&iacute;t&#337; m&#369;velet&eacute;t vezeti be r&eacute;gi jel&ouml;l&eacute;s szerint, r&eacute;szletesen l&aacute;sd A <a class="link" href="#commandsubst" title="A parancs helyettes&iacute;t&eacute;s">parancs helyettes&iacute;t&eacute;s</a> alpontot al&aacute;bb. Ezzel tulajdonk&eacute;ppen nem "id&eacute;z&uuml;nk".</p>

<div class="sect2" title="A kett&#337;s id&eacute;z&#337;jel"><div class="titlepage"><div><div><h3 class="title" id="doublequote">A kett&#337;s id&eacute;z&#337;jel</h3></div></div></div>



<p>A " macskak&ouml;rm&ouml;t vagy kett&#337;s id&eacute;z&#337; jelet sztringek deklar&aacute;l&aacute;s&aacute;ra haszn&aacute;ljuk:
</p>
<pre class="screen">
$ uzenet="Hosszabb sz&ouml;veg"
$ echo $uzenet
Hosszabb sz&ouml;veg
$ 
</pre>

<p>Ezeket a sztringeket, a h&eacute;j haszn&aacute;lat el&#337;tt m&eacute;g &aacute;t&iacute;rja, amennyiben v&aacute;ltoz&oacute;kra hivatkozunk a <code class="literal">$</code> jel seg&iacute;ts&eacute;g&eacute;vel:</p>
<pre class="screen">
$ szin="piros"
$ echo "Hosszabb $szin sz&ouml;veg"
Hosszabb piros sz&ouml;veg
$
</pre>

<p>A <code class="code">$</code> karakterrel bevezetett &aacute;t&iacute;r&aacute;st v&aacute;ltoz&oacute; vagy param&eacute;ter kifejt&eacute;snek nevezz&uuml;k (<span class="emphasis"><em>variable or parameter expansion</em></span>).</p>

<p>Az &aacute;t&iacute;r&aacute;s nem csak a <code class="code">$</code> karakter megjelen&eacute;sekor t&ouml;rt&eacute;nik meg, hanem a k&ouml;vetkez&#337; esetekben is:</p>

<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p><code class="code">`</code> (ford&iacute;tott id&eacute;z&#337;jel) Ezzel a karakterrel <span class="emphasis"><em>parancs helyettes&iacute;t&eacute;st</em></span> vezet&uuml;nk be (l&aacute;sd al&aacute;bb), amellyel egy sztring tartalm&aacute;ba be lehet sz&uacute;rni egy parancs kimenet&eacute;t (mindazt amit a parancs a standard kimenetre &iacute;r). Ugyanez t&ouml;rt&eacute;nik a <code class="code">$(</code> karakter kombin&aacute;ci&oacute; megjelen&eacute;sekor - teh&aacute;t a <code class="code">$</code> karakter is vezethet be parancs helyettes&iacute;t&eacute;st. Megjegyezz&uuml;k azt is, hogy <code class="code">$((</code> szekvencia, aritmetikai ki&eacute;rt&eacute;kel&eacute;st vezet be (l&aacute;sd <a class="link" href="#calculations" title="Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel">Aritmetikai ki&eacute;rt&eacute;kel&eacute;s ...</a> c&iacute;m&#369; alfejezetet).</p>

    </li><li class="listitem">
<p><code class="code">!</code> (felki&aacute;lt&oacute;jel) A felki&aacute;lt&oacute;jellel el&#337;z&#337;leg v&eacute;grehajtott parancsokra hivatkozhatunk, ez a h&eacute;j un. <span class="emphasis"><em>history expansion</em></span> opci&oacute;ja, amely alapszinten be van kapcsolva ha a h&eacute;j interakt&iacute;van fut. Pl. <code class="code">!!</code> sorozat az utols&oacute; parancssort helyettes&iacute;ti be, <code class="code">!-5</code> az &ouml;t paranccsal megel&#337;z&#337;t. Teh&aacute;t csak akkor t&ouml;rt&eacute;nik ez meg, ha ez az opci&oacute; akt&iacute;v. Ha a h&eacute;j egy szkriptet futtat, akkor &aacute;ltal&aacute;ban ez az opci&oacute; nincs bekapcsolva, teh&aacute;t az &aacute;t&iacute;r&aacute;s nem t&ouml;rt&eacute;nik meg. Ebben a tananyagban nem foglalkozunk ezzel az opci&oacute;val (r&eacute;szletek&eacute;rt l&aacute;sd  <a class="link" href="#BashRef2010">BashRef2010</a> vagy <a class="link" href="#Newham2005">Newham2005</a> , 2. fejezet), de ne feledj&uuml;k, hogy az al&aacute;bbi egyszer&#369; parancs:</p>
<pre class="programlisting">
echo "Szia!"
</pre>
<p>interakt&iacute;v munka folyam&aacute;n hib&aacute;t ad, m&iacute;g v&eacute;grehajtott szkriptben sim&aacute;n lefut - ilyenkor ez az opci&oacute; nem akt&iacute;v. Ha  interakt&iacute;v munka folyam&aacute;n sz&uuml;ks&eacute;g&uuml;nk van a felki&aacute;lt&oacute;jelre egy sztringben, akkor k&uuml;l&ouml;n aposztr&oacute;ffal megadhat&oacute;:</p>
<pre class="screen">
$ echo "Szia"'!'
Szia!
$
</pre>
    </li><li class="listitem">
<p><code class="code">\</code> (vissza-per jel) Ha a per jel ut&aacute;n <code class="code">$</code> , <code class="code">`</code> , <code class="code">"</code> , <code class="code">\</code> vagy &uacute;jsor karakterek vannak, akkor  ezek jelennek meg liter&aacute;lisan, &eacute;s a \ jel elmarad. A t&ouml;bbi karakterek eset&eacute;ben, pl. (  <code class="code">\a</code> vagy <code class="code">\.</code> ) a per jel megmarad a sztringben. Pl. a:</p>
<pre class="programlisting">
echo "\$"
</pre>
<p>parancs liter&aacute;lis <code class="code">$</code> jelet &iacute;r ki, a</p>
<pre class="programlisting">
echo "\."
</pre>
<p>pedig a  <code class="literal">\.</code> szekvenci&aacute;t.</p>

    </li></ul></div>


</div>

<div class="sect2" title="Az aposztr&oacute;f"><div class="titlepage"><div><div><h3 class="title" id="singlequote">Az aposztr&oacute;f</h3></div></div></div>

<p>Az <code class="literal">'</code> aposztr&oacute;f seg&iacute;ts&eacute;g&eacute;vel olyan sztringeket deklar&aacute;lunk, amelyekben minden egyes karakter saj&aacute;t mag&aacute;t jelenti, &eacute;s bet&#369; szerint lesz &eacute;rtelmezve, teh&aacute;t a h&eacute;j semmif&eacute;le &aacute;t&iacute;r&aacute;st nem v&eacute;gez. &Iacute;gy az al&aacute;bbi ki&iacute;r&aacute;skor:</p>
<pre class="screen">
$ $ echo 'ez itt egy $jel'
ez itt egy $jel
$ 
</pre>
<p>val&oacute;di <code class="literal">$</code> karakter ker&uuml;l a kimenetre. A h&eacute;j nem &iacute;r &aacute;t semmit a sztring belsej&eacute;ben, &uacute;gy dolgozik vele ahogy le&iacute;rtuk.</p>

<p>Ha egy sztringben id&eacute;z&#337;jel vagy aposztr&oacute;f fordul el&#337;, megadhatjuk azokat vissza-per jel&ouml;l&eacute;ssel, mint:</p>

<pre class="screen">
$ echo \"piros\"
"piros"
$ echo \'piros\'
'piros'
$ 
</pre>
<p>Egy kicsit bonyolultabb a helyzet, ha id&eacute;z&#337;jelek vagy aposztr&oacute;fok fordulnak el&#337; olyan sz&ouml;vegben, amelyet egy&eacute;bk&eacute;nt is id&eacute;z&#337;jelbe kell tenni a v&aacute;ltoz&oacute;k ki&eacute;rt&eacute;kel&eacute;se miatt.  Ha pl. ki akarjuk &iacute;rni a k&ouml;vetkez&#337; sz&ouml;veget:</p>
<p><code class="literal">a piros a "kiv&aacute;lasztott" sz&iacute;n</code></p>

<p>akkor megtehetj&uuml;k t&ouml;bbf&eacute;lek&eacute;ppen:</p>
<pre class="screen">
$ echo "a $szin a \"kiv&aacute;lasztott\" sz&iacute;n"
a piros a "kiv&aacute;lasztott" sz&iacute;n
$ echo "a $szin a "'"'kiv&aacute;lasztott'"'" sz&iacute;n"
a piros a "kiv&aacute;lasztott" sz&iacute;n
$
</pre>
<p>A m&aacute;sodik v&aacute;ltozatban t&ouml;bb sztringet ragasztunk &ouml;ssze, &eacute;s kihaszn&aacute;ljuk azt, hogy az id&eacute;z&#337;jel &eacute;s aposztr&oacute;f mint egy karakteres sztring megadhat&oacute; egym&aacute;s "id&eacute;z&eacute;s&eacute;vel":</p>

<pre class="screen">
$ echo "'"
'
$ echo '"'
"
$ 
</pre>
<p>El&#337;fordulnak esetek, amikor egy parancssori sztringet darabokb&oacute;l kell &ouml;sszeragasztani.</p>

</div>




         </div>

<div class="sect1" title="A {} jel&ouml;l&eacute;s"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1591">A {} jel&ouml;l&eacute;s</h2></div></div></div>



<p>A sztringekben a h&eacute;j nem tudja mindig a v&aacute;ltoz&oacute; nev&eacute;t meghat&aacute;rozni a v&aacute;ltoz&oacute; nevek egyszer&#369; haszn&aacute;lat&aacute;val, p&eacute;ld&aacute;ul al&aacute;bbi esetben, ha adott a <code class="varname">szin</code> v&aacute;ltoz&oacute;, amelynek &eacute;rt&eacute;ke "piros", a "pirosalma" sz&ouml;veget akarjuk ki&iacute;rni:</p>
<pre class="screen">
$ echo "$szinalma"
</pre>

<p>meddig tart a v&aacute;ltoz&oacute;n&eacute;v? a h&eacute;j &uacute;gy fogja &eacute;rtelmezni, hogy egy &uacute;j v&aacute;ltoz&oacute; nevet haszn&aacute;lunk, a <code class="varname">szinalma</code> nev&#369;t, ez&eacute;rt haszn&aacute;lunk egy jel&ouml;l&eacute;si m&oacute;dot ami ezt egy&eacute;rtelm&#369;v&eacute; teszi. Ilyenkor a v&aacute;ltoz&oacute; nev&eacute;t jelent&#337; karakterl&aacute;ncot <code class="literal">{}</code> kapcsos z&aacute;r&oacute;jelekkel vessz&uuml;k k&ouml;r&uuml;l. &Iacute;gy m&aacute;r egy&eacute;rtelm&#369; a v&aacute;ltoz&oacute; nev&eacute;nek megad&aacute;sa:</p>

<pre class="screen">
$ echo "${szin}alma"
</pre>

<p>Ez a v&aacute;ltoz&oacute;nevek megad&aacute;s&aacute;nak &aacute;ltal&aacute;nos szintaxisa a parancsoron, ha hivatkozunk a v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;re. A <code class="literal">{}</code> z&aacute;r&oacute;jelek elhagyhat&oacute;ak, ha a sztringben a v&aacute;ltoz&oacute; nev&eacute;t nem bet&#369;, sz&aacute;mjegy vagy alulvon&aacute;s jel k&ouml;veti.</p>

<p>A p&eacute;lda azt is szeml&eacute;lteti, hogy k&eacute;t sztring &ouml;sszef&#369;z&eacute;s&eacute;t &uacute;gy oldjuk meg, hogy egyszer&#369;en egym&aacute;s ut&aacute;n &iacute;rjuk &#337;ket a parancsorra, &eacute;s a h&eacute;j elv&eacute;gzi a m&#369;veletet akkor, amikor ki&eacute;rt&eacute;keli a parancssort.</p>

<p>A <code class="literal">{}</code> jel&ouml;l&eacute;s, amely a v&aacute;ltoz&oacute;k kifejt&eacute;s&eacute;nek egyik m&oacute;dja, tov&aacute;bbi m&#369;veleteket is lehet&#337;v&eacute; tesz a kapcsos z&aacute;r&oacute;jelek szerkezet k&ouml;z&ouml;tt k&uuml;l&ouml;nb&ouml;z&#337; oper&aacute;torokat haszn&aacute;lva. &Iacute;gy lehet&#337;s&eacute;get ad a v&aacute;ltoz&oacute; kezdeti &eacute;rt&eacute;k&eacute;nek tesztel&eacute;s&eacute;re &eacute;s be&aacute;ll&iacute;t&aacute;s&aacute;ra:</p>


       <div class="table"><a name="checkvar"></a><p class="title"><b>5.1. t&aacute;bl&aacute;zat - V&aacute;ltoz&oacute;k kezdeti &eacute;rt&eacute;k&eacute;t kezel&#337; oper&aacute;torok</b></p><div class="table-contents">
                
                <table summary="V&aacute;ltoz&oacute;k kezdeti &eacute;rt&eacute;k&eacute;t kezel&#337; oper&aacute;torok" cellpadding="4" border="1"><colgroup><col width="33%" class="col1"><col width="67%" class="col2"></colgroup><thead><tr><th align="center">Oper&aacute;tor</th><th align="center">Jelent&eacute;se</th></tr></thead><tbody><tr><td align="center"><code class="code">${valtozo:-piros}</code></td><td align="left">Ha a v&aacute;ltoz&oacute; nem l&eacute;tezik, nem ad &eacute;rt&eacute;ket a v&aacute;ltoz&oacute;nak, de visszat&eacute;r&iacute;ti a "piros"-at.</td></tr><tr><td align="center"><code class="code">${valtozo:=piros}</code></td><td align="left">Ha a v&aacute;ltoz&oacute; nem l&eacute;tezik, &eacute;rt&eacute;ket a v&aacute;ltoz&oacute;nak &eacute;s visszat&eacute;r&iacute;ti a "piros"-at.</td></tr><tr><td align="center"><code class="code">${valtozo:?hiba&uuml;zenet}</code></td><td align="left">Ha a v&aacute;ltoz&oacute; nem l&eacute;tezik a h&eacute;j program hiba&uuml;zenettel le&aacute;ll, ha a h&eacute;j nem interakt&iacute;v (v&eacute;grehajtott szkriptek eset&eacute;ben ez az implicit helyzet).</td></tr><tr><td align="center"><code class="code">${valtozo:+&eacute;rt&eacute;k }</code></td><td align="left">A v&aacute;ltoz&oacute; l&eacute;tez&eacute;s&eacute;nek tesztel&eacute;s&eacute;re haszn&aacute;ljuk: a kifejez&eacute;s visszat&eacute;r&iacute;ti az "&eacute;rt&eacute;k" sztringet, ha a v&aacute;ltoz&oacute;n&eacute;v l&eacute;tezik &eacute;s nem &uuml;res sztringet tartalmaz, egy&eacute;bk&eacute;nt az &uuml;res sztringet kapjuk vissza.</td></tr></tbody></table>
        </div></div><br class="table-break"> 

<p>Az al&aacute;bbi kis programban (<code class="filename">szin.sh</code>) nem adunk &eacute;rt&eacute;ket a <code class="varname">szin</code> v&aacute;ltoz&oacute;nak, &iacute;gy els&#337; haszn&aacute;latkor automatikusan felveszi azt:</p>
<pre class="programlisting">
#!/bin/bash
echo ${szin:=piros} 
echo $szin 
</pre>

<p>, elind&iacute;tva a program k&eacute;tszer fogja a "piros" sztringet ki&iacute;rni:</p>

<pre class="screen">
$ bash szin.sh 
piros 
piros 
$ 
</pre>

<p>A {} jel&ouml;l&eacute;s megengedi m&aacute;s, igen hasznos sztring m&#369;veletek elv&eacute;gz&eacute;s&eacute;t is a Bash &eacute;s Korn h&eacute;jakban, az al&aacute;bbiakat igen gyakran haszn&aacute;ljuk:</p>

      <div class="table"><a name="d5e1638"></a><p class="title"><b>5.2. t&aacute;bl&aacute;zat - Sztring oper&aacute;torok I.</b></p><div class="table-contents">
                
                <table summary="Sztring oper&aacute;torok I." cellpadding="4" border="1"><colgroup><col width="25%" class="col1"><col width="75%" class="col2"></colgroup><thead><tr><th align="center">Oper&aacute;tor</th><th align="center">Jelent&eacute;se</th></tr></thead><tbody><tr><td align="center"><code class="code">${#valtozo}</code></td><td align="left">A v&aacute;ltoz&oacute;ban t&aacute;rolt sztring hossz&aacute;t adja vissza.</td></tr><tr><td align="center"><code class="code">${valtozo:n:m}</code></td><td align="left">A v&aacute;ltoz&oacute; r&eacute;sz sztringj&eacute;t adja vissza az n.-dik karaktert&#337;l kezd&#337;d&#337; m hossz&uacute; sztringet; az els&#337; karakter indexe 0. Ha a m&aacute;sodik param&eacute;ter elmarad, akkor a sztring v&eacute;g&eacute;ig tart&oacute; karaktersort adja vissza.</td></tr></tbody></table>
        </div></div><br class="table-break"> 



 
<p>P&eacute;ld&aacute;ul:</p> 

<pre class="screen">
$ valtozo=abcdef 
$ echo ${#valtozo} 
6
$ echo ${valtozo:2:3}
cde
$
$ echo ${valtozo:3} 
def 
$ 
</pre>


<p>A {} jel&ouml;l&eacute;ssel kapcsolatban tov&aacute;bbi m&#369;veleteket tal&aacute;lhatunk a <a class="link" href="#string_operatorok" title="M&#369;veletek karakterl&aacute;ncokkal">M&#369;veletek karakterl&aacute;ncokkal</a> fejezetben.</p>

</div>


<div class="sect1" title="Az echo parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_echo">Az echo parancs</h2></div></div></div>
<p>V&aacute;ltoz&oacute;k &eacute;s sztringek ki&iacute;r&aacute;s&aacute;ra t&ouml;bbnyire az <span class="command"><strong>echo</strong></span> parancsot haszn&aacute;ljuk, amely ki&iacute;rja saj&aacute;t argumentumainak list&aacute;j&aacute;t &eacute;s ut&aacute;na automatikusan egy &uacute;j sor karaktert. Haszn&aacute;lata:</p>

<div class="cmdsynopsis"><p>
  <code class="command">echo</code> 
   [-ne]
    <em class="replaceable"><code>sztring</code></em>... 
</p></div>
<p>P&eacute;ld&aacute;ul:</p>
<pre class="screen">
$ echo ez egy &uuml;zenet
ez egy &uuml;zenet
$ echo ez egy          &uuml;zenet
ez egy &uuml;zenet
$ 
</pre>
<p>L&aacute;that&oacute;, hogy a param&eacute;terk&eacute;nt kapott sztringeket &iacute;rja ki. K&eacute;t kapcsol&oacute;ja van:</p>

<p><code class="option">-n</code> Nem &iacute;r &uacute;j sor karaktert.</p>
<p><code class="option">-e</code> Enged&eacute;lyezi a k&ouml;vetkez&#337; speci&aacute;lis karakterek &eacute;rtelmez&eacute;s&eacute;t a sztringekben:</p>
 
 <table border="0" summary="Simple list" class="simplelist"><tr><td>\a riad&oacute;</td></tr><tr><td>\b egy karakter t&ouml;rl&eacute;se visszafel&eacute;</td></tr><tr><td>\f lapdob&aacute;s</td></tr><tr><td>\n &uacute;j sor</td></tr><tr><td>\r kocsi vissza</td></tr><tr><td>\t v&iacute;zszintes tabul&aacute;tor</td></tr><tr><td>\\ backslash </td></tr><tr><td>\nnn a karakter ASCII k&oacute;dja nnn (okt&aacute;lisan)</td></tr><tr><td>\xnn a karakterk&oacute;dot hexadecim&aacute;lisan lehet megadni, pl. \x32</td></tr></table>
<p>Az <span class="command"><strong>echo</strong></span> a leggyakrabban haszn&aacute;lt parancs a h&eacute;jprogramokb&oacute;l val&oacute; ki&iacute;r&aacute;sra.</p>
<p>A Bash h&eacute;j rendelkezik egy <span class="command"><strong>printf</strong></span> paranccsal is, amelyet ritk&aacute;bban, abban az esetben haszn&aacute;lunk, ha bonyolultabban kell form&aacute;zni  a kimenetet. Megh&iacute;v&aacute;sa az al&aacute;bbi:</p>

<div class="cmdsynopsis"><p>
  <code class="command">printf</code> 
    <em class="replaceable"><code>form&aacute;z&oacute;sztring</code></em> 
    <em class="replaceable"><code>sztring(ek)</code></em>... 
</p></div>

<p>A form&aacute;z&oacute; sztring nagyj&aacute;b&oacute;l megegyezik a C nyelvb&#337;l ismert printf szintaxis&aacute;val, a ki&iacute;rt argumentumokat pedig a form&aacute;tum ut&aacute;n, egy list&aacute;ban kell felsorolni, elv&aacute;laszt&oacute;jelek n&eacute;lk&uuml;l:</p>

<pre class="screen">
$ printf "%s %.2f  %s %d\n" "Az eredm&eacute;ny:" "0.733"  "kerek&iacute;tve:"  7
Az eredm&eacute;ny: 0.73  kerek&iacute;tve: 7
$ 
</pre>

<p>Pontos haszn&aacute;lat&aacute;val kapcsolatban l&aacute;sd: <code class="literal">man 1 printf</code> .</p>

</div>

<div class="sect1" title="A h&eacute;j saj&aacute;t v&aacute;ltoz&oacute;i"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1700">A h&eacute;j saj&aacute;t v&aacute;ltoz&oacute;i</h2></div></div></div>
<p>A h&eacute;j igen nagy sz&aacute;m&uacute; bels&#337; v&aacute;ltoz&oacute;t tartalmaz, amelyek megadj&aacute;k a rendszer &aacute;ltal biztos&iacute;tott k&ouml;rnyezet tulajdons&aacute;gait, illetve konfigur&aacute;ci&oacute;s lehet&#337;s&eacute;geket biztos&iacute;tanak a felhaszn&aacute;l&oacute;nak.</p>

<p>Amint eml&iacute;tett&uuml;k, ezek 2 kateg&oacute;ri&aacute;ba sorolhat&oacute;ak, a saj&aacute;t &eacute;s k&ouml;rnyezeti v&aacute;ltoz&oacute;k kateg&oacute;ri&aacute;j&aacute;ba. Nev&uuml;k konvenci&oacute; szerint nagybet&#369;s. A saj&aacute;t v&aacute;ltoz&oacute;kat a <span class="command"><strong>set</strong></span> , a k&ouml;rnyezeti v&aacute;ltoz&oacute;kat a <span class="command"><strong>printenv</strong></span> paranccsal list&aacute;zhatjuk.</p>

<p>Ezek k&ouml;zt vannak klasszikusak, amelyek szinte minden h&eacute;jban megtal&aacute;lhat&oacute;ak ugyanazzal a n&eacute;vvel, &eacute;s vannak olyanok, amelyek csak bizonyos h&eacute;jakra, pl. a Bash-re jellemz&#337;ek.  Az interakt&iacute;v munka szempontj&aacute;b&oacute;l megeml&iacute;t&uuml;nk n&eacute;h&aacute;nyat a fontosabbak k&ouml;z&uuml;l.</p>

<p><a name="ps1"></a>A h&eacute;j k&eacute;szenl&eacute;ti jel&eacute;nek vagy <span class="emphasis"><em>prompt</em></span> sztringj&eacute;nek ki&iacute;r&aacute;s&aacute;t egy <code class="envar">PS1</code> nev&#369; v&aacute;ltoz&oacute; vez&eacute;rli. Ennek &eacute;rt&eacute;k&eacute;t &iacute;rja ki a h&eacute;j, de &uacute;gy, hogy a benne lev&#337; vez&eacute;rl&#337; karaktersorozatokat &aacute;t&iacute;rja. A k&eacute;szenl&eacute;ti jel jelezheti, hogy &eacute;ppen melyik a munka k&ouml;nyvt&aacute;runk, mi a g&eacute;p neve amin dolgozunk, vagy mi a felhaszn&aacute;l&oacute; nev&uuml;nk. Ezeket az inform&aacute;ci&oacute;kat vez&eacute;rl&#337; karakter szekvenci&aacute;kkal &iacute;rhatjuk be a <code class="envar">PS1</code> v&aacute;ltoz&oacute;ba. P&eacute;ld&aacute;ul a <code class="literal">\h</code>  a g&eacute;p r&ouml;vid nev&eacute;t jelenteni,  <code class="literal">\u</code> a felhaszn&aacute;l&oacute;nevet, <code class="literal">\w</code> pedig a munkak&ouml;nyvt&aacute;r nev&eacute;t. &Iacute;gy a<code class="literal">PS1="\u@\h $"</code> &eacute;rt&eacute;kad&aacute;s ut&aacute;n a prompt a felhaszn&aacute;l&oacute; &eacute;s a g&eacute;p nev&eacute;t &iacute;rja ki, k&ouml;zt&uuml;k egy @ jellel. Az &ouml;sszes haszn&aacute;lhat&oacute; &aacute;t&iacute;r&aacute;st a Bash eset&eacute;ben megtal&aacute;ljuk a k&eacute;zik&ouml;nyv PROMPTING c&iacute;m&#369; fejezet&eacute;ben.</p>

<p>A <code class="envar">PS2</code> a m&aacute;sodlagos k&eacute;szenl&eacute;ti jel, ez &aacute;ltal&aacute;ban egy <code class="literal">&gt;</code> karaktert &iacute;r ki. Akkor jelenik meg, ha egy befejezetlen sort &iacute;runk a parancssorra, p&eacute;ld&aacute;ul megnyitunk egy id&eacute;z&#337;jelet &eacute;s nem z&aacute;rjuk azt:</p>

<pre class="screen">
$ msg="Ez egy k&eacute;t sorban
&gt; be&iacute;rt &uuml;zenet"
$ echo $msg
Ez egy k&eacute;t sorban be&iacute;rt &uuml;zenet
$
</pre>

<p>A <code class="envar">PS3</code> &eacute;s <code class="envar">PS4</code>-el k&eacute;s&#337;bb fogunk tal&aacute;lkozni ebben a k&ouml;nyvben.</p>

<p>Ugyanilyen bels&#337; v&aacute;ltoz&oacute; a m&aacute;r eml&iacute;tett <code class="envar">PATH</code>, a v&eacute;grehajthat&oacute; programok el&eacute;r&eacute;si &uacute;t list&aacute;j&aacute;t tartalmaz&oacute; v&aacute;ltoz&oacute; vagy az <code class="varname">EDITOR</code>, amely a prefer&aacute;lt sz&ouml;vegszerkeszt&#337; nev&eacute;t tartalmazza.</p>


</div>

<div class="sect1" title="Az k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s az export parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1725">Az k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s az  export parancs</h2></div></div></div>
<p>A  h&eacute;j saj&aacute;t v&aacute;ltoz&oacute;i  k&ouml;z&uuml;l egyesek csak a fut&oacute; h&eacute;j sz&aacute;m&aacute;ra lesznek l&aacute;that&oacute;ak, m&aacute;sok &aacute;tad&oacute;dnak a h&eacute;jb&oacute;l indul&oacute; parancsoknak vagy &uacute;j ind&iacute;tott h&eacute;j (lefuttatott szkript) sz&aacute;m&aacute;ra is, ezeket k&ouml;rnyezeti v&aacute;ltoz&oacute;knak nevezz&uuml;k. A m&aacute;r eml&iacute;tett <code class="envar">PATH</code> v&aacute;ltoz&oacute; &aacute;tad&oacute;dik minden &uacute;j ind&iacute;tott programnak illetve h&eacute;jnak, a <code class="envar">PS1</code> pedig nem.</p>

<p><a class="indexterm" name="d5e1731"></a>Az <span class="command"><strong>export</strong></span> parancs be&iacute;rja a h&eacute;jv&aacute;ltoz&oacute;t a k&ouml;rnyezeti v&aacute;ltoz&oacute;k list&aacute;j&aacute;ba. Haszn&aacute;lata:</p>

<div class="cmdsynopsis"><p>
  <code class="command">export</code> 
   [-nfp]
    <em class="replaceable"><code>V&Aacute;LTOZ&Oacute;</code></em> 
   [<em class="replaceable"><code>=&Eacute;RT&Eacute;K</code></em>]

</p></div>

<p>&Iacute;gy lehet p&eacute;ld&aacute;ul a <code class="envar">PATH</code> v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t megv&aacute;ltoztatni. Amennyiben azt szeretn&eacute;nk, hogy a munka k&ouml;nyvt&aacute;runk (a <code class="filename">.</code> k&ouml;nyvt&aacute;r) is legyen a keresett k&ouml;nyvt&aacute;rak k&ouml;zt a parancsok elind&iacute;t&aacute;s&aacute;n&aacute;l, az al&aacute;bbi parancsokat kell v&eacute;grehajtani:</p>
<pre class="screen">
PATH=$PATH:.
export PATH
</pre>
<p>vagy egyszer&#369;bben:</p>
<pre class="screen">
export PATH=$PATH:.
</pre>
<p>Ha minden bejelentkez&eacute;skor sz&uuml;ks&eacute;g van erre, akkor a parancsot be kell &iacute;rni  a <code class="filename">.bash_profile</code> vagy <code class="filename">.bashrc</code> f&aacute;jlba (ha a  Bash-el dolgozunk).</p>

<p>Az els&#337; sor &aacute;t&aacute;ll&iacute;tja (&uacute;jra deklar&aacute;lja) a <code class="envar">PATH</code> v&aacute;ltoz&oacute;t: a r&eacute;gi m&ouml;g&eacute; odailleszti az elv&aacute;laszt&oacute; karaktert (:) &eacute;s ut&aacute;na a pillanatnyi munkak&ouml;nyvt&aacute;r nev&eacute;t, majd az export h&eacute;j utas&iacute;t&aacute;ssal be&iacute;rja a k&ouml;rnyezeti v&aacute;ltoz&oacute;k k&ouml;z&eacute;, &uacute;gy, hogy a h&eacute;j &aacute;ltal ind&iacute;tott folyamatok is &ouml;r&ouml;k&ouml;lj&eacute;k.</p>

<div class="note" title="Munkak&ouml;nyvt&aacute;r a PATH v&aacute;ltoz&oacute;ba" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Munkak&ouml;nyvt&aacute;r a PATH v&aacute;ltoz&oacute;ba"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">Munkak&ouml;nyvt&aacute;r a <code class="envar">PATH</code> v&aacute;ltoz&oacute;ba</th></tr><tr><td align="left" valign="top">
<p>A <code class="filename">.</code> k&ouml;nyvt&aacute;rat root felhaszn&aacute;l&oacute; eset&eacute;ben nem aj&aacute;nlott a <code class="envar">PATH</code> list&aacute;ba betenni biztons&aacute;gi okok miatt.</p>
</td></tr></table></div>

<p>Az <span class="command"><strong>export</strong></span> <code class="option">-f</code> kapcsol&oacute;val f&uuml;ggv&eacute;nyneveket &iacute;r az export list&aacute;ba, <code class="option">-n</code> kapcsol&oacute;val t&ouml;rli a be&iacute;rt neveket. Az <code class="option">-p</code> opci&oacute;val kilist&aacute;zza azokat a neveket, amelyeket a fut&oacute; h&eacute;j export&aacute;l.</p>

</div>
<div class="sect1" title="A h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;i vagy param&eacute;terei"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1763">A h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;i vagy param&eacute;terei</h2></div></div></div>
<p>A h&eacute;j t&ouml;bb speci&aacute;lis v&aacute;ltoz&oacute;t vagy param&eacute;tert tartalmaz, amelyek automatikusan j&ouml;nnek l&eacute;tre. T&ouml;bbnyire olyan inform&aacute;ci&oacute;kat fognak tartalmazni amelyek minden programra jellemz&#337;ek &eacute;s gyakran ker&uuml;lnek felhaszn&aacute;l&aacute;sra. N&eacute;h&aacute;nyat megeml&iacute;t&uuml;nk itt, a t&ouml;bbit pedig az anyaggal val&oacute; halad&aacute;s k&ouml;zben.</p>

<p>Ezeknek a v&aacute;ltoz&oacute;knak nem tudunk felhaszn&aacute;l&oacute;k&eacute;nt &eacute;rt&eacute;ket adni, azok is automatikusan &aacute;llnak el&#337;.</p>

<p>Nev&uuml;k &aacute;ltal&aacute;ban egy speci&aacute;lis karakterb&#337;l &aacute;ll, &iacute;gy nagyon gyorsan be lehet &iacute;rni &#337;ket. P&eacute;ld&aacute;ul a parancssor argumentumait az <code class="varname">1</code>, <code class="varname">2</code>, <code class="varname">3</code>, ..., <code class="varname">9</code> nev&#369; v&aacute;ltoz&oacute;kkal lehet el&eacute;rni, &iacute;gy  <code class="varname">$1</code>, <code class="varname">$2</code>, ... <code class="varname">$9</code> -k&eacute;nt hivatkozunk re&aacute;juk. A parancssoron tal&aacute;lhat&oacute; argumentumok sz&aacute;m&aacute;t pedig a  <code class="varname">#</code> v&aacute;ltoz&oacute; tartalmazza. Ezek a kapcsos  z&aacute;r&oacute;jeles szintaxissal is el&eacute;rhet&#337;ek. Az al&aacute;bbi szkript (<code class="filename">arg.sh</code>) p&eacute;ld&aacute;ul ki&iacute;rja els&#337; &eacute;s harmadik argumentum&aacute;t, valamint az argumentumok sz&aacute;m&aacute;t:
</p>

<pre class="programlisting">
#!/bin/bash
echo $1
echo ${3}
echo a parancssor $# argumentumot tartalmaz
</pre>

<p>, v&eacute;grehajtva:</p>

<pre class="screen">
$ bash arg.sh elso masodik harmadik
elso
harmadik
a parancssor 3 argumentumot tartalmaz
$ 
</pre>

<p>Az k&ouml;vetkez&#337; szkript (<code class="varname">valtozok.sh</code>) az els&#337; param&eacute;ter hossz&aacute;t &eacute;s els&#337; karakter&eacute;t &iacute;rja ki a {} jel&ouml;l&eacute;s oper&aacute;torait haszn&aacute;lva:</p>
<pre class="programlisting">
#!/bin/bash

#ellen&#337;rz&eacute;s
str=${1:? nincs param&eacute;ter}

echo a param&eacute;ter hossza ${#str}
echo els&#337; karaktere: ${str:0:1}
</pre>
<p>, lefuttatva:</p>
<pre class="screen">
$ bash valtozok.sh
valtozok.sh: line 4: 1:  nincs param&eacute;ter
$ bash valtozok.sh piros
a param&eacute;ter hossza 5
els&#337; karaktere: p
$ 
</pre>

<p>M&eacute;g k&eacute;t speci&aacute;lis v&aacute;ltoz&oacute;t eml&iacute;t&uuml;nk itt meg: az <code class="varname">@</code> &eacute;s a <code class="varname">*</code> v&aacute;ltoz&oacute;kat. Mindkett&#337; a parancssor &ouml;sszes argumentum&aacute;t tartalmazza, azzal a k&uuml;l&ouml;nbs&eacute;ggel, hogy az <code class="varname">@</code>-ban minden argumentum k&uuml;l&ouml;n sztring&eacute;nt jelenik meg, a <code class="varname">*</code> -ban pedig egy sztringk&eacute;nt, a h&eacute;j implicit elv&aacute;laszt&oacute; karakter&eacute;vel elv&aacute;lasztva (ez a sz&oacute;k&ouml;z, tabul&aacute;tor vagy &uacute;jsor). Ha a parancssor argumentumai p&eacute;ld&aacute;ul az <code class="literal">alpha</code>, <code class="literal">beta</code> &eacute;s <code class="literal">gamma</code> sztringek:</p>

<pre class="screen">
bash args.sh alpha beta gamma
</pre>

<p>akkor a "$@" jel&ouml;l&eacute;s az:
<code class="literal">"alpha" "beta" "gamma"</code>
sztringet tartalmazza, a "$*" pedig a:
<code class="literal">"alpha beta gamma"</code>
sztringet. Ha egy szkriptben <span class="command"><strong>echo</strong></span>-val ki&iacute;rjuk ezeket, nem l&aacute;tunk semmi k&uuml;l&ouml;nbs&eacute;get, de abban az esetben, ha param&eacute;terk&eacute;nt tov&aacute;bbadjuk &#337;ket egy m&aacute;sik strukt&uacute;r&aacute;nak, vannak k&uuml;l&ouml;nbs&eacute;gek, amint azt l&aacute;tni fogjuk.</p>

</div>


<div class="sect1" title="A parancs helyettes&iacute;t&eacute;s"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="commandsubst">A parancs helyettes&iacute;t&eacute;s</h2></div></div></div>
<p>Parancs helyettes&iacute;t&eacute;snek azt a m&#369;veletet nevezz&uuml;k, amely sor&aacute;n a h&eacute;j lefuttat egy parancsot, &eacute;s a parancs kimenet&eacute;t (a standard kimenetet) mint egyetlen karaktersort egy v&aacute;ltoz&oacute;hoz rendel.</p>
<p>K&eacute;t jel&ouml;l&eacute;st haszn&aacute;lunk erre, egy hagyom&aacute;nyosat &eacute;s egy modernet. Hagyom&aacute;nyos jel&ouml;l&eacute;s:</p>


<pre class="programlisting">
<span class="strong"><strong>v&aacute;ltoz&oacute;=`parancssor`</strong></span>
</pre>

<p>, m&iacute;g a modern:</p>

<pre class="programlisting">
<span class="strong"><strong>v&aacute;ltoz&oacute;=$( parancssor )</strong></span>
</pre>


<p>Mindk&eacute;t jel&ouml;l&eacute;s ugyanazt az eredm&eacute;nyt id&eacute;zi el&#337;. Amint azt tapasztalni fogjuk, a <code class="code">$()</code> jel&ouml;l&eacute;s jobban olvashat&oacute;, ez&eacute;rt ezt aj&aacute;nlott haszn&aacute;lni, de a gyakorlatban mindkett&#337;vel ugyanolyan m&eacute;rt&eacute;kben tal&aacute;lkozhatunk. A POSIX standard az ut&oacute;bbi, <code class="code">$()</code> jel&ouml;l&eacute;s alkalmaz&aacute;s&aacute;t javasolja.</p>

<p>Az al&aacute;bbi p&eacute;ld&aacute;ban az els&#337; parancssor <span class="command"><strong>echo</strong></span> kimenete nem a kimenetre ker&uuml;l, hanem az <code class="varname">uzenet</code> v&aacute;ltoz&oacute;ba:</p>
<pre class="screen">
$ uzenet=` echo "ez a ki&iacute;rni val&oacute;" `
$ echo $uzenet
ez a ki&iacute;rni val&oacute;
$ 
</pre>

<p>Ugyanazt &eacute;rj&uuml;k el az al&aacute;bbi jel&ouml;l&eacute;ssel:</p>
<pre class="screen">
$ uzenet=$( echo "ez a ki&iacute;rni val&oacute;" )
$ echo $uzenet
ez a ki&iacute;rni val&oacute;
$ 
</pre>
<p>A fenti p&eacute;ld&aacute;ban az <span class="command"><strong>echo</strong></span> kimenete egy 1 soros karakterl&aacute;nc. Amennyiben nem &iacute;gy van, &eacute;s a kimenet t&ouml;bb sorb&oacute;l &aacute;ll, a h&eacute;j &aacute;t&iacute;rja az &uacute;j sor karakter elv&aacute;laszt&oacute;t egy sz&oacute;k&ouml;z karakterr&eacute;. Ilyenkor egy karakterl&aacute;ncokb&oacute;l &aacute;ll&oacute;, sz&oacute;k&ouml;zzel ell&aacute;tott list&aacute;t rendel a v&aacute;ltoz&oacute;hoz. P&eacute;ld&aacute;ul az <span class="command"><strong>ls -1</strong></span> (&uacute;gy list&aacute;z, hogy minden egyes f&aacute;jln&eacute;v k&uuml;l&ouml;n sorba ker&uuml;l) parancs kimenet&eacute;t v&aacute;ltoz&oacute;ba &iacute;rva egy f&aacute;jln&eacute;v list&aacute;t kapunk:</p>

<pre class="screen">
$ ls -1
alma.sh  
hello.sh  
phone.sh
$ lista=$( ls -1 )
$ echo $lista
alma.sh hello.sh phone.sh
$
</pre>
</div>

<div class="sect1" title="A parancssor &aacute;t&iacute;r&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1820">A parancssor &aacute;t&iacute;r&aacute;sa</h2></div></div></div>
<p>Amint azt az id&eacute;z&#337;jel haszn&aacute;lat&aacute;n&aacute;l l&aacute;ttuk, a h&eacute;j a parancssort v&eacute;grehajt&aacute;s el&#337;tt "&aacute;t&iacute;rja": ha vannak benne olyan szerkezetek vagy metakarakterek amelyeket a v&eacute;grehajt&aacute;s el&#337;tt helyettes&iacute;thet, akkor megteszi azt.</p>

<p><span class="emphasis"><em>A metakarakterek olyan karakterek, amelyek m&aacute;st jelentenek a h&eacute;j sz&aacute;m&aacute;ra mint bet&#369; szerinti jelent&eacute;s&uuml;k.</em></span></p>

<p>Az al&aacute;bbiakkal tal&aacute;lkoztunk eddig:</p>


       <div class="informaltable">
                <table cellpadding="4" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Metakarakter</th><th align="center">Jelent&eacute;se</th></tr></thead><tbody><tr><td align="center"><code class="code">*</code></td><td align="left">A munkak&ouml;nyvt&aacute;rban lev&#337; f&aacute;jl neveket &iacute;rja be helyette.</td></tr><tr><td align="center"><code class="code">~</code></td><td align="left">A saj&aacute;t k&ouml;nyvt&aacute;r el&eacute;r&eacute;si &uacute;tj&aacute;t jelenti (pl. <code class="filename">/home/lszabo</code> -t &iacute;r be a hull&aacute;mvonal helyett).</td></tr><tr><td align="center"><code class="code">$</code></td><td align="left">A k&ouml;zvetlen&uuml;l ut&aacute;na k&ouml;vetkez&#337; karakterl&aacute;ncot v&aacute;ltoz&oacute;n&eacute;vnek tekinti.</td></tr></tbody></table>
        </div> 


<p>A metakaraktereket lehet liter&aacute;lis &eacute;rtelemben is haszn&aacute;lni a parancssoron, de ekkor vissza-per jel&ouml;l&eacute;ssel kell megadni vagy aposztr&oacute;f k&ouml;z&eacute; kell z&aacute;rni &#337;ket. Egy <code class="literal">*</code>-ot &iacute;gy &iacute;runk ki a termin&aacute;lra:</p>

<pre class="screen">
$ echo \*
*
$ #vagy:
$ echo '*'
*
$ 
</pre>

<p>A h&eacute;j bonyolultabb folyamatok k&ouml;zti &ouml;sszef&uuml;gg&eacute;seket is l&eacute;trehoz amikor a parancssort ki&eacute;rt&eacute;keli, erre k&eacute;s&#337;bb m&eacute;g visszat&eacute;r&uuml;nk.</p>

</div>

<div class="sect1" title="A here document &aacute;tir&aacute;ny&iacute;t&aacute;s (&#34;itt dokumentum&#34;)"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1852">A here document &aacute;tir&aacute;ny&iacute;t&aacute;s ("itt dokumentum")</h2></div></div></div>
<p>Ha tudjuk, hogyan dolgozik a h&eacute;j a v&aacute;ltoz&oacute;kkal, megismerhet&uuml;nk m&eacute;g egy &aacute;tir&aacute;ny&iacute;t&aacute;si m&#369;veletet. Ez nem egy parancssorra, hanem egym&aacute;s ut&aacute;n k&ouml;vetkez&#337; sz&ouml;veg sorokra vonatkozik, ez&eacute;rt legink&aacute;bb h&eacute;jprogramokban haszn&aacute;ljuk.  Seg&iacute;ts&eacute;g&eacute;vel a h&eacute;j program bemenete &aacute;tir&aacute;ny&iacute;that&oacute; arra a f&aacute;jlra amelyben a h&eacute;j program tal&aacute;lhat&oacute;. Haszn&aacute;lati m&oacute;dj&aacute;t az al&aacute;bbi minta adja meg:</p>

<pre class="programlisting">
<span class="strong"><strong>
parancs  &lt;&lt;  VEGE
itt b&aacute;rmilyen 
       sz&ouml;veg   &aacute;llhat
VEGE
</strong></span>
</pre>
<p>A parancs v&eacute;grehajt&aacute;sa ut&aacute;n (ez b&aacute;rmilyen Unix parancs lehet amelyik a standard bemenetr&#337;l olvas), a h&eacute;j a parancs bemenet&eacute;t a saj&aacute;t programsz&ouml;veg&eacute;re ir&aacute;ny&iacute;tja (az "itt b&aacute;rmilyen sz&ouml;veg &aacute;llhat" sorra vagy sorokra), &eacute;s a parancs addig olvas innen, am&iacute;g  egy sor elej&eacute;n ugyanarra a karakterl&aacute;ncra akad, amely a &lt;&lt; jelek ut&aacute;n &aacute;ll. Itt abbahagyja az olvas&aacute;st, &eacute;s a h&eacute;j v&eacute;grehajtja a k&ouml;vetkez&#337; soron lev&#337; parancsot. Az al&aacute;bbi h&eacute;j program egy sorozatlev&eacute;lhez gener&aacute;l sz&ouml;veget:</p>

<pre class="programlisting">
#!/bin/bash

cimzett=${1:? hi&aacute;nyzik az el&#337; param&eacute;ter, a c&iacute;mzett neve}

cat &lt;&lt; VEGE

K&ouml;nyvt&aacute;ri figyelmeztet&#337;

Kedves ${cimzett}

k&eacute;rj&uuml;k hozza vissza a k&ouml;lcs&ouml;nk&eacute;rt k&ouml;nyveket.
&Uuml;dv&ouml;zlettel,
K&ouml;nyvt&aacute;ros

VEGE
</pre>

<p>V&eacute;grehajt&aacute;sakor az al&aacute;bbit l&aacute;tjuk:</p>
<pre class="screen">
$ bash mintalevel.sh P&eacute;ter

K&ouml;nyvt&aacute;ri figyelmeztet&#337;

Kedves P&eacute;ter

k&eacute;rj&uuml;k hozza vissza a k&ouml;lcs&ouml;nk&eacute;rt k&ouml;nyveket.
&Uuml;dv&ouml;zlettel,
K&ouml;nyvt&aacute;ros
$ 
</pre>

<p>Mik&ouml;zben a sz&ouml;veg &aacute;tker&uuml;l az &#337;t olvas&oacute; programhoz (a <span class="command"><strong>cat</strong></span>-hez ebben a p&eacute;ld&aacute;ban), a h&eacute;j ugyan&uacute;gy &aacute;t&iacute;rja, mintha  macskak&ouml;r&ouml;mmel k&ouml;r&uuml;lvett sorok lenn&eacute;nek: teh&aacute;t amennyiben a sz&ouml;vegben v&aacute;ltoz&oacute;k is vannak, azok &aacute;t&iacute;r&aacute;sra ker&uuml;lnek. A <span class="emphasis"><em>here document</em></span> &aacute;tir&aacute;ny&iacute;t&aacute;s rendk&iacute;v&uuml;l hasznos, ha t&ouml;bb p&eacute;ld&aacute;nyban kell olyan sz&ouml;vegeket gener&aacute;lni, amelyekben v&aacute;ltoz&oacute; mez&#337;k vannak.</p>

<p><span class="strong"><strong>Fontos:</strong></span> a <code class="literal">VEGE</code> sz&oacute;t tartalmaz&oacute; lez&aacute;r&oacute; sorban ak&aacute;rmilyen sz&oacute;cska &aacute;llhat, de a sornak csak ezt az egyetlen sz&oacute;t kell tartalmaznia a sor elej&eacute;n.
</p>


<p>Megeml&iacute;tj&uuml;k, hogy a shell rendelkezik egy <span class="emphasis"><em>here string</em></span> nev&#369; &aacute;tir&aacute;ny&iacute;t&aacute;ssal is, amellyel egyetlen sztringet lehet egy parancs standard bemenet&eacute;re k&uuml;ldeni. Az &aacute;tad&aacute;s el&#337;tt a shell a sztringet &aacute;t&iacute;rja. A haszn&aacute;lt &aacute;tir&aacute;ny&iacute;t&oacute; jel a <code class="code">&lt;&lt;&lt;</code> , teh&aacute;t &iacute;gy v&aacute;gjuk ki a <code class="literal">b</code> karaktert az <code class="literal">"a b c"</code> sztringb&#337;l::</p>

<pre class="screen">
$ cut -f 2 -d " " &lt;&lt;&lt; "a b c"
b
$
</pre>

</div>

<div class="sect1" title="A . &eacute;s a source parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_dot">A . &eacute;s a source parancs</h2></div></div></div>

<p>A <span class="strong"><strong>.</strong></span> (<span class="emphasis"><em>dot</em></span>)  parancs beolvassa &eacute;s azonnal v&eacute;grehajtja azokat a shell parancsokat amelyek az argumentum&aacute;ban megadott &aacute;llom&aacute;nyban vannak. Mindezt  az &eacute;ppen fut&oacute; h&eacute;jban v&eacute;gzi el, nem ind&iacute;t &uacute;j h&eacute;jat, ez&eacute;rt a k&uuml;ls&#337; &aacute;llom&aacute;nyb&oacute;l beolvasott v&aacute;ltoz&oacute;k &eacute;s defin&iacute;ci&oacute;k (pl. a <a class="link" href="#function" title="F&uuml;ggv&eacute;nyek">f&uuml;ggv&eacute;nyek</a>) az aktu&aacute;lis h&eacute;jban maradnak.</p>

<p>Tekints&uuml;k a <code class="filename">def.sh</code> f&aacute;jlt, amelynek tartalma:</p>

<pre class="programlisting">
a=2 
export LANG=hu_HU.UTF-8 
</pre>

<p>Ha v&eacute;grehajtjuk a szkriptet egy &uacute;j h&eacute;jjal, a defin&iacute;ci&oacute;k az &uacute;j h&eacute;jban j&ouml;nnek l&eacute;tre, &eacute;s lefut&aacute;s ut&aacute;n nem lesznek jelen a h&iacute;v&oacute; h&eacute;jban:</p>

<pre class="screen">
$ bash def.sh
$ echo $a

$
</pre>


<p>Ez t&ouml;rt&eacute;nik minden norm&aacute;l szkript futtat&aacute;sakor.</p>


<p>Ezzel szemben, a <span class="strong"><strong>.</strong></span> paranccsal v&eacute;grehajtva:</p>

<pre class="screen">
$ unset a 
$ echo $a 

$ . def.sh 
$ echo $a 
2 
$ 
</pre>

<p>Az <code class="varname">a</code> v&aacute;ltoz&oacute; az aktu&aacute;lis h&eacute;jban j&ouml;n l&eacute;tre. Ugyanezt a feladatot v&eacute;gzi a <span class="command"><strong>source</strong></span> parancs is:</p>
<pre class="screen">
$ source def.sh 
$ echo $a 
2 
$ 
</pre>


</div>


<div class="sect1" title="P&eacute;ldaprogramok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1892">P&eacute;ldaprogramok</h2></div></div></div>



<p>Az al&aacute;bbi szkriptek eg&eacute;sz egyszer&#369; programok, gyakorlatilag csak v&aacute;ltoz&oacute;kat haszn&aacute;lunk benne ism&eacute;tl&#337;d&#337; szerkezetek n&eacute;lk&uuml;l.</p>

<p>&Iacute;rjunk egy szkriptet amelyik ki&iacute;rja egy &aacute;llom&aacute;ny N.-dik sor&aacute;t!</p>

<p>Az al&aacute;bbi szkript (<code class="filename">printline.sh</code>) a feladatot a  <span class="command"><strong>head</strong></span> &eacute;s <span class="command"><strong>tail</strong></span> parancsokkal oldja meg, kilist&aacute;zva a f&aacute;jl els&#337; N sor&aacute;t a <span class="command"><strong>head</strong></span> seg&iacute;ts&eacute;g&eacute;vel, ut&aacute;na ennek a list&aacute;nak az utols&oacute; sor&aacute;t. A param&eacute;tereket a <code class="code">${}</code> szerkezettel saj&aacute;t v&aacute;ltoz&oacute;ba &iacute;rjuk &aacute;t haszn&aacute;lat el&#337;tt. Ennek &aacute;ltal&aacute;ban az az el&#337;nye, hogy sokkal olvashat&oacute;bb szkriptet kapunk amikor felhaszn&aacute;ljuk &#337;ket.</p> 

<p>A <span class="command"><strong>tail</strong></span> parancs a f&aacute;jl v&eacute;g&eacute;n lev&#337; sorokat list&aacute;zza. A leggyakrabban haszn&aacute;lt opci&oacute;ja egy sz&aacute;m, amely a f&aacute;jl v&eacute;g&eacute;r&#337;l list&aacute;zott sorok sz&aacute;m&aacute;t tartalmazza, ennek implicit &eacute;rt&eacute;ke 10.</p>

<p>Az al&aacute;bbi kis sz&ouml;veget felhaszn&aacute;lva:</p>

<div class="literallayout"><p>1&nbsp;elso<br>
2&nbsp;masodik<br>
3&nbsp;harmadik<br>
4&nbsp;negyedik<br>
5&nbsp;otodik<br>
6&nbsp;hatodik<br>
7&nbsp;hetedik<br>
</p></div>
<p>&iacute;gy list&aacute;zhatjuk az utols&oacute; 3 sort:</p>
<pre class="screen">
$ tail -3 lista.txt
5 otodik
6 hatodik
7 hetedik
$ 
</pre>

<p>A szkript param&eacute;terek&eacute;nt kapott f&aacute;jlneveket mindig id&eacute;z&#337;jelbe tessz&uuml;k, mert tartalmazhatnak elv&aacute;laszt&oacute; karaktereket, pl. sz&oacute;k&ouml;zt:</p>


<pre class="programlisting">
#!/bin/bash
# kilist&aacute;zza egy f&aacute;jl n.-dik sor&aacute;t
#
# param&eacute;terek:
#   $1 - f&aacute;jl n&eacute;v
#   $2 - eg&eacute;sz sz&aacute;m
# param&eacute;terek &aacute;tv&eacute;tele
file=${1?: hi&aacute;nyzik a f&aacute;jln&eacute;v}
N=${2?: hi&aacute;nyzik a sorsz&aacute;m}
head -$N "$file" | tail -1
</pre>


<p>a v&eacute;grehajt&aacute;s (els&#337; alkalommal hib&aacute;san):</p>

<pre class="screen">
$ bash printline.sh
printline.sh: line 9: 1: : hi&aacute;nyzik a f&aacute;jln&eacute;v
$ bash printline.sh lista.txt 6
6 hatodik
$
</pre>

<p>A program csak helyes param&eacute;terekkel m&#369;k&ouml;dik, nem ellen&#337;rizz&uuml;k, hogy az N eg&eacute;sz sz&aacute;m.</p>
<p>Megjegyz&eacute;s: a feladatot sokkal egyszer&#369;bben meg lehet oldani a <span class="command"><strong>sed</strong></span> paranccsal (<a class="link" href="#sed" title="9. fejezet - A sed folyamszerkeszt&#337;">l&aacute;sd 9. fejezet</a>):</p>

<pre class="screen">
$ sed -n 6p lista.txt
6 hatodik
$
</pre>


<p>Egy m&aacute;sik kis feladat: sz&uacute;rjunk be egy sz&ouml;veges f&aacute;jl els&#337; sor&aacute;nak v&eacute;g&eacute;re egy sztringet, &eacute;s ments&uuml;k el a f&aacute;jlt m&aacute;s n&eacute;v alatt!</p>

<p>A szkriptben ugyancsak a <span class="command"><strong><a class="link" href="#cmd_head">head</a></strong></span>  &eacute;s <a class="indexterm" name="d5e1921"></a> <span class="command"><strong>tail</strong></span> parancsokat haszn&aacute;ljuk.</p>


<p>A f&aacute;jl v&eacute;gi sorok list&aacute;z&aacute;sa megadhat&oacute; a <span class="command"><strong>tail</strong></span> <code class="option">-n</code> opci&oacute;j&aacute;val is:</p>

<pre class="screen">
$ tail -n 3 lista.txt
5 otodik
6 hatodik
7 hetedik
$ 
</pre>
<p>Ha az opci&oacute; param&eacute;tere el&#337;tt <code class="code">+</code> jel van, akkor jelent&eacute;se: az n.-dik sort&oacute;l a f&aacute;jl v&eacute;g&eacute;ig, ezt fogjuk felhaszn&aacute;lni szkript&uuml;nkben:</p>

<pre class="screen">
$ tail -n +6 lista.txt
6 hatodik
7 hetedik
</pre>

<p>Az eddig bemutatott egyszer&#369; eszk&ouml;z&ouml;kkel &iacute;gy oldhat&oacute; meg a feladat: </p>

<pre class="programlisting">
#!/bin/bash
# besz&uacute;r egy sztringet egy sz&ouml;veges f&aacute;jl els&#337; sor&aacute;nak v&eacute;g&eacute;re
# Param&eacute;terek:
#   $1 - eredeti f&aacute;jl
#   $2 - &uacute;j f&aacute;jl
#   $3 - sz&oacute;
#

#param&eacute;terek &aacute;tv&eacute;tele:

f1=${1:? els&#337; fajln&eacute;v hi&aacute;nyzik}
f2=${2:? m&aacute;sodik fajln&eacute;v hi&aacute;nyzik}
szo=${3:? hi&aacute;nyzik a sz&oacute;}

#az els&#337; f&aacute;jl els&#337; sor&aacute;t egy v&aacute;ltoz&oacute;ba &iacute;rjuk
elso=$( head -1 "$f1")

#hozz&aacute;adjuk a sz&oacute; param&eacute;tert
elso="${elso}${szo}"

#l&eacute;trehozzuk az &uacute;j f&aacute;jl els&#337; sor&aacute;t
echo "$elso" &gt; "$f2"

#f2 -be m&aacute;soljuk a t&ouml;bbi sort f1-b&#337;l
tail -n +2 "$f1" &gt;&gt; "$f2"
</pre>

<p>V&eacute;grehajtva:</p>

<pre class="screen">
$ bash insfirstline.sh lista.txt lista1.txt " vege"
$ cat lista1.txt
1 elso vege
2 masodik
3 harmadik
4 negyedik
5 otodik
6 hatodik
7 hetedik
</pre>

<p>Ez a feladat is egyszer&#369;en fejezhet&#337; ki a <span class="command"><strong><a class="link" href="#sed" title="9. fejezet - A sed folyamszerkeszt&#337;">sed</a></strong></span> paranccsal:</p>

<pre class="screen">
$ sed '1s/$/ vege/' lista.txt
1 elso vege
2 masodik
3 harmadik
4 negyedik
5 otodik
6 hatodik
7 hetedik
$ 
</pre>

</div>



        </div>


    <div class="chapter" title="6. fejezet - Vez&eacute;rl&#337; szerkezetek" id="vezerles"><div class="titlepage"><div><div><h2 class="title">6. fejezet - Vez&eacute;rl&#337; szerkezetek</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e1941">Vez&eacute;rl&#337; szerkezetek</a></span></dt><dt><span class="sect1"><a href="#d5e1948">Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</a></span></dt><dt><span class="sect1"><a href="#d5e2001">Az &amp;&amp; , || &eacute;s ! szerkezetek</a></span></dt><dt><span class="sect1"><a href="#d5e2038">A test parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_expr">Az expr parancs</a></span></dt><dt><span class="sect1"><a href="#d5e2203">Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel</a></span></dt><dt><span class="sect1"><a href="#d5e2264">A for ciklusok</a></span></dt><dt><span class="sect1"><a href="#d5e2320">A  while &eacute;s until ciklusok</a></span></dt><dt><span class="sect1"><a href="#d5e2379">A break &eacute;s continue haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e2398">A shift parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_exit">Kil&eacute;p&eacute;s a h&eacute;j programb&oacute;l: az exit</a></span></dt><dt><span class="sect1"><a href="#d5e2425">A case szerkezet</a></span></dt><dt><span class="sect1"><a href="#d5e2481">A select szerkezet</a></span></dt><dt><span class="sect1"><a href="#cmd_read">A read parancs</a></span></dt><dt><span class="sect1"><a href="#d5e2570">P&eacute;ldaprogramok</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e2573">F&aacute;jl m&aacute;sol&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e2583">K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se</a></span></dt><dt><span class="sect2"><a href="#d5e2627">Sz&ouml;veges f&aacute;jl sorainak v&eacute;gigj&aacute;r&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e2676">A programoz&aacute;si hib&aacute;k felder&iacute;t&eacute;se</a></span></dt></dl></dd></dl></div>

<div class="sect1" title="Vez&eacute;rl&#337; szerkezetek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1941">Vez&eacute;rl&#337; szerkezetek</h2></div></div></div>
<p>A h&eacute;jprogramoz&aacute;sban - a klasszikus programnyelvekhez hasonl&iacute;tva &#8211; egy "v&eacute;grehajt&aacute;si egys&eacute;gnek"  egy kiadott parancs, illetve parancssor felel meg. Ha parancssorr&oacute;l besz&eacute;l&uuml;nk l&aacute;ttuk, hogy ennek szerkezete egy parancsn&aacute;l t&ouml;bb is lehet, p&eacute;ld&aacute;ul tartalmazhat ak&aacute;r 2 parancsot is cs&#337;vezet&eacute;kkel &ouml;sszek&ouml;tve. Ezt a vez&eacute;rl&#337; szerkezetek megad&aacute;s&aacute;n&aacute;l <span class="strong"><strong>parancssor</strong></span>-nak fogjuk jel&ouml;lni.</p>
<p>A parancssori szerkezetek v&eacute;grehajt&aacute;s&aacute;nak sorrendj&eacute;t vez&eacute;relhetj&uuml;k. Erre a h&eacute;j k&uuml;l&ouml;nb&ouml;z&#337;, &uacute;gynevezett <span class="emphasis"><em>vez&eacute;rl&#337; szerkezetet</em></span> haszn&aacute;l.</p>

<p>A struktur&aacute;lt programoz&aacute;s elm&eacute;let&eacute;b&#337;l tudjuk, hogy egy program v&eacute;grehajt&aacute;s&aacute;hoz egy programoz&aacute;si nyelvnek a v&aacute;ltoz&oacute;k kezel&eacute;s&eacute;n k&iacute;v&uuml;l legal&aacute;bb a d&ouml;nt&eacute;shelyzeteket (if szerkezetek) illetve a ciklusok kezel&eacute;s&eacute;t kell megoldania. Ezzel a kett&#337;vel b&aacute;rmilyen parancs v&eacute;grehajt&aacute;si sorrend megszervezhet&#337;. A h&eacute;j vez&eacute;rl&#337; szerkezeteit eredetileg az ALGOL68 nyelvet k&ouml;vetve alak&iacute;tott&aacute;k ki.</p>

</div>

<div class="sect1" title="Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e1948"><a class="indexterm" name="d5e1950"></a>Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</h2></div></div></div>
<p><a class="indexterm" name="d5e1953"></a>A szerkezetek kialak&iacute;t&aacute;sa miatt sz&uuml;ks&eacute;g&uuml;nk van az igaz illetve hamis felt&eacute;tel fogalm&aacute;ra. Mivel a h&eacute;j alatt programok, illetve parancsok futnak, a felt&eacute;telt ezek lefut&aacute;sa ut&aacute;n nyert, programok &aacute;ltal szolg&aacute;ltatott <span class="strong"><strong>kil&eacute;p&eacute;si &eacute;rt&eacute;k vagy &aacute;llapot</strong></span> (<span class="emphasis"><em>program exit status</em></span>) jelenti. Ez a C programok kil&eacute;p&eacute;se ut&aacute;n, az <code class="literal">int  main()</code>f&uuml;ggv&eacute;ny &aacute;ltal visszaadott eg&eacute;sz sz&aacute;m: ennek &eacute;rt&eacute;k&eacute;t a C-ben megh&iacute;vott <code class="literal">void exit(int n)</code> f&uuml;ggv&eacute;ny param&eacute;ter&eacute;ben adjuk meg.</p>

<p><a class="indexterm" name="d5e1960"></a>Ez az &eacute;rt&eacute;k k&ouml;zvetlen&uuml;l a parancs befejez&eacute;se ut&aacute;n, a parancs &aacute;ltal futtatott utols&oacute; program kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;b&#337;l &aacute;ll, amely beker&uuml;l a h&eacute;j speci&aacute;lis  <code class="varname">?</code> nev&#369; v&aacute;ltoz&oacute;j&aacute;ba (&eacute;s <code class="varname">$?</code>-k&eacute;nt &eacute;rhet&#337; el). Ezt az &eacute;rt&eacute;ket az <span class="command"><strong>echo</strong></span> paranccsal tesztelni is lehet:</p>
<pre class="screen">
$ touch 1.txt 
$ ls -l 1.txt 
-rw-rw-r-- 1 lszabo lszabo 0 Oct 12 10:00 1.txt 
$ #v&eacute;grehajt&aacute;s ut&aacute;n ki&iacute;rhatom a ? v&aacute;ltoz&oacute;t amit az ls &aacute;ll&iacute;tott be
$ echo $? 
0 
$ #ha elv&eacute;gz&uuml;nk egy hib&aacute;t ad&oacute; ls-t
$ ls -l nemletezik 
ls: nemletezik: No such file or directory 
$ echo $? 
2 
$ 
</pre>
<p>L&aacute;that&oacute;, hogy j&oacute; lefut&aacute;s eset&eacute;n a visszat&eacute;r&iacute;tett &eacute;rt&eacute;k 0, m&iacute;g hiba eset&eacute;n elt&eacute;r 0-t&oacute;l, jelen esetben 2, de  minden esetben eg&eacute;sz sz&aacute;m (a sz&aacute;mnak &aacute;ltal&aacute;ban van pontos jelent&eacute;se, &eacute;s azt hogy milyen hib&aacute;ra utal az illet&#337; parancs k&eacute;zik&ouml;nyv lapj&aacute;n lehet megn&eacute;zni. P&eacute;ld&aacute;ul az ls k&eacute;zik&ouml;nyve err&#337;l ennyit &iacute;r: "<span class="emphasis"><em>Exit status is 0 if OK, 1 if minor problems, 2 if serious trouble</em></span>"). Teh&aacute;t a tesztek sz&aacute;m&eacute;rt&eacute;ke pont a ford&iacute;tott lesz a C, Java nyelvekn&eacute;l megszokottn&aacute;l: itt az "igaz" felt&eacute;telt a <code class="varname">?</code> v&aacute;ltoz&oacute; <code class="code">0</code> &eacute;rt&eacute;ke adja.</p>


<p>A POSIX szabv&aacute;ny standardiz&aacute;lja a programok &aacute;ltal visszaadott &eacute;rt&eacute;keket, &iacute;gy aj&aacute;nlatos ezeket ak&aacute;r saj&aacute;t C programjaink &iacute;r&aacute;s&aacute;n&aacute;l betartani. Ez az &eacute;rt&eacute;k &aacute;ltal&aacute;ban egy 255-n&eacute;l kisebb el&#337;jel n&eacute;lk&uuml;li eg&eacute;sz sz&aacute;m.</p>


       <div class="table"><a name="d5e1971"></a><p class="title"><b>6.1. t&aacute;bl&aacute;zat - Az exit kil&eacute;p&eacute;si &eacute;rt&eacute;kei</b></p><div class="table-contents">
                
                <table summary="Az exit kil&eacute;p&eacute;si &eacute;rt&eacute;kei" cellpadding="4" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">? v&aacute;ltoz&oacute; &eacute;rt&eacute;ke </th><th align="left">Mit jelent</th></tr></thead><tbody><tr><td align="center">0</td><td align="left">Sikeres parancsv&eacute;grehajt&aacute;s.</td></tr><tr><td align="center">&gt;0</td><td align="left">Hiba t&ouml;rt&eacute;nt a parancssor ki&eacute;rt&eacute;kel&eacute;s&eacute;n&eacute;l (ak&aacute;r az &aacute;tir&aacute;ny&iacute;t&aacute;sokban, behelyettes&iacute;t&eacute;sekben is lehet ez). Az eseteket l&aacute;sd al&aacute;bb:</td></tr><tr><td align="center">1 - 125</td><td align="left">A  program lefutott, de hib&aacute;val l&eacute;pett ki. A k&oacute;d a hib&aacute;t jelenti, minden programn&aacute;l m&aacute;s lehet a jelent&eacute;se.</td></tr><tr><td align="center">126</td><td align="left">A program l&eacute;tezik, de  nem lehetett v&eacute;grehajtani  (pl. nincs jogunk hozz&aacute;, vagy nem egy v&eacute;grehajthat&oacute; bin&aacute;ris k&oacute;d).</td></tr><tr><td align="center">127</td><td align="left">A parancs nem l&eacute;tezik (nem lehetett a <code class="envar">PATH</code> el&eacute;r&eacute;si &uacute;tjai szerint megtal&aacute;lni)</td></tr><tr><td align="center"> &gt; 128</td><td align="left">A program jelz&eacute;ssel &aacute;llt le (pl. ha a <span class="command"><strong>cat</strong></span> fut&aacute;sa k&ouml;zben lenyomjuk a Ctrl-C -t, a program 130-at t&eacute;r&iacute;t vissza). Megjegyz&eacute;s: a 128-as k&oacute;d jelent&eacute;se nincs standardiz&aacute;lva.</td></tr></tbody></table>
        </div></div><br class="table-break"> 

</div>

<div class="sect1" title="Az &amp;&amp; , || &eacute;s ! szerkezetek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2001"><a class="indexterm" name="d5e2003"></a><a class="indexterm" name="d5e2005"></a><a class="indexterm" name="d5e2007"></a>Az &amp;&amp; , || &eacute;s ! szerkezetek</h2></div></div></div>
<p>Ezek a szerkezetek rendk&iacute;v&uuml;l egyszer&#369;en, egyetlen parancssoron alkalmazhat&oacute;ak a megh&iacute;vott parancsok k&ouml;z&ouml;tt. Amint az sejthet&#337;, az <code class="literal">&amp;&amp;</code> egy <span class="emphasis"><em>&eacute;s</em></span>, m&iacute;g a <code class="literal">||</code> egy <span class="emphasis"><em>vagy</em></span> t&iacute;pus&uacute; felt&eacute;telt fog megoldani az egym&aacute;sut&aacute;ni parancsv&eacute;grehajt&aacute;sban.</p>
<p>Az <code class="literal">&amp;&amp;</code>, <code class="literal">||</code> , illetve <code class="literal">!</code> szerkezeteket r&ouml;vidre z&aacute;r&oacute; oper&aacute;toroknak is nevezz&uuml;k (<span class="emphasis"><em>short circuit operators</em></span>), mert a programoz&aacute;si nyelvekhez hasonl&oacute;an, a ki&eacute;rt&eacute;kel&eacute;s&uuml;k le&aacute;ll, ha egy logikai szerkezet v&eacute;geredm&eacute;nye valamelyik (pl. az els&#337;) parancs v&eacute;grehajt&aacute;sa ut&aacute;n el&#337;re tudhat&oacute;.</p>
<p>Az al&aacute;bbi m&oacute;don haszn&aacute;lhat&oacute;ak:</p>

<pre class="screen">

$ touch 1.txt
$ #ha hib&aacute;val fut az ls parancs, ki&iacute;rok egy &uuml;zenetet 
$ ls 1.txt &amp;&amp; echo 'van ilyen f&aacute;jl' 
1.txt 
van ilyen f&aacute;jl 
$ #ha nem siker&uuml;l az ls-t lefuttatni, ki&iacute;rok egy &uuml;zenetet
$ ls 1.txt || echo 'uzenet' 
1.txt 
$ 
</pre>

<p>Az <code class="literal">&amp;&amp;</code> szerkezet v&eacute;grehajtja a parancssoron k&ouml;vetkez&#337; parancsot, amennyiben az el&#337;z&#337; lefutott parancs "j&oacute;l" futott le, teh&aacute;t igaz visszat&eacute;r&iacute;tett &eacute;rt&eacute;kkel z&aacute;rult. Tulajdonk&eacute;ppen &uacute;gy is tekinthetj&uuml;k, hogy az <code class="literal">&amp;&amp;</code> ki&eacute;rt&eacute;keli a k&eacute;t lefutott parancs &aacute;ltal visszat&eacute;r&iacute;tett &eacute;rt&eacute;ket. Logikailag a m&aacute;sodikat akkor &eacute;rtelmes v&eacute;grehajtani, ha az els&#337; parancs j&oacute;l lefutott. A <code class="literal">||</code> eset&eacute;ben viszont a m&aacute;sodik parancsot nincs &eacute;rtelme v&eacute;grehajtani, ha az els&#337; j&oacute;l futott le, amint az a m&aacute;sodik p&eacute;ld&aacute;b&oacute;l ( <code class="code">ls 1.txt || echo 'uzenet'</code> ) l&aacute;tszik.</p>

<p>Ezzel a k&eacute;t egyszer&#369; szerkezettel ak&aacute;r if-else strukt&uacute;ra is kialak&iacute;that&oacute; egyetlen parancssoron k&eacute;t parancs k&ouml;z&ouml;tt:</p>

<pre class="screen">
$ ls 1.txt &amp;&amp; echo 'van ilyen f&aacute;jl' || echo 'nincs ilyen f&aacute;jl' 
1.txt 
van ilyen f&aacute;jl 
$ ls nemletezik &amp;&amp; echo 'van ilyen f&aacute;jl' || echo 'nincs ilyen f&aacute;jl' 
ls: nemletezik: No such file or directory 
nincs ilyen f&aacute;jl 
$ 
</pre>


<p>A <code class="literal">!</code> oper&aacute;tornak egy jobb oldalon tal&aacute;lhat&oacute; parancs operandusa kell legyen, seg&iacute;ts&eacute;g&eacute;vel a visszaadott <code class="literal">?</code> v&aacute;ltoz&oacute; &eacute;rt&eacute;ke tagadhat&oacute;:</p>

<pre class="screen">
$ ! ls *.txt 
1.txt  2.txt  felhasznalok.txt 
$ echo $? 
1 
$
</pre>

<div class="note" title="A lexik&aacute;lis egys&eacute;gekre figyelni kell" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: A lexik&aacute;lis egys&eacute;gekre figyelni kell"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">A lexik&aacute;lis egys&eacute;gekre figyelni kell</th></tr><tr><td align="left" valign="top">
<p>A szintaxis itt &eacute;s az al&aacute;bbiakban v&eacute;gig elt&eacute;r a C, Java stb. nyelvekben megszokottakt&oacute;l: nem &iacute;rhatunk <span class="command"><strong>!ls</strong></span>-t, a parancs &eacute;rtelmez&#337;nek k&uuml;l&ouml;n lexik&aacute;lis egys&eacute;gk&eacute;nt kell l&aacute;tnia a <code class="literal">!</code> illetve az <span class="command"><strong>ls</strong></span> sztringeket.</p>
</td></tr></table></div>

</div>

<div class="sect1" title="A test parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2038"><a class="indexterm" name="d5e2040"></a>A test parancs</h2></div></div></div>
<p>Az parancsok kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;n k&iacute;v&uuml;l, gyakran tesztelj&uuml;k az al&aacute;bbiakat:
</p>

     <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                        <p>f&aacute;jlok tulajdons&aacute;gait  (l&eacute;tezik-e, &iacute;rhat&oacute;-e, olvashat&oacute;-e, stb.)</p>
                    </li><li class="listitem">
                        <p>karakterl&aacute;ncokat (vagy v&aacute;ltoz&oacute;kat, amelyek karakterl&aacute;ncot tartalmaznak: l&eacute;tezik-e, mennyi az &eacute;rt&eacute;ke)</p>
                    </li><li class="listitem">
                         <p>sz&aacute;mszer&#369; &eacute;rt&eacute;keket (sz&aacute;mokat tartalmaz&oacute; karakterl&aacute;ncokat)</p>    
                    </li></ul></div>

<p><a class="indexterm" name="d5e2051"></a>A h&aacute;rom t&iacute;pus&uacute; teszt elv&eacute;gz&eacute;s&eacute;t a r&eacute;gi  h&eacute;jakban egy parancsban val&oacute;s&iacute;tott&aacute;k meg, &eacute;s ezt ma is haszn&aacute;ljuk. A parancs argumentumk&eacute;nt megkapja a tesztelend&#337; f&aacute;jlnevet, karakterl&aacute;ncot, sz&aacute;mot tartalmaz&oacute; v&aacute;ltoz&oacute;t, lefut &eacute;s kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;ben k&ouml;zli a teszt igaz vagy hamis volt&aacute;t, a m&aacute;r eml&iacute;tett ford&iacute;tott logik&aacute;val. A parancs neve <span class="command"><strong>test</strong></span> , &eacute;s megtal&aacute;lhat&oacute; k&uuml;ls&#337; parancs illetve a h&eacute;jba &eacute;p&iacute;tett parancs form&aacute;j&aacute;ban is (mivel igen gyakran haszn&aacute;ljuk). A <span class="command"><strong>test</strong></span> h&iacute;v&aacute;sakor az argumentumok szerkezete k&uuml;l&ouml;nb&ouml;zik, ha f&aacute;jln&eacute;vr&#337;l, karakterl&aacute;ncr&oacute;l illetve sz&aacute;mr&oacute;l van sz&oacute;. &Aacute;ltal&aacute;nosan ezt &iacute;gy adjuk meg: </p>
<pre class="programlisting">
<span class="strong"><strong>test kifejez&eacute;s</strong></span>
</pre>
<p>de az al&aacute;bbi szintaxissal is h&iacute;vhat&oacute;, ami jobban kifejezi a felt&eacute;tel ki&eacute;rt&eacute;kel&eacute;st:</p>
<pre class="programlisting">
<span class="strong"><strong>[ kifejez&eacute;s ]</strong></span>
</pre>
<p>A test fontosabb kifejez&eacute;sei az al&aacute;bbiak (a teljes lista megtal&aacute;lhat&oacute; a k&eacute;zik&ouml;nyben, <code class="literal">man 1 test</code>, az al&aacute;bbi opci&oacute;k megad&aacute;sa a k&eacute;zik&ouml;nyv <a class="link" href="#Manhu">magyar ford&iacute;t&aacute;s&aacute;t</a> k&ouml;veti):
</p>

<p><span class="strong"><strong>F&aacute;jlok tesztel&eacute;se:</strong></span></p>

<p><code class="option">-d file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s k&ouml;nyvt&aacute;r.</p>
<p><code class="option">-e file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik.</p>
<p><code class="option">-f file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s szab&aacute;lyos f&aacute;jl.</p>
<p><code class="option">-L file  vagy  -h file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s szimbolikus hivatkoz&aacute;s (szimbolikus link).</p>

<p><code class="option">-r file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s olvashat&oacute;.</p>

<p><code class="option">-s file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s 0-n&aacute;l nagyobb m&eacute;ret&#369;.</p>

<p><code class="option">-w file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s &iacute;rhat&oacute;.</p>

<p><code class="option">-x file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s v&eacute;grehajthat&oacute;.</p>
<p><code class="option">-O file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s az aktu&aacute;lis felhaszn&aacute;l&oacute; tulajdon&aacute;ban van.</p>
<p><code class="option">-G file</code>&nbsp;&nbsp;&nbsp;Igaz ha a file l&eacute;tezik &eacute;s az aktu&aacute;lis csoport tulajdon&aacute;ban van.</p>

<p><code class="option">file1 -nt file2</code>&nbsp;&nbsp;&nbsp;Igaz ha file1 &uacute;jabb (a m&oacute;dos&iacute;t&aacute;si id&#337;t tekintve), mint file2.</p>

<p><code class="option">file1 -ot file2</code>&nbsp;&nbsp;&nbsp;Igaz ha file1 r&eacute;gebbi, mint file2.</p>
<p><code class="option">file1 -ef file2</code>&nbsp;&nbsp;&nbsp;Igaz ha file1 &eacute;s file2 -nek azonos eszk&ouml;z- &eacute;s i-node sz&aacute;ma van. Tulajdonk&eacute;ppen ez azt  jelenti, hogy hard linkek.</p>

<p><span class="strong"><strong>Sztringek tesztel&eacute;se:</strong></span></p>

<p><code class="option">-z string</code>&nbsp;&nbsp;&nbsp;Igaz ha a string 0 hossz&uacute;s&aacute;g&uacute;.</p>

<p><code class="option">-n string</code>&nbsp;&nbsp;&nbsp;Igaz ha a sztring nem 0 hossz&uacute;s&aacute;g&uacute; (k&eacute;tf&eacute;lek&eacute;ppen lehet tesztelni, a <code class="option">sztring</code> kifejez&eacute;s ugyanazt jelenti).</p>
<p><code class="option">string1 = string2</code>&nbsp;&nbsp;&nbsp;Igaz ha a stringek megegyeznek.</p>
<p><code class="option">string1 != string2</code>&nbsp;&nbsp;&nbsp;Igaz ha a sztringek nem egyeznek meg.</p>

<p><span class="strong"><strong>Logikai tesztek k&eacute;t test kifejez&eacute;s k&ouml;z&ouml;tt:</strong></span></p>

<p><code class="option">! expr</code>&nbsp;&nbsp;&nbsp;Igaz ha expr hamis.</p>

<p><code class="option">expr1 -a expr2</code>&nbsp;&nbsp;&nbsp;Igaz ha expr1 &eacute;s expr2 is igaz </p>


<p><code class="option">expr1 -o expr2</code>&nbsp;&nbsp;&nbsp;Igaz ha expr1 vagy expr2 igaz</p>


<p><span class="strong"><strong>Sz&aacute;mokat tartalmaz&oacute; sztringek &ouml;sszehasonl&iacute;t&aacute;sa:</strong></span></p>


<p><code class="option">arg1 OP arg2</code> az OP oper&aacute;tor valamelyik a k&ouml;vetkez&#337;kb&#337;l: <code class="code">-eq</code>, <code class="code">-ne</code>, <code class="code">-lt</code>, <code class="code">-le</code>, <code class="code">-gt</code>, <code class="code">-ge</code> . A r&ouml;vid&iacute;t&eacute;sek a k&ouml;vetkez&#337; angol kifejez&eacute;sekb&#337;l sz&aacute;rmaznak: <span class="emphasis"><em>equal</em></span>, <span class="emphasis"><em>not equal</em></span>, <span class="emphasis"><em>less then</em></span>, <span class="emphasis"><em>less or equal</em></span>, <span class="emphasis"><em>greater then</em></span>, <span class="emphasis"><em>greater or equal</em></span> stb. m&#369;veleteket jelentik. Ezek az  aritmetikai  oper&aacute;torok igaz &eacute;rt&eacute;ket adnak, ha arg1 rendre egyenl&#337;, nem egyenl&#337;, kisebb mint, kisebb vagy egyenl&#337;, nagyobb mint, nagyobb  vagy  egyenl&#337;  mint arg2.   arg1 &eacute;s arg2  pozit&iacute;v vagy negat&iacute;v eg&eacute;sz kell legyen 
</p>

<p>P&eacute;ld&aacute;k (a test lefuttat&aacute;sa ut&aacute;n azonnal megh&iacute;vjuk az <span class="command"><strong>echo $?</strong></span> parancsot, hogy l&aacute;ssuk a teszt eredm&eacute;ny&eacute;t):</p>
<pre class="screen">

$ touch 1.txt 
$ touch 2.txt 
$ chmod a-w 2.txt 
$
$ # l&eacute;tezik-e a file
$ test -f 1.txt ; echo $? 
0 
$ # k&ouml;nyvt&aacute;r-e
$ test -d 1.txt ; echo $? 
1 
$ # &iacute;rhat&oacute;-e
$ test -w 1.txt ; echo $? 
0 
$ # l&eacute;trehozok 2 sztringet
$ a='abc' 
$ b='def' 
$ # a $a hossza 0 ?
$ test -z $a ; echo $? 
1 
$ # $a egyenl&#337;-e $b-vel
$ test $a = $b ; echo $? 
1 
$ # l&eacute;trehozok 2 sztringet amelyek sz&aacute;mot tartalmaznak
$ x=2 
$ y=3 
$ # $x &eacute;rt&eacute;ke kisebb mint $y ?
$ test "$x" -lt "$y" ; echo $? 
0 
$ # $x &eacute;rt&eacute;ke kisebb mint 1 ?
$ test "$x" -lt "1" ; echo $? 
1 
$ 
</pre>

<p>Valamennyi esetben a <code class="literal">[</code> <code class="literal">]</code> szintaxissal is h&iacute;vhat&oacute; a <span class="command"><strong>test</strong></span>, teh&aacute;t az utols&oacute; esetre p&eacute;ld&aacute;ul &iacute;rhatjuk:</p>

<pre class="screen">
$  [ "$x" -eq "$y" ]  ; echo $? 
1 
$ 
</pre>

<div class="note" title="A [[ ]] szerkezet" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: A [[ ]] szerkezet"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">A [[ ]] szerkezet</th></tr><tr><td align="left" valign="top">
<p>A hagyom&aacute;nyos <span class="command"><strong>test</strong></span> vagy <span class="command"><strong>[]</strong></span> parancs helyett lehet ennek modern v&aacute;ltozat&aacute;t, a <span class="command"><strong>[[ ]]</strong></span> szerkezetet haszn&aacute;lni &uacute;jabb h&eacute;jakban. Ezt a Bash eset&eacute;ben bemutatjuk a <a class="link" href="#test2" title="A [[ ]] szerkezet">A [[ ]] szerkezet</a> c&iacute;m&#369; fejezetben.</p>
</td></tr></table></div>


</div>

<div class="sect1" title="Az expr parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_expr"><a class="indexterm" name="d5e2143"></a>Az expr parancs</h2></div></div></div>


<p>Az <span class="command"><strong>expr</strong></span> parancsot egyszer&#369; kis m&#369;veletek elv&eacute;gz&eacute;s&eacute;re alak&iacute;tott&aacute;k ki h&eacute;j v&aacute;ltoz&oacute;k k&ouml;z&ouml;tt, mint p&eacute;ld&aacute;ul k&eacute;t sz&aacute;m&eacute;rt&eacute;ket tartalmaz&oacute; v&aacute;ltoz&oacute; &ouml;sszead&aacute;sa (amire gyakran van sz&uuml;ks&eacute;g vez&eacute;relt v&eacute;grehajt&aacute;s sor&aacute;n). Ma m&aacute;r ritk&aacute;bban haszn&aacute;lj&aacute;k, mert van jobb megold&aacute;s a m&#369;veletek elv&eacute;gz&eacute;s&eacute;re &eacute;s ezt a Bash is &aacute;tveszi (a <code class="code">(( ))</code> vagy a <span class="command"><strong>let</strong></span> szerkezetek, l&aacute;sd az <a class="link" href="#calculations" title="Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel">Aritmetikai ki&eacute;rt&eacute;kel&eacute;s ...</a> c&iacute;m&#369; fejezetben). Ennek ellen&eacute;re, haszn&aacute;lata ma is el&#337;fordul, &eacute;s kezdetnek, k&eacute;t sz&aacute;m k&ouml;zti m&#369;velet elv&eacute;gz&eacute;s&eacute;re megteszi. Az <span class="command"><strong>expr</strong></span> tud karakterl&aacute;ncokkal is m&#369;veleteket v&eacute;gezni.
Haszn&aacute;lata:</p>

<pre class="programlisting">
<span class="strong"><strong>expr kifejez&eacute;s</strong></span>
</pre>

<p>Az <span class="command"><strong>expr</strong></span> a kimenetre &iacute;rja ki a kifejez&eacute;s eredm&eacute;ny&eacute;t, &eacute;s parancssor helyettes&iacute;t&eacute;ssel lehet azt egy m&aacute;sik v&aacute;ltoz&oacute;ba &aacute;tvenni. Az <span class="command"><strong>expr</strong></span> &aacute;ltal elfogadott aritmetikai &eacute;s logikai kifejez&eacute;sek az al&aacute;bbiak:</p>

<p><code class="option">arg1 | arg2</code>&nbsp;&nbsp;&nbsp;arg1 ha az nem  0 vagy null sztring, egy&eacute;bk&eacute;nt arg2 </p>
<p><code class="option">arg1 &amp; arg2</code>&nbsp;&nbsp;&nbsp;arg1 ha egyik argumentum sem 0 vagy null sztring, m&aacute;sk&eacute;pp 0 </p>

<p><code class="option">arg1 &lt; arg2</code>&nbsp;&nbsp;&nbsp;arg1 kisebb  mint  arg2 </p>

<p><code class="option">arg1 &lt;= arg2</code>&nbsp;&nbsp;&nbsp;arg1 kisebb vagy egyenl&#337; arg2 </p>


<p><code class="option">arg1 = arg2</code>&nbsp;&nbsp;&nbsp;arg1 egyenl&#337; arg2 </p>

<p><code class="option">arg1 != arg2</code>&nbsp;&nbsp;&nbsp;arg1 nem egyenl&#337; arg2 </p>

<p><code class="option">arg1 &gt;= arg2</code>&nbsp;&nbsp;&nbsp;arg1 nagyobb vagy egyenl&#337; arg2</p>

<p><code class="option">arg1 &gt; arg2</code>&nbsp;&nbsp;&nbsp;arg1 nagyobb arg2</p>

<p><code class="option">arg1 + arg2</code>&nbsp;&nbsp;&nbsp;aritmetikai &ouml;sszeg: arg1 + arg2 </p>

<p><code class="option">arg1 - arg2</code>&nbsp;&nbsp;&nbsp;aritmetikai k&uuml;l&ouml;nbs&eacute;g  arg1 - arg2 </p>


<p><code class="option">arg1 * arg2</code>&nbsp;&nbsp;&nbsp;aritmetikai szorzat arg1 * arg2 </p>

<p><code class="option">arg1 / arg2</code>&nbsp;&nbsp;&nbsp;aritmetikai oszt&aacute;s  arg1 / arg2</p>

<p><code class="option">arg1 % arg2</code>&nbsp;&nbsp;&nbsp;aritmetikai marad&eacute;ka az  arg1 / arg2-nek </p>

<p>Az <span class="command"><strong>expr</strong></span> sztring oper&aacute;torai pedig az al&aacute;bbiak:</p>

<p><code class="option">match string regexp</code>&nbsp;&nbsp;&nbsp;mintailleszt&eacute;s a string  els&#337; karakter&eacute;t&#337;l</p>

<p><code class="option">substr string pos length</code>&nbsp;&nbsp;&nbsp;visszaadja a <code class="literal">string</code>-b&#337;l a <code class="literal">length</code> hossz&uacute;s&aacute;g&uacute; alsztringet <code class="literal">pos</code>-t&oacute;l kezdve</p>

<p><code class="option">index string chars</code>&nbsp;&nbsp;&nbsp;visszaadja azt az indexet a sztringb&#337;l ahol b&aacute;rmelyik <code class="literal">chars</code> halmazban lev&#337; karakter tal&aacute;lhat&oacute;</p>

<p><code class="option">length string</code>&nbsp;&nbsp;&nbsp;a string hossz&aacute;t adja vissza</p>

<p>P&eacute;ld&aacute;ul:</p>

<pre class="screen">
$ expr 2 + 3 
5 
$ a=$(expr 2 + 3) 
$ echo $a 
5
$ 
</pre>

<p>A m&aacute;sodik p&eacute;ld&aacute;b&oacute;l l&aacute;that&oacute;, hogyan kell &aacute;tvenni v&aacute;ltoz&oacute;ba a kisz&aacute;m&iacute;tott &eacute;rt&eacute;ket. Az <span class="command"><strong>expr</strong></span> haszn&aacute;lat&aacute;n&aacute;l vigy&aacute;zni kell az olyan m&#369;veleti jelekre, amelyek a h&eacute;j metakarakerei is. Ezeket vissza-per jel&ouml;l&eacute;ssel kell haszn&aacute;lni, mint p&eacute;ld&aacute;ul a szorz&aacute;st, mert el&#337;sz&ouml;r a h&eacute;j &eacute;rtelmezi, &eacute;s nyilv&aacute;n &aacute;t&iacute;rja &#337;ket, ha nem haszn&aacute;ljuk a <code class="code">\</code>-t :</p>

<pre class="screen">
$ expr 3 \* 4 
12 
$ 
</pre>

<p>Ugyanebbe a kateg&oacute;ri&aacute;ba esnek  a &lt; , &gt; , &amp; , | jelek.</p>

</div>

<div class="sect1" title="Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2203"><a class="indexterm" name="d5e2205"></a>Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel</h2></div></div></div>

<p>A felt&eacute;teles v&eacute;grehajt&aacute;st az <span class="command"><strong>if</strong></span> szerkezettel vez&eacute;relj&uuml;k, ez biztos&iacute;tja, hogy egy bizonyos felt&eacute;telt&#337;l f&uuml;gg&#337;en egyik vagy m&aacute;sik parancssor legyen v&eacute;grehajtva. Ez a szerkezet term&eacute;szetesen egy v&eacute;grehajtott parancs kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;t&#337;l f&uuml;gg&#337;en d&ouml;nt a tov&aacute;bbi v&eacute;grehajt&aacute;sr&oacute;l. Haszn&aacute;lata:</p>

<pre class="programlisting">
<span class="strong"><strong>if parancssor
then
    parancssor
    . . .
else
    parancssor
    . . .
fi</strong></span>
</pre>
<p>, vagy t&ouml;bbsz&ouml;r&ouml;s felt&eacute;tel eset&eacute;n:</p>

<pre class="programlisting">
<span class="strong"><strong>if  parancssor
then
    parancssor
    . . .
elif  parancssor
then
    parancssor
    . . .
else
    parancssor
    . . . 
fi	</strong></span>
</pre>


<p>A felt&eacute;telt jelent&#337; parancssorban b&aacute;rmilyen parancs v&eacute;grehajthat&oacute;, ak&aacute;r egyed&uuml;l&aacute;ll&oacute;, ak&aacute;r cs&#337;vezet&eacute;kkel &ouml;sszek&ouml;t&ouml;tt parancs lehet. Leggyakrabban a <span class="command"><strong>test</strong></span> parancsot haszn&aacute;ljuk itt a d&ouml;nt&eacute;sek megval&oacute;s&iacute;t&aacute;s&aacute;ra, de lehet ott b&aacute;rmilyen m&aacute;s parancs is. </p>


<p>Az al&aacute;bbi szkript  egy sort pr&oacute;b&aacute;l be&iacute;rni egy f&aacute;jl v&eacute;g&eacute;re. A <span class="command"><strong>test</strong></span> <code class="option">-f</code> opci&oacute;ja a f&aacute;jl szab&aacute;lyoss&aacute;g&aacute;t, <code class="option">-w</code> opci&oacute;ja az &iacute;rhat&oacute;s&aacute;g&aacute;t teszteli.</p>

<pre class="programlisting">
#!/bin/bash

szoveg="Ezt &iacute;rjuk a f&aacute;jl v&eacute;g&eacute;re."
file="1.txt"


#tesztelj&uuml;k, hogy a f&aacute;jl nem szab&aacute;lyos f&aacute;jl
if ! [ -f "$file" ]
then
    echo "$file" nem l&eacute;tezik vagy nem szab&aacute;lyos f&aacute;jl
    exit 1
fi

#tesztelj&uuml;k, hogy a f&aacute;jl &iacute;rhat&oacute;-e
if [ -w "$file" ]
then
    echo "$szoveg" &gt;&gt; "$file"   #sz&ouml;veg a f&aacute;jl v&eacute;g&eacute;re
else
    echo "$file" nem &iacute;rhat&oacute;
fi
</pre>

<div class="warning" title="A [ ] szerkezet szintaxisa" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning: A [ ] szerkezet szintaxisa"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Figyelem]" src="images/warning.png"></td><th align="left">A [ ] szerkezet szintaxisa</th></tr><tr><td align="left" valign="top">
<p>A test z&aacute;r&oacute;jelez&eacute;s&eacute;n&eacute;l a [ ] z&aacute;r&oacute;jelek mindk&eacute;t oldal&aacute;n egy elv&aacute;laszt&oacute; sz&oacute;k&ouml;zt kell hagyni. A <code class="code">[</code> &eacute;s <code class="code">]</code> lexik&aacute;lis szerkezetek:</p>
<pre class="programlisting">
if [ -w "$filenev" ] 
# ^ ^             ^ ^  a nyilak f&ouml;l&ouml;tt sz&oacute;k&ouml;z van !!!
</pre>
</td></tr></table></div>

<p>Haszn&aacute;lhatunk felt&eacute;telnek egy egyszer&#369; parancsot is, p&eacute;ld&aacute;ul: bel&eacute;pek az <code class="filename">elso</code> k&ouml;nyvt&aacute;rba, ha az l&eacute;tezik, egy&eacute;bk&eacute;nt hib&aacute;t &iacute;rok ki :</p>

<pre class="programlisting">
#!/bin/bash 

#megpr&oacute;b&aacute;lok bel&eacute;pni az elso k&ouml;nyvt&aacute;rba 
 
if cd elso 2&gt;/dev/null 
then 
    echo "siker&uuml;lt a k&ouml;nyvt&aacute;rba l&eacute;pni." 
else 
    echo "nincs elso k&ouml;nyvt&aacute;r." 
fi 
</pre>

<p>Ezekben az esetekben nincs sz&uuml;ks&eacute;g&uuml;nk a felt&eacute;telk&eacute;nt haszn&aacute;lt parancs kimenet&eacute;re vagy hibakimenet&eacute;re, &iacute;gy ezeket a <code class="filename">null</code> eszk&ouml;zre vagy napl&oacute; f&aacute;jlba ir&aacute;ny&iacute;tjuk. p&eacute;lda (<code class="filename">pipes.sh</code>) cs&#337;vezet&eacute;k haszn&aacute;lat&aacute;ra a felt&eacute;telben:</p>

<pre class="programlisting">
#!/bin/bash 

#a felt&eacute;telben egy hosszabb parancssort h&iacute;vunk meg

if cat /etc/passwd | cut -f 1 -d ":" | sort &gt; felhasznalok.txt 
then 
    echo 'megvan a felhaszn&aacute;l&oacute;k list&aacute;ja' 
else 
    echo 'nem siker&uuml;lt el&#337;&aacute;ll&iacute;tani a list&aacute;t' 
fi 
</pre>

<div class="note" title="Cs&#337;vezet&eacute;k mint felt&eacute;tel" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Cs&#337;vezet&eacute;k mint felt&eacute;tel"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">Cs&#337;vezet&eacute;k mint felt&eacute;tel</th></tr><tr><td align="left" valign="top">
<p><a class="indexterm" name="d5e2237"></a>Az <span class="command"><strong>if</strong></span> szerkezet a cs&#337;vezet&eacute;k utols&oacute; parancsa &aacute;ltal be&aacute;ll&iacute;tott <code class="varname">?</code> v&aacute;ltoz&oacute;t kapja meg. A parancssor lefuthat &uacute;gy is, hogy valamelyik el&#337;z&#337; program hib&aacute;san fut, de az utols&oacute; m&eacute;gis igaz kimenetet ad.  Ha a fenti programban el&iacute;rjuk a <code class="filename">passwd</code> f&aacute;jl el&eacute;r&eacute;si &uacute;tj&aacute;t, p&eacute;ld&aacute;ul <code class="filename">/etc/passw</code>-t &iacute;runk helyette, a szkript lefut, de az els&#337; cs&#337;vezet&eacute;k &uuml;res bemenetet kap: ennek ellen&eacute;re az &uuml;res  <code class="filename">felhasznalok.txt</code> l&eacute;trej&ouml;n. A Bash ennek kiv&eacute;d&eacute;s&eacute;re az utols&oacute; lefuttatott cs&#337;vezet&eacute;k &ouml;sszes parancs&aacute;nak kimeneti &eacute;rt&eacute;k&eacute;t egy <code class="envar">PIPESTATUS</code> nev&#369; k&ouml;rnyezeti v&aacute;ltoz&oacute;ban adja vissza, amely egy t&ouml;mb. Ez a 0 indext&#337;l kezdve tartalmazza a cs&#337;vezet&eacute;k els&#337;, m&aacute;sodik, stb. parancs&aacute;nak kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;t. Fontos szkriptekn&eacute;l ezt tesztelni lehet. Ebben a tananyagban nem foglalkozunk a Bash t&ouml;mb&ouml;kkel, a r&eacute;szletek err&#337;l a Bash k&eacute;zik&ouml;nyv&eacute;ben (<a class="link" href="#BashRef2010">BashRef2010</a>, 6.-dik fejezet).</p>
</td></tr></table></div>

<p>Ugyanakkor az eml&iacute;tett <code class="literal">&amp;&amp;</code> , <code class="literal">||</code> illetve  <code class="literal">!</code> szerkezeteket is haszn&aacute;lhatjuk a felt&eacute;tel parancssor&aacute;n bonyolultabb d&ouml;nt&eacute;sek kivitelez&eacute;s&eacute;hez. Az al&aacute;bbi szkript  t&ouml;rli az <code class="filename">1.txt</code>  f&aacute;jlt ha az &iacute;rhat&oacute; &eacute;s a m&eacute;rete 0 byte:</p>
<pre class="programlisting">
#!/bin/bash

#az els&#337; argumentum a f&aacute;jln&eacute;v

file=${1:? hi&aacute;nyzik a f&aacute;jln&eacute;v}

#tesztelj&uuml;k, hogy &iacute;rhat&oacute;-e a f&aacute;jl &eacute;s hossza 0 -e?
#a hossz tesztel&eacute;s&eacute;n&eacute;l megn&eacute;zz&uuml;k, 
#hogy m&eacute;rete nagyobb-e mint 0 byte &eacute;s tagadjuk ezt

if [ -w "$file" ]  <code class="literal">&amp;&amp;</code>  ! [ -s "$file" ]
then
    rm "$file"
    echo "$file" t&ouml;rolve
else
    echo "$file" hossza nem 0 vagy nem &iacute;rhat&oacute;
fi
</pre>

<p>(a <code class="option">-s</code> oper&aacute;tor igazat ad vissza, ha a f&aacute;jl hossza nagyobb mint 0 byte).</p>

<p>A fenti p&eacute;ld&aacute;ban k&eacute;t teszt parancs kimenet&eacute;n v&eacute;gz&uuml;nk logikai m&#369;veletet.</p>

<p>Az <span class="command"><strong>if</strong></span> vagy <span class="command"><strong>else</strong></span> &aacute;g a felt&eacute;teles v&eacute;grehajt&aacute;sn&aacute;l nem lehet &uuml;res (valamit v&eacute;gre kell ott hajtani). Amennyiben a programoz&aacute;s sor&aacute;n m&eacute;gis &uuml;res &aacute;gat akarunk haszn&aacute;lni, a h&eacute;j &uuml;res utas&iacute;t&aacute;s&aacute;t kell haszn&aacute;lnunk, a melyet a  <span class="strong"><strong><code class="literal">:</code></strong></span> szimb&oacute;lummal h&iacute;vunk meg. Ez semmit nem v&eacute;gez, de egy igaz &eacute;rt&eacute;ket hagy a <code class="varname">?</code> v&aacute;ltoz&oacute;ban:</p>

<pre class="programlisting">
if [ -w "$file" ]  <code class="literal">&amp;&amp;</code> ! [ -s "$file" ] 
then 
    rm "$file" 
    echo $file t&ouml;rolve 
else   
    :
fi 
</pre>

</div>


<div class="sect1" title="A for ciklusok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2264"><a class="indexterm" name="d5e2266"></a>A for ciklusok</h2></div></div></div>

<p>A h&eacute;j hagyom&aacute;nyos <span class="command"><strong>for</strong></span> ciklusa egy list&aacute;n v&eacute;gez iter&aacute;ci&oacute;t. A lista elemei sztringek. Haszn&aacute;lata:</p>

<pre class="programlisting">
<span class="strong"><strong>for  i  in  lista
do
    parancssor
done</strong></span>
</pre>


<p>A parancssor-ban az <code class="varname">i</code> v&aacute;ltoz&oacute; haszn&aacute;lhat&oacute;, &eacute;s sorra felveszi a lista elemeinek &eacute;rt&eacute;k&eacute;t. A lista megad&aacute;sa opcion&aacute;lis: amennyiben elhagyjuk, haszn&aacute;lata &iacute;gy alakul:</p>

<pre class="programlisting">
<span class="strong"><strong>for  i  
do
    parancssor
done</strong></span>
</pre>

<p>ekkor az <code class="varname">i</code> v&aacute;ltoz&oacute; a parancssor param&eacute;terein iter&aacute;l, teh&aacute;t a <code class="varname">@</code> v&aacute;ltoz&oacute;ban tal&aacute;lhat&oacute; sztringeket j&aacute;rja v&eacute;gig.</p>

<p>P&eacute;ld&aacute;k:</p>

<p>Egy megadott lista v&eacute;gigj&aacute;r&aacute;sa (<code class="filename">for1.sh</code>):</p>
<pre class="programlisting">
#!/bin/bash

for i in abc def ghi
do
    echo $i
done
</pre>

<p>sorban az abc, def, ghi karakterl&aacute;ncokat fogja ki&iacute;rni. Futtat&aacute;sn&aacute;l ezt l&aacute;tjuk:</p>
<pre class="screen">
$ bash for1.sh 
abc 
def 
ghi 
$ 
</pre>

<p>Ha pl. sz&aacute;mokat akarunk v&eacute;gigj&aacute;rni, akkor sz&aacute;mokat &aacute;br&aacute;zol&oacute; sztringeket a <span class="command"><strong>seq</strong></span> paranccsal gener&aacute;lhatunk (<code class="filename">for2.sh</code>):</p>
<pre class="programlisting">
#!/bin/bash
for i in $(seq 1 5) 
do 
    echo $i 
done
</pre>

<p>futtatva:</p>
<pre class="screen">
$ bash for2.sh 
1 
2 
3 
4 
5 
$
</pre>
<p>A <span class="command"><strong>seq</strong></span> parancs ki&iacute;r egy sz&aacute;mokb&oacute;l &aacute;ll&oacute; szekvenci&aacute;t, a korl&aacute;tokat &eacute;s a l&eacute;p&eacute;sk&ouml;zt az argumentumokban lehet megadni. Az implicit l&eacute;p&eacute;s az 1. Pl. a <span class="command"><strong>seq 1 10</strong></span> ki&iacute;rja a termin&aacute;lra 1-t&#337;l 10-ig a sz&aacute;mokat, a <span class="command"><strong>seq  1 2 10</strong></span> h&iacute;v&aacute;s csak minden m&aacute;sodik sz&aacute;mot &iacute;rja ki.</p>

<p>Egy k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;  f&aacute;jlneveket az al&aacute;bbi ciklussal j&aacute;rjuk v&eacute;gig (<code class="filename">for3.sh</code>):</p>
<pre class="programlisting">
#!/bin/bash

for f in $( ls ) 
do 
    echo $f 
done 
</pre>


<p>lefuttatva:</p>
<pre class="screen">
$ bash for3.sh 
1.txt 
2.txt 
$
</pre>


<p>A Bash itt az <span class="command"><strong>ls</strong></span> parancsot &eacute;s nem az <span class="command"><strong>ls</strong></span> aliast h&iacute;vja meg, ez&eacute;rt a visszaadott list&aacute;ba nem ker&uuml;lnek sz&iacute;nes kijelz&eacute;st vez&eacute;rl&#337; karakterek, ami &aacute;ltal&aacute;ban jellemz&#337; az <span class="command"><strong>ls</strong></span> alias-ra, ha az defini&aacute;lva van.</p>

<p>Az al&aacute;bbi  p&eacute;lda  (<code class="filename">for4.sh</code>) a k&ouml;vetkez&#337;ket v&eacute;gzi:</p>


<table border="0" summary="Simple list" class="simplelist"><tr><td>-a parancssor argumentumait j&aacute;rja v&eacute;gig, felt&eacute;telezz&uuml;k, hogy ezek f&aacute;jlnevek</td></tr><tr><td>-megpr&oacute;b&aacute;lja a f&aacute;jlokat a home k&ouml;nyvt&aacute;rban lev&#337; backup k&ouml;nyvt&aacute;rba m&aacute;solni</td></tr><tr><td>-ha ez nem siker&uuml;l (pl. valamelyik nem igazi f&aacute;jl hanem k&ouml;nyvt&aacute;r) egy sztring list&aacute;ba &iacute;rja a f&aacute;jl nev&eacute;t </td></tr><tr><td>-a program v&eacute;g&eacute;n a list&aacute;t egy napl&oacute; f&aacute;jl v&eacute;g&eacute;re &iacute;rja</td></tr></table>
<p>A programban haszn&aacute;ljuk a <span class="command"><strong>date</strong></span> parancsot, ez egyszer&#369; h&iacute;v&aacute;sn&aacute;l a pillanatnyi d&aacute;tumot &eacute;s id&#337;t &iacute;rja ki. Az <span class="command"><strong>exit</strong></span> kil&eacute;p&eacute;si parancs param&eacute;tere a kil&eacute;p&eacute;si k&oacute;d (<a class="link" href="#cmd_exit" title="Kil&eacute;p&eacute;s a h&eacute;j programb&oacute;l: az exit">l&aacute;sd al&aacute;bb</a>). Ez 0, ha a program j&oacute;l futott le, &eacute;s 0-t&oacute;l k&uuml;l&ouml;nb&ouml;zik, ha hib&aacute;val l&eacute;p&uuml;nk ki.</p>
<p>A <span class="command"><strong>date</strong></span> kimenete az al&aacute;bbi:</p>
<pre class="screen">
$ date
Mon Mar 14 23:55:45 EET 2011
$ 
</pre>

<p>A szkript:</p>

<pre class="programlisting">
#!/bin/bash

#a napl&oacute; f&aacute;jl a home k&ouml;nyvt&aacute;rban van
NAPLO="$HOME/naplo.log"     #ez a napl&oacute;
BACKUP="$HOME/backup"       #ide m&aacute;solunk
PN="for4.sh:"               #ezt  programnevet &iacute;rjuk a napl&oacute;ba

#l&eacute;tezik-e a backup k&ouml;nyvt&aacute;r
if ! [ -d "$BACKUP" ]
then
    echo "A $BACKUP k&ouml;nyvt&aacute;r nem l&eacute;tezik"
    exit 1
fi

datum=$(date)  #a date parancs a fut&aacute;s id&#337;pillanat&aacute;t
               #r&ouml;gz&iacute;ti egy v&aacute;ltoz&oacute;ban

#ha a programot argumentumok n&eacute;lk&uuml;l ind&iacute;tott&aacute;k
if [ $# -eq 0 ]
then
    echo $PN $datum "argumentum n&eacute;lk&uuml;li v&eacute;grehajt&aacute;s" &gt;&gt; "$NAPLO"
    exit 1
fi

#ez a lista ker&uuml;l a program v&eacute;g&eacute;n a napl&oacute;ba
lista=""

#a $@ parancsori v&aacute;ltoz&oacute;kat tartalmaz&oacute; list&aacute;n iter&aacute;l
for file
do
    if cp "$file" $BACKUP 2&gt;/dev/null  #hiba&uuml;zenet eldobva
    then
        echo "$file" elmentve
    else
        #ha nem siker&uuml;l, akkor be&iacute;rom a list&aacute;ba
        #p&eacute;ld&aacute;ul a fenti masol&aacute;st k&ouml;nyvt&aacute;rra nem lehet
        #v&eacute;grehajtani
        lista="$lista"" $file"
    fi
done


#a napl&oacute; v&eacute;g&eacute;re &iacute;rjuk ha van valami a list&aacute;ban
if [ -n "$lista" ]  #ha nem &uuml;res sztring
then
    echo $PN $datum "Nincs elmentve:" "$lista" &gt;&gt; "$NAPLO"
fi

exit 0

</pre>

</div>

<div class="sect1" title="A while &eacute;s until ciklusok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2320"><a class="indexterm" name="d5e2322"></a><a class="indexterm" name="d5e2324"></a>A  while &eacute;s until ciklusok</h2></div></div></div>

<p>A <span class="command"><strong>while</strong></span> illetve <span class="command"><strong>until</strong></span> ciklusok felt&eacute;tel&eacute;t ugyan&uacute;gy &aacute;ll&iacute;tjuk el&#337;, mint az, <span class="command"><strong>if</strong></span> szerkezet&eacute;t, teh&aacute;t a felt&eacute;tel valamilyen parancssor, amely be&aacute;ll&iacute;tja a  <code class="varname">?</code> v&aacute;ltoz&oacute;t. A <span class="command"><strong>while</strong></span> addig folytatja a ciklust m&iacute;g felt&eacute;tele igaz &eacute;rt&eacute;kkel l&eacute;p ki, az <span class="command"><strong>until</strong></span> pedig am&iacute;g a felt&eacute;tel hamis. Haszn&aacute;latuk:</p>

<pre class="programlisting">
<span class="strong"><strong>while parancssor
do
    parancssor
    . . .
done</strong></span>
</pre>
<p>valamint:</p>
<pre class="programlisting">
<span class="strong"><strong>until parancssor
do
    parancssor
    . . .
done</strong></span>
</pre>

<p>Megfigyelhet&#337;, hogy a h&eacute;jban mink&eacute;t ciklusnak az elej&eacute;n van a teszt. A  <span class="command"><strong>while</strong></span> ciklust sokkal gyakrabban haszn&aacute;ljuk, ebben a tananyagban szinte minden esetben a <span class="command"><strong>while</strong></span>-t alkalmazzuk.</p>

<p>A <span class="command"><strong>while</strong></span> ciklus haszn&aacute;lhat&oacute; valamilyen rendszerbeli felt&eacute;telt&#337;l f&uuml;gg&#337; ism&eacute;tl&eacute;sre. Ha a ciklusban nem v&eacute;gz&uuml;nk olyan tev&eacute;kenys&eacute;get, amely k&eacute;sleltetne, &eacute;s a ciklus elszabadulhat nagyon gyors, hossz&uacute; idej&#369; ism&eacute;tl&eacute;sre, aj&aacute;nlott egy k&eacute;sleltet&#337; parancsot haszn&aacute;lni, amelyik r&ouml;vid id&#337;re felf&uuml;ggeszti a v&eacute;grehajt&aacute;st. A <span class="command"><strong>sleep</strong></span> parancs (r&eacute;szletesen l&aacute;sd <a class="link" href="#cmd_sleep">a fejezet v&eacute;gi feladatokban</a>) egy megadott ideig f&uuml;ggeszti fel a szkript fut&aacute;s&aacute;t, pl. 1 szekundumot v&aacute;rakoztat a <span class="command"><strong>sleep 1</strong></span> h&iacute;v&aacute;s.</p>

<p>Az al&aacute;bbi ciklus arra v&aacute;r, hogy a <code class="filename">teszt.txt</code> f&aacute;jl megjelenjen. Ezt 1 m&aacute;sodpercenk&eacute;nt ellen&#337;rzi.</p>

<pre class="programlisting">
#!/bin/bash

while ! [ -f teszt.txt ]   # teszt.txt regul&aacute;ris f&aacute;jl (l&eacute;tezik?)
do
    sleep 1                # v&aacute;r 1 m&aacute;sodpercet
done

echo teszt.txt megjelent!
</pre>

<p>Az al&aacute;bbi pedig egy klasszikus, eg&eacute;sz sz&aacute;mmal vez&eacute;relt ciklus:</p>

<pre class="programlisting">
#!/bin/bash

n=5                      #n sz&aacute;m&eacute;rt&eacute;ke kezdetben 5
echo $n

while [ $n != 0 ]
do
    sleep 1

    n=$( expr $n - 1 )   # n=n-1

    echo $n
done
</pre>

<p>Az <span class="command"><strong>expr</strong></span> kiss&eacute; neh&eacute;zkess&eacute; teszi a sz&aacute;ml&aacute;l&oacute; cs&ouml;kkent&eacute;s&eacute;t, a <code class="code">(( ))</code> szerkezettel megoldhat&oacute; ugyanez eleg&aacute;nsabban (<a class="link" href="#calculations" title="Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel">l&aacute;sd 8. fejezet</a>). </p>

<p><a name="while"></a>Az al&aacute;bbi p&eacute;ld&aacute;ban addig olvasunk a termin&aacute;lr&oacute;l, am&iacute;g az "end" sz&oacute;t g&eacute;pelj&uuml;k be. A p&eacute;ld&aacute;ban a h&eacute;j  <span class="command"><strong>read</strong></span> parancs&aacute;t haszn&aacute;ljuk (haszn&aacute;lat&aacute;nak r&eacute;szletes ismertet&eacute;s&eacute;t l&aacute;sd a <a class="link" href="#cmd_read" title="A read parancs">fejezet v&eacute;g&eacute;n</a>). A </p>
<pre class="programlisting">
read line
</pre>

<p>parancs h&iacute;v&aacute;s egy sort olvas a termin&aacute;lr&oacute;l a <code class="varname">line</code> v&aacute;ltoz&oacute;ba. </p>

<pre class="programlisting">
#!/bin/bash 

end="end" 

#addig olvas sorokat a termin&aacute;lr&oacute;l, am&iacute;g beg&eacute;pelj&uuml;k 
#az "end" sztringet 

while [ "$line" != "$end" ] 
do 
    read line 
done 
</pre>

<p>A <span class="command"><strong>read</strong></span> felt&eacute;telk&eacute;nt is k&eacute;nyelmesen haszn&aacute;lhat&oacute;, mert hamisat t&eacute;r&iacute;t vissza ha a beolvas&aacute;s nem siker&uuml;l (pl.  Ctrl-D f&aacute;jl v&eacute;ge karaktert kapott bemenetk&eacute;nt). Az al&aacute;bbi kis program p&eacute;ld&aacute;ul egy nagyon egyszer&#369; sz&#369;r&#337;k&eacute;nt m&#369;k&ouml;dik. Beolvas sorokat a bemenetr&#337;l (ami &aacute;tir&aacute;ny&iacute;t&aacute;s eset&eacute;n ak&aacute;r egy f&aacute;jl is lehet), feldolgozza &eacute;s ki&iacute;rja &#337;ket.</p>

<pre class="programlisting">
#!/bin/bash
while read line
do
    #sor feldolgozas&aacute;t itt lehet elv&eacute;gezni
    # ...
    echo $line               # sor ki&iacute;r&aacute;sa
done
</pre>

<p>Megjegyzend&#337;, hogy a f&aacute;jlok soronk&eacute;nti feldolgoz&aacute;s&aacute;ra alkalmasabb olyan parancsokat haszn&aacute;lni, amelyeket eleve erre &iacute;rtak (<span class="command"><strong>wc</strong></span>, <span class="command"><strong>uniq</strong></span>, <span class="command"><strong>tail</strong></span>, <span class="command"><strong>cut</strong></span>, <span class="command"><strong>egrep</strong></span>, stb.), mert azok sokkal gyorsabban teszik ezt mint egy <span class="command"><strong>while</strong></span> ciklus a h&eacute;jban. M&eacute;gis, amennyiben nem &aacute;ll rendelkez&eacute;s&uuml;nkre megfelel&#337; parancs, ezzel a m&oacute;dszerrel dolgozhatunk fel egy sorokb&oacute;l &aacute;ll&oacute; bemenetet.</p>

<p>Az <span class="command"><strong>until</strong></span> ciklus akkor hasznos, ha valamilyen esem&eacute;nyt kell figyelni, &eacute;s van egy v&aacute;ltoz&oacute; amelyik a ciklus v&eacute;grehajt&aacute;sa k&ouml;zben kap &eacute;rt&eacute;ket. Ennek ellen&eacute;re, nagyon ritk&aacute;n haszn&aacute;ljuk. Az p&eacute;ld&aacute;ban ( <code class="filename">until.sh</code> ) akkor l&eacute;p&uuml;nk ki a ciklusb&oacute;l, ha a <code class="varname">line</code> v&aacute;ltoz&oacute; v&eacute;gleges &eacute;rt&eacute;ket kap: </p>

<pre class="programlisting">
#!/bin/bash
#
#az until szerkezet ciklus negat&iacute;v logikaval

#a teszt azt figyeli, hogy mekkora a $line v&aacute;ltoz&oacute; hossza

#az els&#337;  ciklusban a line v&aacute;ltoz&oacute; nem l&eacute;tezik
#&iacute;gy a test biztos hamis
until [ $line ]
do
    echo 'A $line v&aacute;ltoz&oacute; &eacute;rt&eacute;ke: ' "$line"
    echo "&Iacute;rja be pontosan az \"abc\" sztringet"

    read line

    #ha nem abc-t &iacute;r be, akkor t&ouml;rl&ouml;m a v&aacute;ltoz&oacute;t
    #a shell unset parancs&aacute;val

    if [ "$line" != "abc" ]; then
        unset line                  #v&aacute;ltoz&oacute; t&ouml;rl&eacute;se
    fi
done
</pre>

<p>A h&eacute;j <span class="command"><strong>unset</strong></span> parancsa t&ouml;rli a megadott v&aacute;ltoz&oacute;t.</p>

</div>

<div class="sect1" title="A break &eacute;s continue haszn&aacute;lata"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2379"><a class="indexterm" name="d5e2381"></a><a class="indexterm" name="d5e2383"></a>A break &eacute;s continue haszn&aacute;lata</h2></div></div></div>

<p>A k&eacute;t h&eacute;j szerkezet hasonl&oacute;an m&#369;k&ouml;dik a C-b&#337;l megszokott ciklus m&oacute;dos&iacute;t&oacute; utas&iacute;t&aacute;sokkal. A <span class="command"><strong>break</strong></span> megszak&iacute;tja a ciklust ott ahol megjelenik (&eacute;s a ciklus ut&aacute;ni parancson folytatja), a <span class="command"><strong>continue</strong></span> nem fejezi be a kurrens ciklust hanem a k&ouml;vetkez&#337; iter&aacute;ci&oacute;ra l&eacute;p. Megjegyzend&#337;, hogy a <span class="command"><strong>break</strong></span> haszn&aacute;lhat&oacute; t&ouml;bbszint&#369; ciklusb&oacute;l val&oacute; teljes kil&eacute;p&eacute;sre, pl. a <span class="command"><strong>break 2</strong></span> elhagy egy 2 szintes ciklust.</p>

<p>Az al&aacute;bbi p&eacute;ld&aacute;ban a <span class="command"><strong>break</strong></span> egy felt&eacute;tel hat&aacute;s&aacute;ra elhagy egy v&eacute;gtelen ciklust. A v&eacute;gtelen ciklust a h&eacute;j <span class="command"><strong>true</strong></span> parancs&aacute;val vez&eacute;relj&uuml;k, amelyik mindig igazat t&eacute;rit vissza (l&eacute;tezik az ellenkez&#337;je is, a <span class="command"><strong>false</strong></span> parancs, amelyik hamisat t&eacute;r&iacute;t vissza a <code class="varname">?</code> v&aacute;ltoz&oacute;ba). A <span class="command"><strong>read</strong></span> parancs <code class="option">-p</code> kapcsol&oacute;ja egy k&eacute;szenl&eacute;ti jelet megad&oacute; karakterl&aacute;ncot &iacute;r ki.</p>

<pre class="programlisting">
#!/bin/bash

#v&eacute;gtelen ciklus

while true
do
    read -p "&Iacute;rjon be egy sort:" line
    #ha nem &uuml;res a beolvasott sor kil&eacute;pek a ciklusb&oacute;l
    if [ -n "$line" ]
    then
        break
    fi
done
</pre>

</div>

<div class="sect1" title="A shift parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2398"><a class="indexterm" name="d5e2400"></a>A shift parancs</h2></div></div></div>

<p>A <span class="command"><strong>shift</strong></span> "elmozgatja" a parancssor argumentumait egy argumentummal balra, kiejtv&eacute;n a list&aacute;b&oacute;l az els&#337; argumentumot. Ugyanakkor az argumentumok sz&aacute;m&aacute;t tartalmaz&oacute;  <code class="varname">#</code> v&aacute;ltoz&oacute; &eacute;rt&eacute;ke is v&aacute;ltozik, egyel cs&ouml;kken. Az al&aacute;bbi p&eacute;ld&aacute;ban a szkript ki&iacute;r minden parancssori argumentumot, de mindig az <code class="varname">1</code>-es v&aacute;ltoz&oacute;t &iacute;rja ki. A <span class="command"><strong>shift</strong></span> minden ciklusban a &aacute;tnevezi a <code class="varname">1</code>,. . .,<code class="varname">9</code> speci&aacute;lis v&aacute;ltoz&oacute;kat, &uacute;gy hogy a megfelel&#337; parancssori &eacute;rt&eacute;keknek eggyel kisebb sz&aacute;mjegy nev&#369; v&aacute;ltoz&oacute;t rendel. A m&oacute;dos&iacute;t&aacute;s amit v&eacute;gez egy elmozgat&aacute;s: pl. ha a  <code class="varname">2</code>-t eltolja  <code class="varname">1</code>-be &eacute;s ha pl. csak 2 param&eacute;ter van, a  <code class="varname">2</code> &uuml;res v&aacute;ltoz&oacute; marad.</p>

<pre class="programlisting">
#!/bin/bash 

while [ $# -gt 0 ]         #am&iacute;g van m&eacute;g argumentum 
do 
    echo  A '$#' &eacute;rt&eacute;ke: $# , a '$1' &eacute;rt&eacute;ke: $1 
    shift 
done 
</pre>

<pre class="screen">
$ ./shift.sh a b c d 
A $# &eacute;rt&eacute;ke: 4 , a $1 &eacute;rt&eacute;ke: a 
A $# &eacute;rt&eacute;ke: 3 , a $1 &eacute;rt&eacute;ke: b 
A $# &eacute;rt&eacute;ke: 2 , a $1 &eacute;rt&eacute;ke: c 
A $# &eacute;rt&eacute;ke: 1 , a $1 &eacute;rt&eacute;ke: d 
$ 
</pre>


<p>A <span class="command"><strong>shift</strong></span>-et param&eacute;terrel is meg lehet h&iacute;vni, olyankor a param&eacute;ternek megfelel&#337; sz&aacute;mmal forgatja el a parancssor argumentumait, teh&aacute;t a <span class="command"><strong>shift 2</strong></span> h&iacute;v&aacute;s kett&#337;vel.</p>
</div>


<div class="sect1" title="Kil&eacute;p&eacute;s a h&eacute;j programb&oacute;l: az exit"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_exit">Kil&eacute;p&eacute;s a h&eacute;j programb&oacute;l: az exit</h2></div></div></div>
<p>A h&eacute;j programokb&oacute;l az <span class="command"><strong>exit</strong></span> paranccsal l&eacute;p&uuml;nk ki, melynek egy eg&eacute;sz sz&aacute;mb&oacute;l &aacute;ll&oacute; param&eacute;tere van, ez lesz a szkript kil&eacute;p&eacute;si &eacute;rt&eacute;ke. Ha j&oacute;l, hiba n&eacute;lk&uuml;l fut le a programunk, ez az &eacute;rt&eacute;k 0 kell legyen. Az al&aacute;bbi p&eacute;lda leteszteli, hogy a programunknak van-e legal&aacute;bb egy param&eacute;tere. Ha nincs, hib&aacute;val l&eacute;p ki.</p>

<pre class="programlisting">
#!/bin/bash 

#tesztelem, hogy a parancssor els&#337; param&eacute;ter&eacute;nek 0 -e a hossza 

if [ -z "$1" ] 
then 
    echo legal&aacute;bb egy param&eacute;ter sz&uuml;ks&eacute;ges ! 
    exit 1           #hib&aacute;val l&eacute;p ki a szkript
fi 

# feldolgoz&aacute;s itt 

exit 0               #j&oacute;l futott le a szkript 
</pre>


<p>Ha elhagyjuk az <span class="command"><strong>exit 0</strong></span> -t, akkor az utols&oacute; v&eacute;grehajtott parancs kil&eacute;p&eacute;si &eacute;rt&eacute;ke marad a <code class="varname">?</code> v&aacute;ltoz&oacute;ban.</p>

</div>

<div class="sect1" title="A case szerkezet"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2425"><a class="indexterm" name="d5e2427"></a>A case szerkezet</h2></div></div></div>

<p>A <span class="command"><strong>case</strong></span> vez&eacute;rl&#337; strukt&uacute;ra hasonl&oacute; a programoz&aacute;si nyelvek "<span class="emphasis"><em>switch</em></span>" vez&eacute;rl&eacute;s&eacute;hez: alternat&iacute;v v&eacute;grehajt&aacute;si &aacute;gakra bontja a program parancsait. Az alternat&iacute;v&aacute;t egy karakterl&aacute;nc mint&aacute;kra val&oacute; illeszt&eacute;se szerint hajtja v&eacute;gre. A k&ouml;vetkez&#337;k&eacute;ppen adjuk meg &aacute;ltal&aacute;nos haszn&aacute;lati form&aacute;j&aacute;t:</p>

<pre class="programlisting">
<span class="strong"><strong>case valtoz&oacute; in 
    minta1 ) parancsok ;;
    minta2 ) parancsok ;;
    .  .  .
    mintaN ) parancsok ;;
esac</strong></span>
</pre>

<p>A szerkezetet <span class="command"><strong>case</strong></span> &eacute;s <span class="command"><strong>esac</strong></span> kulcsszavak hat&aacute;rolj&aacute;k. A megadott v&aacute;ltoz&oacute;ra illeszti a k&ouml;vetkez&#337; sorok elej&eacute;n tal&aacute;lhat&oacute; mint&aacute;kat. Ahol a minta tal&aacute;l, ott v&eacute;grehajtja a jobb z&aacute;r&oacute;jel ut&aacute;ni parancssorozatot amelyet kett&#337;s <span class="strong"><strong>;</strong></span> karakter z&aacute;r le. Csak az els&#337; tal&aacute;latnak megfelel&#337; alternat&iacute;v&aacute;t hajtja v&eacute;gre.</p>

<p>A minta t&iacute;pusa shell minta (<span class="emphasis"><em>shell pattern</em></span>): karaktereket illetve az &aacute;llom&aacute;nynevek megad&aacute;s&aacute;n&aacute;l haszn&aacute;latos metakaraktereket lehet haszn&aacute;lni:    <code class="literal">*</code>  <code class="literal">?</code>  <code class="literal">[]</code>, valamint k&eacute;t minta "vagy" logik&aacute;val val&oacute; &ouml;sszekapcsol&aacute;s&aacute;ra a <code class="literal">|</code> -at. P&eacute;ld&aacute;k:</p>

<table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">abc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>pontosan abc-re illeszkedik</td></tr><tr><td><code class="literal">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>b&aacute;rmire illeszkedik</td></tr><tr><td><code class="literal">?bc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>b&aacute;rmi az els&#337; karakter poz&iacute;ci&oacute;n, &eacute;s ut&aacute;na pontosan bc</td></tr><tr><td><code class="literal">ab|cd&nbsp;&nbsp;&nbsp;</code>ab vagy cd l&aacute;ncokra illeszkedik</td></tr></table>

<p>Az al&aacute;bbi kis p&eacute;lda k&uuml;l&ouml;nb&ouml;z&#337; kiv&aacute;laszt&aacute;sokat v&eacute;gez a parancssor els&#337; argumentum&aacute;t haszn&aacute;lva:</p>
<pre class="programlisting">
#!/bin/bash

valtozo=${1:? nincs param&eacute;ter}

case "$valtozo" in
         a) echo kis a bet&#369; ;;
    [0-9] ) echo egy sz&aacute;mjegy ;;
  *[0-9]* ) echo van benne sz&aacute;mjegy ;;
   *.txt  ) echo ".txt" sztringgel v&eacute;gz&#337;dik ;;
        * ) echo erre nem &iacute;rtunk pontos kiv&aacute;laszt&aacute;st ;;
esac
</pre>

<p>Futtatva:</p>

<pre class="screen">
$ bash case1.sh 2
egy sz&aacute;mjegy
$ bash case1.sh a2
van benne sz&aacute;mjegy
$ bash case1.sh piros
erre nem &iacute;rtunk pontos kiv&aacute;laszt&aacute;st
</pre>

<p>Az al&aacute;bbi kis program (<code class="filename">case3.sh</code>) a parancssor opci&oacute;it elemzi. Ha betartjuk azt a felt&eacute;telt, hogy egy program h&iacute;v&aacute;sakor el&#337;sz&ouml;r a kapcsol&oacute;kat, ut&aacute;na pedig az argumentumokat adjuk meg (&eacute;s opci&oacute;kat nem csoportos&iacute;tunk) akkor ez a szerkezet alkalmas kis programok opci&oacute;inak kezel&eacute;s&eacute;re.</p>

<pre class="programlisting">
#!/bin/bash

#vegigj&aacute;rja a param&eacute;tereket
#a while v&eacute;g&eacute;n lev&#337; shift gondoskodik err&#337;l
while [ -n "$1" ]
do
    case $1 in
        -f ) echo f opci&oacute; ;;
        -c ) #a c kapcsol&oacute;nak van argumentuma
             #teh&aacute;t elv&eacute;gz&uuml;nk m&eacute;g egy shift-et
             shift
             arg="$1"         
             #itt ellen&#337;rizhetn&eacute;nk, hogy $1 nem &uuml;res sztring
             #de ett&#337;l most eltekint&uuml;nk
             echo c opci&oacute;, argumentuma "$arg" ;;
        -* ) echo ismeretlen opci&oacute;: $1
             #ez hiba
             exit 1 ;;
            #ha el&eacute;rkezt&uuml;nk az els&#337; argumentumhoz,
            #amelyik nem kapcsol&oacute;:
         * ) break;;
    esac
    shift  #eltoljuk a param&eacute;tereket, $1 -ben a k&ouml;vetkez&#337; param&eacute;ter
done
</pre>
<p>Utols&oacute; mint&aacute;nak a kiv&aacute;laszt&aacute;sai sorozatban &aacute;ltal&aacute;ban &eacute;rdemes a <code class="literal">*</code>-ot haszn&aacute;lni, ami akkor hajt&oacute;dik v&eacute;gre, ha az el&#337;z&#337; kiv&aacute;laszt&aacute;sok k&ouml;z&uuml;l egyikre sincs tal&aacute;lat: &iacute;gy el&#337;&aacute;ll&iacute;thatjuk a C programoz&aacute;s <code class="code">switch</code> szerkezet&eacute;nek <code class="code">default</code> &aacute;g&aacute;hoz hasonl&oacute; szelekci&oacute;t. A fenti p&eacute;ld&aacute;ban ez az &aacute;g azokat az param&eacute;tereket kezeli amelyek nem kezd&#337;dnek - jellel.</p>
<p>A program a <code class="option">-c</code> &eacute;s <code class="option">-f</code> kapcsol&oacute;t ismeri fel, ha futtatjuk:</p>

<pre class="screen">
$ bash case3.sh -f -c 33 22
f opci&oacute;
c opci&oacute;, argumentuma 33
az elso opci&oacute;k ut&aacute;ni param&eacute;ter: 22
</pre>

<p>A <code class="option">-c</code> opci&oacute; param&eacute;ter&eacute;nek &aacute;tv&eacute;tele el&#337;tt m&eacute;g egy <span class="command"><strong>shift</strong></span> parancsot kell v&eacute;grehajtani. Term&eacute;szetesen a param&eacute;ter &eacute;rt&eacute;k&eacute;t &eacute;s l&eacute;tez&eacute;s&eacute;t ellen&#337;rizni kell egy teljesebb szkriptben (megt&ouml;rt&eacute;nhet, hogy a <span class="command"><strong>shift</strong></span> ut&aacute;n &uuml;res lesz az 1-es v&aacute;ltoz&oacute;).</p>

<div class="note" title="A getopts f&uuml;ggv&eacute;ny" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: A getopts f&uuml;ggv&eacute;ny"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">A <code class="function">getopts</code> f&uuml;ggv&eacute;ny</th></tr><tr><td align="left" valign="top">
<p>A h&eacute;jnak van jobb megold&aacute;sa az argumentumok kezel&eacute;s&eacute;re, a <code class="function">getopts</code> f&uuml;ggv&eacute;ny, r&ouml;vid bemutat&aacute;s&aacute;t l&aacute;sd a F&uuml;ggel&eacute;kek <a class="link" href="#getopts">A getops f&uuml;ggv&eacute;ny</a> c&iacute;m&#369; fejezet&eacute;ben vagy a Bash k&eacute;zik&ouml;nyv&eacute;ben. Egyszer&#369; programokn&aacute;l a fenti megold&aacute;s is megteszi.</p>
</td></tr></table></div>

<p>Az al&aacute;bbi szkript (<code class="filename">case2.sh</code>) pedig k&uuml;l&ouml;nb&ouml;z&#337; t&iacute;pus&uacute; &aacute;llom&aacute;nyokat szort&iacute;roz a t&iacute;pusnak megfelel&#337; k&ouml;nyvt&aacute;rba:</p>

<pre class="programlisting">
#!/bin/bash

#pdf, mp3, avi, jpg, gif t&iacute;pus&uacute; &aacute;llom&aacute;nyokat
#k&uuml;l&ouml;n k&ouml;nyvt&aacute;rakba v&aacute;logatja egy forr&aacute;sk&ouml;nyvt&aacute;rb&oacute;l
#egy argumentumot v&aacute;r: a k&ouml;nyvt&aacute;rnevet ahol az
#&aacute;llom&aacute;nyok vannak

#a c&eacute;lk&ouml;nyvt&aacute;rakat az al&aacute;bbi v&aacute;ltoz&oacute;kban adom meg
#ezeket is meg lehetne adni param&eacute;terk&eacute;nt a parancssoron
PDF=pdf
MP3=mp3
AVI=avi
KEPEK=kepek

#pontosan 1 param&eacute;tert v&aacute;r
if [ -z "$1" ];then
    echo haszn&aacute;lat: case2.sh k&ouml;nyvt&aacute;rn&eacute;v
    exit 1
fi

#a param&eacute;ter tartalm&aacute;t egy jobban olvashat&oacute; nev&#369;
#v&aacute;ltoz&oacute;ba tessz&uuml;k
forras="$1"

#megn&eacute;zz&uuml;k, hogy a c&eacute;lk&ouml;nyvt&aacute;rak l&eacute;teznek-e,
#ha nem l&eacute;trehozzuk &#337;ket
for konyvtar in "$PDF" "$MP3" "$AVI" "$KEPEK"
do
    #ha p&eacute;ld&aacute;ul van pdf k&ouml;nyvt&aacute;r, akkor az els&#337; felt&eacute;tel
    #ut&aacute;n abbahagyja a tesztet
    if ! [ -d "$konyvtar" ]  &amp;&amp;  ! mkdir "$konyvtar" 2&gt;/dev/null
    then
        echo nem lehet a $konyvtar k&ouml;nyvt&aacute;rat l&eacute;trehozni
        exit 1
    fi
done

#v&eacute;gigj&aacute;rjuk a forr&aacute;s  k&ouml;nyvt&aacute;r &aacute;llom&aacute;nyneveit
for f in $( ls "$forras" )
do
    #a case-el v&aacute;lasztjuk &eacute;s m&aacute;soljuk k&uuml;l&ouml;nb&ouml;z&#337; helyekre
    #ha egy f&aacute;jl egyik kategori&aacute;ba sem esik akkor a *-al
    #jel&ouml;lt &aacute;gra fut
    case "$f" in
        *.mp3 ) mv "$forras/$f" "$MP3" ;;
        *.avi ) mv "$forras/$f" "$AVI" ;;
        *.pdf ) mv "$forras/$f" "$PDF" ;;
  *.jpg|*.gif ) mv "$forras/$f" "$KEPEK" ;;
        * ) echo a "$f" nem tartozik egyik kategoriaba sem. ;;
    esac
done
</pre>



</div>


<div class="sect1" title="A select szerkezet"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2481"><a class="indexterm" name="d5e2483"></a>A select szerkezet</h2></div></div></div>

<p>A <span class="command"><strong>select</strong></span> szerkezetet kis interakt&iacute;v programok eset&eacute;ben haszn&aacute;ljuk. Haszn&aacute;lati m&oacute;dja:</p>

<pre class="programlisting">
<span class="strong"><strong>select valtozo in lista
do
    parancsok
done</strong></span>
</pre>

<p>A <span class="command"><strong>select</strong></span> kulcssz&oacute;t tartalmaz&oacute; sor v&eacute;grehajt&aacute;sakor a parancs egy kis men&uuml;t &iacute;r ki a <code class="varname">lista</code> (ez egy sztring lista) seg&iacute;ts&eacute;g&eacute;vel. Ezek ut&aacute;n k&eacute;szenl&eacute;ti jelet (<span class="emphasis"><em>prompt</em></span>) &iacute;r ki (ezt a <code class="envar">PS3</code> h&eacute;j v&aacute;ltoz&oacute;b&oacute;l veszi). V&aacute;laszk&eacute;nt a men&uuml; egyik sor&aacute;t kell kiv&aacute;lasztani &uacute;gy, hogy a sorrendj&eacute;nek megfelel&#337; sz&aacute;mot &uuml;tj&uuml;k le. Ezek ut&aacute;n a <span class="command"><strong>select</strong></span> belsej&eacute;ben a <code class="varname">valtozo</code> &eacute;rt&eacute;ke  felveszi a list&aacute;b&oacute;l kiv&aacute;lasztott karakterl&aacute;nc &eacute;rt&eacute;k&eacute;t, &eacute;s ezt fel lehet haszn&aacute;lni parancs v&eacute;grehajt&aacute;sra. Ugyanakkor a h&eacute;j <code class="varname">REPLY</code> v&aacute;ltoz&oacute;ja felveszi a be&uuml;t&ouml;tt sz&aacute;m vagy m&aacute;s sztring &eacute;rt&eacute;k&eacute;t.</p>

<p>A szerkezet addig ism&eacute;tli a men&uuml; ki&iacute;r&aacute;s&aacute;t &eacute;s a v&eacute;grehajt&aacute;st am&iacute;g bemenetk&eacute;nt &aacute;llom&aacute;ny v&eacute;ge jelet kap (Ctrl-D) vagy a parancsok v&eacute;grehajt&aacute;si r&eacute;sz&eacute;ben egy <span class="command"><strong>break</strong></span> parancs hajt&oacute;dik v&eacute;gre. Ha olyan bemeneti sz&aacute;mot adunk meg ami nincs a men&uuml;ben, a v&aacute;ltoz&oacute; &uuml;res sztringre lesz &aacute;ll&iacute;tva (a  <code class="varname">REPLY</code> viszont megkapja a be&uuml;t&ouml;tt &eacute;rt&eacute;ket). </p>

<p>M&#369;k&ouml;d&eacute;s&eacute;t az al&aacute;bbi kis p&eacute;ld&aacute;val illusztr&aacute;ljuk:</p>

<pre class="programlisting">
#!/bin/bash
#a PS3 &eacute;rt&eacute;k&eacute;t be&aacute;ll&iacute;tjuk, ez lesz a prompt
#cserelj&uuml;k

PS3='&gt;&gt;'

select valtozo in Elso Masodik Harmadik Vege
do
    echo $valtozo
    echo a '$REPLY' valtozo erteke ilyenkor: "$REPLY"

    #itt barmilyen parancsot vegre lehet hajtani, felhasznalva
    #a $valtozo es $REPLY ertekeit

    if [ "$valtozo" = 'Vege' ];then
            echo "...&eacute;s j&ouml;n a kil&eacute;p&eacute;s a select-b&#337;l"
        break
    fi
done
</pre>

<p>M&#369;k&ouml;d&eacute;se az al&aacute;bbi:</p>

<pre class="screen">
$ bash select.sh 
1) Elso 
2) Masodik 
3) Harmadik 
4) Vege 
&gt;&gt;1 
Elso 
a $REPLY valtozo erteke ilyenkor: 1 
&gt;&gt;2 
Masodik 
a $REPLY valtozo erteke ilyenkor: 2 
&gt;&gt; 
$ 
</pre>
<p>Addig ism&eacute;tli a ciklust, am&iacute;g az &aacute;llom&aacute;ny v&eacute;ge jelet (Ctrl-D) &uuml;tj&uuml;k le vagy kiv&aacute;lasztjuk a 'V&eacute;ge' opci&oacute;t.</p>


</div>


<div class="sect1" title="A read parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_read">A read parancs<a class="indexterm" name="d5e2507"></a></h2></div></div></div>

<p>Sorokat olvas be.</p>
<h3><a name="d5e2510"></a>Haszn&aacute;lat:</h3>
<div class="cmdsynopsis"><p>
  <code class="command">read</code> 
   [-p prompt]
   [-s]
   [-t timeout]
   [-n nkar]
   [-d kar]
  
    <em class="replaceable"><code>v&aacute;ltoz&oacute;</code></em>... 
</p></div>

 <h3><a name="d5e2520"></a>Fontosabb opci&oacute;k:</h3>
<p><code class="option">-p prompt</code> ki&iacute;r egy k&eacute;szenl&eacute;ti jel karakterl&aacute;ncot olvas&aacute;s el&#337;tt</p>
<p><code class="option">-s</code> silent: nem haszn&aacute;l visszhangot, teh&aacute;t nem l&aacute;tjuk a le&uuml;t&ouml;tt bet&#369;ket: jelsz&oacute; beolvas&aacute;sra haszn&aacute;ljuk</p>
<p><code class="option">-t timeout</code> v&aacute;r timeout m&aacute;sodpercig, ha az alatt nem &iacute;runk be semmit, visszat&eacute;r</p>
<p><code class="option">-n nkar</code> csak nkar darab karaktert olvas, ut&aacute;na visszat&eacute;r </p>
<p><code class="option">-d kar</code> delimiter: m&aacute;s elv&aacute;laszt&oacute;t keres a sorok v&eacute;g&eacute;n mint az &uacute;jsor karaktert</p>
          <h3><a name="d5e2531"></a>Le&iacute;r&aacute;s:</h3>

<p>A <span class="command"><strong>read</strong></span> parancs beolvas egy sort a parancssorr&oacute;l egy v&aacute;ltoz&oacute;ba vagy v&aacute;ltoz&oacute; list&aacute;ba. Ha egy v&aacute;ltoz&oacute;t adunk meg a parancssor&aacute;n, akkor a teljes sort abba olvassa, ha t&ouml;bbet akkor feldarabolja  a sort a h&eacute;j implicit elv&aacute;laszt&oacute;i szerint (sz&oacute;k&ouml;z &eacute;s tabul&aacute;tor) &eacute;s a v&aacute;ltoz&oacute;k felveszik a kapott sztringek &eacute;rt&eacute;keit. A </p>

<pre class="programlisting">
read line
</pre>
<p>teh&aacute;t az eg&eacute;sz sort a  <code class="varname">line</code> valtoz&oacute;ba t&eacute;r&iacute;ti vissza, a</p>
<pre class="programlisting">
read szo1 szo2 szo3
</pre>
<p>pedig a be&iacute;rt szavakat a <code class="varname">szo1</code>, <code class="varname">szo2</code> stb.-be &iacute;rja. Elv&aacute;laszt&oacute;nak a h&eacute;j implicit elv&aacute;laszt&oacute;it haszn&aacute;lja.</p>

<p>Ha t&ouml;bb sz&oacute; j&ouml;n a bemenetre mint ah&aacute;ny v&aacute;ltoz&oacute;t megadunk, az utols&oacute; v&aacute;ltoz&oacute;ba ker&uuml;l a fennmarad&oacute; sz&ouml;veg. Pl. ha csak az els&#337; sz&oacute;ra van sz&uuml;ks&eacute;g&uuml;nk, akkor a:</p>

<pre class="programlisting">
read hasznos szemet
</pre>

<p>olvas&aacute;s a <code class="varname">hasznos</code> v&aacute;ltoz&oacute;ba olvassa az els&#337; sz&oacute;t, a <code class="varname">szemet</code>-be a t&ouml;bbit.</p>

<p>Ha elhagyjuk a v&aacute;ltoz&oacute;nevet, akkor a h&eacute;j <code class="varname">REPLY</code> nev&#369; be&eacute;p&iacute;tett v&aacute;ltoz&oacute;j&aacute;ba ker&uuml;l a bemeneti sor : ez praktikus akkor, ha a bemeneti v&aacute;ltoz&oacute;t csak a bemenet &aacute;tv&eacute;tel&eacute;re haszn&aacute;ljuk.</p>

<p>A <span class="command"><strong>read</strong></span> igaz &eacute;rt&eacute;kkel t&eacute;r vissza a <code class="varname">?</code> v&aacute;ltoz&oacute;ban ha siker&uuml;lt beolvasnia. F&aacute;jl v&eacute;ge (Ctrl-D) eset&eacute;n hamissal t&eacute;r vissza, &iacute;gy lehet egy hosszabb beolvas&aacute;si sorozatot le&aacute;ll&iacute;tani. Az al&aacute;bbi <span class="command"><strong>read</strong></span> ki&iacute;r egy r&ouml;vid sz&ouml;veget, &eacute;s siker eset&eacute;n a sort visszat&eacute;r&iacute;ti a <code class="varname">line</code> v&aacute;ltoz&oacute;ba:</p>
<pre class="screen">
$ read -p "&Iacute;rd be a neved:" line
&Iacute;rd be a neved:
</pre>
<p>Az al&aacute;bbi csak 3 m&aacute;sodpercig v&aacute;r, &eacute;s csak egy karaktert olvas be az <code class="varname">igen_nem</code> v&aacute;ltoz&oacute;ba, ut&aacute;na visszat&eacute;r:</p>
<pre class="screen">
$ read -p "Igen vagy nem [I/N]?:" -n 1 -t 3 igen_nem
Igen vagy nem [I/N]?:
</pre>
<p>Ciklusban a while szerkezetben lehet haszn&aacute;lni mint felt&eacute;tel:</p>

<pre class="programlisting">
while read line
do
    #a beolvasott sor feldolgoz&aacute;sa
done
</pre>
<p>Akkor hagyja el a ciklust, ha nem tud olvasni: pl. a bemenet v&eacute;g&eacute;hez &eacute;r.</p>

<div class="note" title="F&aacute;jlok olvas&aacute;sa a read-el" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: F&aacute;jlok olvas&aacute;sa a read-el"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">F&aacute;jlok olvas&aacute;sa a read-el</th></tr><tr><td align="left" valign="top">

<p>A <span class="command"><strong>read</strong></span> -el  csak a standard bemenetr&#337;l fogunk olvasni ebben a k&ouml;nyvben, ez az implicit m&#369;k&ouml;d&eacute;si m&oacute;dja. A parancs tud b&aacute;rmilyen f&aacute;jlb&oacute;l olvasni, ha megadjuk a f&aacute;jl azonos&iacute;t&oacute;j&aacute;t. Ezt a <code class="option">-u</code> kapcsol&oacute;val lehet el&eacute;rni. A f&aacute;jlt ezt megel&#337;z&#337;en az <span class="command"><strong>exec</strong></span> paranccsal meg kell nyitni &eacute;s haszn&aacute;lat ut&aacute;n le kell z&aacute;rni egy bemenet lez&aacute;r&oacute; oper&aacute;torral. Erre adunk most egy p&eacute;ld&aacute;t, de nem fogjuk &iacute;gy haszn&aacute;lni a <span class="command"><strong>read</strong></span>-et.</p>
<pre class="programlisting">
exec 6&lt; "1.txt"   #bemeneti f&aacute;jl megnyit&aacute;sa 6-os azonos&iacute;t&oacute;val
read -u 6 line       #egy sor beolvas&aacute;sa
echo $line 
exec 6&lt;&amp;-     #f&aacute;jl lez&aacute;r&aacute;sa
</pre>
<p>R&eacute;szletek, valamint az &ouml;sszes Bash &aacute;ltal a be &eacute;s kimeneti m&#369;veletekn&eacute;l haszn&aacute;lt oper&aacute;tor megtal&aacute;lhat&oacute; a <a class="link" href="#BashRef2010">Bash k&eacute;zik&ouml;nyv&eacute;nek</a> 3. fejezet&eacute;ben.</p>

</td></tr></table></div>



</div>

<div class="sect1" title="P&eacute;ldaprogramok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2570">P&eacute;ldaprogramok</h2></div></div></div>
<p>Az al&aacute;bbi kis szkriptekben m&aacute;r kihaszn&aacute;ljuk a ciklus szerkezetek &aacute;ltal ny&uacute;jtott lehet&#337;s&eacute;geket. A p&eacute;ld&aacute;k f&aacute;jlrendszerhez k&ouml;t&#337;d&#337; kis feladatok.</p>
<div class="sect2" title="F&aacute;jl m&aacute;sol&aacute;s"><div class="titlepage"><div><div><h3 class="title" id="d5e2573">F&aacute;jl m&aacute;sol&aacute;s</h3></div></div></div>

<p>&Iacute;rjunk egy szkriptet, amelyik egy k&ouml;nyvt&aacute;rb&oacute;l &aacute;tm&aacute;solja a f&aacute;jlokat egy m&aacute;sik k&ouml;nyvt&aacute;rba, ha a f&aacute;jlok teljes&iacute;tenek egy felt&eacute;telt!</p>

<p>Az al&aacute;bbi s&eacute;m&aacute;t alkalmazhatjuk. Legyen a felt&eacute;tel p&eacute;ld&aacute;ul a f&aacute;jlban lev&#337; sorok sz&aacute;ma. M&aacute;soljunk, ha a sorok sz&aacute;ma nagyobb mint egy N sz&aacute;m. Felt&eacute;telezz&uuml;k, hogy a forr&aacute;sk&ouml;nyvt&aacute;rban csak igazi f&aacute;jlok vannak, &eacute;s minden &aacute;llom&aacute;ny sz&ouml;veges (ezt a k&eacute;t felt&eacute;telt is lehet tesztelni, de els&#337; l&eacute;p&eacute;sben ett&#337;l eltekint&uuml;nk). Att&oacute;l azonban nem tekint&uuml;nk el, hogy a k&ouml;nyvt&aacute;rk&eacute;nt megadott nevek l&eacute;tezzenek &eacute;s val&oacute;ban k&ouml;nyvt&aacute;rak legyenek. Ha nagyon pontosak akarunk lenni, azt is le kell teszteln&uuml;nk, hogy a forr&aacute;sk&ouml;nyvt&aacute;ron az r &eacute;s x , a c&eacute;lk&ouml;nyvt&aacute;ron pedig az rwx jogok be vannak-e &aacute;ll&iacute;tva. &Uacute;j f&aacute;jl l&eacute;trehoz&aacute;s&aacute;nak felt&eacute;tele a w jog a k&ouml;nyvt&aacute;ron. Az al&aacute;bbi szkriptben csak n&eacute;h&aacute;ny fontosabb tesztet v&eacute;gz&uuml;nk el ezek k&ouml;z&uuml;l.</p>

<p>Egy megold&aacute;s  (<code class="filename">fcopy.sh</code>):</p>

<pre class="programlisting">
#!/bin/bash
#&aacute;tm&aacute;sol fajlokat egy k&ouml;nyvt&aacute;rb&oacute;l egy m&aacute;sikba,
#ha a f&aacute;jlban legal&aacute;bb N sz&ouml;vegsor van
#ha a c&eacute;lk&ouml;nyvt&aacute;r nem l&eacute;tezik, l&eacute;trehozza
#
#Param&eacute;terek:
#   $1 - forr&aacute;sk&ouml;nyvt&aacute;r
#   $2 - c&eacute;lk&ouml;nyvt&aacute;r
#   $3 - sorok sz&aacute;ma
#
#ha nincs pont 3 param&eacute;ter, kil&eacute;p:

if [ $# -ne 3 ]
then
    echo haszn&aacute;lat: fcopy.sh forr&aacute;s c&eacute;l sorsz&aacute;m
    exit 1
fi

#parameterek &aacute;tv&eacute;tele
forras="$1"
cel="$2"
sorszam="$3"

#tesztelj&uuml;k a k&ouml;nyvt&aacute;rakat
if ! [ -d "$forras" ]
then
    echo "$forras" k&ouml;nyvt&aacute;r nem l&eacute;tezik
    exit 1
fi

#ha a c&eacute;lk&ouml;nyvt&aacute;r nem l&eacute;tezik l&eacute;trehozzuk
if ! [ -d "$cel" ]
then
    if ! mkdir "$cel" 2&gt;/dev/null
    then
        echo nem lehet l&eacute;trehozni a c&eacute;l k&ouml;nyvt&aacute;rat
        exit 1
    else
        #ki is &iacute;rjuk ha siker&uuml;lt
        echo "$cel" &uacute;j k&ouml;nyvt&aacute;r
    fi

fi

#ellen&#337;rizz&uuml;k, hogy a c&eacute;lk&ouml;nyt&aacute;rban tudunk e l&eacute;trehozni
#f&aacute;jlokat, van-e w jogunk
if ! [ -w "$cel" ]
then
    echo a "$cel" -ben nem lehet f&aacute;jlokat l&eacute;trehozni
    exit 1
fi

#megsz&aacute;moljuk h&aacute;ny f&aacute;jlt m&aacute;solunk
szam=0

#v&eacute;gigj&aacute;rjuk a forr&aacute;sk&ouml;nyvt&aacute;r f&aacute;jljait
#felt&eacute;telezz&uuml;k, hogy csak sz&ouml;veges f&aacute;jlok vannak benne
#es ezek el&eacute;rhet&#337;ek
for f in $( ls "$forras" )
do

    #a f&aacute;jlban lev&#337; sorok sz&aacute;ma
    N=$( wc -l "$forras/$f" | cut -f 1 -d " " )

    #itt tesztelj&uuml;k a m&aacute;sol&aacute;s felt&eacute;tel&eacute;t
    if [ $N -gt $sorszam ]
    then
        #ha teljes&uuml;l a felt&eacute;tel m&aacute;solunk

        #ki&iacute;rjuk, h&aacute;ny sor van a f&aacute;jlban, de nem &iacute;runk &uacute;jsort
        #&iacute;gy ugyanabban a sorban fog megjelenni
        #a cp &aacute;ltal ki&iacute;rt sz&ouml;veg is

        echo -n "$N soros f&aacute;jl : "

        #haszn&aacute;ljuk a -v opci&oacute;t, hogy l&aacute;ssuk mi t&ouml;rt&eacute;nik:

        if ! cp -v "$forras/$f" "$cel/$f"
        then
            echo m&aacute;sol&aacute;s nem siker&uuml;lt: "$forras/$f" "-&gt;" "$cel/$f"
            exit 1
        fi

        #sz&aacute;ml&aacute;ljuk a f&aacute;jlokat
        szam=$( expr $szam + 1 )

    fi
done

echo $szam f&aacute;jl m&aacute;solva
</pre>

<p>V&eacute;grehajtva a <code class="filename">teszt1</code> k&ouml;nyvt&aacute;rra:</p>

<pre class="screen">
$ bash fcopy.sh teszt teszt1 2
teszt1 &uacute;j k&ouml;nyvt&aacute;r
4 soros f&aacute;jl : `teszt/1.txt' -&gt; `teszt1/1.txt'
3 soros f&aacute;jl : `teszt/2.txt' -&gt; `teszt1/2.txt'
2 f&aacute;jl m&aacute;solva
$
</pre>

</div>

<div class="sect2" title="K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se"><div class="titlepage"><div><div><h3 class="title" id="d5e2583">K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se</h3></div></div></div>

<p>&Iacute;rjunk egy szkriptet amelyik a parancssor&aacute;n megadott k&ouml;nyvt&aacute;r &aacute;llom&aacute;nyait figyeli 2 m&aacute;sodpercenk&eacute;nt, &eacute;s amennyiben ezek sz&aacute;ma meghalad egy adott N sz&aacute;mot, let&ouml;rli a legr&eacute;gebbi &aacute;llom&aacute;nyt! </p>

<p><a name="cmd_sleep"></a>Egy megold&aacute;s az al&aacute;bbi szkript (<code class="filename">watch_file.sh</code>), az 5 m&aacute;sodpercenk&eacute;nti v&aacute;rakoz&aacute;st a <a class="indexterm" name="d5e2588"></a> <span class="command"><strong>sleep</strong></span> paranccsal oldjuk meg, melynek argumentumk&eacute;nt a v&aacute;rakoz&aacute;s idej&eacute;t kell megadni m&aacute;sodpercben. A <span class="command"><strong>sleep</strong></span> Linux rendszereken elfogad tizedes sz&aacute;mokat is param&eacute;terk&eacute;nt, illetve a param&eacute;ter ut&aacute;n az implicit m&aacute;sodperc m&eacute;rt&eacute;ket m&oacute;dos&iacute;thatjuk percre vagy &oacute;r&aacute;ra az <code class="code">m</code> vagy <code class="code">h</code> jelz&#337; karakterekkel: <code class="code">sleep 3</code> ; <code class="code">sleep 0.5</code> ; <code class="code">sleep 2m</code> ; <code class="code">sleep 2h</code> helyes parancsok. A szkript&uuml;nk:</p>

<pre class="programlisting">
#!/bin/bash
# a parancssor&aacute;n megadott k&ouml;nyvt&aacute;rat figyeli 2 m&aacute;sodpercenk&eacute;nt
# ha az ott lev&#337; f&aacute;jlok sz&aacute;ma meghalad egy N sz&aacute;mot
# let&ouml;rli az id&#337;ben legr&eacute;gebben m&oacute;dos&iacute;tottat
# Param&eacute;terek:
#   $1 - a k&ouml;nyvt&aacute;r neve
#   $2 - az N eg&eacute;sz sz&aacute;m
#ha nincs pont 2 param&eacute;ter, kil&eacute;p
if [ $# -ne 2 ]
then
    echo haszn&aacute;lat: watch_file.sh dir N
    exit 1
fi

#param&eacute;terek &aacute;tv&eacute;tele
d="$1"              #k&ouml;nyvt&aacute;rn&eacute;v
N="$2"              #f&aacute;jlok sz&aacute;ma

#ha d nem k&ouml;nyvt&aacute;r kil&eacute;p
if ! [ -d "$d" ]
then
    echo "$d" nem k&ouml;nyvt&aacute;r
    exit 1
fi

#sz&aacute;moljuk, h&aacute;ny ciklust v&eacute;gz&uuml;nk
ciklus=0

#a ciklust a true paranccsal vez&eacute;relj&uuml;k, ez mindig igaz
#&iacute;gy a ciklus v&eacute;gtelen, kil&eacute;pni csak a szkriptet megszak&iacute;tva lehet
while true
do
    #megn&ouml;velj&uuml;k a sz&aacute;ml&aacute;l&oacute;t
    ciklus=$( expr $ciklus + 1 )

    #h&aacute;ny f&aacute;jl van a k&ouml;nyvt&aacute;rban
    fileno=$( ls -1 "$d" | wc -l )

    #kifecsegj&uuml;k a ciklus &eacute;s f&aacute;jlok sz&aacute;m&aacute;t
    echo $ciklus ciklus, $fileno f&aacute;jl van

    #t&uacute;l sok f&aacute;jl van?
    if [ $fileno -gt $N ]
    then
        #melyik a legr&eacute;gebben m&oacute;dos&iacute;tott
        f=$( ls -1tr teszt/ | head -1 )
        #megpr&oacute;b&aacute;ljuk let&ouml;r&ouml;lni
        if ! rm -f "$d/$f" 2&gt;/dev/null
        then
            #ha ez nem siker&uuml;lt, kil&eacute;p&uuml;nk
            echo v&eacute;ge: nem lehet let&ouml;r&ouml;lni a "$d/$f" f&aacute;jlt
            exit 1
        else
            #ki&iacute;rjuk a let&ouml;r&ouml;lt f&aacute;jl nev&eacute;t
            echo "$d/$f" t&ouml;r&ouml;lve
        fi
    fi

    #v&aacute;runk 5 m&aacute;sodpercet
    sleep 5

done
</pre>

<p>P&eacute;ldak&ouml;nyvt&aacute;rk&eacute;nt az al&aacute;bbi teszt k&ouml;nyvt&aacute;r f&aacute;jljait figyelj&uuml;k:</p>

<pre class="screen">
$ ls -l teszt
total 0
-rw-rw-r-- 1 lszabo lszabo 0 Aug  2 04:00 1.txt
-rw-rw-r-- 1 lszabo lszabo 0 Feb  2  2011 2.txt
-rw-rw-r-- 1 lszabo lszabo 0 Jan  2  2011 3.txt
-rw-rw-r-- 1 lszabo lszabo 0 Sep 22 17:28 4.txt
-rw-rw-r-- 1 lszabo lszabo 0 Sep 22 17:57 5.txt
$
</pre>

<p>Elind&iacute;tjuk a programot, &eacute;s fut&aacute;s k&ouml;zben a harmadik ciklus ut&aacute;n egy m&aacute;sodik termin&aacute;lr&oacute;l l&eacute;trehozunk egy &ouml;t&ouml;dik  f&aacute;jlt, majd Ctrl-C -vel le&aacute;ll&iacute;tjuk a programot:</p>
<pre class="screen">
$ bash watch_file.sh teszt 4
1 ciklus, 4 f&aacute;jl van
2 ciklus, 4 f&aacute;jl van
3 ciklus, 4 f&aacute;jl van
4 ciklus, 5 f&aacute;jl van
teszt/3.txt t&ouml;r&ouml;lve
5 ciklus, 4 f&aacute;jl van

$ 
</pre>
<p>Az &ouml;t&ouml;dik f&aacute;jlt &iacute;gy hozhatjuk l&eacute;tre, egy m&aacute;sodik termin&aacute;lr&oacute;l:</p>
<pre class="screen">
$ touch teszt/5.txt
</pre>

<p><span class="strong"><strong>Megjegyz&eacute;sek:</strong></span></p>

<p>Az <span class="command"><strong>ls -1</strong></span> soronk&eacute;nt egy f&aacute;jl nevet &iacute;r ki, <code class="option">-t</code> opci&oacute; a m&oacute;dos&iacute;t&aacute;si id&#337; szerint list&aacute;z, <code class="option">-r</code> opci&oacute; megford&iacute;tja a lista sorrendj&eacute;t, az els&#337; a legr&eacute;gebben m&oacute;dos&iacute;tott f&aacute;jl lesz.</p>

<p>A f&aacute;jlok sz&aacute;m&aacute;t megkapjuk, ha a <span class="command"><strong>wc</strong></span>-al megsz&aacute;moljuk az <span class="command"><strong>ls -1</strong></span> kimenet&eacute;t. A sz&aacute;m csak akkor lesz pontos, ha a k&ouml;nyvt&aacute;rban csak regul&aacute;ris f&aacute;jlok vannak. Ha k&ouml;nyvt&aacute;rak vagy m&aacute;s t&iacute;pusok is vannak, akkor ugyanezt megtehetj&uuml;k a  Unix <a class="indexterm" name="d5e2614"></a> <span class="command"><strong>find</strong></span> parancs&aacute;val, amely csak az igazi f&aacute;jlokat fogja keresni (opci&oacute;: <code class="code">-type f</code> ) &eacute;s csak egy k&ouml;nyvt&aacute;rnyi m&eacute;lys&eacute;gben (opci&oacute;: <code class="code">-maxdepth 1</code>):</p>

<pre class="screen">
$ find teszt -maxdepth 1 -type f
teszt/5.txt
teszt/4.txt
teszt/2.txt
teszt/1.txt
$ 
</pre>

<p>Ezek id&#337;beli sorrendbe val&oacute; rendez&eacute;s&eacute;t  el lehet v&eacute;gezni ha ezt a list&aacute;t &aacute;tadjuk az <span class="command"><strong>ls</strong></span>-nek az <span class="command"><strong>xargs</strong></span> parancs seg&iacute;ts&eacute;g&eacute;vel:</p>

<pre class="screen">
$ find teszt -maxdepth 1 -type f -print | xargs ls -1tr
teszt/2.txt
teszt/1.txt
teszt/4.txt
teszt/5.txt
$
</pre>

<p>A <span class="command"><strong>find</strong></span> &eacute;s <span class="command"><strong>xargs</strong></span> bonyolultabb parancsok, haszn&aacute;latukat l&aacute;sd k&eacute;zik&ouml;nyveikben.</p>

</div>


<div class="sect2" title="Sz&ouml;veges f&aacute;jl sorainak v&eacute;gigj&aacute;r&aacute;sa"><div class="titlepage"><div><div><h3 class="title" id="d5e2627">Sz&ouml;veges f&aacute;jl sorainak v&eacute;gigj&aacute;r&aacute;sa</h3></div></div></div>

<p>Amint <a class="link" href="#while">m&aacute;r eml&iacute;tett&uuml;k</a>, ha egy sz&ouml;veges f&aacute;jl sorait kell egyenk&eacute;nt feldolgozni, arra egyik legjobb m&oacute;dszer a <code class="code">while</code> ciklus &eacute;s a <span class="command"><strong>read</strong></span> parancs kombin&aacute;ci&oacute;ja &uacute;gy, hogy a <code class="code">while</code> szerkezet bemenet&eacute;re ir&aacute;ny&iacute;tjuk a feldolgozott sz&ouml;veget. A ciklus belsej&eacute;ben b&aacute;rmilyen feladatot elv&eacute;gezhet&uuml;nk a sorokkal.</p>

<p><a name="cmd_tr"></a><a class="indexterm" name="d5e2635"></a>A p&eacute;ldaprogramban haszn&aacute;lni fogunk egy n&eacute;pszer&#369; sz&ouml;vegsz&#369;r&#337; parancsot, a <span class="command"><strong>tr</strong></span>-t.</p>

<p>A <span class="command"><strong>tr</strong></span> (<span class="emphasis"><em>translate</em></span>)  parancs a bemenet&eacute;re &eacute;rkez&#337; sz&ouml;veget a kimenetre &iacute;rja, de ki&iacute;r&aacute;s el&#337;tt karaktereket cser&eacute;l vagy t&ouml;r&ouml;l, teh&aacute;t sz&ouml;vegsz&#369;r&#337;k&eacute;nt m&#369;k&ouml;dik. Haszn&aacute;lata:</p>

<div class="cmdsynopsis"><p>
  <code class="command">tr</code> 
   [opci&oacute;k]
    karakter-lista1 
   [<em class="replaceable"><code>karakter-lista2</code></em>]
</p></div>

<p>Opci&oacute;k n&eacute;lk&uuml;l egyszer&#369;en az els&#337;,  <code class="code">karakter-lista1</code>-ben megadott karaktereket kicser&eacute;li a <code class="code">karakter-lista2</code>-ben megadott karakterekkel. A karakter lista itt karakter felsorol&aacute;st jelent, teh&aacute;t elvileg minden karakternek az els&#337; list&aacute;b&oacute;l megfelel egy a m&aacute;sodikb&oacute;l. Ha a m&aacute;sodik lista nem el&eacute;g hossz&uacute;, akkor az utols&oacute; karakter&eacute;t ism&eacute;tli, am&iacute;g kieg&eacute;sz&iacute;ti. P&eacute;ld&aacute;ul az al&aacute;bbi parancs kicser&eacute;li a bemeneti sztring kisbet&#369;it nagybet&#369;kre:</p>
<pre class="screen">
$ echo bemenet | tr a-z A-Z
BEMENET
$
</pre>
<p>A k&eacute;t karakterlist&aacute;t aj&aacute;nlatos aposztr&oacute;fok k&ouml;z&eacute; z&aacute;rni ha speci&aacute;lis karakterek jelennek meg a list&aacute;kban.</p>
<p>A <code class="code">tr -d</code> opci&oacute;val csak egy karakterhalmazt k&eacute;r argumentumnak, ezeket a karaktereket t&ouml;rli a bemeneti sztringb&#337;l:</p>
<pre class="screen">
$ echo abcdef | tr -d ae
bcdf
$
</pre>
<p>A <code class="option">-s</code> (<span class="emphasis"><em>squeeze</em></span>) kapcsol&oacute;j&aacute;val val&oacute; haszn&aacute;lata elt&uuml;nteti az ism&eacute;tl&#337;d&#337; karaktereket a bemenetb&#337;l:</p>
<pre class="screen">
$ echo abbbbbcddddddddddde | tr -s bd
abcde
$
</pre>

<p>, a <code class="option">-c</code> (<span class="emphasis"><em>complement</em></span>) opci&oacute;ja pedig a a megadott karakterlista komplementum halmaz&aacute;val (teh&aacute;t azokkal a karakterekkel amelyek nincsenek a list&aacute;ban) v&eacute;gzi el a t&ouml;rl&eacute;s vagy ism&eacute;tl&eacute;s sz&#369;r&eacute;s. m&#369;veleteket (teh&aacute;t a <code class="option">-s</code> vagy <code class="option">-d</code> -vel egy&uuml;tt haszn&aacute;ljuk.</p>

<p>Az al&aacute;bbi szkript (<code class="filename">sorok.sh</code>) v&eacute;gigj&aacute;rja a sz&ouml;veges &aacute;llom&aacute;ny sorait, &eacute;s ki&iacute;rja &#337;ket &uacute;gy, hogy a sor el&eacute; &iacute;rja a sorsz&aacute;mot &eacute;s a benne lev&#337; karakterek sz&aacute;m&aacute;t, a sort pedig nagybet&#369;ss&eacute; alak&iacute;tja. Az sor nagybet&#369;ss&eacute; alak&iacute;t&aacute;s&aacute;t a <span class="command"><strong>tr</strong></span>  paranccsal v&eacute;gezz&uuml;k:</p>

<pre class="programlisting">
#!/bin/bash
#ki&iacute;rja a egy sz&ouml;veges f&aacute;jl sorait nagybet&#369;kkel,
#minden sor el&eacute; &iacute;rja a sor sz&aacute;m&aacute;t &eacute;s a sorban lev&#337;
#karakterek sz&aacute;mat
#Param&eacute;terek:
#   $1 - a f&aacute;jl neve
#

#csak egy param&eacute;ter
if [ $# -ne 1 ];then
    echo hasznalat: sorok.sh f&aacute;jln&eacute;v
    exit 1
fi

#v&aacute;ltoz&oacute;ba ker&uuml;l a n&eacute;v
file="$1"

#ha a param&eacute;ter nem egy k&ouml;z&ouml;ns&eacute;ges &aacute;llom&aacute;ny, kil&eacute;pek
if ! [ -f "$file" ];then
    echo $file nem k&ouml;z&ouml;ns&eacute;ges f&aacute;jl
    exit 1
fi

#kezdeti &eacute;rt&eacute;k
sorszam=0

#a sorokat &uacute;gy olvassuk, hogy a while
#ciklusba ir&aacute;ny&iacute;tjuk a bemeneti &aacute;llom&aacute;nyt
#l&aacute;sd a done kulcssz&oacute; ut&aacute;ni &aacute;tir&aacute;ny&iacute;t&aacute;st

while read line
do
    # a sorsz&aacute;m n&ouml;vel&eacute;se
    sorszam=$( expr $sorszam + 1 )

    #az egy sorban lev&#337; karakterek sz&aacute;m&aacute;nak kisz&aacute;m&iacute;t&aacute;sa a wc-vel
    karakterek=$( echo $line | wc -c )

    #a sorok v&eacute;g&eacute;n van az &uacute;jsor karakter is,
    #&iacute;gy kivonunk 1-et a kapott sz&aacute;mb&oacute;l
    karakterek=$( expr $karakterek - 1 )

    #a line v&aacute;ltoz&oacute; tartalm&aacute;t nagybet&#369;ss&eacute; alak&iacute;tjuk 
    #a tr paranccsal

    line=$( echo "$line" | tr a-z A-Z )

    #ki&iacute;rom
    echo $sorszam ':' $karakterek ':' $line

done &lt; "$file"  #itt adjuk meg az &aacute;tir&aacute;ny&iacute;t&aacute;st
</pre>
<p>V&eacute;grehajt&aacute;s:</p>
<pre class="screen">
$ cat lista1.txt
elso
masodik
harmadik
negyedik
otodik
hatodik
hetedik
$ bash sorok.sh lista1.txt
1 : 4 : ELSO
2 : 7 : MASODIK
3 : 8 : HARMADIK
4 : 8 : NEGYEDIK
5 : 6 : OTODIK
6 : 7 : HATODIK
7 : 7 : HETEDIK
$
</pre>
<p><span class="strong"><strong>Megjegyz&eacute;s</strong></span></p>

<p>A <span class="command"><strong>tr</strong></span> az &aacute;talak&iacute;t&aacute;sokat, amennyiben felsorolunk karaktereket az un. POSIX karakterk&eacute;szletekkel v&eacute;gzi, teh&aacute;t az <code class="code">a-z</code> list&aacute;ban nincsenek benne a magyar &eacute;kezetes karakterek. Ilyen halmazokat k&uuml;l&ouml;n fel kell &eacute;p&iacute;teni, pl:  <code class="code">&aacute;&eacute;&iacute;&oacute;&uacute;</code> .</p>



</div>

<div class="sect2" title="A programoz&aacute;si hib&aacute;k felder&iacute;t&eacute;se"><div class="titlepage"><div><div><h3 class="title" id="d5e2676">A programoz&aacute;si hib&aacute;k felder&iacute;t&eacute;se</h3></div></div></div>
<p>Ha egy h&eacute;jprogramban v&aacute;ltoz&oacute;k, vez&eacute;rl&#337; szerkezetek is vannak, a j&oacute; m&#369;k&ouml;d&eacute;s k&ouml;vet&eacute;s&eacute;hez sz&uuml;ks&eacute;g lesz n&eacute;h&aacute;ny hibakeres&#337; m&oacute;dszerre. Az egyszer&#369;, gyorsan haszn&aacute;lhat&oacute; hibakeres&eacute;s m&oacute;dszereit a <a class="link" href="#appendix" title="A. f&uuml;ggel&eacute;k - Hibakeres&eacute;s h&eacute;jprogramokban">Hibakeres&eacute;s h&eacute;jprogramokban</a> c&iacute;m&#369; f&uuml;ggel&eacute;kben mutatjuk be. Ezek kipr&oacute;b&aacute;lhat&oacute;ak gyakorlatk&eacute;ppen az el&#337;z&#337; programokon.</p>
</div>

</div>

</div>

    <div class="chapter" title="7. fejezet - Regul&aacute;ris vagy szab&aacute;lyos kifejez&eacute;sek alkalmaz&aacute;sa" id="regex"><div class="titlepage"><div><div><h2 class="title">7. fejezet - Regul&aacute;ris vagy szab&aacute;lyos kifejez&eacute;sek alkalmaz&aacute;sa</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e2682">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e2718">A b&#337;v&iacute;tett kifejez&eacute;sek (extended)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e2749">Egyedi karakterekre val&oacute; illeszt&eacute;sek</a></span></dt><dt><span class="sect2"><a href="#d5e2778">A  .  metakarakter</a></span></dt><dt><span class="sect2"><a href="#d5e2801">A karakter halmaz &eacute;s a karakter oszt&aacute;ly</a></span></dt><dt><span class="sect2"><a href="#d5e2877">Csoportos&iacute;t&aacute;s &eacute;s altern&aacute;l&aacute;s:  ( )  &eacute;s  |</a></span></dt><dt><span class="sect2"><a href="#d5e2912">Ism&eacute;tl&eacute;s, intervallum</a></span></dt><dt><span class="sect2"><a href="#d5e3013">Horgonyok</a></span></dt><dt><span class="sect2"><a href="#d5e3036">A visszautal&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e3062">Tov&aacute;bbi vissza-per szekvenci&aacute;k </a></span></dt><dt><span class="sect2"><a href="#d5e3105">&Ouml;sszefoglal&oacute; t&aacute;b&aacute;zat</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e3192">Alap szint&#369; (basic) regul&aacute;ris kifejez&eacute;sek </a></span></dt><dt><span class="sect1"><a href="#d5e3222">A grep &eacute;s egrep haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e3336">P&eacute;ld&aacute;k regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;ra az egrep-el</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e3338">Keres&eacute;sek</a></span></dt><dt><span class="sect2"><a href="#d5e3356">Tal&aacute;lat sz&aacute;ml&aacute;l&aacute;s</a></span></dt><dt><span class="sect2"><a href="#d5e3391">Sz&ouml;vegek v&aacute;g&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e3412">Sztringek tesztel&eacute;se</a></span></dt></dl></dd></dl></div>


<div class="sect1" title="Bevezet&#337;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2682">Bevezet&#337;</h2></div></div></div>

<p>A regul&aacute;ris kifejez&eacute;sek  sz&ouml;vegmint&aacute;kat le&iacute;r&oacute; nyelvet (tulajdonk&eacute;ppen form&aacute;lis nyelvet) jelentenek, seg&iacute;ts&eacute;g&eacute;vel rendk&iacute;v&uuml;l k&ouml;nnyen oldhat&oacute;ak meg keres&eacute;s, helyettes&iacute;t&eacute;s, &aacute;ltal&aacute;ban sz&ouml;vegek feldolgoz&aacute;shoz k&ouml;t&#337;d&#337; feladatok.</p>
<p>B&aacute;r konkr&eacute;tan, mindennapi gyakorlatk&eacute;nt el&#337;sz&ouml;r a UNIX-on kezdt&eacute;k haszn&aacute;lni &#337;ket sz&ouml;vegszerkeszt&#337;kben (Ken Thompson), jelent&#337;s&eacute;g&uuml;k t&uacute;lmutat a UNIX eszk&ouml;zein: ma m&aacute;r minden modern programnyelvbe be&eacute;p&iacute;tett&eacute;k &#337;ket nyelvi vagy k&ouml;nyvt&aacute;r szintjen. Ha egy szoftver sz&ouml;vegek feldolgoz&aacute;s&aacute;t is el kell v&eacute;gezze, akkor szinte egy&eacute;rtelm&#369;en ezeket haszn&aacute;ljuk. &Iacute;gy &aacute;ltal&aacute;nosan  programfejleszt&eacute;s k&ouml;zben, adatb&aacute;ny&aacute;szatban, c&iacute;mk&eacute;ket haszn&aacute;l&oacute; nyelvekkel val&oacute; munk&aacute;ban (XML, HTML) vagy a genetikai adatok feldolgoz&aacute;s&aacute;ban nemcsak haszn&aacute;latosak, hanem sokszor az els&#337; sz&aacute;m&uacute; eszk&ouml;zt jelentik.</p>

<p>A regul&aacute;ris kifejez&eacute;sekkel a UNIX parancsaiban legal&aacute;bb h&aacute;rom v&aacute;ltozatban tal&aacute;lkozunk:</p>


  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p>alapszint&#369; (<span class="emphasis"><em>basic</em></span>, <span class="emphasis"><em>BRE</em></span>)</p>
    </li><li class="listitem">
<p>POSIX b&#337;v&iacute;tett (<span class="emphasis"><em>extended</em></span>, <span class="emphasis"><em>ERE</em></span>)</p>
    </li><li class="listitem">
<p>Perl kompatibilis - a Perl programoz&aacute;si nyelvben haszn&aacute;latos kifejez&eacute;sek, mai v&aacute;ltozata a Perl 5-&ouml;s verzi&oacute;j&aacute;ban jelent meg. </p>
    </li></ul></div>

<p>Az alapszint&#369; kifejez&eacute;seket a r&eacute;gi programokkal val&oacute; kompatibilit&aacute;s miatt haszn&aacute;ljuk. Ilynek p&eacute;ld&aacute;ul az al&aacute;bbi Linux/Unix alatt haszn&aacute;latos parancsok: <span class="command"><strong>expr</strong></span>,  <span class="command"><strong>grep</strong></span>, <span class="command"><strong>sed</strong></span>.</p>

<p>A b&#337;v&iacute;tett kifejez&eacute;seket az al&aacute;bbi esetben haszn&aacute;ljuk: <span class="command"><strong>egrep</strong></span> vagy <span class="command"><strong>grep</strong></span> <code class="option">-E</code>  kapcsol&oacute;val, <span class="command"><strong>sed</strong></span> <code class="option">-r</code> kapcsol&oacute;val, <span class="command"><strong>awk</strong></span>, illetve a k&uuml;l&ouml;nb&ouml;z&#337; programoz&aacute;si nyelvekb&#337;l, ahol a f&uuml;ggv&eacute;nyek ilyen kifejez&eacute;st haszn&aacute;lnak.</p>

<p>A kifejez&eacute;sek vari&aacute;nsai a Unix parancsokban el&eacute;gg&eacute; szerte&aacute;gaz&oacute;ak, &iacute;gy &aacute;ltal&aacute;ban egy &uacute;j parancs haszn&aacute;lat&aacute;n&aacute;l &aacute;t kell n&eacute;zni, hogy milyen t&iacute;pust haszn&aacute;l az illet&#337; program. P&eacute;ld&aacute;ul a <span class="command"><strong>vi</strong></span> vagy <span class="command"><strong>emacs</strong></span> szerkeszt&#337;k saj&aacute;t dialektusaikat haszn&aacute;lj&aacute;k, amelyek elt&eacute;rnek az eml&iacute;tettekt&#337;l. Ebben a tananyagban  a POSIX b&#337;v&iacute;tett kifejez&eacute;seket haszn&aacute;ljuk, de megeml&iacute;tj&uuml;k a hagyom&aacute;nyos  BRE kifejez&eacute;seket is. A Perl illetve m&aacute;s programoz&aacute;si nyelvekben haszn&aacute;latos kifejez&eacute;sek &aacute;ltal&aacute;ban bonyolultabbak ezekn&eacute;l, &eacute;s szint&eacute;n nyelvspecifikusak lehetnek.</p> 

<p>Tov&aacute;bbi tanul&aacute;shoz  <span class="emphasis"><em>Jeffrey Friedl: Regul&aacute;ris kifejez&eacute;sek mesterfokon</em></span> c&iacute;m&#369; k&ouml;nyve (<a class="link" href="#Friedl2004">Friedl2004</a>) r&eacute;szletesen t&aacute;rgyalja a regul&aacute;ris kifejez&eacute;seket, bele&eacute;rtve a k&uuml;l&ouml;nb&ouml;z&#337; programoz&aacute;si nyelvekben (Perl, Java vagy .NET-ben) haszn&aacute;lt vari&aacute;nsokat.</p>
<p>A fejezet els&#337;dleges c&eacute;lja az <span class="command"><strong>egrep</strong></span> parancs haszn&aacute;lat&aacute;nak elsaj&aacute;t&iacute;t&aacute;sa lesz: a megszerzett tapasztalatot ut&aacute;na m&aacute;s parancsokn&aacute;l is lehet hasznos&iacute;tani. Az <span class="command"><strong>egrep</strong></span> alap&eacute;rtelmez&eacute;sben sz&ouml;vegmint&aacute;kat keres egy sz&ouml;veges &aacute;llom&aacute;ny soraiban.</p>

</div>

<div class="sect1" title="A b&#337;v&iacute;tett kifejez&eacute;sek (extended)"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e2718">A b&#337;v&iacute;tett kifejez&eacute;sek (extended)</h2></div></div></div>


<p>Ebben a fejezetben a regul&aacute;ris kifejez&eacute;sek jel&ouml;l&eacute;s&eacute;n&eacute;l a k&ouml;vetkez&#337; megjelen&iacute;t&eacute;st haszn&aacute;ljuk: <span class="regex"><code class="code">abc[0-9]</code></span>  . Ha sz&uuml;ks&eacute;ges, a sz&oacute;k&ouml;zt &#8226; ,  tabul&aacute;tort  &#8594; jellel jel&ouml;lj&uuml;k. A kifejez&eacute;sre t&ouml;rt&eacute;n&#337; illeszt&eacute;st &iacute;gy emelj&uuml;k ki:  <span class="match"><span class="strong"><strong>abc7</strong></span>xyz</span> .</p>

<p>A regul&aacute;ris kifejez&eacute;sek teh&aacute;t egy olyan nyelvet jelentenek amellyel  karakterl&aacute;ncokban megtal&aacute;lhat&oacute; mint&aacute;kat &iacute;runk le. A <span class="emphasis"><em>mint&aacute;k</em></span> alatt az egym&aacute;sut&aacute;ni karakterek egy jellegzetes sorozat&aacute;t &eacute;rtj&uuml;k. &Iacute;gy mint&aacute;r&oacute;l besz&eacute;l&uuml;nk, ha azt mondjuk, hogy h&aacute;rom egym&aacute;s ut&aacute;ni kis a bet&#369; &eacute;s ut&aacute;na egy kettes, de akkor is, ha &aacute;ltal&aacute;nosabban fogalmazunk, mint pl.: h&aacute;rom egym&aacute;s ut&aacute;ni kis bet&#369;t egy sz&aacute;mjegy k&ouml;vet.</p>
<p>A mint&aacute;kat karaktersorozatokban fogjuk keresni, &eacute;s els&#337; megk&ouml;zel&iacute;t&eacute;sben csak az angol nyelv karakterk&eacute;szlet&eacute;vel fogunk dolgozni (g&eacute;pi nyelvekben tulajdonk&eacute;ppen ezek fordulnak el&#337;). Nem foglalkozunk a m&aacute;s nyelven &iacute;rt sz&ouml;vegek kapcs&aacute;n haszn&aacute;lt mint&aacute;kkal, ezek haszn&aacute;lata a programokt&oacute;l f&uuml;gg&#337;en elt&eacute;rhet az angol nyelvben haszn&aacute;ltakt&oacute;l.</p>
<p>Ha a minta megtal&aacute;lhat&oacute; egy sz&ouml;vegr&eacute;szben, akkor azt mondjuk, hogy a minta <span class="emphasis"><em>illeszkedik</em></span> a sz&ouml;vegre. Az illeszt&eacute;s (<span class="emphasis"><em>match</em></span>) fogalm&aacute;val tulajdonk&eacute;ppen egy keres&eacute;s eredm&eacute;ny&eacute;re utalunk. Pl. a fent eml&iacute;tett mint&aacute;k 2 helyen is illeszkednek a <span class="match"><span class="strong"><strong>aaa2</strong></span>xyx<span class="strong"><strong>aaa2</strong></span>klm</span> sorozatban. Ilyen keres&eacute;skor az els&#337; illeszt&eacute;snek jelent&#337;sebb szerepe lehet: sokszor csak az a c&eacute;l, hogy az els&#337;t megtal&aacute;ljuk.</p>

<p>Ha a keresett kifejez&eacute;s  t&ouml;bbsz&ouml;r fordul el&#337; a feldolgozott sorban, akkor a haszn&aacute;lt programt&oacute;l vagy annak futtat&aacute;si opci&oacute;it&oacute;l f&uuml;gg, hogy keresi-e a m&aacute;sodik el&#337;fordul&aacute;st, vagy le&aacute;ll az els&#337;n&eacute;l. Az <span class="command"><strong>egrep</strong></span> p&eacute;ld&aacute;ul implicit megkeres minden tal&aacute;latot egy sorban: de vannak olyan futtat&aacute;si opci&oacute;i, amikor megel&eacute;gszik az els&#337; tal&aacute;lattal (pl. ha csak azt kell meg&aacute;llap&iacute;tania, hogy egy bizonyos &aacute;llom&aacute;nyban megvan-e a minta, &eacute;s nem azt, hogy hol).</p>


<p>B&aacute;r ezzel nem fogunk foglalkozni, megeml&iacute;tj&uuml;k, hogy a  keres&eacute;st v&eacute;ges automat&aacute;kat haszn&aacute;l&oacute; karakterl&aacute;nc keres&eacute;s algoritmusokkal t&ouml;rt&eacute;nik. Ezeket egy olyan szoftver komponens hajtja v&eacute;gre a le&iacute;rt mint&aacute;k alapj&aacute;n amelyet  regul&aacute;ris kifejez&eacute;s  motornak nevez&uuml;nk (<span class="emphasis"><em>regular expression engine</em></span>).</p>

<p>A regul&aacute;ris kifejez&eacute;sben <span class="emphasis"><em>karakterek</em></span> &eacute;s <span class="emphasis"><em>metakarakterek</em></span> tal&aacute;lhat&oacute;ak: ezek k&ouml;z&ouml;sen hat&aacute;rozz&aacute;k meg a keresett mint&aacute;t.</p>

<p><span class="emphasis"><em>Metekaraktereknek</em></span> nevezz&uuml;k azokat a karaktereket amelyek egy regul&aacute;ris kifejez&eacute;sben m&aacute;s jelent&eacute;ssel b&iacute;rnak, mint a karakter val&oacute;di jelen&eacute;se. P&eacute;ld&aacute;ul a <code class="literal">^</code> karakter amennyiben egy kifejez&eacute;sben haszn&aacute;ljuk arra utal, hogy a mint&aacute;nak azt a pontj&aacute;t ahol megjelenik csak a feldolgozott karakterl&aacute;nc elej&eacute;re lehet illeszteni.</p>
<p>A minta illeszt&eacute;se egy karakterl&aacute;ncra &uacute;gy t&ouml;rt&eacute;nik, hogy a motor balr&oacute;l jobbra v&eacute;gigj&aacute;rja a karakterl&aacute;ncot, &eacute;s megpr&oacute;b&aacute;lja illeszteni a mint&aacute;t. Egy ilyen feldolgozott karakterl&aacute;ncban k&uuml;l&ouml;n poz&iacute;ci&oacute;t jelentenek a karakterek, de mellett&uuml;k a karakterek k&ouml;zti &uuml;res karakterek is. &Iacute;gy a karakterl&aacute;nc legelej&eacute;t nem az els&#337; karakter hat&aacute;rozza meg, hanem az els&#337; karakter el&#337;tti &uuml;res karakter, &eacute;s azt is mondjuk  <code class="literal">ab</code>  karakterek k&ouml;z&ouml;tt van egy &uuml;res karakter.</p>

<p>A k&ouml;vetkez&#337;kben a feldolgozott karakterl&aacute;ncr&oacute;l felt&eacute;telezz&uuml;k, hogy az egy egysoros sz&ouml;vegre terjed ki. &Iacute;gy a karakterl&aacute;ncunk v&eacute;g&eacute;t mindig az &uacute;jsor karakter el&#337;tti &uuml;res karakter jelenti. Olyan feldolgoz&aacute;sokr&oacute;l, amelyekn&eacute;l egyszerre t&ouml;bb sorban keres&uuml;nk (<span class="emphasis"><em>multiline</em></span> vagy <span class="emphasis"><em>singleline</em></span> keres&eacute;s) ebben a tank&ouml;nyvben nem besz&eacute;l&uuml;nk. Azt fogjuk mondani, hogy egy sz&ouml;vegsorban keres&uuml;nk. Ez az alapszint&#369; shell szkriptekhez elegend&#337;.</p>



<div class="sect2" title="Egyedi karakterekre val&oacute; illeszt&eacute;sek"><div class="titlepage"><div><div><h3 class="title" id="d5e2749">Egyedi karakterekre val&oacute; illeszt&eacute;sek</h3></div></div></div>
<p>A <span class="regex"><code class="code">c</code></span> kifejez&eacute;s  a <span class="match"><span class="strong"><strong>c</strong></span></span> karakterre illeszkedik, ha c nem metakarakter, a  <span class="regex"><code class="code">\c</code></span> kifejez&eacute;s <span class="match"><span class="strong"><strong>c</strong></span></span> karakterre illeszkedik ha c metakarakter.</p>

<p>&Iacute;gy p&eacute;ld&aacute;ul <span class="regex"><code class="code">abc</code></span> olyan minta amely az <span class="match"><span class="strong"><strong>abc</strong></span></span> sorozatra illeszthet&#337;, &eacute;s a k&ouml;vetkez&#337; l&aacute;ncban az illeszt&eacute;s a k&ouml;vetkez&#337;: <span class="match">xyz<span class="strong"><strong>abc</strong></span>xyz<span class="strong"><strong>abc</strong></span></span> . Az <span class="regex"><code class="code">a</code></span> minta b&aacute;rmilyen l&aacute;ncra illeszkedik ha tal&aacute;lhat&oacute; benne egy <code class="literal">a</code> karakter. </p>

<p>Ha a <code class="literal">^</code> egy metakarakter, akkor jelenl&eacute;t&eacute;t az <code class="literal">a</code> bet&#369; el&#337;tt ezzel a mint&aacute;val fogjuk keresni:  <span class="regex"><code class="code">\^a</code></span> ami illeszthet&#337; az k&ouml;vetkez&#337; sor egy r&eacute;szsorozat&aacute;ra: <span class="match">abc<span class="strong"><strong>^a</strong></span>bc</span> .</p>


</div>


<div class="sect2" title="A . metakarakter"><div class="titlepage"><div><div><h3 class="title" id="d5e2778">A  .  metakarakter</h3></div></div></div>

<p>A pont b&aacute;rmely karakterre illeszkedik. A mint&aacute;nak az a karaktere ahol el&#337;fordul b&aacute;rmilyen karakterre illeszthet&#337;. A <span class="regex"><code class="code">.</code></span> illeszkedik ak&aacute;r az <code class="literal">a</code>, ak&aacute;r a <code class="literal">b</code> karakterekre &eacute;s egy hosszabb l&aacute;ncban b&aacute;rmely karakterre egyenk&eacute;nt. A <span class="regex"><code class="code">..</code></span> minta az <span class="match"><span class="strong"><strong>ab</strong></span></span> illetve <span class="match"><span class="strong"><strong>xy</strong></span></span> -ra is illeszkedik, az <span class="regex"><code class="code">a.c</code></span> minta pedig azokra ahol az <code class="literal">a</code> &eacute;s <code class="literal">c</code> k&ouml;z&ouml;tt pontosan egy karakter &aacute;ll, mint <span class="match"><span class="strong"><strong>abc</strong></span></span> , <span class="match"><span class="strong"><strong>axc</strong></span></span> , <span class="match"><span class="strong"><strong>a&#8226;c</strong></span></span> .</p>

</div>


<div class="sect2" title="A karakter halmaz &eacute;s a karakter oszt&aacute;ly"><div class="titlepage"><div><div><h3 class="title" id="d5e2801">A karakter halmaz &eacute;s a karakter oszt&aacute;ly</h3></div></div></div>
<p>A karakter halmaz egy alternat&iacute;v karakter el&#337;fordul&aacute;st felt&eacute;telez: p&eacute;ld&aacute;ul ha a mint&aacute;ban arra szeretn&eacute;nk utalni, hogy egy bizonyos helyen el&#337;fordulhat az <code class="literal">a</code>, <code class="literal">b</code> vagy <code class="literal">c</code> bet&#369; (b&aacute;rmelyik a h&aacute;rom k&ouml;z&uuml;l) akkor a karakterhalmazt jel&ouml;l&#337; metakaraktereket haszn&aacute;ljuk. Ez egy  karakterlista, amely sz&ouml;gletes z&aacute;r&oacute;jelben adunk meg: p&eacute;ld&aacute;ul <span class="regex"><code class="code">[abc]</code></span> . R&ouml;vid&iacute;teni karaktersorozatot a <code class="literal">-</code> jellel lehet, p&eacute;ld&aacute;ul <span class="regex"><code class="code">[a-z]</code></span> a kisbet&#369;k felsorol&aacute;s&aacute;t jelenti &Iacute;gy a <code class="literal">-</code> jel a sz&ouml;gletes z&aacute;r&oacute;jel belsej&eacute;ben speci&aacute;lis jelent&eacute;s&#369; lesz, de amennyiben list&aacute;ban van els&#337; vagy utols&oacute; karakternek kell tenni, a  <code class="literal">]</code>-t pedig els&#337;nek, mert ez is speci&aacute;lis jelent&eacute;s&#369;: &#337; a halmaz z&aacute;r&oacute;.</p>
<p>P&eacute;ld&aacute;ul:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><span class="regex"><code class="code">[abc]</code></span> az <code class="literal">a</code> vagy <code class="literal">b</code> vagy <code class="literal">c</code> karaktert jelenti, </td></tr><tr><td><span class="regex"><code class="code">[a-z]</code></span> egy kisbet&#369;t jelent,</td></tr><tr><td><span class="regex"><code class="code">[0-9]</code></span> egy sz&aacute;mjegyet jelent,</td></tr><tr><td><span class="regex"><code class="code">[-a]</code></span> az a bet&#369;t &eacute;s a  k&ouml;t&#337;jelet jelenti, mert az itt a k&ouml;t&#337;jel az els&#337; helyen &aacute;ll. </td></tr></table>

<p>Ha a lista  <code class="literal">^</code> -el kezd&#337;dik, akkor a komplementer karakterhalmazt defini&aacute;ljuk, <span class="regex"><code class="code">[^a-z]</code></span> jelent&eacute;se: <span class="emphasis"><em>nem kisbet&#369;</em></span> (ha a halmazban <code class="literal">^</code> is van, akkor azt b&aacute;rhov&aacute; lehet &iacute;rni, kiv&eacute;ve az els&#337; poz&iacute;ci&oacute;t).  </p>


<p>A metakarakterek is saj&aacute;t magukat jelentik egy karakterhalmazban, nem kell a \  vissza-per jel&ouml;l&eacute;st haszn&aacute;lni. &Iacute;gy <span class="regex"><code class="code">[a.]</code></span> a val&oacute;di pontot vagy az <code class="literal">a</code> karaktereket keresi.</p>

<p>Az <span class="regex"><code class="code">ab[0-9][^xyz]</code></span> minta jelent&eacute;se: az <code class="literal">ab</code> karakterek ut&aacute;n  sz&aacute;mjegy j&ouml;n, ut&aacute;na pedig nem k&ouml;vetkezik sem <code class="literal">x,</code> sem <code class="literal">y,</code> sem <code class="literal">z</code>. P&eacute;ld&aacute;ul <span class="match">w<span class="strong"><strong>ab6c</strong></span>zyz</span> sorozat egy r&eacute;sz&eacute;re illeszkedik, de a  <span class="match">wab6xzyz</span> -ra nem.</p>

<p>A POSIX standard tulajdonk&eacute;ppen "sz&ouml;gletes z&aacute;r&oacute;jel kifejez&eacute;s"-nek  (<span class="emphasis"><em>bracket expression</em></span>) nevezi a karakter halmazt, &eacute;s a felsorol&aacute;son k&iacute;v&uuml;l haszn&aacute;lhat&oacute; m&eacute;g az al&aacute;bbi jel&ouml;l&eacute;s, un. karakter oszt&aacute;lyok (<span class="emphasis"><em>character class</em></span>) megad&aacute;s&aacute;ra.</p>

<p>A szintaxis <code class="literal">[: :]</code> jelek k&ouml;z&eacute; z&aacute;rt halmaz n&eacute;v, ezek a nevek a C nyelvb&#337;l ismert oszt&aacute;lyok: <code class="literal">alnum</code> - alfanum&eacute;rikus karakter;  <code class="literal">digit</code> - sz&aacute;mjegy; <code class="literal">punct</code> - punktu&aacute;ci&oacute;s karakter; <code class="literal">alpha</code> - alphabetikus &#8211; csak bet&#369;k;  <code class="literal">space</code> - sz&oacute;k&ouml;z; <code class="literal">blank</code> - &uuml;res karakterek: sz&oacute;k&ouml;z, sork&ouml;z, tabul&aacute;tor; <code class="literal">lower</code> - kisbet&#369;k; <code class="literal">upper</code> - nagybet&#369;k; <code class="literal">cntrl</code> - kontrol karakterek; <code class="literal">print</code> nyomtathat&oacute;ak.</p>

<p>P&eacute;ld&aacute;ul:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><span class="regex"><code class="code">[[:cntrl:]]</code></span> egy kontrol karaktert jelent,</td></tr><tr><td><span class="regex"><code class="code">[[:digit:]]</code></span> egy sz&aacute;mjegyet,</td></tr><tr><td><span class="regex"><code class="code">[[:lower:]][[:upper:]]</code></span> egy kisbet&#369; ut&aacute;n egy nagybet&#369;t.</td></tr></table>

</div>



<div class="sect2" title="Csoportos&iacute;t&aacute;s &eacute;s altern&aacute;l&aacute;s: ( ) &eacute;s |"><div class="titlepage"><div><div><h3 class="title" id="d5e2877">Csoportos&iacute;t&aacute;s &eacute;s altern&aacute;l&aacute;s:  ( )  &eacute;s  |</h3></div></div></div>

<p>A mint&aacute;ban a karakterek egym&aacute;s ut&aacute;n k&ouml;vetkeznek, balr&oacute;l jobbra, az egym&aacute;s ut&aacute;n k&ouml;vetkez&#337; karakter sorozatokat szekvenci&aacute;nak nevezz&uuml;k. A <span class="emphasis"><em>szekvenci&aacute;kon</em></span> bel&uuml;li al-sorozatokat csoportos&iacute;tani lehet a  <code class="literal">(</code> <code class="literal">)</code>  metakarakterekkel. Ilyenkor a csoportos&iacute;tott r&eacute;sz egy &ouml;sszef&uuml;gg&#337; entit&aacute;st fog jelenteni. &Iacute;gy a <span class="regex"><code class="code">x(def)y</code></span>  minta tov&aacute;bbra is a l&aacute;that&oacute; <code class="literal">x</code>,<code class="literal">d</code>,<code class="literal">e</code>,<code class="literal">f</code>,<code class="literal">y</code> karakterek sorozat&aacute;t jelenti, de a kiemelt <span class="regex"><code class="code">(def)</code></span> r&eacute;szre k&uuml;l&ouml;n hivatkozhatunk bizonyos programokban.</p>

<p>A z&aacute;r&oacute;jellel csoportos&iacute;tott kifejez&eacute;st, ak&aacute;rcsak egy egyedi karaktert <span class="emphasis"><em>atomnak</em></span> nevezz&uuml;k. </p>


<p>Amennyiben egy mint&aacute;ban alternat&iacute;v szekvenci&aacute;kat akarunk defini&aacute;lni, teh&aacute;t vagy az egyik vagy a m&aacute;sik illeszt&eacute;s&eacute;t v&aacute;rjuk, akkor a <code class="literal">| metakaraktert</code> haszn&aacute;ljuk az alternat&iacute;v&aacute;k k&ouml;z&ouml;tt.</p>

<p><span class="regex"><code class="code">ab|cd</code></span> jelent&eacute;se: vagy az <span class="match"><span class="strong"><strong>ab</strong></span></span> sorozat, vagy a <span class="match"><span class="strong"><strong>cd</strong></span></span> &aacute;llhat azon a helyen, a motor el&#337;sz&ouml;r az <span class="regex"><code class="code">ab</code></span>-t, ut&aacute;na a  <span class="regex"><code class="code">cd</code></span>-et pr&oacute;b&aacute;lja illeszteni.</p>

<p>P&eacute;ld&aacute;ul ha egy d&aacute;tumban az okt&oacute;ber h&oacute;nap az October, Oct. vagy 10. sz&ouml;vegekkel szerepelhet,  akkor abban a kifejez&eacute;sben ami b&aacute;rmelyikre illeszkedhet ezt &iacute;rom:  <span class="regex"><code class="code">October|Oct\.|10\.</code></span> , term&eacute;szetesen a teljes d&aacute;tumra illeszked&#337; kifejez&eacute;sben ez majd csoportos&iacute;tva szerepel: <span class="regex"><code class="code">(October|Okt\.|10\.)</code></span> .</p>

</div>



<div class="sect2" title="Ism&eacute;tl&eacute;s, intervallum"><div class="titlepage"><div><div><h3 class="title" id="d5e2912">Ism&eacute;tl&eacute;s, intervallum</h3></div></div></div>

<p>Ism&eacute;tl&#337;d&#337; karaktereket (vagy atomokat) az al&aacute;bbi metakarakterekkel hat&aacute;rozhatunk meg: <code class="literal">*</code>, <code class="literal">+</code>, <code class="literal">?</code>  amelyeket az ism&eacute;tl&#337;d&#337; karakter ut&aacute;n &iacute;runk a kifejez&eacute;sben. Jelent&eacute;s&uuml;k az al&aacute;bbi:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">*</code> az el&#337;tte &aacute;ll&oacute; karakter nulla vagy ak&aacute;rh&aacute;nyszor ism&eacute;tl&#337;dhet,</td></tr><tr><td><code class="literal">+</code> az el&#337;tte &aacute;ll&oacute; karakter legal&aacute;bb egyszer vagy ak&aacute;rh&aacute;nyszor jelenik meg,</td></tr><tr><td><code class="literal">?</code> az el&#337;tte &aacute;ll&oacute; karakter opcion&aacute;lisan, teh&aacute;t egyszer sem vagy pontosan egyszer jelenik meg.</td></tr></table>

<p>Ezeket a metakaraktereket <span class="emphasis"><em>kvantoroknak</em></span> is nevezz&uuml;k.  L&aacute;that&oacute;, hogy nem pontos sz&aacute;m&uacute; ism&eacute;tl&#337;d&eacute;st, hat&aacute;roznak meg. Az a <span class="regex"><code class="code">*</code></span> minta olyan karakterl&aacute;ncokra illeszkedik amelyekben "ak&aacute;rh&aacute;nyszor" fordul el&#337; az a karakter: teh&aacute;t nulla, egy, kett&#337; stb. &Iacute;gy illeszkedik az <span class="match"><span class="strong"><strong>a</strong></span></span> , <span class="match"><span class="strong"><strong>aa</strong></span></span> , <span class="match"><span class="strong"><strong>aaa</strong></span></span>, <span class="match"><span class="strong"><strong>bac</strong></span></span> karakterl&aacute;ncokra, de a <span class="match"><span class="strong"><strong>b</strong></span></span> , <span class="match"><span class="strong"><strong>c</strong></span></span> , <span class="match"><span class="strong"><strong>x</strong></span></span> karakterl&aacute;ncokra is, mert az  a ezekben is "null&aacute;szor" megvan, vagy &eacute;rtelmezhetj&uuml;k &uacute;gy is, hogy megvan a karakterek el&#337;tt &aacute;ll&oacute; &uuml;res sztringben. </p>

<p>Egy  fontos &eacute;szrev&eacute;tel a regul&aacute;ris kifejez&eacute;s motor m&#369;k&ouml;d&eacute;s&eacute;vel kapcsolatban: az <span class="regex"><code class="code">a*</code></span> minta a k&ouml;vetkez&#337; l&aacute;ncra &iacute;gy illeszkedik: <span class="match"><span class="strong"><strong>aaaaaaa</strong></span>xyz</span> , teh&aacute;t az illeszt&eacute;s nem a m&aacute;sodik a karakteren, hanem az els&#337;t&#337;l lehet&#337; legt&aacute;volabbi a karakteren &aacute;ll le. Ez&eacute;rt a <code class="literal">* kvantort</code> moh&oacute; kvantornak nevezz&uuml;k.</p>

<p>A <span class="regex"><code class="code">.*</code></span> minta olyan l&aacute;ncot jel&ouml;l, amiben b&aacute;rmely karakter ak&aacute;rh&aacute;nyszor el&#337;fordulhat: teh&aacute;t az &uuml;res l&aacute;ncra &eacute;s a nagyon hossz&uacute;, b&aacute;rmit tartalmaz&oacute;ra is illeszkedik. A <code class="literal">*</code> moh&oacute;s&aacute;ga miatt &oacute;vatosan kell haszn&aacute;lni:  <span class="regex"><code class="code">a.*a</code></span> p&eacute;ld&aacute;ul az els&#337; a-t&oacute;l a legmesszebb lev&#337;ig illeszkedik. </p>

<p>Egy id&eacute;z&#337;jelben lev&#337; sz&ouml;veg kikeres&eacute;se egy nagy sz&ouml;vegb&#337;l jellemz&#337; p&eacute;lda arra, amikor a moh&oacute; kvantort az els&#337; lehets&eacute;ges z&aacute;rul&aacute;s pontj&aacute;n le akarjuk &aacute;ll&iacute;tani: a <span class="match">"abc&#8226;def"&#8226;"xyz&#8226;ghi"</span> sz&ouml;vegben csak akkor tudunk az els&#337; id&eacute;z&#337;jel p&aacute;rra &eacute;s a benne lev&#337; sz&ouml;vegre illeszteni, ha az al&aacute;bbi mint&aacute;t haszn&aacute;ljuk: <span class="regex"><code class="code">"[^"]*"</code></span> : ez olyan karakterekre alkalmazza a <code class="literal">*</code> ism&eacute;tl&eacute;st amelyek "nem id&eacute;z&#337;jelek". Ha  a  <span class="regex"><code class="code">".*"</code></span> mint&aacute;t haszn&aacute;ln&aacute;nk, az a m&aacute;sodik id&eacute;zett sz&ouml;veg v&eacute;g&eacute;n&eacute;l &aacute;llna meg.</p>

<p>A <code class="literal">+</code> metakarakter el&#337;tt &aacute;ll&oacute; karakternek legal&aacute;bb egyszer vagy ak&aacute;rh&aacute;nyszor kell el&#337;fordulni. Ak&aacute;rcsak a <code class="literal">*</code> , ez is moh&oacute;: a legt&aacute;volabbi lehets&eacute;ges illeszt&eacute;st keresi. Az <span class="regex"><code class="code">a+</code></span> minta illeszkedik az <span class="match"><span class="strong"><strong>a</strong></span></span> , <span class="match"><span class="strong"><strong>aa</strong></span></span> , <span class="match"><span class="strong"><strong>aaa</strong></span></span> , <span class="match"><span class="strong"><strong>aaaa</strong></span></span> karaktersorokra, de olyanokra amelyekben nem fordul el&#337; az a nem.</p>

<p>A <code class="literal">?</code> el&#337;tt &aacute;ll&oacute; karakter opcion&aacute;lisan fordul el&#337;: a mint&aacute;nak az <span class="regex"><code class="code">a?</code></span> hely&eacute;n &aacute;llhat vagy nem <code class="literal">a</code> karakter. P&eacute;ld&aacute;ul ha az <span class="match">Anna</span> nevet keress&uuml;k regul&aacute;ris kifejez&eacute;ssel, &eacute;s gyan&iacute;tjuk, hogy rom&aacute;n helyess&eacute;ggel <span class="match">Ana</span> -nak is &iacute;rhatt&aacute;k, akkor a <span class="regex"><code class="code">Ann?a</code></span> kifejez&eacute;st pr&oacute;b&aacute;ljuk illeszteni. Ez mindkett&#337;re illeszkedik:  <span class="match"><span class="strong"><strong>Anna</strong></span></span> vagy <span class="match"><span class="strong"><strong>Ana</strong></span></span> .</p>

<p>Az ism&eacute;tl&#337;d&eacute;st jel&ouml;l&#337; metakarakterek <code class="literal">(</code><code class="literal">)</code> -el csoportos&iacute;tott szekvenci&aacute;kra is alkalmazhat&oacute;ak (azok is atomok). &Iacute;gy p&eacute;ld&aacute;ul a <span class="regex"><code class="code">([0-9][a-z])+</code></span> kifejez&eacute;s jelent&eacute;se: egy sz&aacute;mjegy &eacute;s ut&aacute;na egy kisbet&#369; k&ouml;vetkezik, &eacute;s ez ism&eacute;tl&#337;dhet egym&aacute;s ut&aacute;n: de a sorozatnak legal&aacute;bb egyszer ott kell lennie, pl.: <span class="match"><span class="strong"><strong>9a</strong></span></span> vagy <span class="match"><span class="strong"><strong>9a5b7c</strong></span></span> (ez ut&oacute;bbira a <code class="literal">+</code> miatt egyszer illeszkedik a kifejez&eacute;s) .</p>

<p>Pontos ism&eacute;tl&#337;d&eacute;st (intervallumot) a <code class="literal">{</code> <code class="literal">}</code> metakarakterekkel hat&aacute;rozzunk meg. Az al&aacute;bbi m&oacute;don haszn&aacute;ljuk:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">{n}</code>  az el&#337;tte &aacute;ll&oacute; karakter pontosan n-szer fordul el&#337; (n eg&eacute;sz sz&aacute;m),</td></tr><tr><td><code class="literal">{n,}</code>  az el&#337;tte &aacute;ll&oacute; karakter legal&aacute;bb n-szer de ak&aacute;rh&aacute;nyszor el&#337;fordulhat,i</td></tr><tr><td><code class="literal">{n,m}</code>  az el&#337;tte &aacute;ll&oacute; karakter legal&aacute;bb n-szer de maximum m-szer fordul el&#337;.</td></tr></table>

<p>&Iacute;gy a <span class="regex"><code class="code">[0-9]{7}</code></span> kifejez&eacute;s pontosan 7 egym&aacute;sut&aacute;ni sz&aacute;mjegyre illeszkedik, a <span class="regex"><code class="code">[a-z]{2,3}</code></span> pedig k&eacute;t vagy h&aacute;rom egym&aacute;sut&aacute;ni kisbet&#369;re.</p>

</div>

<div class="sect2" title="Horgonyok"><div class="titlepage"><div><div><h3 class="title" id="d5e3013">Horgonyok</h3></div></div></div>


<p>A horgonyok (<span class="emphasis"><em>anchor</em></span>)  seg&iacute;ts&eacute;g&eacute;vel meghat&aacute;rozhatjuk, hogy a minta a sz&ouml;vegnek csak  bizonyos hely&eacute;re illeszkedjen. A <code class="literal">^</code> metakarakter a sor elej&eacute;re utal, a <code class="literal">$</code> pedig a sor v&eacute;g&eacute;re. Pontosabban:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">^</code>  a sor elej&eacute;n,</td></tr><tr><td><code class="literal">$</code>  a sor v&eacute;g&eacute;n</td></tr></table>

<p>tal&aacute;lhat&oacute; <span class="emphasis"><em>&uuml;res karakterl&aacute;ncot</em></span> jelentik. A <span class="regex"><code class="code">^abc</code></span> minta olyan sorokra illeszkedik amelyeknek elej&eacute;n <span class="match">abc</span> l&aacute;nc &aacute;ll, a <span class="regex"><code class="code">\.$</code></span> azokra amelyeknek v&eacute;g&eacute;n egy pont van.  Az <span class="regex"><code class="code">^[a-z]{3}$</code></span>  sorban pontosan 3 kisbet&#369; van &eacute;s semmi egy&eacute;b. Ez ut&oacute;bbi m&oacute;dszert gyakran haszn&aacute;ljuk sztringek szigor&uacute; ellen&#337;rz&eacute;s&eacute;re.</p>


<p>A <span class="regex"><code class="code">^$</code></span> kifejez&eacute;s az &uuml;res sort jelenti (a sor elej&eacute;n &eacute;s v&eacute;g&eacute;n lev&#337; &uuml;res karakterl&aacute;nc egym&aacute;s mellett van).</p>



</div>


<div class="sect2" title="A visszautal&aacute;s"><div class="titlepage"><div><div><h3 class="title" id="d5e3036">A visszautal&aacute;s</h3></div></div></div>

<p>Sokszor olyan mint&aacute;kat keres&uuml;nk, amelyekn&eacute;l  egy el&#337;fordul&oacute; karakter szekvencia megism&eacute;tl&#337;dik a keresett mint&aacute;ban. Ilyenkor az els&#337; el&#337;fordul&aacute;s hely&eacute;t megjel&ouml;lj&uuml;k, erre a <code class="literal">(</code><code class="literal">)</code> -el val&oacute;  csoportos&iacute;t&aacute;st haszn&aacute;ljuk, &eacute;s a <code class="literal">\n</code> (n eg&eacute;sz sz&aacute;m, teh&aacute;t <code class="literal">\1</code>, <code class="literal">\2</code> , stb.) jel&ouml;l&eacute;ssel utalunk r&aacute; vissza a kifejez&eacute;sben. Az <span class="regex"><code class="code">([0-9])cd\1</code></span> jelent&eacute;se: egy sz&aacute;mjegy, ut&aacute;na <code class="literal">cd</code> majd ugyanaz a sz&aacute;mjegy m&eacute;g egyszer.</p>

<p>Vagy: "a sor v&eacute;g&eacute;n k&eacute;t ugyanolyan kisbet&#369; mint a sor elej&eacute;n lev&#337; kett&#337;, k&ouml;zt&uuml;k pedig ak&aacute;rmi"  mint&aacute;t &iacute;gy &iacute;rjuk le:   <span class="regex"><code class="code">^([a-z]{2}).*\1$</code></span> .</p>


<p>A <code class="literal">\1</code>, <code class="literal">\2</code>, <code class="literal">\3</code> , ... jel&ouml;l&eacute;s a z&aacute;r&oacute;jelezett r&eacute;szek sz&aacute;m&aacute;ra utal balr&oacute;l jobbra: a k&ouml;vetkez&#337;: <span class="regex"><code class="code">([a-z])([a-z])\2\1</code></span> mintai a k&ouml;vetkez&#337; l&aacute;ncokra illeszkedik: <span class="match"><span class="strong"><strong>abbc</strong></span></span> , <span class="match"><span class="strong"><strong>xyyx</strong></span></span> ,  <span class="match"><span class="strong"><strong>cddc</strong></span></span> .
</p>

</div>




<div class="sect2" title="Tov&aacute;bbi vissza-per szekvenci&aacute;k"><div class="titlepage"><div><div><h3 class="title" id="d5e3062">Tov&aacute;bbi vissza-per szekvenci&aacute;k </h3></div></div></div>

<p>A regul&aacute;ris kifejez&eacute;sek  terminol&oacute;gi&aacute;j&aacute;ban "szavakat alkot&oacute;" karakterek azok, amelyekb&#337;l v&aacute;ltoz&oacute;nevek, azonos&iacute;t&oacute;k  &eacute;p&uuml;lhetnek fel a C vagy m&aacute;s programoz&aacute;si nyelvekben. Ez pontosan az al&aacute;bbi halmazt jelenti: <span class="regex"><code class="code">[a-zA-Z0-9_]</code></span>  (bet&#369;k, sz&aacute;mjegyek &eacute;s a _ ).  Ezeket fogjuk a tov&aacute;bbiakban szavakat alkot&oacute; (<span class="emphasis"><em>word</em></span>:  a g&eacute;pi nyelvekben haszn&aacute;lt szavakr&oacute;l van sz&oacute;) karaktereknek nevezni. Az al&aacute;bbi metakarakter szekvenci&aacute;k azt seg&iacute;tik el&#337;, hogy azonos&iacute;t&oacute;kat, kulcsszavakat keress&uuml;nk ki k&ouml;nnyen egy sz&ouml;vegb&#337;l.</p>
<p><a name="backslash"></a>&Iacute;gy a <code class="literal">\</code> az <span class="command"><strong>egrep</strong></span> &aacute;ltal haszn&aacute;lt regul&aacute;ris kifejez&eacute;sekben, ha ut&aacute;na az al&aacute;bbi karakterek vannak, a k&ouml;vetkez&#337; jelent&eacute;sekkel b&iacute;r:</p>

 <table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">\b</code> sz&oacute;hat&aacute;r (<span class="emphasis"><em>boundary</em></span>): egy word karakter &eacute;s egy nem word karakter k&ouml;zti &uuml;res l&aacute;nc</td></tr><tr><td><code class="literal">\B</code> nem sz&oacute;hat&aacute;r: k&eacute;t word karakter k&ouml;zti &uuml;res l&aacute;nc</td></tr><tr><td><code class="literal">\&gt;</code> &uuml;res karakterl&aacute;nc  a sz&oacute;v&eacute;g&eacute;n</td></tr><tr><td><code class="literal">\&lt;</code> &uuml;res karakterl&aacute;nc a sz&oacute; elej&eacute;n</td></tr><tr><td><code class="literal">\w</code> sz&oacute; alkot&oacute; karakter: ugyanaz mint:  <span class="regex"><code class="code">[a-zA-Z0-9_]</code></span> vagy <span class="regex"><code class="code">[[:alnum:]]</code></span></td></tr><tr><td><code class="literal">\W</code> nem sz&oacute; alkot&oacute; karakter : ugyanaz mint <span class="regex"><code class="code">[^a-zA-Z0-9_]</code></span> vagy <span class="regex"><code class="code">[^[:alnum:]]</code></span></td></tr></table>

<p>Az k&ouml;vetkez&#337; sz&ouml;vegben: <span class="match">Alkalmas&#8226;alma&#8226;hatalma</span>  a <span class="regex"><code class="code">\Balma\B</code></span> kifejez&eacute;s az els&#337; alma-ra, <span class="regex"><code class="code">\balma\b</code></span> a m&aacute;sodikra, <span class="regex"><code class="code">\Balma\b</code></span> pedig a harmadikra illeszkedik: <span class="match">Alk<span class="strong"><strong>alma</strong></span>s&#8226;<span class="strong"><strong>alma</strong></span>&#8226;hat<span class="strong"><strong>alma</strong></span></span> .</p>

</div>


<div class="sect2" title="&Ouml;sszefoglal&oacute; t&aacute;b&aacute;zat"><div class="titlepage"><div><div><h3 class="title" id="d5e3105">&Ouml;sszefoglal&oacute; t&aacute;b&aacute;zat</h3></div></div></div>

<p>&Ouml;sszefoglalva egy t&aacute;bl&aacute;zatban a b&#337;v&iacute;tett (<span class="emphasis"><em>extended</em></span>) regul&aacute;ris kifejez&eacute;sek metakarakterei az al&aacute;bbiak:</p>


       <div class="table"><a name="d5e3109"></a><p class="title"><b>7.1. t&aacute;bl&aacute;zat - A b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;sek metakarakterei</b></p><div class="table-contents">
                

                <table summary="A b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;sek metakarakterei" cellpadding="2" border="1"><colgroup><col width="23%" class="col1"><col width="15%" class="col2"><col width="62%" class="col3"></colgroup><thead><tr><th align="center">Megnevez&eacute;s</th><th align="center">Metakarakter</th><th align="center">Jelent&eacute;se</th></tr></thead><tbody><tr><td align="center">B&aacute;rmely karakter </td><td align="center"><code class="literal">.</code></td><td align="left">b&aacute;rmilyen karakterre illeszkedik</td></tr><tr><td align="center">Kvantorok</td><td align="center"><code class="literal">*</code></td><td align="left">az el&#337;tte lev&#337; atom ism&eacute;tl&#337;dik ak&aacute;rh&aacute;nyszor (lehet 0 is)</td></tr><tr><td align="center">&nbsp;</td><td align="center"><code class="literal">?</code></td><td align="left">az el&#337;tte lev&#337; atom egyszer vagy egyszer sem fordul el&#337; </td></tr><tr><td align="center">&nbsp;</td><td align="center"><code class="literal">+</code></td><td align="left">legal&aacute;bb egyszer, de ak&aacute;rh&aacute;nyszor legal&aacute;bb egyszer vagy ak&aacute;rh&aacute;nyszor ism&eacute;tl&#337;dik</td></tr><tr><td align="center">Intervallum</td><td align="center"><code class="literal">{n}</code></td><td align="left">az el&#337;tte lev&#337; atom pont n-szer ism&eacute;tl&#337;dik</td></tr><tr><td align="center">&nbsp;</td><td align="center"><code class="literal">{n,}</code></td><td align="left">az el&#337;tte lev&#337; atom legal&aacute;bb n-szer de ak&aacute;rh&aacute;nyszor ism&eacute;tl&#337;dik</td></tr><tr><td align="center">&nbsp;</td><td align="center"><code class="literal">{n,m}</code></td><td align="left">az el&#337;tte lev&#337; atom legal&aacute;bb n-szer de nem t&ouml;bb mint m-szer ism&eacute;tl&#337;dik</td></tr><tr><td align="center">Horgonyok</td><td align="center"><code class="literal">^</code></td><td align="left">a sor eleje el&#337;tt lev&#337; &uuml;res sztringre illeszkedik</td></tr><tr><td align="center">&nbsp;</td><td align="center"><code class="literal">$</code></td><td align="left">a sor v&eacute;g&eacute;n lev&#337; &uuml;res sztringre illeszkedik</td></tr><tr><td align="center">Csoportos&iacute;t&oacute;</td><td align="center"><code class="literal">( )</code></td><td align="left">csoportos&iacute;tja egy alkifejez&eacute;s elemeit</td></tr><tr><td align="center">Altern&aacute;l&aacute;s</td><td align="center"><code class="literal">|</code></td><td align="left">altern&aacute;l&aacute;s, vagy a jobb, vagy a bal oldalon lev&#337; kifejez&eacute;s illeszkedik</td></tr><tr><td align="center">Karakter halmaz &eacute;s oszt&aacute;ly</td><td align="center"><code class="literal">[ ]</code></td><td align="left">karakter oszt&aacute;ly vagy halmaz kijel&ouml;l&#337;</td></tr><tr><td align="center">Visszautal&aacute;s</td><td align="center"><code class="literal">\n</code></td><td align="left">visszautal egy ()-lel csoportos&iacute;tott sorozatra: \1 az els&#337;re, \2  a m&aacute;sodikra, stb.</td></tr><tr><td align="center">Vissza-per szekvenci&aacute;k</td><td align="center"><code class="literal">\</code></td><td align="left">Az egrep eset&eacute;ben ezeken k&iacute;v&uuml;l m&eacute;g haszn&aacute;lhat&oacute;ak az <a class="link" href="#backslash">el&#337;z&#337; fejezetben</a>  eml&iacute;tett vissza-per sorozatok.</td></tr></tbody></table>
        </div></div><br class="table-break"> 


</div>


</div>



<div class="sect1" title="Alap szint&#369; (basic) regul&aacute;ris kifejez&eacute;sek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3192">Alap szint&#369; (basic) regul&aacute;ris kifejez&eacute;sek </h2></div></div></div>

<p>N&eacute;h&aacute;ny hagyom&aacute;nyos program eset&eacute;ben haszn&aacute;ljuk &#337;ket: <span class="command"><strong>expr</strong></span>, <span class="command"><strong>grep</strong></span>, <span class="command"><strong>sed</strong></span> (a sed &eacute;s grep eset&eacute;ben lehet b&#337;v&iacute;tetteket is haszn&aacute;lni).</p>

<p>Ezekn&eacute;l a kifejez&eacute;sekn&eacute;l a <code class="literal">?</code>, <code class="literal">+</code>, <code class="literal">{</code>, <code class="literal">|</code>, <code class="literal">(</code>, &eacute;s <code class="literal">)</code> metakaraktereket vissza-per jel&ouml;l&eacute;ssel kell haszn&aacute;lni  teh&aacute;t: <code class="literal">\?</code>, <code class="literal">\+</code>, <code class="literal">\{</code>, <code class="literal">\|</code>, <code class="literal">\(</code>, &eacute;s <code class="literal">\)</code> -t &iacute;runk.</p>


<p>&Iacute;gy pl:. a "legal&aacute;bb egy a bet&#369;" minta &iacute;gy fog kin&eacute;zni: <span class="regex"><code class="code">a\+</code></span>, az "a vagy pontosan 3 b" pedig <span class="regex"><code class="code">a\|b\{3\}</code></span> ; az a minta amelyben megjel&ouml;lj&uuml;k visszautal&aacute;s miatt a  3 egym&aacute;s ut&aacute;ni kisbet&#369;t pedig &iacute;gy: <span class="regex"><code class="code">\([a-z]\{3\}\)</code></span> .</p>

<p>Ezekben a kifejez&eacute;sekben nem haszn&aacute;lhat&oacute;ak a vissza-per sz&oacute;hat&aacute;r szekvenci&aacute;k.</p>
<p>Ebben a tananyagban nem haszn&aacute;lunk ilyen kifejez&eacute;seket, de a gyakorlatban r&eacute;gi UNIX parancsok szintaxis&aacute;ban el&#337;fordulhatnak, p&eacute;ld&aacute;ul az <span class="command"><strong>expr</strong></span> &eacute;s <span class="command"><strong>grep</strong></span> eset&eacute;ben.</p>




</div>

<div class="sect1" title="A grep &eacute;s egrep haszn&aacute;lata"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3222"><a class="indexterm" name="d5e3224"></a><a class="indexterm" name="d5e3226"></a>A grep &eacute;s egrep haszn&aacute;lata</h2></div></div></div>

<p>A <span class="command"><strong>grep</strong></span> parancs kikeresi a bementi sz&ouml;veges &aacute;llom&aacute;nyokb&oacute;l azokat a sorokat amelyekre a megadott minta illeszkedik, &eacute;s kilist&aacute;zza &#337;ket k&uuml;l&ouml;nb&ouml;z&#337; opci&oacute;kkal. Az egyik leggyakrabban haszn&aacute;lt parancs a Unix rendszereken.  <span class="command"><strong>egrep</strong></span> nev&#369; v&aacute;ltozata (vagy <code class="option">-E</code> kapcsol&oacute;val ind&iacute;tott <span class="command"><strong>grep</strong></span>) haszn&aacute;lja a b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;seket, mi is &iacute;gy fogjuk haszn&aacute;lni. </p>

<p>Al&aacute;bb a Linux rendszereken &aacute;ltal&aacute;nosan haszn&aacute;lt GNU <span class="command"><strong>egrep</strong></span> v&aacute;ltozat kapcsol&oacute;it ismertetj&uuml;k (klasszikus UNIX rendszerek <span class="command"><strong>egrep</strong></span> parancsaiban nem mindegyik m&#369;k&ouml;dik ezek k&ouml;z&uuml;l).</p>

<p>Parancsor form&aacute;tuma:</p>

<div class="cmdsynopsis"><p>
  <code class="command">egrep</code> 
   [opci&oacute;k]
    <em class="replaceable"><code>&nbsp;&nbsp;minta&nbsp;&nbsp;</code></em> 
    <em class="replaceable"><code>f&aacute;jl(ok)</code></em>... 
</p></div>

<p>Interakt&iacute;v munk&aacute;hoz a <code class="option">&#8211;color=auto</code> opci&oacute;val ind&iacute;tva a sorok list&aacute;z&aacute;sakor sz&iacute;nessel &iacute;rja ki az illeszt&eacute;s hely&eacute;t, ha a termin&aacute;l ezt t&aacute;mogatja. Ezt be&aacute;ll&iacute;thatjuk egy k&ouml;rnyezeti v&aacute;ltoz&oacute;val is, ehhez &iacute;rjuk az al&aacute;bbi parancsot a <code class="filename">.bashrc</code> &aacute;llom&aacute;nyunk v&eacute;g&eacute;re:</p>

<pre class="programlisting">
export GREP_OPTIONS='--color=auto'
</pre>

<div class="table"><a name="d5e3248"></a><p class="title"><b>7.2. t&aacute;bl&aacute;zat - A grep &eacute;s egrep fontosabb opci&oacute;i</b></p><div class="table-contents">
                

                <table summary="A grep &eacute;s egrep fontosabb opci&oacute;i" cellpadding="2" border="1"><colgroup><col width="20%" class="col1"><col width="80%" class="col2"></colgroup><thead><tr><th align="center">Opci&oacute;</th><th align="center">Jelent&eacute;s</th></tr></thead><tbody><tr><td align="center"><code class="option">-c</code></td><td align="left">Ki&iacute;rja azon sorok sz&aacute;m&aacute;t, amelyben tal&aacute;lat van (ilyenkor nem &iacute;rja ki a tal&aacute;latokat). Tal&aacute;lat lehet t&ouml;bb is, mert egy sorban lehet pl. kett&#337; vagy t&ouml;bb.</td></tr><tr><td align="center"><code class="option">-E</code></td><td align="left">A <span class="command"><strong>grep</strong></span> b&#337;v&iacute;tett kifejez&eacute;sekkel dolgozik (az <span class="command"><strong>egrep</strong></span> eset&eacute;ben nem kell megadni).</td></tr><tr><td align="center"><code class="option">-e minta</code></td><td align="left">A mint&aacute;t &iacute;gy is meg lehet adni: felt&eacute;tlen&uuml;l &iacute;gy kell megadni, ha a minta &#8211; jellel kezd&#337;dik, pl.: 
<pre class="screen">
egrep -e '-q' file
</pre>
</td></tr><tr><td align="center"><code class="option">-P</code></td><td align="left">Perl kifejez&eacute;sekkel dolgozik (csak a <span class="command"><strong>grep</strong></span> eset&eacute;ben haszn&aacute;lhat&oacute;).</td></tr><tr><td align="center"><code class="option">-f f&aacute;jl</code></td><td align="left">A mint&aacute;t egy f&aacute;jl egym&aacute;s ut&aacute;ni soraib&oacute;l veszi. Minden minta tal&aacute;lat&aacute;t keresi.</td></tr><tr><td align="center"><code class="option">-i</code></td><td align="left">Kis &eacute;s nagybet&#369; k&ouml;zti k&uuml;l&ouml;nbs&eacute;g nem sz&aacute;m&iacute;t.</td></tr><tr><td align="center"><code class="option">-l</code></td><td align="left">Ha t&ouml;bb &aacute;llom&aacute;nyban keres, ki&iacute;rja azok neveit amelyben megvan a minta.</td></tr><tr><td align="center"><code class="option">-L</code></td><td align="left">Ha t&ouml;bb &aacute;llom&aacute;nyban keres, ki&iacute;rja azok neveit amelyben nincs meg a minta.</td></tr><tr><td align="center"><code class="option">-m sz&aacute;m</code></td><td align="left"><span class="emphasis"><em>sz&aacute;m</em></span> darab tal&aacute;lat ut&aacute;n le&aacute;ll, a sz&aacute;m eg&eacute;sz &eacute;rt&eacute;k&#369;.  </td></tr><tr><td align="center"><code class="option">-n</code></td><td align="left">A tal&aacute;lat el&eacute; ki&iacute;rja annak sorsz&aacute;m&aacute;t.</td></tr><tr><td align="center"><code class="option">-o</code></td><td align="left">Csak az illeszt&eacute;st vagy illeszt&eacute;seket &iacute;rja ki, t&ouml;bb illeszt&eacute;s eset&eacute;n k&uuml;l&ouml;n sorba.</td></tr><tr><td align="center"><code class="option">-q</code></td><td align="left">Nem &iacute;r ki semmit. A kil&eacute;p&eacute;si &eacute;rt&eacute;k jelzi csak, hogy tal&aacute;lt vagy nem.</td></tr><tr><td align="center"><code class="option">-r vagy -R</code></td><td align="left">Rekurz&iacute;van v&eacute;gigj&aacute;r minden k&ouml;nyvt&aacute;rat &eacute;s &aacute;llom&aacute;nyt a megadott k&ouml;nyvt&aacute;r alatt.</td></tr><tr><td align="center"><code class="option">-s</code></td><td align="left">Nem &iacute;r ki hiba &uuml;zeneteket azokr&oacute;l az &aacute;llom&aacute;nyokr&oacute;l amelyeket nem tud elolvasni.</td></tr><tr><td align="center"><code class="option">-v</code></td><td align="left">Inverz ki&iacute;r&aacute;s: azokat a sorokat &iacute;rja ki amelyekben nem volt illeszt&eacute;s.</td></tr><tr><td align="center"><code class="option">-w</code></td><td align="left">Csak azokat a karakterl&aacute;ncokat tekinti tal&aacute;latoknak amelyek teljes sz&oacute;t alkotnak (sz&oacute; elv&aacute;laszt&oacute; van a k&eacute;t sz&eacute;l&uuml;k&ouml;n, &eacute;s a sz&oacute; sz&aacute;mokb&oacute;l, bet&#369;kb&#337;l &eacute;s _ karakterekb&#337;l &eacute;p&uuml;l fel. </td></tr><tr><td align="center"><code class="option">-x</code></td><td align="left">Csak azokat az illeszt&eacute;seket tekinti tal&aacute;latnak amelyek teljes sort alkotnak.</td></tr></tbody></table>
        </div></div><br class="table-break"> 



<p>Az <span class="command"><strong>egrep</strong></span> igaz &eacute;rt&eacute;ket ad vissza a <code class="varname">?</code> v&aacute;ltoz&oacute;ban ha tal&aacute;lt legal&aacute;bb egy illeszt&eacute;st, &eacute;s hamisat ha nem tal&aacute;lt: ez felhaszn&aacute;lhat&oacute; if szerkezetekben, ha felt&eacute;telk&eacute;nt egy <span class="command"><strong>egrep</strong></span>-et futtatunk. </p>

<p>P&eacute;ld&aacute;k az opci&oacute;k haszn&aacute;lat&aacute;ra a k&ouml;vetkez&#337; alfejezetben.</p>

</div>


<div class="sect1" title="P&eacute;ld&aacute;k regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;ra az egrep-el"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3336">P&eacute;ld&aacute;k regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;ra az egrep-el</h2></div></div></div>

<div class="sect2" title="Keres&eacute;sek"><div class="titlepage"><div><div><h3 class="title" id="d5e3338">Keres&eacute;sek</h3></div></div></div>

<p>A leggyakrabban egyszer&#369; sz&ouml;vegkeres&eacute;shez haszn&aacute;ljuk a regul&aacute;ris kifejez&eacute;seket az <span class="command"><strong>egrep</strong></span>-el.</p>

<p>P&eacute;ld&aacute;ul a meg szeretn&eacute;nk n&eacute;zni,  hogy a <code class="code">get_puff(</code>) nev&#369; C nyelvben &iacute;rt f&uuml;ggv&eacute;ny milyen sorokban fordul el&#337; a <code class="filename">circbuff.c</code> f&aacute;jlban:</p>

<pre class="screen">
$ egrep  get_puff circbuff.c
char get_puff ( struct puffer * p );
printf ("fiu: -1 -&gt; buffer,  c = %c\n", get_puff ( puff ) );
char get_puff ( struct puffer * p )
$
</pre>

<p>Ha t&ouml;bb f&aacute;jlban akarunk keresni, akkor a keresett f&aacute;jlneveket metakarakterekkel adhatjuk meg:</p>

<pre class="screen">
$ egrep   get_puff *.c
circbuff.c:char get_puff ( struct puffer * p );
circbuff.c:printf ("fiu: -1 -&gt; buffer,  c = %c\n", get_puf  ( puff ) );
circbuff.c:char get_puff ( struct puffer * p )
pufferfun.c:char get_puff ( struct puffer * p )
puffertest.c:    printf ("%c\n", get_puff(puff));
$
</pre>

<p>L&aacute;that&oacute;, hogy ebben az esetben a f&aacute;jlneveket is ki&iacute;rja a tal&aacute;latok el&eacute;. Ha csak a  f&aacute;jlnevekre van sz&uuml;ks&eacute;g, a <code class="option">-l</code> opci&oacute;val csak ezeket adja vissza:</p>
<pre class="screen">
$ egrep -l  get_puff *.c
circbuff.c
pufferfun.c
puffertest.c
$
</pre>
<p>Ez j&oacute;l haszn&aacute;lhat&oacute; arra, hogy a f&aacute;jllist&aacute;t v&aacute;ltoz&oacute;ba tegy&uuml;k:</p>

<pre class="screen">
$ get_puff=$(egrep -l  get_puff *.c)
$ echo $get_puff
circbuff.c pufferfun.c puffertest.c
$
</pre>

<p>&eacute;s &aacute;tadjuk pl. a <span class="command"><strong>vim</strong></span> sz&ouml;vegszerkeszt&#337; parancssor&aacute;nak,  azt 3 f&aacute;jlt fogja megnyitni, amelyben haszn&aacute;ljuk ezt a f&uuml;ggv&eacute;nyt:</p>

<pre class="screen">
$ vim $(egrep -l  get_puff *.c)
</pre>


</div>
<div class="sect2" title="Tal&aacute;lat sz&aacute;ml&aacute;l&aacute;s"><div class="titlepage"><div><div><h3 class="title" id="d5e3356">Tal&aacute;lat sz&aacute;ml&aacute;l&aacute;s</h3></div></div></div>
<p>A GNU <span class="command"><strong>egrep</strong></span>  k&iacute;v&aacute;l&oacute;an alkalmas egy sz&ouml;vegkeres&eacute;s tal&aacute;latainak megsz&aacute;ml&aacute;l&aacute;s&aacute;ra vagy a sz&ouml;veg feldarabol&aacute;s&aacute;ra valamilyen szempont szerint.</p>

<p>Angol nyelv&#369; p&eacute;ld&aacute;t haszn&aacute;lva, tekints&uuml;k az al&aacute;bbi kis sz&ouml;veget:</p>
<pre class="screen">
$ cat szoveg.txt
i'm tired of being what you want me to be
feeling so faithless
lost under the surface
i don't know what you're expecting of me
put under the pressure
of walking in your shoes
[caught in the undertow / just caught in the undertow]
every step that i take is another mistake to you
$
</pre>

<p>H&aacute;nyszor fordul el&#337; a sz&ouml;vegben a <span class="emphasis"><em>under</em></span> karaktersorozat:</p>

<pre class="screen">
$ egrep under szoveg.txt
lost under the surface
put under the pressure
[caught in the undertow / just caught in the undertow]
$
</pre>

<p>Ha nem karaktersorozatot, hanem kisbet&#369;s sz&oacute;t keres&uuml;nk amelyn&eacute;l sz&oacute;hat&aacute;r van a sz&oacute; k&eacute;t sz&eacute;len, akkor &iacute;gy keres&uuml;nk:</p>
<pre class="screen">
$ egrep '\bunder\b' szoveg.txt
lost under the surface
put under the pressure
$
</pre>

<p>Ugyanezt megkapjuk ha a GNU <span class="command"><strong>egrep</strong></span> <code class="option">-w</code> opci&oacute;j&aacute;t haszn&aacute;ljuk:</p>
<pre class="screen">
$ egrep -w under szoveg.txt
lost under the surface
put under the pressure
$
</pre>

<p>Ha az &eacute;rdekel, hogy h&aacute;nyszor fordul el&#337; ez a karaktersorozat (<span class="emphasis"><em>under</em></span>), megsz&aacute;moljuk a tal&aacute;latokat:</p>

<pre class="screen">
$ egrep -o '\bunder\b' szoveg.txt
under
under
$ egrep -o '\bunder\b' szoveg.txt | wc -l
2
$
</pre>

<p>Ezt m&aacute;r k&ouml;nny&#369; v&aacute;lt&oacute;z&oacute;ba &iacute;rni:</p>

<pre class="screen">
$ egrep -o '\bunder\b' szoveg.txt | wc -l
2
$ under=$( egrep -o '\bunder\b' szoveg.txt | wc -l )
$ echo Az under sz&oacute;nak ${under} el&#337;fordul&aacute;sa van a sz&ouml;vegben
Az under sz&oacute;nak 2 el&#337;fordul&aacute;sa van a sz&ouml;vegben
$
</pre>
<p>Ha az &eacute;rdekelne, melyek a kisbet&#369;s szavak a sz&ouml;vegben, az al&aacute;bbi keres&eacute;st haszn&aacute;lhatjuk (csak az els&#337; 20 tal&aacute;latot &iacute;rjuk ki a <span class="command"><strong>head</strong></span>-el):</p>
<pre class="screen">
$ egrep -io '\b[a-z]+\b' szoveg.txt | head -20
i
m
tired
of
being
what
you
want
me
to
be
feeling
so
faithless
lost
under
the
surface
i
don
$
</pre>
<p>Mivel ebben a list&aacute;ban minden sz&oacute; benne van, &eacute;s egyes szavak t&ouml;bbsz&ouml;r fordulnak el&#337;, ha az &eacute;rdeklne, hogy h&aacute;ny sz&oacute; fordul el&#337; (teh&aacute;t a t&ouml;bbsz&ouml;r&ouml;s el&#337;fordul&aacute;st&oacute;l meg kell szabadulni), a <span class="command"><strong>sort</strong></span> &eacute;s <span class="command"><strong>uniq</strong></span> parancsok haszn&aacute;lat&aacute;val ezt megtehetj&uuml;k. A <span class="command"><strong>sort</strong></span> rendezi a tal&aacute;latokat, az azonos szavak &iacute;gy egym&aacute;s ut&aacute;n ker&uuml;lnek, ebb&#337;l a <span class="command"><strong>uniq</strong></span> kisz&#369;ri az egym&aacute;s ut&aacute;ni azonos sorokat, csak egy p&eacute;ld&aacute;nyt hagy meg, &iacute;gy a list&aacute;ban a szavak rendezetten &eacute;s egy p&eacute;ld&aacute;nyban fordulnak el&#337;:</p>
<pre class="screen">
$ egrep -io '\b[a-z]+\b' szoveg.txt | sort | uniq | head -15
another
be
being
caught
don
every
expecting
faithless
feeling
i
in
is
just
know
lost
$
</pre>


<p>&Iacute;gy m&aacute;r k&ouml;nny&#369; megsz&aacute;molni &eacute;s egy v&aacute;ltoz&oacute;ba &iacute;rni, h&aacute;ny kisbet&#369;s sz&oacute; fordul el&#337; ebben a sz&ouml;vegben:</p>
<pre class="screen">
$ egrep -io '\b[a-z]+\b' szoveg.txt | sort | uniq | wc -l
39
$ szam=$( egrep -io '\b[a-z]+\b' szoveg.txt | sort | uniq | wc -l )
$ echo $szam
39
$
</pre>
<p>N&eacute;h&aacute;ny egyszer&#369; m&#369;velettel statisztik&aacute;t is k&eacute;sz&iacute;thet&uuml;nk sz&ouml;vegeinkr&#337;l.</p>

<p>A GNU <span class="command"><strong>egrep</strong></span> sz&eacute;pen m&#369;k&ouml;dik UTF-8 magyar karakterekkel is, ami nem minden rendszerr&#337;l mondhat&oacute; el:</p>

<pre class="screen">
$ export LANG=hu_HU.UTF-8
$ echo '&aacute;&eacute;&iacute;&oacute;&uacute;' | egrep '&eacute;&iacute;'
&aacute;&eacute;&iacute;&oacute;&uacute;
$
</pre>
</div>

<div class="sect2" title="Sz&ouml;vegek v&aacute;g&aacute;sa"><div class="titlepage"><div><div><h3 class="title" id="d5e3391">Sz&ouml;vegek v&aacute;g&aacute;sa</h3></div></div></div>

<p>Sz&ouml;vegf&aacute;jlok sz&#369;r&eacute;se, bizonyos felt&eacute;tel szerinti r&eacute;sz-sz&ouml;vegek ki&iacute;r&aacute;sa egy sz&ouml;vegb&#337;l is sz&eacute;pen megoldhat&oacute; az <span class="command"><strong>egrep</strong></span>-pel. Pl. az al&aacute;bbi list&aacute;b&oacute;l, amelyben a mez&#337; elv&aacute;laszt&oacute; karakterek sz&oacute;k&ouml;z&ouml;k:</p>
<pre class="screen">
$ cat lista.csv
Tipus  db   Ar  raktar
A   2   22.50    i
B   1   17.80    i
F   2   17.10    n
G   3   1.12    i
H   2   12.10   i
O   1   12.00    n
$
</pre>

<p>&iacute;gy v&aacute;ghatjuk ki az els&#337; mez&#337;t:</p>

<pre class="screen">
$ egrep -o '^[A-Z]' lista.csv
T
A
B
F
G
H
O
$
</pre>


<p>Erre a feladatra az <span class="command"><strong>awk</strong></span> parancs lesz a megfelel&#337;bb (l&aacute;sd az <a class="link" href="#awk" title="10. fejezet - Az awk">Awk nyelvet</a> le&iacute;r&oacute; fejezetet).</p>

<p>Ha p&eacute;ld&aacute;ul automatikusan ki szeretn&eacute;nk szedni a hivatkoz&aacute;sokat egy weben lev&#337; weblapb&oacute;l az al&aacute;bbi tehetj&uuml;k (a <span class="command"><strong>head</strong></span>-el helysz&#369;ke miatt csak az els&#337; 5 tal&aacute;latot &iacute;rjuk ki):</p>


<pre class="screen">
$ wget -O - http://ubuntu.hu 2&gt;/dev/null \
                        | egrep -o 'href="[^"]+"' | head -5
href="http://ubuntu.hu/node"
href="http://ubuntu.hu/rss.xml"
href="/sites/default/files/udtheme_favicon.ico"
href="/modules/aggregator/aggregator.css?w"
href="/modules/book/book.css?w"
$
</pre>
<p>A <span class="command"><strong>wget</strong></span> parancs Internetes protokollokat haszn&aacute;lva f&aacute;jlokat  t&ouml;lt le, a <code class="code">-O -</code> kapcsol&oacute;val a let&ouml;lt&ouml;tt fajlt a standard kimenetre &iacute;rja (l&aacute;sd a <span class="command"><strong>wget</strong></span> k&eacute;zik&ouml;nyv&eacute;t). A <code class="code">href</code> elem ut&aacute;n olyan sorozatokat keres&uuml;nk amelyek 2 id&eacute;z&#337;jel k&ouml;zt id&eacute;z&#337;jel n&eacute;lk&uuml;li sorozatokat tartalmaznak (a <code class="code">2&gt;/dev/null</code> &aacute;tir&aacute;ny&iacute;t&aacute;s a wget standard hibakimentre &iacute;rt &uuml;zeneteit sz&#369;ri ki a termin&aacute;lr&oacute;l). Az els&#337; sz&#369;r&eacute;s ut&aacute;n m&aacute;r nem lesz probl&eacute;ma kiv&aacute;gni mag&aacute;t az URL-t.</p>

<p>Megjegyz&eacute;s: a feladat nem ennyire egyszer&#369; ha weblapokban keres&uuml;nk, mivel a weblapok szerkezete nem mindig egyetlen f&aacute;jlra korl&aacute;toz&oacute;dik. Ugyanakkor az <span class="command"><strong>egrep</strong></span> keres&eacute;se mindig egy sorra korl&aacute;toz&oacute;dik a feldolgozott f&aacute;jlban. A HTML sz&ouml;vegekn&eacute;l az elemek &aacute;tny&uacute;lhatnak egyik sorb&oacute;l a m&aacute;sikba. A teljes megold&aacute;shoz Perl t&iacute;pus&uacute;, egyszerre t&ouml;bb sorban is keres&#337; kifejez&eacute;seket kell haszn&aacute;lni.</p>

</div>

<div class="sect2" title="Sztringek tesztel&eacute;se"><div class="titlepage"><div><div><h3 class="title" id="d5e3412">Sztringek tesztel&eacute;se</h3></div></div></div>

<p>Amint azt m&aacute;r eml&iacute;tett&uuml;k, h&eacute;jprogramokban egyszer&#369; sztringek tesztel&eacute;s&eacute;t v&eacute;gezhetj&uuml;k el az egrep-el. A <code class="option">-q</code> (<span class="emphasis"><em>quiet</em></span>) opci&oacute;t haszn&aacute;lva az <span class="command"><strong>egrep</strong></span> semmit sem fog ki&iacute;rni, de tal&aacute;lat eset&eacute;n igazra &aacute;ll&iacute;tja a <code class="code">?</code> v&aacute;ltoz&oacute;t, &iacute;gy azt kihaszn&aacute;lhatjuk vez&eacute;rl&#337; szerkezetekben. A tesztelt sztringet a parancs bemenet&eacute;re k&uuml;ldj&uuml;k cs&#337;vezet&eacute;ken.</p>
<p>T&ouml;bb programunkban haszn&aacute;ltunk eg&eacute;sz sz&aacute;mot bemeneti param&eacute;terk&eacute;nt. Ennek alakj&aacute;t k&ouml;nnyen tesztelhetj&uuml;k, &eacute;s azt a korl&aacute;tot &aacute;ll&iacute;tjuk, hogy sor eleje &eacute;s v&eacute;ge k&ouml;zt ne legyenek csak sz&aacute;mjegyek:</p>
<pre class="screen">
$ echo 112 | egrep '^[0-9]+$'
112
$
</pre>

<p>amennyiben el&#337;jellel is j&ouml;het a sz&aacute;m:</p>

<pre class="screen">
$ echo +12345 | egrep '^[+-]?[0-9]+$'
+12345
$ 
</pre>

<p>A szkriptekben a tesztet &iacute;gy v&eacute;gezhetj&uuml;k el, ha pl. az els&#337; param&eacute;terben v&aacute;runk eg&eacute;sz sz&aacute;mot:</p>
<pre class="programlisting">
if ! echo "$1" | egrep -q '^[0-9]+$'
then
	echo Az els&#337; param&eacute;ter eg&eacute;sz sz&aacute;m!
	exit 1
fi
</pre>

<p>ugyanezt modern shell v&aacute;ltozatokban (pl. Bash 2.05 ut&aacute;ni verzi&oacute;k) elv&eacute;gezhetj&uuml;k a be&eacute;p&iacute;tett <code class="code">[[ ]]</code> szerkezettel.</p>
<p>A gyakori tesztekre f&uuml;ggv&eacute;nyeket &iacute;rhatunk, amelyekben pl. eg&eacute;sz sz&aacute;m teszt eset&eacute;n nem csak a sz&aacute;malakot, hanem a hat&aacute;rokat is tesztelhetj&uuml;k m&aacute;s m&oacute;dszerekkel. </p>

</div>
</div>

</div>

    <div class="chapter" title="8. fejezet - K&uuml;l&ouml;nb&ouml;z&#337; h&eacute;j szerkezetek" id="d5e3428"><div class="titlepage"><div><div><h2 class="title">8. fejezet - K&uuml;l&ouml;nb&ouml;z&#337; h&eacute;j szerkezetek</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e3430">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#function">F&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect1"><a href="#codeblock">K&oacute;d blokkok haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#calculations">Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel</a></span></dt><dt><span class="sect1"><a href="#d5e3612">A C st&iacute;lus&uacute; for ciklus</a></span></dt><dt><span class="sect1"><a href="#string_operatorok">M&#369;veletek karakterl&aacute;ncokkal</a></span></dt><dt><span class="sect1"><a href="#test2">A [[ ]] szerkezet</a></span></dt></dl></div>


<div class="sect1" title="Bevezet&#337;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3430">Bevezet&#337;</h2></div></div></div>
<p>A h&eacute;j igen v&aacute;ltozatos szerkezeteket biztos&iacute;t feladataink kifejez&eacute;s&eacute;hez. Ebben a fejezetben n&eacute;h&aacute;nyat emel&uuml;nk ki ezek k&ouml;z&uuml;l, olyanokat amelyeket gyakran haszn&aacute;lunk mindennapi feladataink megold&aacute;s&aacute;ban. &Iacute;gy a fejezet nem csoportosul egyetlen t&eacute;ma k&ouml;r&eacute;, v&aacute;ltozatos nyelvi szerkezeteket j&aacute;runk be.</p>
</div>


<div class="sect1" title="F&uuml;ggv&eacute;nyek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="function">F&uuml;ggv&eacute;nyek</h2></div></div></div>

<h3><a name="d5e3435"></a>Defin&iacute;ci&oacute;</h3>

<p>A f&uuml;ggv&eacute;nyek &aacute;ltal&aacute;ban n&eacute;vvel ell&aacute;tott k&oacute;dszekvenci&aacute;t jelentenek a programoz&aacute;si nyelvekben. A shell eset&eacute;ben is &iacute;gy van, mivel a nyelv interpret&aacute;lt, a f&uuml;ggv&eacute;ny nev&eacute;t &eacute;s k&oacute;dj&aacute;t felhaszn&aacute;l&aacute;s el&#337;tt, a program sz&ouml;veg&eacute;ben kell defini&aacute;lni. Ez t&ouml;rt&eacute;nhet a szkript elej&eacute;n vagy egy k&uuml;l&ouml;n &aacute;llom&aacute;nyban, amelyet f&uuml;ggv&eacute;nyh&iacute;v&aacute;s el&#337;tt beolvasunk.</p>

<p>A f&uuml;ggv&eacute;ny k&oacute;d szekvenci&aacute;j&aacute;t kapcsos z&aacute;r&oacute;jelek k&ouml;zt defini&aacute;ljuk, a <code class="code">{ }</code>-ek k&ouml;zti r&eacute;szt a h&eacute;j k&oacute;d blokknak (<span class="emphasis"><em>code block</em></span>) nevezi.</p>

<p>Ha k&uuml;l&ouml;n &aacute;llom&aacute;nyban defini&aacute;ljuk a f&uuml;ggv&eacute;nyeket, akkor a <a class="link" href="#cmd_dot" title="A . &eacute;s a source parancs"><span class="command"><strong>.</strong></span> (<span class="emphasis"><em>dot</em></span>) paranccsal</a> kell &#337;ket az f&#337;programot tartalmaz&oacute; &aacute;llom&aacute;nyba illeszteni.</p>

<p>A f&uuml;ggv&eacute;nyek &uacute;gy viselkednek mint egy-egy k&uuml;l&ouml;n kis shell program. Argumentumaikat is ugyan&uacute;gy kapj&aacute;k (nem kell argumentumlist&aacute;t defini&aacute;lni) &eacute;s a f&uuml;ggv&eacute;ny test&eacute;ben az <code class="varname">1</code>, <code class="varname">2</code>, stb. v&aacute;ltoz&oacute;kkal &eacute;rhet&#337;k el (<code class="varname">$1</code>, <code class="varname">$2</code>).</p>

<p>A f&uuml;ggv&eacute;ny defin&iacute;ci&oacute; szintaxisa:</p>

<pre class="programlisting">
<span class="strong"><strong>function nev ()
{
  #ide ker&uuml;l a f&uuml;ggv&eacute;ny k&oacute;dja
}</strong></span>
</pre>

<p>A nyit&oacute; kapcsos z&aacute;r&oacute;jel a n&eacute;v sor&aacute;ban is szerepelhet:</p>
<pre class="programlisting">
<span class="strong"><strong>function nev () {
  #ide ker&uuml;l a f&uuml;ggv&eacute;ny k&oacute;dja
}</strong></span>
</pre>

<p>Ugyanakkor a <code class="code">function</code> kulcssz&oacute; ak&aacute;r el is hagyhat&oacute;, teh&aacute;t a defin&iacute;ci&oacute; ilyen is lehet:</p>


<pre class="programlisting">
<span class="strong"><strong>nev () {
  #ide ker&uuml;l a f&uuml;ggv&eacute;ny k&oacute;dja
}</strong></span>
</pre>

<p>P&eacute;ld&aacute;ul:</p>

<pre class="programlisting">
function equal() 
{ 
    if [ "$1" = "$2" ];then 
        return 0 
    else 
        return 1 
    fi 
} 
</pre>

<p>Fontos: a <span class="command"><strong>return</strong></span> parancs a f&uuml;ggv&eacute;ny kil&eacute;p&eacute;si &eacute;rt&eacute;k&eacute;t k&uuml;ldi vissza, ez h&iacute;v&oacute; h&eacute;j <code class="code">?</code> v&aacute;ltoz&oacute;j&aacute;t &aacute;ll&iacute;tja be, ennek &eacute;rt&eacute;ke lesz a <span class="command"><strong>return</strong></span> &aacute;ltal visszaadott k&oacute;d, &eacute;s azt a <code class="code">$?</code> hivatkoz&aacute;ssal &eacute;rhetj&uuml;k el a h&iacute;v&oacute; szekvenci&aacute;ban, teh&aacute;t nem eredm&eacute;ny visszat&eacute;r&iacute;t&eacute;sre haszn&aacute;ljuk!</p>

<p>&Iacute;gy a f&uuml;ggv&eacute;ny haszn&aacute;lata:</p>

<pre class="programlisting">
if equal "$a" "$b" 
then 
    echo egyenloek 
fi 
</pre>

<p>A f&uuml;ggv&eacute;nyek megosztj&aacute;k v&aacute;ltoz&oacute;ikat a h&iacute;v&oacute; h&eacute;jjal, vigy&aacute;zni kell teh&aacute;t a kil&eacute;p&eacute;si &eacute;rt&eacute;kekre illetve a v&aacute;ltoz&oacute;m&oacute;dos&iacute;t&aacute;sra.</p>

<p>Ezek a megosztott v&aacute;ltoz&oacute;k un. <span class="emphasis"><em>glob&aacute;lis v&aacute;ltoz&oacute;k</em></span>. Ennek k&ouml;vetkezt&eacute;ben a f&uuml;ggv&eacute;nyben l&aacute;that&oacute;ak a h&iacute;v&oacute; szkript v&aacute;ltoz&oacute;i, &eacute;s a a f&uuml;ggv&eacute;nyben l&eacute;trehozott v&aacute;ltoz&oacute;k l&aacute;that&oacute;ak lesznek a h&iacute;v&oacute; szkriptben.</p>


<p>Ha az <code class="code">equal</code> f&uuml;ggv&eacute;nyt egy <code class="filename">equal.sh</code> &aacute;llom&aacute;nyba &iacute;rjuk, akkor a <span class="strong"><strong>.</strong></span> paranccsal az al&aacute;bbi m&oacute;don haszn&aacute;lhatjuk az akt&iacute;v  h&eacute;jban:</p>

<pre class="screen">
$. equal.sh
$equal "a" "b"
$echo $?
1
</pre>

<p>A <span class="strong"><strong>.</strong></span> beolvassa a defin&iacute;ci&oacute;t, &eacute;s ut&aacute;na lehet haszn&aacute;lni ebb&#337;l a h&eacute;jb&oacute;l. F&uuml;ggv&eacute;nydefin&iacute;ci&oacute;t t&ouml;r&ouml;lni az <span class="command"><strong>unset</strong></span> parancsot haszn&aacute;lva lehet: </p>

<pre class="screen">
$unset equal
$equal "a" "b"
-bash: equal: command not found
$
</pre>

<p>Az <a class="indexterm" name="d5e3481"></a><span class="command"><strong>unset</strong></span> k&eacute;t opci&oacute;t fogad el, <code class="option">-v</code> ha csak a megadott v&aacute;ltoz&oacute;neveket, <code class="option">-f</code> ha csak megadott f&uuml;ggv&eacute;nyneveket akarunk t&ouml;r&ouml;lni. Opci&oacute; n&eacute;lk&uuml;l mindkett&#337;t pr&oacute;b&aacute;lja t&ouml;r&ouml;lni.</p>

<p>A f&uuml;ggv&eacute;nydefin&iacute;ci&oacute;t megadhatjuk egyetlen parancssorban:</p>

<pre class="screen">
$ function hello () { echo "Hell&oacute;" ; return 0; }
$ hello
Hell&oacute;
</pre>

<p>Ilyenkor az utols&oacute; parancs ut&aacute;n is meg kell jelennie a <code class="code">;</code> elv&aacute;laszt&oacute;nak.</p>

<p>B&aacute;rhogyan adn&aacute;nk meg a  defin&iacute;ci&oacute;t, annak meg kell jelennie a k&oacute;dban a f&uuml;ggv&eacute;ny haszn&aacute;lata el&#337;tt (a defin&iacute;ci&oacute; b&aacute;rhol lehet, nem k&ouml;telez&#337; a szkript elej&eacute;re tenni)! </p>


<p>A f&uuml;ggv&eacute;nyek nem lehetnek &uuml;resek, teh&aacute;t legal&aacute;bb egy parancsot kell tartalmazzanak.</p>

<h3><a name="fun_val"></a>F&uuml;ggv&eacute;nyek &eacute;rt&eacute;k visszat&eacute;r&iacute;t&eacute;se</h3>

<p>Az eredm&eacute;nyek visszaad&aacute;s&aacute;t a h&iacute;v&oacute; szkriptnek az al&aacute;bbi m&oacute;dszerekkel oldjuk meg:</p>


   <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>glob&aacute;lis v&aacute;ltoz&oacute; be&aacute;ll&iacute;t&aacute;sa</p>
	  </li><li class="listitem">
        <p>nyomtat&aacute;s a f&uuml;ggv&eacute;nyben &eacute;s parancssor helyettes&iacute;t&eacute;s a h&iacute;v&aacute;sn&aacute;l</p>
	  </li></ol></div>

<p>Az al&aacute;bbi f&uuml;ggv&eacute;nyt a <code class="filename">getfname.sh</code> &aacute;llom&aacute;nyban defini&aacute;ljuk:</p>


<pre class="programlisting">
#visszaadja az &aacute;llom&aacute;nynevet, lev&aacute;gva az extenzi&oacute;t
#egy bemeneti param&eacute;tere van
#ha t&ouml;bb pont van a n&eacute;vben, az utols&oacute;t&oacute;l a v&eacute;g&eacute;ig v&aacute;gja le
#a karaktereket
#ha nincs . , akkor a teljes nevet adja vissza

function getfname()
{

    #elhagyjuk az utols&oacute; pontt&oacute;l
    #a n&eacute;v v&eacute;g&eacute;ig terjed&#337; szubsztringet

    echo "$1" | sed -r 's/(.+)(\.[^.]*)$/\1/'

    return
}
</pre>
<p>A <span class="command"><strong>sed</strong></span> parancs haszn&aacute;lat&aacute;t l&aacute;sd a <a class="link" href="#sed" title="9. fejezet - A sed folyamszerkeszt&#337;">parancsot bemutat&oacute; fejezetben</a>.</p>

<p>A f&uuml;ggv&eacute;ny haszn&aacute;lata:</p> 
<pre class="programlisting">
#!/bin/bash 

. getfname.sh             #f&uuml;ggv&eacute;ny defin&iacute;ci&oacute; bet&ouml;lt&eacute;se 

fname="file.txt"          

name=$(getfname $fname) 

echo $name 
</pre>

<p>Az al&aacute;bbi esetben viszont a f&uuml;ggv&eacute;nyben l&eacute;trehozott <code class="varname">line</code> v&aacute;ltoz&oacute;n kereszt&uuml;l t&eacute;r vissza az &eacute;rt&eacute;k (a f&uuml;ggv&eacute;nydefin&iacute;ci&oacute; a <code class="filename">getline.sh</code> f&aacute;jlban tal&aacute;lhat&oacute;):</p>

<pre class="programlisting">
#egy sort olvas be &eacute;s azt a line v&aacute;ltoz&oacute;ban adja vissza 
#a f&#337;programnak vagy m&aacute;s f&uuml;ggv&eacute;nynek 
#ha a felhaszn&aacute;l&oacute;  Ctrl-D-t &uuml;t be, akkor kil&eacute;p
 
function getline 
{ 
    line=""
    if ! read -p "K&eacute;rek egy sztringet:" line 
    then 
        echo "Olvas&aacute;s hiba"; 
        return 1 
    fi
    return 0      
} 
</pre>

<p>Haszn&aacute;lata:</p>

<pre class="screen">
$.  getline.sh
$ if getline ; then echo $line ; fi
K&eacute;rek egy sztringet:piros
piros
$
</pre>

<h3><a name="d5e3513"></a>K&ouml;rnyezettel kapcsolatos k&eacute;rd&eacute;sek</h3>

<p>A f&uuml;ggv&eacute;ny megkapja a h&iacute;v&oacute; h&eacute;j munka k&ouml;nyvt&aacute;r&aacute;t, k&ouml;rnyezeti v&aacute;ltoz&oacute;it. A f&uuml;ggv&eacute;nyben l&eacute;trehozott v&aacute;ltoz&oacute;k l&aacute;that&oacute;ak lesznek a h&iacute;v&oacute; h&eacute;jban, &eacute;s a f&uuml;ggv&eacute;ny is l&aacute;tja az ott el&#337;z&#337;leg l&eacute;trehozott v&aacute;ltoz&oacute;kat.</p>

<h3><a name="d5e3515"></a>Lok&aacute;lis v&aacute;ltoz&oacute;k haszn&aacute;lata</h3>

<p>A Bash  megengedi lok&aacute;lis v&aacute;ltoz&oacute;k haszn&aacute;lat&aacute;t is. Ezeket a <code class="code">local</code> kulcssz&oacute;val adjuk meg:</p>

<pre class="programlisting">
function teszt ()
{
    local valtozo=3

    local eredmeny=$(( valtozo * $1 ))

    echo $eredmeny

}
</pre>

<p>Ebben az esetben a <code class="code">valtozo</code> &eacute;s <code class="code">eredmeny</code> v&aacute;ltoz&oacute;k nem lesz l&aacute;that&oacute;ak a h&iacute;v&oacute; h&eacute;jban, m&eacute;g csak nem is &iacute;rj&aacute;k fel&uuml;l az ott tal&aacute;lhat&oacute; ugyanolyan nev&#369; v&aacute;ltoz&oacute;kat:</p>

<pre class="screen">
$ . teszt.sh
$ eredmeny=33
$ teszt 8
24
$ echo $eredmeny
33
$ echo $valtozo

$
</pre>

<h3><a name="d5e3523"></a>Rekurz&iacute;v h&iacute;v&aacute;sok</h3>

<p>Rekurz&iacute;v h&iacute;v&aacute;s lehets&eacute;ges. Azonban ha a rekurz&iacute;v feldolgoz&aacute;s sz&aacute;m&iacute;t&aacute;sokat haszn&aacute;l, amelyek param&eacute;terk&eacute;nt kell &aacute;tad&oacute;djanak egyik szintr&#337;l a m&aacute;sikra, meglehet&#337;sen nyakatekert k&oacute;dot kapunk. Az al&aacute;bbi f&uuml;ggv&eacute;ny faktori&aacute;list sz&aacute;mol, &eacute;s az eredm&eacute;nyt egy <code class="code">fact</code> nev&#369; v&aacute;ltoz&oacute;ban t&eacute;r&iacute;ti vissza:</p>

<pre class="programlisting">
#egy param&eacute;terrel kell megh&iacute;vni
#n! -t sz&aacute;mol
function calc_fact1()
{
    if (( $1 == 0 )) ; then
        fact=1                    #ha n == 0 , akkor fact=1
        return
    else
        calc_fact1 $(( $1 - 1 ))   # (n-1)! marad a 
						  # fact-ban v&aacute;ltozoban
        fact=$((  fact  *   $1  )) # fact n! lesz
    fi
    return
}
</pre>


<p>Ugyanez megoldhat&oacute; &uacute;gy is, ha az eredm&eacute;nyt a <code class="code">?</code> v&aacute;ltoz&oacute;ban adjuk vissza, persze ezzel a <code class="code">$?</code> -t nem rendeltet&eacute;s&eacute;nek megfelel&#337;en haszn&aacute;ljuk. Az al&aacute;bbi p&eacute;ld&aacute;ban az <code class="code">n</code> v&aacute;ltoz&oacute;t lok&aacute;lisk&eacute;nt haszn&aacute;ljuk (rekurz&iacute;v h&iacute;v&aacute;sok eset&eacute;ben ez a Bash tervez&#337;inek aj&aacute;nlata), &iacute;gy minden h&iacute;v&aacute;s eset&eacute;ben ism&eacute;t l&eacute;trej&ouml;n:</p>

<pre class="programlisting">
function calc_fact()
{
    local n=$1       #n lok&aacute;lis 

    if (( n == 0 )) ; then
        return 1
    else
        calc_fact $(( n - 1 ))    # (n-1)!
        return $(( $? * n ))      #  n!
    fi
}
</pre>

<p>Megjegyzend&#337;, hogy a <code class="code">?</code> v&aacute;ltoz&oacute;ban a Bash eset&eacute;ben csak 255-n&eacute;l kisebb eg&eacute;sz sz&aacute;mot lehet visszat&eacute;r&iacute;teni (teh&aacute;t ann&aacute;l nagyobb sz&aacute;mokra a fenti f&uuml;ggv&eacute;ny nem haszn&aacute;lhat&oacute;).</p>

<p>A rekurzi&oacute; a h&eacute;jban lass&uacute;, er&#337;forr&aacute;s ig&eacute;nyes &eacute;s ez&eacute;rt nem javasolt a haszn&aacute;lata. </p>

</div>


<div class="sect1" title="K&oacute;d blokkok haszn&aacute;lata"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="codeblock">K&oacute;d blokkok haszn&aacute;lata</h2></div></div></div>

<p>A <code class="code">{ }</code> elhat&aacute;rol&aacute;st f&uuml;ggv&eacute;nyeken k&iacute;v&uuml;l is lehet haszn&aacute;lni k&oacute;dszekvenci&aacute;k elhat&aacute;rol&aacute;s&aacute;ra. A <code class="code">{ }</code> z&aacute;r&oacute;jelek k&ouml;zti szekvencia &uacute;gy fog viselkedni, mint  egy n&eacute;vtelen f&uuml;ggv&eacute;ny.</p>

<p>A <code class="code">{ }</code>-ek k&ouml;zti parancsok k&ouml;z&ouml;s standard bemenet &eacute;s kimenetet haszn&aacute;lnak, &iacute;gy alkalmasak k&ouml;z&ouml;s &aacute;tir&aacute;ny&iacute;t&aacute;si feladatok megold&aacute;s&aacute;ra: a blokkban tal&aacute;lhat&oacute; parancsok kimenet&eacute;t egy &aacute;llom&aacute;nyba lehet ir&aacute;ny&iacute;tani, illetve ugyanazt az &aacute;llom&aacute;nyt t&ouml;bb paranccsal lehet v&eacute;gigolvasni.</p>

<p>Amennyiben adott az al&aacute;bbi sz&aacute;mokat soronk&eacute;nt tartalmaz&oacute; <code class="filename">be.txt</code> &aacute;llom&aacute;ny:</p>

<div class="literallayout"><p><br>
2<br>
4<br>
1<br>
2<br>
3<br>
4<br>
</p></div>

<p>&eacute;s ebb&#337;l az els&#337; k&eacute;t sz&aacute;mot egy sz&aacute;m&iacute;t&aacute;s param&eacute;tereik&eacute;nt akarjuk haszn&aacute;lni, a t&ouml;bbit pedig a f&aacute;jl v&eacute;g&eacute;ig &ouml;sszeadva egy harmadik param&eacute;terk&eacute;nt, az al&aacute;bbi szkripttel megtehetj&uuml;k:</p>


<pre class="programlisting">
#!/bin/bash

{   
    read szam1                      #els&#337; sz&aacute;mjegy
    read szam2                      #M&aacute;sodik sz&aacute;mjegy
    s=0
    while read szam                 #ciklusban &ouml;sszeadjuk a t&ouml;bbit
    do
        s=$(( s + szam ))
    done

    echo $(( szam1 * s / szam2 ))   #a sz&aacute;m&iacute;t&aacute;s elv&eacute;gz&eacute;se
                        #a Bash-ben ez csak eg&eacute;sz sz&aacute;mokkal m&#369;k&ouml;dik 

} &lt; be.txt
</pre>

<p>Mivel a <code class="code">{ }</code> k&ouml;z&ouml;tti parancsok k&ouml;z&ouml;s bemenetet haszn&aacute;lnak, &eacute;s erre egy f&aacute;jlt ir&aacute;ny&iacute;tottunk, egym&aacute;s ut&aacute;n olvass&aacute;k a parancsok a sz&aacute;mokat. Ugyanakkor ha sz&uuml;ks&eacute;ges, a szerkezet kimenet&eacute;t is egy k&ouml;z&ouml;sen haszn&aacute;lt &aacute;llom&aacute;nyba lehet ir&aacute;ny&iacute;tani.</p>

<p>A k&oacute;d blokkban l&aacute;that&oacute;ak a szkript v&aacute;ltoz&oacute;i, &eacute;s ha &uacute;jakat hozunk l&eacute;tre azok l&aacute;that&oacute;ak lesznek a blokkon k&iacute;v&uuml;l is. Lok&aacute;lis v&aacute;ltoz&oacute;k nem haszn&aacute;lhat&oacute;k k&oacute;d blokkban &eacute;s a h&eacute;j nem ind&iacute;t k&uuml;l&ouml;n folyamatot ennek v&eacute;grehajt&aacute;s&aacute;ra. </p>

<p>A hat&aacute;rokat jelz&#337; <code class="code">{ }</code> kapcsos z&aacute;r&oacute;jelek kulcssz&oacute;nak sz&aacute;m&iacute;tanak (teh&aacute;t el&#337;tt&uuml;k &eacute;s ut&aacute;nuk elv&aacute;laszt&oacute; - implicit sz&oacute;k&ouml;z - &aacute;ll, az utols&oacute; parancs ut&aacute;n pedig k&ouml;telez&#337; a z&aacute;r&oacute; <code class="code">;</code> pontosvessz&#337; haszn&aacute;lata, ha nincs &uacute;jsor. A fenti szkript egy parancssorban &iacute;gy &iacute;rhat&oacute;:</p>


<pre class="screen">
$ { read szam1; read szam2; s=0; while  read szam ; \
  do  s=$(( s + szam )); done; \
  echo $(( szam1 * s / szam2 )) ; } &lt; be.txt
</pre>


</div>

<div class="sect1" title="Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="calculations"><a class="indexterm" name="d5e3556"></a>Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel</h2></div></div></div>

<p>Amint l&aacute;ttuk, az <span class="command"><strong>expr</strong></span> seg&iacute;ts&eacute;g&eacute;ve el&eacute;g k&eacute;nyelmetlen sz&aacute;molni. A 90-es &eacute;vek fejleszt&eacute;se sor&aacute;n egyes h&eacute;j &eacute;rtelmez&#337;k tartalmaznak n&eacute;h&aacute;ny olyan kiterjeszt&eacute;st, amely k&ouml;nny&#369;v&eacute; teszi az eg&eacute;sz sz&aacute;mokkal val&oacute; sz&aacute;m&iacute;t&aacute;st (a POSIX szabv&aacute;ny is tartalmazza ezt, &iacute;gy a Korn h&eacute;j is, valamint 2.04 verzi&oacute;t&oacute;l kezdve a Bash is). Jelenl&eacute;t&eacute;re teh&aacute;t nem lehet mindig sz&aacute;m&iacute;tani &eacute;s elvileg hordozhat&oacute; programok eset&eacute;n ker&uuml;lni kell.</p>

<p>Ezen kiterjeszt&eacute;sek k&ouml;z&uuml;l a k&eacute;t z&aacute;r&oacute;jellel hat&aacute;rolt aritmetikai ki&eacute;rt&eacute;kel&eacute;st emelj&uuml;k ki. Egy m&aacute;sik megold&aacute;s ugyanerre a feladatra a h&eacute;jak <span class="command"><strong>let</strong></span> parancsa, amely ezzel ekvivalens.</p>

<p>A (( &#8230; )) artimetikai ki&eacute;rt&eacute;kel&eacute;s szerkezet haszn&aacute;lata:</p>

<pre class="programlisting">
<span class="strong"><strong>valtozo=$(( aritmetikai m&#369;veletek ))</strong></span>
</pre>

<p>vagy, haszn&aacute;lat k&ouml;zben a termin&aacute;lon:</p>

<pre class="screen">
$ x=$(( 22 + 6 ))
$ echo $x
28
$ 
</pre>

<p>A k&eacute;t hat&aacute;rol&oacute; k&ouml;zti ter&uuml;leten aritmetikai m&#369;veleteket lehet v&eacute;gezni, ugyanolyan szintaxissal mint a C nyelven t&ouml;rt&eacute;n&#337; programoz&aacute;sn&aacute;l. </p>

<p>A szerkezetet a tesztekn&eacute;l is lehet haszn&aacute;lni eg&eacute;sz sz&aacute;mokkal v&eacute;gzett tesztek eset&eacute;ben:</p>

<pre class="programlisting">
i=4
while (( i &gt; 2 ))
do
    echo $i
    (( i-- ))
done
</pre>


<p><span class="strong"><strong>Szab&aacute;lyok a (( )) haszn&aacute;lat&aacute;ra:</strong></span></p>


  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p>Az oper&aacute;torok a C nyelvb&#337;l val&oacute;ak, minden oper&aacute;tor haszn&aacute;lhat&oacute;.</p>
    </li><li class="listitem">
<p>A Bash csak eg&eacute;sz sz&aacute;mokkal dolgozik. Ki&eacute;rt&eacute;kel&eacute;skor a Korn h&eacute;j dupla pontoss&aacute;g&uacute; val&oacute;s sz&aacute;mokat haszn&aacute;l (a Korn h&eacute;j tud val&oacute;s v&aacute;ltoz&oacute;kkal dolgozni).</p>
    </li><li class="listitem">
<p>A <code class="literal">$</code> jelet nem kell v&aacute;ltoz&oacute;k el&#337;tt haszn&aacute;lni, de lehet. Kiv&eacute;telt k&eacute;peznek a h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;i, azok el&#337;tt viszont kell. Teh&aacute;t:  
</p>
<pre class="programlisting">
b=$(( a + 2 ))
</pre>
<p>, de: </p>
<pre class="programlisting">
b=$(( $a + 2 )) 
</pre>
<p>is helyes. A </p>
<pre class="programlisting">
b=$(( $1 + 2 )) 
</pre>
<p>&ouml;sszead&aacute;st viszont m&aacute;r csak a <code class="literal">$</code> jel seg&iacute;ts&eacute;g&eacute;vel tudjuk elv&eacute;gezni ha a parancssor els&#337; argumentum&aacute;t akarjuk haszn&aacute;lni.</p>
    </li><li class="listitem">
<p>A C nyelv hozz&aacute;rendel&#337; oper&aacute;torai is haszn&aacute;lhat&oacute;ak, p&eacute;ld&aacute;ul:</p>
<pre class="programlisting">
(( x+=2 ))
</pre>
<p>ebben az esetben viszont a <code class="literal">$</code> jel nem haszn&aacute;lhat&oacute; a v&aacute;ltoz&oacute; neve el&#337;tt:</p>
<pre class="programlisting">
(( $x+=2 ))  <span class="strong"><strong>#helytelen !!!</strong></span>
</pre>
    </li><li class="listitem">
<p>Z&aacute;r&oacute;jelez&eacute;s haszn&aacute;lhat&oacute;.</p>
    </li><li class="listitem">
<p>A rel&aacute;ci&oacute;s oper&aacute;torok eset&eacute;ben az igaz &eacute;rt&eacute;ke 1 &#8211; de csak a (( )) belsej&eacute;ben. A tesztek eset&eacute;ben a 
(( )) -b&#337;l val&oacute; kil&eacute;p&eacute;s ut&aacute;n a h&eacute;j a <code class="literal">?</code> v&aacute;ltoz&oacute;t ford&iacute;tott &eacute;rt&eacute;kre &aacute;ll&iacute;tja. Teh&aacute;t:</p>

<pre class="screen">
$ (( 2 &gt; 1 )) 
$ echo $? 
0 
</pre>
<p>&iacute;gy programban az al&aacute;bbi m&oacute;don haszn&aacute;lhat&oacute;:</p>
<pre class="programlisting">
i=4 
while (( i &gt; 2 )) 
do 
    echo $i 
    (( i-- )) 
done 
</pre>
    </li><li class="listitem">
<p>Nem kell felt&eacute;tlen&uuml;l &uuml;gyelni a szigor&uacute;, h&eacute;jn&aacute;l megszokott sz&oacute;k&ouml;z elv&aacute;laszt&oacute;ra oper&aacute;torok &eacute;s v&aacute;ltoz&oacute;k k&ouml;z&ouml;tt, teh&aacute;t &iacute;rhatunk <code class="code">((2+2))</code> -t vagy  <code class="code">(( 2 + 2 ))</code> -t is.</p>
    </li><li class="listitem">
<p>A hatv&aacute;nyoz&aacute;s oper&aacute;tora a  <code class="literal">**</code>  , ebben az esetben a k&eacute;t <code class="literal">*</code> karakternek egym&aacute;s mellett kell &aacute;llnia.</p>
</li></ul></div>

<p>Az al&aacute;bbi szkript n&eacute;h&aacute;ny p&eacute;ld&aacute;t tartalmaz:</p>

<pre class="programlisting">
#!/bin/bash

#p&eacute;ld&aacute;k sz&aacute;m&iacute;t&aacute;sokra &eacute;s kifejez&eacute;s ki&eacute;rt&eacute;kel&eacute;sre a (( )) -tel

#n&eacute;h&aacute;ny seg&eacute;dv&aacute;ltoz&oacute; 
 
a=1 
b=2 
z=0 

#haszn&aacute;lhat&oacute;k a C nyelv oper&aacute;torai, a v&aacute;ltoz&oacute;nevek 
#el&#337;tt nem kell a $ szimb&oacute;lumot haszn&aacute;lni 

echo $(( a + 1)) 

#az sem sz&aacute;m&iacute;t, ha nem tartjuk be felt&eacute;tlen&uuml;l a h&eacute;j &aacute;ltal 
#k&eacute;rt sz&oacute;k&ouml;z&ouml;ket
 
echo $((a+1)) 
echo $(( a++ )) 

#van egy eset, amikor kell $ szimb&oacute;lumot 
#haszn&aacute;lni a nevek el&#337;tt: 
#ha a h&eacute;j speci&aacute;lis v&aacute;ltoz&oacute;it haszn&aacute;ljuk 

if [ -n "$1" ];then 
    echo $(( $1 + 2 )) 
fi 

#a hatv&aacute;ny oper&aacute;tor a **  

echo $(( a**2 )) 

#felt&eacute;telekben lehet haszn&aacute;lni

if (( 1 &lt; b )) 
then 
    echo '1 &lt; b felt&eacute;tel igaz' 
fi 
</pre>


</div>



<div class="sect1" title="A C st&iacute;lus&uacute; for ciklus"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3612"><a class="indexterm" name="d5e3614"></a>A C st&iacute;lus&uacute; for ciklus</h2></div></div></div>

<p>A  <code class="code">(( ))</code> z&aacute;r&oacute;jeles szerkezet for ciklusok el&#337;&aacute;ll&iacute;t&aacute;s&aacute;ra is haszn&aacute;lhat&oacute;, &eacute;spedig a C nyelv for utas&iacute;t&aacute;s&aacute;hoz hasonl&oacute;an. A szintaxis az al&aacute;bbi:</p>

<pre class="programlisting">
<span class="strong"><strong>for (( i=0; i&lt;10; i++ ))
do
    h&eacute;j parancsok   #ezekben haszn&aacute;lhat&oacute; a $i v&aacute;ltoz&oacute; 
    . . .
done</strong></span>
</pre>

<p>Egy eg&eacute;szen egyszer&#369; <code class="code">for</code> ciklust teh&aacute;t &iacute;gy &iacute;rhatunk:</p>

<pre class="programlisting">
#!/bin/bash 
 
for (( i=1; i&lt;=10; i++ )) 
do 
    echo $i
done 
</pre>

<p>L&aacute;that&oacute;, hogy eg&eacute;sz sz&aacute;mok v&eacute;gigj&aacute;r&aacute;s&aacute;ra &eacute;p&uuml;l&#337; ciklusokban ez k&eacute;nyelmesebben alkalmazhat&oacute;, mint az el&#337;z&#337; v&aacute;ltozat&uacute;, sztring lista v&eacute;g&eacute;gj&aacute;r&aacute;s&aacute;ra &eacute;p&uuml;l&#337; <code class="code">for</code> .</p>

</div>


<div class="sect1" title="M&#369;veletek karakterl&aacute;ncokkal"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="string_operatorok"><a class="indexterm" name="d5e3627"></a>M&#369;veletek karakterl&aacute;ncokkal</h2></div></div></div>
<p>A karakterl&aacute;ncok kezel&eacute;s&eacute;n&eacute;l n&eacute;ha igen hasznos gyorsan elv&eacute;gezni kis m&#369;veleteket, mint p&eacute;ld&aacute;ul: lev&aacute;gni egy karakterl&aacute;nc elej&eacute;t/v&eacute;g&eacute;t vagy &aacute;t&iacute;rni egy r&eacute;szt a karakterl&aacute;ncban. Ez&eacute;rt amikor egy v&aacute;ltoz&oacute;t kiv&aacute;lasztunk a <code class="code">${valtozo}</code> szintaxissal, akkor a k&eacute;t <code class="code">{}</code> z&aacute;r&oacute;jel k&ouml;zt oper&aacute;torokat haszn&aacute;lhatunk erre. Az oper&aacute;torok az al&aacute;bbiak:</p>

       <div class="table"><a name="d5e3632"></a><p class="title"><b>8.1. t&aacute;bl&aacute;zat - Sztring oper&aacute;torok II.</b></p><div class="table-contents">
                
                <table summary="Sztring oper&aacute;torok II." cellpadding="2" border="1"><colgroup><col width="33%" class="col1"><col width="67%" class="col2"></colgroup><thead><tr><th align="center">Oper&aacute;tor</th><th align="center">Mit v&eacute;gez</th></tr></thead><tbody><tr><td align="left"><code class="code">${valtozo#minta}</code></td><td align="left">Ha a minta illeszkedik a v&aacute;ltoz&oacute;ban lev&#337; karakterl&aacute;nc elej&eacute;re, akkor let&ouml;rli a legkisebb illeszked&eacute;st &eacute;s &uacute;gy t&eacute;r&iacute;ti vissza a karakterl&aacute;ncot.</td></tr><tr><td align="left"><code class="code">${valtozo##minta}</code></td><td align="left">Ha a minta illeszkedik a v&aacute;ltoz&oacute;ban lev&#337; karakterl&aacute;nc elej&eacute;re, akkor let&ouml;rli a legnagyobb illeszked&eacute;st &eacute;s &uacute;gy t&eacute;r&iacute;ti vissza a karakterl&aacute;ncot.</td></tr><tr><td align="left"><code class="code">${valtozo%minta}</code></td><td align="left">Ha a minta illeszkedik a v&aacute;ltoz&oacute;ban lev&#337; karakterl&aacute;nc v&eacute;g&eacute;re, akkor let&ouml;rli a legkisebb illeszked&eacute;st &eacute;s &uacute;gy t&eacute;r&iacute;ti vissza a karakterl&aacute;ncot.</td></tr><tr><td align="left"><code class="code">${valtozo%%minta}</code></td><td align="left">Ha a minta illeszkedik a v&aacute;ltoz&oacute;ban lev&#337; karakterl&aacute;nc v&eacute;g&eacute;re, akkor let&ouml;rli a legnagyobb illeszked&eacute;st &eacute;s &uacute;gy t&eacute;r&iacute;ti vissza a karakterl&aacute;ncot.</td></tr><tr><td align="left"><code class="code">${valtozo/minta/behelyetes&iacute;t}</code></td><td align="left">Behelyettes&iacute;ti a v&aacute;ltoz&oacute;ban a mint&aacute;nak megfelel&#337; r&eacute;szt&eacute;; ha a minta #-el kezd&#337;dik a karakterl&aacute;nc elej&eacute;n, ha % -al akkor a karakterl&aacute;nc v&eacute;g&eacute;n.</td></tr></tbody></table>
        </div></div><br class="table-break"> 
<p>P&eacute;ld&aacute;k:</p>


<pre class="screen">
$ a=abcxyzabc 
$ echo ${a#abc} 
xyzabc 
$ echo ${a%abc} 
abcxyz 
$ echo ${a/xyz/abc} 
abcabcabc 
$ 
</pre>




<p>A dupl&aacute;zott %% &eacute;s ## haszn&aacute;lata akkor indokolt, ha olyan mint&aacute;t adunk meg, amelybe metakarakterek (<code class="literal">*</code>, <code class="literal">?</code>) is vannak, amelyek haszn&aacute;lhat&oacute;ak. Ezek egy karakterl&aacute;nc eset&eacute;ben r&ouml;videbb vagy hosszabb illeszt&eacute;st is meghat&aacute;rozhatnak. P&eacute;ld&aacute;ul, az: <code class="code">abcxyzabcxyz</code> karakterl&aacute;nc elej&eacute;re a <code class="code">*abc</code> minta (b&aacute;rmi &eacute;s ut&aacute;na abc) r&ouml;videbben: <code class="code">abc</code> (hiszen az &uuml;res karakterekl&aacute;nc is b&aacute;rmi) vagy hosszabban: <code class="code">abcxyzabc</code> is illeszkedhet. &Iacute;gy a <code class="literal">#</code> oper&aacute;tor a legr&ouml;videbb illeszt&eacute;st, a  <code class="literal">##</code> pedig a leghosszabbat fogja lev&aacute;gni:</p>

<pre class="screen">
$ valtozo=abcxyzabcxyz 
$ echo ${valtozo#*abc} 
xyzabcxyz 
$ echo ${valtozo##*abc} 
xyz 
$ 
</pre>

<p>Az oper&aacute;torok k&ouml;nnyebb memoriz&aacute;l&aacute;sa miatt,  a k&ouml;vetkez&#337;t tartsuk szem el&#337;tt: a # jelet az angolok mindig valamilyen sz&aacute;moss&aacute;g jel&ouml;l&eacute;s&eacute;re haszn&aacute;lj&aacute;k, &eacute;s a sz&aacute;m el&eacute; teszik, pl. #10 , a % jelet pedig mindig a sz&aacute;m ut&aacute;n tessz&uuml;k, pl. 100% (innen a l&aacute;nc elej&eacute;re illetve v&eacute;g&eacute;re utal&aacute;s).</p>

<p>Ha van egy v&aacute;ltoz&oacute;nk amiben egy f&aacute;jln&eacute;v van, k&ouml;nnyen le tudjuk v&aacute;gni a f&aacute;jl t&iacute;pus&aacute;t tartalmaz&oacute; v&eacute;gz&#337;d&eacute;st, &eacute;s megtartani a nevet (ha pl. m&aacute;s t&iacute;pusra kell &aacute;tnevezni egy f&aacute;jl):</p>

<pre class="screen">
$ file="szoveg.txt"
$ echo ${file%.*}
szoveg
$ nev=$( echo ${file%.*} )   #v&aacute;ltoz&oacute;ba &iacute;rjuk a nevet
$ echo $nev
szoveg
$ 
</pre>

<p>Vagy egy hossz&uacute; f&aacute;jlrendszerbeli &uacute;tvonal r&eacute;szeit lehet gyorsan kiv&aacute;gni:</p>

<pre class="screen">
$ mypath="/elso/masodik/harmadik/szoveg.txt"
$ echo ${mypath#/*/}
masodik/harmadik/szoveg.txt
$ # vagy:
$ echo ${mypath##*/}
szoveg.txt
</pre>


</div>

<div class="sect1" title="A [[ ]] szerkezet"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="test2"><a class="indexterm" name="d5e3681"></a>A [[ ]] szerkezet</h2></div></div></div>


<p>A <code class="code">[ ]</code> szerkezet jelenti a klasszikus <span class="command"><strong>test</strong></span> parancs v&eacute;grehajt&aacute;s&aacute;t, ezt a  Bourne shell v&aacute;ltozatok vezett&eacute;k be. A Korn shell egy &uacute;j teszt szerkezetet defini&aacute;lt 1986-ban, majd a 1993-as v&aacute;ltozatban v&eacute;gleges&iacute;tette ezt. A szerkezetet a Bash is &aacute;tvette a 2.05 verzi&oacute;t&oacute;l kezdve.</p>

<p>A <code class="code">[[  ]]</code> a klasszikus teszthez hasonl&oacute;an haszn&aacute;lhat&oacute;. A belsej&eacute;ben a shell nem hajtja v&eacute;gre a shell mint&aacute;k kiterjeszt&eacute;s&eacute;t (<code class="literal">*</code>, <code class="literal">?</code>, stb.). V&aacute;ltoz&oacute; helyettes&iacute;t&eacute;st, parancs helyettes&iacute;t&eacute;st, <code class="literal">~</code> helyettes&iacute;t&eacute;st azonban v&eacute;gez, az id&eacute;z&#337;jeleket is ugyan&uacute;gy haszn&aacute;lhatjuk mint a parancssoron.</p>

<p>A klasszikus teszt <code class="code">[  ]</code> -nek minden oper&aacute;tor&aacute;t lehet benne haszn&aacute;lni:</p>

<pre class="programlisting">
#!/bin/bash

#az eg&eacute;sz sz&aacute;mokra vonatkoz&oacute; tesztek ugyan&uacute;gy haszn&aacute;lhat&oacute;k 
if [[ $# -ne 1 ]]         # ha $# nem egyenl&#337; 1-el
then
    echo nincs param&eacute;ter
    exit 1
fi

file="$1"

#az &aacute;llom&aacute;nyok tulajdons&aacute;gait lek&eacute;r&#337; tesztek ugyan&uacute;gy 
#haszn&aacute;lhat&oacute;ak

if [[ -w "$file" ]]       #&iacute;rhat&oacute;-e a f&aacute;jl?
then
    rm "$file"
else
    echo nincs ilyen f&aacute;jl
fi
</pre>

<p>A <code class="code">[ ]</code> teszt oper&aacute;torain k&iacute;v&uuml;l  a <code class="code">[[ ]]</code> szerkezetben az al&aacute;bbiak haszn&aacute;lhat&oacute;k:</p>

<p>Sztring teszthez: a  <code class="code">-n</code> , <code class="code">-z</code> , <code class="code">=</code> &eacute;s <code class="code">!=</code> oper&aacute;torokon k&iacute;v&uuml;l haszn&aacute;lhat&oacute; a <code class="code">&lt;</code> &eacute;s <code class="code">&gt;</code> oper&aacute;torok is amelyek karakter alap&uacute; &ouml;sszehasonl&iacute;t&aacute;st  v&eacute;geznek :</p>

<pre class="screen">
$ [[ a &lt; b ]]; echo $?
0
$ [[ a &gt; b ]]; echo $?
1
</pre>

<p>Az <code class="code">==</code> &eacute;s <code class="code">!=</code> oper&aacute;torok eset&eacute;ben ha az oper&aacute;tor jobb oldal&aacute;n lev&#337; sztringet nem tessz&uuml;k macskak&ouml;r&ouml;mbe, haszn&aacute;lhatunk shell mint&aacute;kat is benne. Teh&aacute;t:</p>
<pre class="screen">
$ [[ "ab" == a? ]] ; echo $?
0
</pre>
<p>igazat ad vissza, mert a jobb oldali sztring shell minta,</p>

<pre class="screen">
$ [[ "ab" == "a?" ]] ; echo $?
1
</pre>
<p>viszont hamisat, mert macskak&ouml;r&ouml;mben egyszer&#369; sztring a jobb oldali.</p>

<p>A  Bash shellben a  <code class="code">=~</code> oper&aacute;tor haszn&aacute;lhat&oacute; b&#337;v&iacute;tett szab&aacute;lyos kifejez&eacute;sekkel val&oacute; egyeztet&eacute;sre . A teszt igazat ad vissza, ha a minta illeszkedik a tesztelt sztringre. P&eacute;ld&aacute;ul:</p>

<pre class="screen">
$ [[ "ab" =~ ^a ]] ; echo $?
0
</pre>
<p>igazat ad vissza, mert a bal oldal a -val kezd&#337;dik.</p>


<p>A <code class="code">[[ ]]</code> szerkezeten bel&uuml;l haszn&aacute;lhat&oacute; a z&aacute;r&oacute;jel, ha kifejez&eacute;st akarunk elhat&aacute;rolni, illetve az <code class="code">&amp;&amp;</code> &eacute;s <code class="code">||</code>  kifejez&eacute;sek k&ouml;zti oper&aacute;torokk&eacute;nt valamint a <code class="code">!</code> kifejez&eacute;s tagad&aacute;s&aacute;ra. Pl. azt, hogy az  <code class="varname">f</code> v&aacute;ltoz&oacute;ban lev&#337; f&aacute;jln&eacute;vhez l&eacute;tezik szab&aacute;lyos &aacute;llom&aacute;ny &eacute;s az &aacute;llom&aacute;nyn&eacute;v <code class="filename">.txt</code>-ben v&eacute;gz&#337;dik &iacute;gy tesztelj&uuml;k:</p>

<pre class="screen">
$ f=a.txt
$ echo a &gt; a.txt
$ [[ -f "$f" &amp;&amp; "$f" =~ \.txt$ ]]
$ echo $?
0
$ 
</pre>




</div>



</div>

    <div class="chapter" title="9. fejezet - A sed folyamszerkeszt&#337;" id="sed"><div class="titlepage"><div><div><h2 class="title">9. fejezet - <a class="indexterm" name="d5e3726"></a>A sed folyamszerkeszt&#337;</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e3728">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#cmd_sed">A sed parancssora</a></span></dt><dt><span class="sect1"><a href="#d5e3834">A sed m&#369;k&ouml;d&eacute;se</a></span></dt><dt><span class="sect1"><a href="#d5e3863">A sed parancsai</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e3865">A c&iacute;mek megad&aacute;sa</a></span></dt><dt><span class="sect2"><a href="#d5e3946">Gyakran haszn&aacute;lt sed parancsok</a></span></dt><dt><span class="sect2"><a href="#d5e4105">A sed ritk&aacute;bban haszn&aacute;lt parancsai</a></span></dt><dt><span class="sect2"><a href="#d5e4198">A hold pufferre vonatkoz&oacute; parancsok</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e4270">P&eacute;ld&aacute;k a sed haszn&aacute;lat&aacute;ra h&eacute;jprogramokban</a></span></dt></dl></div>


<div class="sect1" title="Bevezet&#337;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3728">Bevezet&#337;</h2></div></div></div>


<p>A sz&ouml;vegfeldolgoz&aacute;ssal kapcsolatos feladatok legfontosabb k&ouml;vetelm&eacute;nye a sz&ouml;vegek automatikus, programb&oacute;l vez&eacute;relt szerkeszt&eacute;se. Ezt a k&ouml;vetelm&eacute;nyt biztos&iacute;tja a <span class="command"><strong>sed</strong></span> nev&#369; szerkeszt&#337;, amelyik "m&#369;faj&aacute;ban" a legink&aacute;bb haszn&aacute;lt Unix parancs.</p>

<p>A <span class="command"><strong>sed</strong></span> egy speci&aacute;lis sz&ouml;vegszerkeszt&#337;, un. folyamszerkeszt&#337; program (<span class="emphasis"><em>stream editor</em></span>). Ez azt jelenti, hogy nem interakt&iacute;v m&oacute;dban szerkeszt&uuml;nk vele sz&ouml;veget, hanem a bemenet&eacute;re vezetj&uuml;k, a program fut&aacute;s k&ouml;zben v&eacute;gigolvassa azt sz&ouml;vegsoronk&eacute;nt &eacute;s k&ouml;zben szerkeszt&eacute;si m&#369;veleteket v&eacute;gez rajta. </p>
<p>Az ilyen folyamot szerkeszt&#337; programok rendelkeznek egy parancsnyelvvel, amellyel meg lehet adni nekik a szerkeszt&eacute;si m&#369;veleteket. A nyelv seg&iacute;ts&eacute;g&eacute;vel a feldolgoz&aacute;s vez&eacute;rl&eacute;s&eacute;re kis szkripteket &iacute;rhatunk, ezeket a <span class="command"><strong>sed</strong></span> eset&eacute;ben <span class="emphasis"><em>sed szkriptnek</em></span> fogjuk nevezni.</p>

<p>A szerkesztett sz&ouml;veg f&aacute;jlokba vagy egy kimeneti folyamba ker&uuml;l tov&aacute;bbi feldolgoz&aacute;sra. &Iacute;gy sz&ouml;veges f&aacute;jlok szerkeszt&eacute;s&eacute;re vagy sz&#369;r&#337;k&eacute;nt valamilyen sz&ouml;vegfeldolgoz&aacute;s k&ouml;ztes &aacute;llom&aacute;sak&eacute;nt haszn&aacute;ljuk.</p>

</div>

<div class="sect1" title="A sed parancssora"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_sed">A sed parancssora</h2></div></div></div>
<p>A <span class="command"><strong>sed</strong></span> megh&iacute;v&aacute;s&aacute;nak &aacute;ltal&aacute;nos alakja:</p>

<pre class="programlisting">
<span class="strong"><strong>sed  [opci&oacute;k] 'szkript' [bemeneti_f&aacute;jlok]</strong></span>
</pre>
<p>A <span class="command"><strong>sed</strong></span> a vez&eacute;rl&#337; szkriptet a <code class="option">-e</code> vagy <code class="option">-f</code>  opci&oacute;kkal argumentumak&eacute;nt kaphatja meg, illetve egy karaktersor argumentumk&eacute;nt opci&oacute;k n&eacute;lk&uuml;l.  A 'szkript' param&eacute;ternek akkor kell szerepelnie, ha sem a <code class="option">-e</code> sem a <code class="option">-f</code> opci&oacute;kkal nem adunk meg m&aacute;s szkriptet.</p>

<p>A feldolgozott sz&ouml;veg vagy a standard bemenetre j&ouml;n, vagy f&aacute;jln&eacute;v argumentumk&eacute;nt: itt ak&aacute;r t&ouml;bb f&aacute;jl is szerepelhet, a <span class="command"><strong>sed</strong></span> sorban fogja feldolgozni &#337;ket.</p>

<p>Az al&aacute;bbi h&iacute;v&aacute;sok teh&aacute;t mind helyesek:</p>


   <div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
<p>Az <code class="filename">elso.txt</code> nev&#369; f&aacute;jl ker&uuml;l a bemenetre, a <span class="command"><strong>sed</strong></span> szkript  a <code class="option">-e</code> opci&oacute; ut&aacute;n j&ouml;n. A parancssoron megadott szkript az al&aacute;bbi p&eacute;ld&aacute;ban egyetlen <code class="code">p</code> nev&#369; parancs aposztr&oacute;fok k&ouml;zt. A <code class="code">p</code> parancs list&aacute;zza a bementre &eacute;rkez&#337; sorokat, a <span class="command"><strong>sed</strong></span> maga is list&aacute;z, &iacute;gy a kimeneten (ami a standard kimenet) dupl&aacute;zva fogjuk l&aacute;tni az <code class="filename">elso.txt</code> sorait). A parancssor:</p>
<pre class="screen">
$ sed -e 'p' elso.txt
</pre>
	  </li><li class="listitem">
<p>Ha nincs <code class="option">-e</code> opci&oacute;, a <span class="command"><strong>sed</strong></span> az els&#337; param&eacute;terk&eacute;nt megadott sztringet tekinti szkriptnek:</p>
<pre class="screen">
$ sed 'p' elso.txt
</pre>
<p>A fenti p&eacute;ld&aacute;kban a szerkesztett bemeneti f&aacute;jl az <code class="filename">elso.txt</code>.</p>
	  </li><li class="listitem">
<p>A <span class="command"><strong>sed</strong></span> a standard bemenetet olvassa, &eacute;s a v&eacute;grehajt&oacute; szkriptet az egyik el&#337;bb eml&iacute;tett m&oacute;don adjuk meg:</p>
<pre class="screen">
$ cat elso.txt | sed 'p'
</pre>
	  </li><li class="listitem">
<p>A <span class="command"><strong>sed</strong></span> szkript egy f&aacute;jlban van, ilyenkor a f&aacute;jl neve el&eacute; a <code class="option">-f</code> opci&oacute; ker&uuml;l, a szkript f&aacute;jl pedig egy <code class="filename">.sed</code> t&iacute;pus&uacute; f&aacute;jl (lehetne b&aacute;rmilyen nev&#369; sz&ouml;veges f&aacute;jl, helyes <code class="code">sed</code> parancsokkal):</p>
<pre class="screen">
$ sed -f szerkeszt.sed elso.txt 
</pre>
	  </li></ol></div>

<p>Fontosabb opci&oacute;k:</p>


       <div class="table"><a name="d5e3784"></a><p class="title"><b>9.1. t&aacute;bl&aacute;zat - A sed opci&oacute;i</b></p><div class="table-contents">
                
                <table summary="A sed opci&oacute;i" cellpadding="2" border="1"><colgroup><col width="20%" class="col1"><col width="80%" class="col2"></colgroup><thead><tr><th align="center">Opci&oacute;</th><th align="center">A sed m&#369;k&ouml;d&eacute;se</th></tr></thead><tbody><tr><td align="left"><code class="option">-e szkript</code></td><td align="left">ezt a szkriptet is hozz&aacute;f&#369;zi a v&eacute;grehajtand&oacute;khoz</td></tr><tr><td align="left"><code class="option">-f szkript_file</code></td><td align="left">a szkriptet f&aacute;jlb&oacute;l veszi</td></tr><tr><td align="left"><code class="option">-n</code></td><td align="left">nem &iacute;r a kimenetre a mintat&eacute;r (l&aacute;sd k&ouml;vetkez&#337; szekci&oacute;) feldolgoz&aacute;sa ut&aacute;n</td></tr><tr><td align="left"><code class="option">-r</code></td><td align="left">b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;seket haszn&aacute;l</td></tr><tr><td align="left"><code class="option">-i</code></td><td align="left"><span class="emphasis"><em>in place</em></span> &#8211; mag&aacute;t a f&aacute;jlt szerkeszti, teh&aacute;t a bemeneti f&aacute;jl m&oacute;dosul a merevlemezen</td></tr><tr><td align="left"><code class="option">-s</code></td><td align="left"><span class="emphasis"><em>separate</em></span>: ha t&ouml;bb f&aacute;jlt adunk meg, alap&eacute;rtelmez&eacute;sk&eacute;nt a f&aacute;jlokat egym&aacute;s ut&aacute;n, egy folyamnak tekinti: <code class="option">-s</code> eset&eacute;ben viszont k&uuml;l&ouml;n kezeli &#337;ket. A <code class="option">-i</code>-vel a <code class="option">-s</code> opci&oacute;t is kell haszn&aacute;lni ha t&ouml;bb f&aacute;jlt akarunk egyszerre szerkeszteni.</td></tr><tr><td align="left"><code class="option">-g</code></td><td align="left">minden helyettes&iacute;t&eacute;si parancsn&aacute;l alkalmazza a <code class="code">g</code> (global) opci&oacute;t (l&aacute;sd al&aacute;bb)</td></tr></tbody></table>
        </div></div><br class="table-break"> 

<p>Ha k&uuml;l&ouml;n f&aacute;jlba &iacute;rjuk a <span class="command"><strong>sed</strong></span> programot, annak els&#337; sor&aacute;ban a <span class="command"><strong>sed</strong></span>-et kell bejel&ouml;lni mint v&eacute;grehajt&oacute; program, teh&aacute;t a forr&aacute;snak &iacute;gy kell kin&eacute;zni:</p>

<pre class="screen">
#!/bin/sed -f
#itt soronk&eacute;nt j&ouml;nnek sed parancsok:
1,2 p
3,$ d
</pre>

<p>A <code class="option">-f</code> opci&oacute; a v&eacute;grehajt&oacute; programnak azt jelzi, hogy ezt a f&aacute;jlt kell szkriptk&eacute;nt &eacute;rtelmezni.</p>

</div>


<div class="sect1" title="A sed m&#369;k&ouml;d&eacute;se"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3834">A sed m&#369;k&ouml;d&eacute;se</h2></div></div></div>


<p>A <span class="command"><strong>sed</strong></span> m&#369;k&ouml;d&eacute;s k&ouml;zben k&ouml;veti a vez&eacute;rl&#337; szkriptben tal&aacute;lhat&oacute; parancsokat. Egy <span class="command"><strong>sed</strong></span> szkript egy vagy t&ouml;bb egym&aacute;s ut&aacute;ni parancsb&oacute;l &aacute;ll.  A sed szkriptben tal&aacute;lhat&oacute; parancsok form&aacute;tuma:</p>


<pre class="programlisting">
<span class="strong"><strong>[c&iacute;m] parancs [opci&oacute;k]</strong></span>
</pre>

<p>&iacute;gy ezek egy c&iacute;met, egy szerkeszt&#337; utas&iacute;t&aacute;st &eacute;s az utas&iacute;t&aacute;shoz tartoz&oacute; opci&oacute;kat tartalmaznak, kis feladatokat fogalmaznak meg: "c&iacute;m : ha az els&#337; sor j&ouml;n a folyamb&oacute;l,  parancs: t&ouml;r&ouml;ld", "c&iacute;m : a m&aacute;sodik &eacute;s harmadik sor k&ouml;z&ouml;tti r&eacute;szben, parancs: helyettes&iacute;tsd az a karaktert b -re".</p>

<p>A <span class="command"><strong>sed</strong></span> soronk&eacute;nt dolgozza fel a bemeneti sz&ouml;veget. K&eacute;t pufferel dolgozik, az egyiket mintat&eacute;rnek nevezi (<span class="emphasis"><em>pattern space</em></span>), a m&aacute;sikat egy m&aacute;sodlagos t&aacute;rol&oacute; puffernek (<span class="emphasis"><em>hold space</em></span>). A k&ouml;vetkez&#337; algoritmust ism&eacute;tli:</p>


   <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>Beolvas egy sz&ouml;vegsort lev&aacute;gja a v&eacute;g&eacute;r&#337;l az &uacute;jsor karaktert &eacute;s a sort a mintat&eacute;rbe teszi.</p>
	  </li><li class="listitem">
<p>Ezut&aacute;n lefuttatja a szkriptben lev&#337; parancsokat a mintat&eacute;ren: minden egyes parancsot ellen&#337;riz (egym&aacute;s ut&aacute;n), &eacute;s csak azokat hajtja v&eacute;gre, amelyeknek a c&iacute;me <span class="emphasis"><em>illeszkedik</em></span> a mintat&eacute;rben lev&#337; sor c&iacute;m&eacute;re (az&eacute;rt haszn&aacute;lhatjuk itt az illeszked&eacute;s fogalmat, mert a c&iacute;meket legt&ouml;bbsz&ouml;r nem sorsz&aacute;mokkal adjuk meg, mint pl. els&#337; &eacute;s m&aacute;sodik sor, hanem pl. &iacute;gy: azok a sorok amelyek sz&aacute;mjeggyel kezd&#337;dnek. Ezt pedig a legk&ouml;nnyebben regul&aacute;ris kifejez&eacute;sekkel lehet kifejezni).</p>
	  </li><li class="listitem">
<p>Ha ezzel elk&eacute;sz&uuml;l, &eacute;s nem adtunk meg <code class="option">-n</code> opci&oacute;t, a mintat&eacute;r tartalm&aacute;t ki&iacute;rja a kimenetre, a sor ut&aacute;n ki&iacute;rja a lev&aacute;gott &uacute;jsor karaktert.</p>
	  </li><li class="listitem">
<p>Ha nem haszn&aacute;lunk valamilyen speci&aacute;lis parancsot, ezek ut&aacute;n t&ouml;rli a mintateret.</p>
	  </li><li class="listitem">
<p>Veszi a k&ouml;vetkez&#337; sort &eacute;s v&eacute;grehajtja ugyanazt.</p>
	  </li></ol></div>
<p>A <span class="command"><strong>sed</strong></span> egyszer olvassa v&eacute;gig a bemeneti sz&ouml;veget, ha &aacute;thaladt egy soron, oda m&aacute;r nem t&eacute;r vissza</p>

<p>A hold t&eacute;r arra szolg&aacute;l, hogy a mintat&eacute;r t&ouml;rl&eacute;se el&#337;tt speci&aacute;lis parancsokkal sorokat mozgassunk &aacute;t oda bonyolultabb feldolgoz&aacute;sok v&eacute;gett. &Iacute;gy teh&aacute;t pufferelt feldolgoz&aacute;st is v&eacute;gezhet&uuml;nk: ezzel nem foglalkozunk, a hold t&eacute;r haszn&aacute;lata felt&eacute;telezi a <span class="command"><strong>sed</strong></span> egyszer&#369; m&#369;k&ouml;d&eacute;s&eacute;nek j&oacute; elsaj&aacute;t&iacute;t&aacute;s&aacute;t, ugyanakkor kis h&eacute;jprogramokban nincs r&aacute; felt&eacute;tlen&uuml;l sz&uuml;ks&eacute;g.</p>

</div>




<div class="sect1" title="A sed parancsai"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e3863">A sed parancsai</h2></div></div></div>

<div class="sect2" title="A c&iacute;mek megad&aacute;sa"><div class="titlepage"><div><div><h3 class="title" id="d5e3865">A c&iacute;mek megad&aacute;sa</h3></div></div></div>

<p>A c&iacute;m meghat&aacute;rozhat egy sz&ouml;veg sor c&iacute;met, egy tartom&aacute;nyt, de kifejezhet valamilyen sz&ouml;vegben tal&aacute;lhat&oacute; mint&aacute;t is. A feldolgoz&aacute;s sor&aacute;n ezzel v&aacute;lasszuk ki "mintateret", azokat a sorokat amelyeket feldolgozunk. &Iacute;gy a c&iacute;meket az al&aacute;bbiak szerint lehet megadni:</p>


       <div class="informaltable">
                <table cellpadding="2" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Szintaxis</th><th align="center">Mit c&iacute;mez</th></tr></thead><tbody><tr><td align="center"><code class="code">nincs c&iacute;m a parancs el&#337;tt</code></td><td align="left">
<p>Ha nincs a parancs el&#337;tt c&iacute;m, akkor azt minden soron v&eacute;gig kell hajtani.</p>
</td></tr><tr><td align="center"><code class="code">n</code></td><td align="left">
<p>Egy sz&aacute;m, amely a feldolgozott sz&ouml;veg bizonyos sor&aacute;t c&iacute;mzi, pl.:</p>
<pre class="programlisting">
22
</pre>
<p>a 22.-dik sort c&iacute;mzi. A sorokat 1-t&#337;l sz&aacute;mozzuk.</p>
</td></tr><tr><td align="center"><code class="code">$</code></td><td align="left">
<p>A bemenet utols&oacute; sor&aacute;t c&iacute;mzi.</p>
</td></tr><tr><td align="center"><code class="code">n~m</code></td><td align="left">
<p>Az n.-dik sort&oacute;l m l&eacute;p&eacute;sk&eacute;nt c&iacute;mzi a sorokat, pl:</p>
<pre class="programlisting">
1~3
</pre>
<p>minden harmadik sort c&iacute;mez.</p>
</td></tr><tr><td align="center"><code class="code">/regex/</code></td><td align="left">
<p>Azokat a sorokat c&iacute;mzi, amelyekben a <code class="code">regex</code> regul&aacute;ris kifejez&eacute;sre illeszthet&#337; karakterl&aacute;ncot tal&aacute;l. Regul&aacute;ris kifejez&eacute;s opci&oacute; n&eacute;lk&uuml;l a sed alapszint&#369; regul&aacute;ris kifejez&eacute;seket haszn&aacute;l, a <code class="option">-r</code> opci&oacute;val pedig b&#337;v&iacute;tetteket. Mi t&ouml;bbnyire &iacute;gy fogjuk haszn&aacute;lni. A kifejez&eacute;st k&eacute;t per jellel hat&aacute;roljuk, pl. a:</p>
<pre class="programlisting">
/^a/
</pre>
<p>c&iacute;m azokra a sorokra vonatkozok amelyek kis a karakterrel kezd&#337;dnek, </p>
<pre class="programlisting">
/[0-9]/
</pre>
<p>pedig azokra amelyekben van sz&aacute;mjegy. </p>
<p>Hat&aacute;rol&oacute;jelk&eacute;nt a  per jel helyett  m&aacute;s karaktert is lehet haszn&aacute;lni, p&eacute;ld&aacute;ul a % jelet, ez akkor hasznos ha a regul&aacute;ris kifejez&eacute;sben van / . Ilyenkor az illet&#337; karakter els&#337; el&#337;fordul&aacute;s&aacute;t egy vissza-per jellel kell jelezni a GNU <span class="command"><strong>sed</strong></span>-ben, pl. az al&aacute;bbi c&iacute;m kiv&aacute;lassza azokat a sorokat amelyek per jellel kezd&#337;dnek:</p>
<pre class="programlisting">
\%^/%
</pre>
</td></tr><tr><td align="center"><code class="code">/regexp/I</code></td><td align="left">
<p>Az regul&aacute;ris kifejez&eacute;s I m&oacute;dos&iacute;t&oacute;ja kis-nagybet&#369; nem sz&aacute;m&iacute;t t&iacute;pus&uacute; illeszt&eacute;st tesz lehet&#337;v&eacute;</p>
</td></tr><tr><td align="center"><code class="code">c&iacute;m1,c&iacute;m2</code></td><td align="left">
<p>A k&eacute;t c&iacute;m k&ouml;zti tartom&aacute;nyt c&iacute;mzi, a 10. &eacute;s 15.-dik sor k&ouml;zti tartom&aacute;nyt</p>
<pre class="programlisting">
10,15
</pre>
<p>a 10. &eacute;s az ut&aacute;na k&ouml;vetkez&#337; els&#337; olyan sor k&ouml;zti r&eacute;szt amely a-val kezd&#337;dik</p>
<pre class="programlisting">
10,/^a/
</pre>
<p><span class="strong"><strong>Figyelem:</strong></span> amennyiben a m&aacute;sodik c&iacute;m kisebb mint az els&#337; vagy nem tal&aacute;lhat&oacute; meg a szerkesztett f&aacute;jlban, akkor a sed az els&#337; c&iacute;mt&#337;l a f&aacute;jl v&eacute;g&eacute;ig szerkeszt.</p>
</td></tr></tbody></table>
        </div> 

<p>A c&iacute;mek mindig teljes sorra vonatkoznak, &eacute;s amennyiben c&iacute;mhat&aacute;rokra vonatkoznak, a hat&aacute;rok is beleesnek a c&iacute;mzett tartom&aacute;nyba, teh&aacute;t a <code class="code">6,8</code> c&iacute;m 3 sort jelent. </p>

<p>Ha regul&aacute;ris kifejez&eacute;sekkel megadott tartom&aacute;nyokkal dolgozunk, azok  ak&aacute;r t&ouml;bb c&iacute;mteret is kiv&aacute;laszthatnak. Pl. az <code class="code">/^a/,/^b/</code> tartom&aacute;ny az els&#337; a bet&#369;vel kezd&#337;d&#337; sort&oacute;l a k&ouml;vetkez&#337; b bet&#369;vel kezd&#337;d&#337; sorig v&aacute;lassza ki a c&iacute;mteret, &eacute;s azon hajtja v&eacute;gre a neki megfelel&#337; parancsot - ez t&ouml;bbsz&ouml;r el&#337;fordulhat a bemeneti sorokban.</p>
<p>Ha a <span class="command"><strong>sed</strong></span> nem kapja meg a tartom&aacute;nyt z&aacute;r&oacute; sort (pl. az el&#337;bbi p&eacute;ld&aacute;ban nincs b-vel kezd&#337;d&#337; sor), akkor a bemenet v&eacute;g&eacute;ig mindent kiv&aacute;laszt att&oacute;l a sort&oacute;l kezdve, amelyik a-val kezd&#337;dik.</p>

<p>Mindez az&eacute;rt van &iacute;gy, mert a sed m&#369;k&ouml;d&eacute;se k&ouml;zben nincs "el&#337;retekint&eacute;s", egyszer j&aacute;rja v&eacute;gig a sz&ouml;veget (a v&eacute;grehajt&aacute;si sebess&eacute;g miatt).</p>


<div class="note" title="A regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;r&oacute;l" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: A regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;r&oacute;l"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left">A regul&aacute;ris kifejez&eacute;sek haszn&aacute;lat&aacute;r&oacute;l</th></tr><tr><td align="left" valign="top">
<p>Ebben a tananyagban minden regul&aacute;ris kifejez&eacute;st b&#337;v&iacute;tett &#8211; <span class="emphasis"><em>extended</em></span> &#8211; kifejez&eacute;ssel adunk meg, teh&aacute;t csak akkor m&#369;k&ouml;dnek helyesen a sed-el val&oacute; feldolgoz&aacute;sban, ha a <span class="command"><strong>sed</strong></span>-et <code class="option">-r</code> opci&oacute;val ind&iacute;tjuk.</p>

</td></tr></table></div>

<p>A c&iacute;mek ut&aacute;ni <code class="code">!</code> jel eset&eacute;ben a parancsok a megadott c&iacute;m komplementer tartom&aacute;ny&aacute;ra vonatkoznak. Teh&aacute;t a "nyomtass mindent kiv&eacute;ve a 3.-dik sort" parancs az al&aacute;bbi:</p>

<pre class="screen">
$ sed -n '3!p' teszt.txt
</pre>



</div>

<div class="sect2" title="Gyakran haszn&aacute;lt sed parancsok"><div class="titlepage"><div><div><h3 class="title" id="d5e3946">Gyakran haszn&aacute;lt sed parancsok</h3></div></div></div>
<p>A <span class="command"><strong>sed</strong></span> parancsai egym&aacute;s ut&aacute;n k&ouml;vetkeznek k&uuml;l&ouml;n sz&ouml;vegsorokban, amennyiben a sed szkript f&aacute;jlban van, vagy ; jellel elv&aacute;lasztva, ha a szkript egy karakterl&aacute;ncban van a parancssoron. L&aacute;ssuk teh&aacute;t a <span class="command"><strong>sed</strong></span> leghaszn&aacute;ltabb parancsait: egy t&aacute;bl&aacute;zatban adjuk meg &#337;ket, minden parancs le&iacute;r&aacute;sa ut&aacute;n p&eacute;ld&aacute;kon kereszt&uuml;l.
</p>


       <div class="informaltable">
                <table cellpadding="2" border="1"><colgroup><col width="25%" class="col1"><col width="75%" class="col2"></colgroup><thead><tr><th align="center">Parancs</th><th align="center">Mit v&eacute;gez</th></tr></thead><tbody><tr><td align="center" valign="top"><code class="code">#</code></td><td align="left" valign="top">
Megjegyz&eacute;s
</td></tr><tr><td align="center" valign="top"><code class="code">p</code></td><td align="left" valign="top">
<p>Nyomtat&aacute;s (<span class="emphasis"><em>print</em></span>)</p><p> Kinyomtatja a kimenetre mintat&eacute;r tartalm&aacute;t. A <span class="command"><strong>sed</strong></span> norm&aacute;l m&oacute;dban minden feldolgoz&aacute;si ciklus ut&aacute;n automatikusan nyomtat. Ha <code class="option">-n</code> opci&oacute;val ind&iacute;tjuk, akkor nem nyomtat, &eacute;s ilyenkor azokat a sorokat amelyeket m&eacute;gis nyomtatni akarunk ezzel a paranccsal k&uuml;ldj&uuml;k a kimenetre. Pl. az al&aacute;bbi parancs csak a harmadik sort fogja nyomtatni:
</p>
<pre class="screen">
$ sed -n '3p'  teszt.txt 
</pre>
<p>az al&aacute;bbi pedig mindent sort, de a harmadikat k&eacute;tszer:</p>
<pre class="screen">
$ sed  '3p'  teszt.txt 
</pre>
</td></tr><tr><td align="center" valign="top"><code class="code">d</code></td><td align="left" valign="top">
<p>T&ouml;rl&eacute;s (<span class="emphasis"><em>delete</em></span>)</p>
<p>T&ouml;rli a mintat&eacute;rbe ker&uuml;lt sort vagy sorokat &eacute;s &uacute;j ciklusba kezd. Pl.:</p>
<pre class="screen">
3d     #t&ouml;rli a harmadik sort
3!d    #t&ouml;r&ouml;l minden sort, kiv&eacute;ve a harmadikat
</pre>
</td></tr><tr><td align="center" valign="top"><code class="code">q</code></td><td align="left" valign="top">
<p>Kil&eacute;p&eacute;s (<span class="emphasis"><em>quit</em></span>)</p>
<p>Kil&eacute;p a sed, ha el&eacute;ri azt a sort, amelyre ez a parancs vonatkozik. Ilyenkor a feldolgoz&aacute;s v&eacute;get &eacute;r. Az al&aacute;bbi parancs a <code class="filename">szoveg.txt</code> f&aacute;jl els&#337; 3 sor&aacute;t list&aacute;zza, ut&aacute;na kil&eacute;p:</p>
<pre class="screen">
$ sed -n 'p;3q' szoveg.txt
</pre>
</td></tr><tr><td align="center" valign="top"><code class="code">s/regexp/csere/k</code></td><td align="left" valign="top">
<p>Helyettes&iacute;t&eacute;s, csere (substitute)</p>
<p>A c&iacute;mzett sorban a regexp -re illeszked&#337; karakterl&aacute;ncot a csere l&aacute;ncra cser&eacute;li. P&eacute;ld&aacute;ul az al&aacute;bbi parancs a sorban tal&aacute;lhat&oacute; els&#337; ab szekvenci&aacute;t xy-ra cser&eacute;li:</p>
<pre class="programlisting">
s/ab/xy/ 
</pre>
<p>vagy az al&aacute;bbi az utols&oacute; sor (c&iacute;me a <code class="literal">$</code> jel) elej&eacute;n lev&#337; kis a karaktert b-re cser&eacute;li</p>
<pre class="programlisting">
$/s/^a/b/
</pre>
<p>A parancs k&uuml;l&ouml;n metakarakterekkel rendelkezik, amelyeket a <code class="code">csere</code> sztringben haszn&aacute;lhatunk, illetve a m&aacute;sodik <code class="code">/</code> jel ut&aacute;n m&oacute;dos&iacute;t&oacute; opci&oacute;kat adhatunk meg.</p>
<p>A <code class="code">csere</code>  sztringben az al&aacute;bbi metakaraktereket lehet haszn&aacute;lni:</p>

 <table border="0" summary="Simple list" class="simplelist"><tr><td><span class="strong"><strong><code class="code">\n</code></strong></span>&nbsp;&nbsp; a regul&aacute;ris kifejez&eacute;s n.-dik <code class="code">()</code> -el kiv&aacute;lasztott r&eacute;szl&aacute;nc&aacute;t helyettes&iacute;ti. Pl:  <code class="code">\1</code>  <code class="code">\2</code></td></tr><tr><td><span class="strong"><strong><code class="code">&amp;</code></strong></span>&nbsp;&nbsp; a teljes regexp &aacute;ltal illesztett l&aacute;ncot helyettes&iacute;ti (&iacute;gy a konkr&eacute;t <code class="code">&amp;</code> karakter be&iacute;r&aacute;s&aacute;ra csere karakterl&aacute;ncba  <code class="code">\&amp;</code> -et kell haszn&aacute;lni)</td></tr></table>
<p>A <code class="code">k</code> opci&oacute; hely&eacute;n az al&aacute;bbiak haszn&aacute;lhat&oacute;k:</p>

 <table border="0" summary="Simple list" class="simplelist"><tr><td><span class="strong"><strong><code class="code">g</code></strong></span>&nbsp;&nbsp; a regexp minden el&#337;fordul&aacute;s&aacute;t helyettes&iacute;ti a feldolgozott sorban</td></tr><tr><td><span class="strong"><strong><code class="code">n</code></strong></span>&nbsp;&nbsp; egy sz&aacute;m: csak az n.-dik el&#337;fordul&aacute;st helyettes&iacute;ti</td></tr><tr><td><span class="strong"><strong><code class="code">I</code></strong></span>&nbsp;&nbsp; kis-nagybet&#369; nem sz&aacute;m&iacute;t a <code class="code">regexp</code> illeszt&eacute;s&eacute;n&eacute;l</td></tr><tr><td><span class="strong"><strong><code class="code">w f&aacute;jl</code></strong></span>&nbsp;&nbsp; a csere ut&aacute;n az illet&#337; sort a f&aacute;jl v&eacute;g&eacute;re &iacute;rja. Indul&aacute;skor a sed null&aacute;ra &aacute;ll&iacute;tja  a f&aacute;jl hossz&aacute;t. Ez arra j&oacute;, ha csak bizonyos szerkesztett sorokat akarunk egy f&aacute;jlba ki&iacute;rni.</td></tr></table>

<p>P&eacute;ld&aacute;k:</p>

<p><code class="code">s/(ab).*/\1/ </code> att&oacute;l a pontt&oacute;l kezdve, ahogy ab-t tal&aacute;l a sorban, az eg&eacute;sz sort ab-re cser&eacute;li.</p>

<p><code class="code">s/ab/xy/2</code>&nbsp;&nbsp; a sorban tal&aacute;lhat&oacute; m&aacute;sodik ab-t cser&eacute;li xy-ra.</p>

<p><code class="code">s/^.*$/x&amp;x/</code>&nbsp;&nbsp; beilleszt a kiv&aacute;lasztott sor elej&eacute;re &eacute;s v&eacute;g&eacute;re egy kis x karaktert: a kifejez&eacute;s: <code class="code">^.*$</code> a teljes sort kiv&aacute;lasztja: a csere sztring pedig egy kis x, ut&aacute;na a kifejez&eacute;ssel kiv&aacute;lasztott r&eacute;sz (az &amp; &iacute;gy a teljes sort jelenti) ut&aacute;na ism&eacute;t egy kis x.</p>

<p><code class="code">s/[0-9]/x/2</code>&nbsp;&nbsp; a szerkesztett sorban el&#337;fordul&oacute; 2.-dik sz&aacute;mjegyet kis x-el helyettes&iacute;ti.</p>

<p><code class="code">/[0-9]/-/g</code>&nbsp;&nbsp;  a szerkesztett sorban el&#337;fordul&oacute; &ouml;sszes sz&aacute;mjegyet k&ouml;t&#337;jellel helyettes&iacute;ti.</p>

<p><code class="code">1,3s/^[0-9]//w o.txt</code>&nbsp;&nbsp;  az els&#337;t&#337;l a 3.-dik sorig t&ouml;r&ouml;l egy sz&aacute;mjegyet a sor elej&eacute;r&#337;l, &eacute;s a szerkesztett sort (amellett, hogy elv&eacute;gzi a <span class="command"><strong>sed</strong></span> be&aacute;ll&iacute;tott kimenetre &iacute;r&aacute;s&aacute;t) ki&iacute;rja az <code class="filename">o.txt</code> f&aacute;jlba - ezt a <span class="command"><strong>sed</strong></span> ind&iacute;t&aacute;skor null&aacute;zza ha l&eacute;tezik.</p>


</td></tr><tr><td align="center" valign="top">
<div class="literallayout"><p><br>
<code class="code">c&iacute;m&nbsp;{parancs1;<br>
parancs2}</code><br>
</p></div>
</td><td align="left" valign="top">
<p>Kapcsos z&aacute;r&oacute;jelet haszn&aacute;lunk a <span class="command"><strong>sed</strong></span> parancsok csoportos&iacute;t&aacute;s&aacute;ra: egy c&iacute;mtartom&aacute;nyhoz t&ouml;bb parancsot tudunk &iacute;gy rendelni, amelyek egym&aacute;s ut&aacute;n ker&uuml;lnek megh&iacute;v&aacute;sra. Az al&aacute;bbi sed szkript veszi a <code class="code">mas</code> -al kezd&#337;d&#337; sort, elv&eacute;gez benne egy helyettes&iacute;t&eacute;st &eacute;s kinyomtatja:</p>
<pre class="screen">
$ sed -n '/^mas/{ s/a/b/; p }' szoveg.txt
$ 
</pre>
</td></tr></tbody></table>
        </div> 

<p>Tov&aacute;bbi p&eacute;ld&aacute;k:</p>


   <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>T&ouml;r&ouml;lj&uuml;k egy sz&ouml;vegb&#337;l az &uuml;res sorokat:</p>
<pre class="screen">
$ sed -r '/^$/d' teszt.txt
$ 
</pre>
	  </li><li class="listitem">
<p>Cser&eacute;lj&uuml;k ki a sz&ouml;vegben mindenhol a <code class="literal">get</code> sz&oacute;t <code class="literal">put</code>-ra:</p>
<pre class="screen">
$ sed -r 's/get/put/g' teszt.txt
$ 
</pre>
<p>A fenti m&#369;velet a get sorozat minden el&#337;fordul&aacute;s&aacute;t lecser&eacute;li: ha azt akarjuk, hogy val&oacute;ban teljes szavakat cser&eacute;ljen ki, akkor &iacute;gy kell haszn&aacute;ljuk (megadjuk  sz&oacute; k&eacute;t v&eacute;g&eacute;n a sz&oacute;hat&aacute;rt):</p>
<pre class="screen">
$ sed -r 's/\bget\b/put/g' teszt.txt
</pre>
	  </li><li class="listitem">
<p>Cser&eacute;lj&uuml;k ki a <code class="code">California Hotel</code> sz&oacute;p&aacute;rt <code class="code">Hotel California</code> -&aacute;ra :</p>
<pre class="screen">
$ echo 'Hotel California' | sed -r 's/(Hotel) (California)/\2 \1/' 
California Hotel 
$ 
</pre>
<p>Vagy &aacute;ltal&aacute;nosabban, minden sorban cser&eacute;lj&uuml;k fel az els&#337; k&eacute;t sz&oacute;t:</p>
<pre class="screen">
$ echo 'elso masodik harmadik' | sed -r 's/^(\w+) (\w+)/\2 \1/' 
masodik elso harmadik 
$
</pre>
	  </li><li class="listitem">
<p>Minden C f&aacute;jlban cser&eacute;lj&uuml;k ki az <code class="code">elso_fuggveny</code> azonos&iacute;t&oacute;t <code class="code">masodik_fuggveny</code>-re:</p>
<pre class="screen">
$ sed -is -e 's/\belso_fuggveny\b/masodik_fuggveny/g' *.c 
$
</pre>
<p>Ebben p&eacute;ld&aacute;ban haszn&aacute;ltuk <code class="option">-i</code> (<span class="emphasis"><em>in place</em></span>) &eacute;s <code class="option">-s</code> (<span class="emphasis"><em>separate</em></span>) opci&oacute;kat: ezek a f&aacute;jlt a lemezen szerkesztik meg (ott ahol van) &eacute;s &uacute;gy, hogy minden f&aacute;jlt k&uuml;l&ouml;n (separate). Egy&eacute;bk&eacute;nt a <span class="command"><strong>sed</strong></span> az &ouml;sszes megc&eacute;lzott f&aacute;jlt egyetlen bemeneti folyamnak tekinten&eacute;.</p>
      </li><li class="listitem">
<p>Nyomtassuk ki az els&#337; olyan sort amelyik kis a bet&#369;vel kezd&#337;dik, &eacute;s ut&aacute;na l&eacute;pj&uuml;nk ki:</p>
<pre class="screen">
$ sed -rn '/^a/{p;q}' teszt.txt
$ 
</pre>
	  </li><li class="listitem">
<p>Helyettes&iacute;ts&uuml;nk minden tabul&aacute;tor karaktert 4 sz&oacute;k&ouml;zzel:</p>
<pre class="screen">
$ #tesztelj&uuml;k, hogy az echo val&oacute;ban tabul&aacute;torokat &iacute;r
$ #a cat -A opci&oacute;val ki&iacute;rja a kontrol karaktereket, 
$ #a tabul&aacute;tor Ctrl-I
$ echo -e '\t\t\t'   | cat -A 
^I^I^I$ 
$ #&aacute;t&iacute;rjuk a tabul&aacute;torokat sz&oacute;k&ouml;zz&eacute; &eacute;s tesztelj&uuml;k, 
$ #hogy val&oacute;ban &iacute;gy van
$ echo -e '\t\t\t'   | sed 's/\t/    /g'  |cat -A 
$ 
$ #az el&#337;z&#337; sorban m&aacute;r nincsenek Ctrl-I karakterek 
</pre>
	  </li><li class="listitem">
<p>Sz&oacute;k&ouml;zzel lv&aacute;lasztott mez&#337;k kezel&eacute;se, pl.: h&aacute;rom k&ouml;z&uuml;l hagyjuk meg csak a m&aacute;sodik mez&#337;t:</p>
<pre class="screen">
$ cat a.txt 
aaa bbb ccc 
111 222 333 
$ cat a.txt | sed -r 's/([^ ]+) ([^ ]+) ([^ ]+)/\2/' 
bbb 
222 
$ 
</pre>
	  </li><li class="listitem">
<p>A sed megjegyzi a legut&oacute;bb haszn&aacute;lt regul&aacute;ris kifejez&eacute;s az s parancs sz&aacute;m&aacute;ra, &eacute;s amennyiben &uuml;res regul&aacute;ris kifejez&eacute;st adunk meg, akkor a megjegyzettet haszn&aacute;lja:</p>
<pre class="screen">
$ cat &gt; b.txt
12
34
$ # a fenti k&eacute;t sz&aacute;m van a b.txt k&eacute;t sor&aacute;ban
$ # elv&eacute;gz&uuml;nk 2 helyettes&iacute;t&eacute;st, de a m&aacute;sodikn&aacute;l 
$ # nem adjuk meg a regul&aacute;ris kifejez&eacute;st
$ sed -r 's/^([0-9])/x/;n;s//y/;' b.txt
x2
y4
$ 
</pre>
<p>Helyettes&iacute;ti a sor els&#337; sz&aacute;mjegy&eacute;t egy x-el, ut&aacute;na m&aacute;sik sort vesz, &eacute;s ugyanazt a poz&iacute;ci&oacute;t helyettes&iacute;ti y-al.</p>
	  </li></ol></div>


</div>


<div class="sect2" title="A sed ritk&aacute;bban haszn&aacute;lt parancsai"><div class="titlepage"><div><div><h3 class="title" id="d5e4105">A sed ritk&aacute;bban haszn&aacute;lt parancsai</h3></div></div></div>

<p>A sed rendelkezik m&eacute;g n&eacute;h&aacute;ny paranccsal, amelyek seg&iacute;ts&eacute;g&eacute;vel  &ouml;sszetett m&#369;veletekre is k&eacute;pes.</p>

     <div class="informaltable">
                <table cellpadding="2" border="1"><colgroup><col width="25%" class="col1"><col width="75%" class="col2"></colgroup><thead><tr><th align="center">Parancs</th><th align="center">Mit v&eacute;gez</th></tr></thead><tbody><tr><td align="center" valign="top"><code class="code">y/halmaz1/halmaz2/</code></td><td align="left" valign="top">
<p>Karaktercsere (az eredm&eacute;ny azonos a <span class="command"><strong>tr</strong></span> program&eacute;val).</p><p> A k&eacute;t halmazban ugyanannyi karakternek kell lennie. Nem haszn&aacute;lhat&oacute;ak karakterfelsorol&aacute;sok  &#8211; -el (mint a tr programn&aacute;l).</p>
<p><code class="code">y/ax/AX/</code>&nbsp;&nbsp; cser&eacute;l minden a &eacute;s x kisbet&#369;t nagyra</p>
</td></tr><tr><td align="center" valign="top">
<pre class="programlisting">
a\
szoveg
</pre>
</td><td align="left" valign="top">
<p>Hozz&aacute;f&#369;z&eacute;s (<span class="emphasis"><em>append</em></span>)</p>
<p>Csak egy c&iacute;m haszn&aacute;lhat&oacute; a parancs el&#337;tt. A szoveg -et a mintat&eacute;r tartalma ut&aacute;n f&#369;zi. T&ouml;bb sor besz&uacute;r&aacute;sa eset&eacute;n mindig sorv&eacute;gi <code class="code">\</code> -el kell jelezni, hogy ism&eacute;t egy sor k&ouml;vetkezik.</p>
<pre class="programlisting">
a\
Elso sor\
masodik sor 
</pre>
<p>Az <code class="code">a</code>, <code class="code">i</code>, <code class="code">c</code> parancsokkal besz&uacute;rt sz&ouml;vegek nem ker&uuml;lnek tov&aacute;bbi feldolgoz&aacute;sra.</p>
</td></tr><tr><td align="center" valign="top">
<pre class="programlisting">
i\
szoveg
</pre>
</td><td align="left" valign="top">
<p>Besz&uacute;r&aacute;s (<span class="emphasis"><em>insert</em></span>)</p>
<p>A mintat&eacute;r el&eacute; f&#369;zi a sz&ouml;veget</p>
</td></tr><tr><td align="center" valign="top">
<pre class="programlisting">
c\
szoveg
</pre>
</td><td align="left" valign="top">
<p>V&aacute;ltoztat (change)</p>
<p>Kicser&eacute;li a mintat&eacute;r tartalm&aacute;t a sz&ouml;veggel.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">=</code></td><td align="left" valign="top">
<p>Ki&iacute;rja a c&iacute;mzett sor sz&aacute;m&aacute;t a kimenetre.</p><p>P&eacute;ld&aacute;ul az al&aacute;bbi sed szkript a <span class="command"><strong>wc</strong></span> <code class="option">-l</code>  parancsot helyettes&iacute;theti: </p>
<pre class="programlisting">
$=
</pre>
<p>Az utols&oacute; sorn&aacute;l ki&iacute;rja a sor sorsz&aacute;m&aacute;t, haszn&aacute;lata:</p>
<pre class="screen">
$ cat teszt.txt | sed -n '$=' 
3 
$
</pre>
</td></tr><tr><td align="center" valign="top"><code class="code">r file</code></td><td align="left" valign="top">
<p>Beolvassa a <code class="filename">file</code> f&aacute;jlt. Csak egy c&iacute;m szerepelhet el&#337;tte. Ha <code class="code">file</code> nem olvashat&oacute;, sz&oacute; n&eacute;lk&uuml;l dolgozik tov&aacute;bb. A beolvasott sz&ouml;veg a c&iacute;mzett sor ut&aacute;n ker&uuml;l a kimenetre.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">w file</code></td><td align="left" valign="top">
<p>Ki&iacute;rja a mintateret egy f&aacute;jlba. Az indul&aacute;skor l&eacute;trehozza, vagy nulla hosszra viszi a f&aacute;jlt ha az l&eacute;tezik. Ha a <code class="code">file</code> n&eacute;v t&ouml;bb <code class="code">w</code> vagy <code class="code">s</code> parancs ut&aacute;ni <code class="code">w</code> opci&oacute;ban szerepel, ezeket ugyanabba a f&aacute;jlba &iacute;rja egym&aacute;s ut&aacute;n.
</p>
</td></tr><tr><td align="center" valign="top"><code class="code">n</code></td><td align="left" valign="top">
<p>K&ouml;vetkez&#337; sor (<span class="emphasis"><em>next</em></span>)</p>
<p>&Uacute;j sort vesz a feldolgozand&oacute; sz&ouml;vegb&#337;l, a n&eacute;lk&uuml;l, hogy &uacute;j ciklust kezdene. Ez el&#337;tt ki&iacute;rja a mintateret (amennyiben ez nincs letiltva a <code class="option">-n</code> opci&oacute;val). Ha nincs t&ouml;bb sor, a <span class="command"><strong>sed</strong></span> kil&eacute;p. Az al&aacute;bbi szkript a bemenet minden m&aacute;sodik sor&aacute;t list&aacute;zza:</p>
<pre class="screen">
$ sed -n 'n ; p' teszt.txt
</pre>
</td></tr><tr><td align="center" valign="top">
<div class="literallayout"><p><br>
<code class="code">e&nbsp;<br>
shell_parancs</code><br>
</p></div>
</td><td align="left" valign="top">
<p>Az <code class="code">e</code> parancs hat&aacute;s&aacute;ra a sed v&eacute;grehajt egy parancsot a shell alatt, &eacute;s a kimenet&eacute;t a mintat&eacute;rbe &iacute;rja az &eacute;ppen beolvasott sor el&eacute;. A k&ouml;vetkez&#337; szkript a bemenet m&aacute;sodik sora el&eacute; sz&uacute;rja az <span class="command"><strong>id</strong></span> parancs kimenet&eacute;t:</p>

<pre class="screen">
$ id -u
500
$ echo -e "a felhasz&aacute;l&oacute; azonos&iacute;t&oacute;m\n-as"
a felhasz&aacute;l&oacute; azonos&iacute;t&oacute;m
-as
$ echo -e "a felhasz&aacute;l&oacute; azonos&iacute;t&oacute;m\n-as" | \
  sed '2e id -u'
a felhasz&aacute;l&oacute; azonos&iacute;t&oacute;m
500
-as
</pre>

</td></tr></tbody></table>
        </div> 

</div>

<div class="sect2" title="A hold pufferre vonatkoz&oacute; parancsok"><div class="titlepage"><div><div><h3 class="title" id="d5e4198">A hold pufferre vonatkoz&oacute; parancsok</h3></div></div></div>
<p>&Eacute;rdekess&eacute;gk&eacute;nt megeml&iacute;tj&uuml;k a hold pufferre vonatkoz&oacute; parancsokat is. A hold puffer sz&ouml;vegsorok t&aacute;rol&aacute;s&aacute;t teszi lehet&#337;v&eacute; feldolgoz&aacute;s k&ouml;zben. Az al&aacute;bbi m&#369;veleteket lehet v&eacute;gezni:</p>


     <div class="informaltable">
                <table cellpadding="2" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Parancs</th><th align="center">Mit v&eacute;gez</th></tr></thead><tbody><tr><td align="center" valign="top"><code class="code">N</code></td><td align="left" valign="top">
<p>&Uacute;j sort vesz a bemenetr&#337;l, egy &uacute;jsor karaktert &iacute;r a mintat&eacute;r v&eacute;g&eacute;re, &eacute;s ut&aacute;na illeszti a sort. Ha ez az utols&oacute; bementi sor, a <span class="command"><strong>sed</strong></span> kil&eacute;p.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">P</code></td><td align="left" valign="top">
<p>Ki&iacute;rja a mintat&eacute;r tartalm&aacute;t az els&#337; &uacute;jsorig.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">h</code></td><td align="left" valign="top">
<p>A mintateret &aacute;t&iacute;rja a hold t&eacute;rbe.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">H</code></td><td align="left" valign="top">
<p>A mintateret a hold t&eacute;r v&eacute;g&eacute;re &iacute;rja egy &uacute;jsor karakterrel egy&uuml;tt.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">g</code></td><td align="left" valign="top">
<p>&Aacute;tveszi a hold t&eacute;r tartalm&aacute;t a mintat&eacute;rbe.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">G</code></td><td align="left" valign="top">
<p>A hold t&eacute;r tartalm&aacute;t a mintat&eacute;r v&eacute;g&eacute;re illeszti, el&eacute; egy &uacute;jsor karaktert &iacute;r.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">x</code></td><td align="left" valign="top">
<p>Kicser&eacute;li a hold &eacute;s a mintat&eacute;r tartalm&aacute;t.</p>
</td></tr><tr><td align="center" valign="top"><code class="code">D</code></td><td align="left" valign="top">
<p>Kit&ouml;r&ouml;l egy sort a mintat&eacute;rb&#337;l: az els&#337; &uacute;jsorig. Ha marad m&eacute;g sz&ouml;veg a mintat&eacute;rben, akkor &uacute;j ciklust kezd, an&eacute;lk&uuml;l, hogy &uacute;j sort olvasna.</p>
</td></tr></tbody></table>
        </div> 

<p>&Iacute;me n&eacute;h&aacute;ny j&oacute;l ismert p&eacute;lda a haszn&aacute;latukra:</p>


   <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>Besz&uacute;r egy &uuml;res sort minden sor ut&aacute;n:</p>
<pre class="screen">
$ sed 'G' teszt.txt
$ 
</pre>
</li><li class="listitem">
<p>"Megford&iacute;tja" a bemeneti f&aacute;jlt, az utols&oacute; sort els&#337;nek list&aacute;zza:</p>
<pre class="screen">
$ sed -n 'G;h; $p' teszt.txt
$ 
</pre>
</li><li class="listitem">
<p>K&eacute;t egym&aacute;s ut&aacute;ni sorb&oacute;l egye sort &aacute;ll&iacute;t el&#337;:</p>
<pre class="programlisting">
#!/bin/sed -nf 
#a program &ouml;sszeragaszt k&eacute;t egym&aacute;s ut&aacute;ni sort 
        #miel&#337;tt az N v&eacute;grehajt&oacute;dik, m&aacute;r van egy sor beolvasva
N       #k&ouml;vetkez&#337; sor a mintat&eacute;rbe 
s/\n//  #&aacute;t&iacute;rom az &uacute;jsor karaktert a 2 sor k&ouml;z&ouml;tt &uuml;resre 
        #ezut&aacute;n a sed automatikusan ki&iacute;rja a mintateret
</pre>
</li><li class="listitem">
<p>A <span class="command"><strong>tac</strong></span> parancs szimul&aacute;l&aacute;sa (a <span class="command"><strong>tac</strong></span> a <span class="command"><strong>cat</strong></span> ford&iacute;tott m&#369;velet&eacute;t v&eacute;gzi, ford&iacute;tva list&aacute;zza a f&aacute;jlt, els&#337;nek az utols&oacute; sort):</p>
<pre class="programlisting">
#!/bin/sed -nf 
#ford&iacute;tva list&aacute;z ki egy &aacute;llom&aacute;nyt, mint a tac 
#haszn&aacute;lat: 
# sed -nf reverse.sed file.txt

1!G  #visszak&eacute;rj&uuml;k a teljes hold puffert,
     #&iacute;gy a beolvasott lesz az els&#337; sor 
     #az els&#337; sor eset&eacute;ben nem kell ezt csin&aacute;lni, ez&eacute;rt 1!
$p   #az utols&oacute; sorn&aacute;l nyomtatunk, minden eddigi sort egyszerre 

h    #az &ouml;sszes eddig beker&uuml;l a hold pufferbe 
     #minden ciklus v&eacute;g&eacute;n, ford&iacute;tott sorrendben
</pre>
<p>Ugyanennek a feladatnak egy m&aacute;sik megold&aacute;sa az al&aacute;bbi:</p>
<pre class="screen">
$ sed -n -r '1h;1!{x;H};${g;p}' teszt.txt
$ 
</pre>
</li></ol></div>


</div>

</div>

<div class="sect1" title="P&eacute;ld&aacute;k a sed haszn&aacute;lat&aacute;ra h&eacute;jprogramokban"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4270">P&eacute;ld&aacute;k a sed haszn&aacute;lat&aacute;ra h&eacute;jprogramokban</h2></div></div></div>
<p>A sed haszn&aacute;lhat&oacute; parancssorr&oacute;l, futtathat hosszabb sed szkriptet k&uuml;l&ouml;n f&aacute;jlb&oacute;l &eacute;s haszn&aacute;lhat&oacute; h&eacute;jprogramokban kis m&#369;veletek elv&eacute;gz&eacute;s&eacute;re. A sed ak&aacute;r t&ouml;bb f&aacute;jlon is elv&eacute;gez parancssoron kiadott m&#369;veleteket ha felsoroljuk azokat argumentum&aacute;ban. &Iacute;gy megh&iacute;vhatjuk egy-egy &ouml;n&aacute;ll&oacute; feladat elv&eacute;gz&eacute;s&eacute;re szkriptekb&#337;l is</p>


<p>Szkriptekben a <span class="command"><strong>sed</strong></span> parancsot eg&eacute;sz kis m&#369;veletek kapcs&aacute;n is haszn&aacute;ljuk, igen gyakran a helyettes&iacute;t&#337; <code class="code">s</code> parancs&aacute;t, ha egy sztringet valamilyen okb&oacute;l szerkeszteni kell. Ilyen pl. a f&uuml;ggv&eacute;nyeket bemutat&oacute; szekci&oacute;ban az <a class="link" href="#fun_val" title="F&uuml;ggv&eacute;nyek &eacute;rt&eacute;k visszat&eacute;r&iacute;t&eacute;se">&eacute;rt&eacute;k visszat&eacute;r&iacute;t&#337; p&eacute;lda</a>.</p>

<p>Gyakran haszn&aacute;ljuk sz&#369;r&#337;k&eacute;nt, sz&ouml;veges f&aacute;jlok el&#337;feldolgoz&aacute;s&aacute;hoz. Az al&aacute;bbi p&eacute;ld&aacute;ban adott CSV f&aacute;jlb&oacute;l p&eacute;ld&aacute;ul a 3. oszlopot szeretn&eacute;nk haszn&aacute;lni, ugyanakkor az els&#337; sort&oacute;l meg kellene szabadulni:</p>

<pre class="screen">
$ cat lista.csv
Tipus  db   Ar  raktar
A   2   22.50    i
B   1   17.80    i
F   2   17.10    n
G   3   1.12    i
H   2   12.10   i
O   1   12.00    n
$
</pre>

<p>Az al&aacute;bbi sz&#369;r&eacute;s elv&eacute;gzi a feladatot (a teljes sorra illeszt&uuml;nk regul&aacute;ris kifejez&eacute;st, &eacute;s helyette csak a kiv&aacute;lasztott mez&#337;t &iacute;rjuk vissza, miut&aacute;n meggy&#337;z&#337;d&uuml;nk, hogy az elv&aacute;laszt&oacute;k val&oacute;ban sz&oacute;k&ouml;z&ouml;k, &eacute;s nem tabul&aacute;torok):</p>

<pre class="screen">
$ cat lista.csv | sed -r '1d;s/^[A-Z] + [0-9] +([^ ]+).*/\1/'
22.50
17.80
17.10
1.12
12.10
12.00
$
</pre>

<p>Megjegyz&eacute;s: a fenti feladatra, k&uuml;l&ouml;n&ouml;sen ha sz&aacute;molni is kell a kiv&aacute;lasztott sz&aacute;msorral alkalmasabb az awk (l&aacute;sd  <a class="link" href="#awk" title="10. fejezet - Az awk">Az awk  fejezetet</a>).</p>

<p>Szkriptb&#337;l t&ouml;rt&eacute;n&#337; f&aacute;jl szerkeszt&eacute;sn&eacute;l viszont  ink&aacute;bb a <span class="command"><strong>sed</strong></span>-et haszn&aacute;ljuk.</p>
<p>P&eacute;ld&aacute;ul ha egy program konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nya gyakran v&aacute;ltozik, param&eacute;tereket kell &aacute;t&iacute;rni benne, &eacute;rdemes annak egy sablont k&eacute;sz&iacute;teni, &eacute;s a sablont az aktu&aacute;lis v&aacute;ltoz&oacute;kra &aacute;t&iacute;rni egy szkripttel.</p>
<p>Legyen a kis p&eacute;lda sablonunk (<code class="filename">ip.conf.tpl</code>) az al&aacute;bbi:</p>

<div class="literallayout"><p><br>
<br>
#tartalom<br>
<br>
#IP&nbsp;be&aacute;ll&iacute;t&aacute;s<br>
IP&nbsp;=&nbsp;$MY_IP<br>
<br>
#tartalom<br>
<br>
</p></div>

<p>A <code class="code">$MY_IP</code> helyett akarunk egy IP c&iacute;met besz&uacute;rni a szerkeszt&eacute;sn&eacute;l, &eacute;s az <code class="filename">ip.conf.tpl</code> f&aacute;jlb&oacute;l egy <code class="filename">ip.conf</code> nev&#369;t l&eacute;trehozni. Az al&aacute;bbi kis szkript elv&eacute;gzi ezt, param&eacute;tere az IP sz&aacute;m:</p>
<pre class="programlisting">
#!/bin/bash
#v&aacute;ltoz&oacute; helyett egy IP sz&aacute;mot &iacute;r egy konfigur&aacute;ci&oacute;s
#&aacute;llom&aacute;ny sablonj&aacute;ba
#Param&eacute;ter:
#   $1 - IP sz&aacute;m

#ellen&#337;rizz&uuml;k, hogy val&oacute;ban IP sz&aacute;m

TEMPLATE=ip.conf.tpl
CONF=ip.conf

if ! echo "$1" | egrep -q '^([0-9]{1,3}\.){3}[0-9]{1,3}$'
then
    echo make_conf: Nem IP sz&aacute;m: "$1"
    exit 1
fi

sed -r '/^IP /s/\$MY_IP/'"$1"'/' "$TEMPLATE" &gt; "$CONF"
</pre>

<p>Ellen&#337;rizz&uuml;k az IP sz&aacute;m form&aacute;tum&aacute;t (felt&eacute;telezz&uuml;k, hogy a legegyszer&#369;bb alakban j&ouml;n, &eacute;s b&aacute;rmilyen sz&aacute;mot elfogadunk), majd a <span class="command"><strong>sed</strong></span>-et szerkeszt&#337;k&eacute;nt haszn&aacute;lva l&eacute;trehozzuk az &uacute;j f&aacute;jlt a kimeneten. L&aacute;that&oacute;, hogy a <span class="command"><strong>sed</strong></span> parancsh&iacute;v&aacute;st t&ouml;bb sztringb&#337;l raktuk &ouml;ssze, mert az aposztr&oacute;fok k&ouml;zti sed parancssor nem terjesztette volna ki a <code class="varname">$1</code> v&aacute;ltoz&oacute; referenci&aacute;t. A <code class="code">$</code> metakarakter, &iacute;gy <code class="code">\$</code>-t &iacute;runk ahhoz, hogy liter&aacute;lisan jelenjen meg a regul&aacute;ris kifejez&eacute;sben. V&eacute;grehajtva el&#337;sz&ouml;r hib&aacute;san majd helyesen:</p>

<pre class="screen">
$  bash make_conf.sh 192.168.1
make_conf: Nem IP sz&aacute;m: 192.168.1
$  bash make_conf.sh 192.168.1.1
$ cat ip.conf

#tartalom

#IP be&aacute;ll&iacute;t&aacute;s
IP = 192.168.1.1

#tartalom

$
</pre>

<p>Az k&ouml;vetkez&#337; p&eacute;ld&aacute;ban (<code class="filename">elines_clean.sh</code>) kit&ouml;r&ouml;lj&uuml;k az &uuml;res sorokat egy k&ouml;nyvt&aacute;r sz&ouml;veges &aacute;llom&aacute;nyaib&oacute;l, de csak azokban, amelyekben t&ouml;bb &uuml;res sor van mint egy adott sz&aacute;m. A t&ouml;rl&eacute;si m&#369;veletet egyetlen <span class="command"><strong>sed</strong></span> paranccsal v&eacute;gre lehet hajtani, viszont a kiv&aacute;laszt&aacute;si felt&eacute;telt egyszer&#369;bb egy szkripttel megoldani.</p>

<pre class="programlisting">
#!/bin/bash
#t&ouml;rli az &uuml;res sorokat azokb&oacute;l a sz&ouml;veges &aacute;llom&aacute;nyokb&oacute;l
#amelyekben az &uuml;res sorok sz&aacute;ma meghalad egy N sz&aacute;mot
#Param&eacute;terek:
#   $1 - c&eacute;lk&ouml;nyvt&aacute;r neve
#   $2 - sorok sz&aacute;ma
#

#param&eacute;ter &aacute;tv&eacute;tel
d=${1:? az els&#337; param&eacute;ter a k&ouml;nyvt&aacute;rn&eacute;v}

#&eacute;les szkriptekn&eacute;l aj&aacute;nlatos ellen&#337;rizni, hogy N eg&eacute;sz sz&aacute;m 
#ezt itt nem tessz&uuml;k meg 
N=${2:? a m&aacute;sodik param&eacute;ter a sorok sz&aacute;m&aacute;nak hat&aacute;ra}

for f in $( ls "$d" )
do
    #el&#337;&aacute;ll&iacute;tom a c&eacute;lf&aacute;jl teljes el&eacute;r&eacute;si &uacute;tj&aacute;t egy v&aacute;ltoz&oacute;ban
    target="$d/$f";

    #ellen&#337;rz&ouml;m, hogy a f&aacute;jl val&oacute;ban sz&ouml;veges
    if ! file "$target" | egrep -q 'text'
    then
        echo elines_clean: a "$target" nem sz&ouml;veges vagy &uuml;res
	  #ha nem sz&ouml;veges, a &uacute;j ciklus
       continue
    fi

    #h&aacute;ny &uuml;res sor van a kiv&aacute;lasztott f&aacute;jlban
    empty=$( egrep '^$' "$target" | wc -l )

    if (( empty &gt; N ))
    then
      sed -i.bak -r '/^$/d' "$target"
      echo elines_clean: "$target" szerkesztve
    fi
done
</pre>

<p>V&eacute;grehajtva a <code class="filename">teszt_sed</code> k&ouml;nyvt&aacute;ron, amelyet a v&eacute;grehajt&aacute;s el&#337;tt &eacute;s ut&aacute;n is list&aacute;zunk:</p>

<pre class="screen">
$ ls teszt_sed
1.txt  2.txt  3.txt  4.txt  5.txt
$ bash elines_clean.sh teszt_sed 3
elines_clean: teszt_sed/1.txt szerkesztve
elines_clean: teszt_sed/3.txt szerkesztve
elines_clean: a teszt_sed/4.txt nem sz&ouml;veges vagy &uuml;res
$ ls teszt_sed
1.txt  1.txt.bak  2.txt  3.txt  3.txt.bak  4.txt  5.txt
$ 
</pre>

<p><span class="strong"><strong>Megjegyz&eacute;sek</strong></span></p>

<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>Mivel a sed st&iacute;lus&uacute; szerkeszt&eacute;s megv&aacute;ltoztatja a f&aacute;jlt, &eacute;s csak sz&ouml;veges f&aacute;jlokon van &eacute;rtelme, ezt ellen&#337;rizz&uuml;k.</p>
<p>A <a class="indexterm" name="d5e4314"></a> <span class="command"><strong>file</strong></span> parancs ki&iacute;rja egy f&aacute;jl t&iacute;pus&aacute;t:</p>
<pre class="screen">
$ file teszt_sed/1.txt
teszt_sed/1.txt: ASCII text
$
</pre>
<p>ezt a kimenetet ellen&#337;rizz&uuml;k az <span class="command"><strong>egrep</strong></span>-el.</p>
</li><li class="listitem">
<p>A <span class="command"><strong>sed -i</strong></span> opci&oacute;val v&eacute;gzi a helyben val&oacute; szerkeszt&eacute;st (teh&aacute;t ilyenkor nem a kimenetre &iacute;rja a feldolgozott f&aacute;jlt, hanem meg is szerkeszti). Pl.:</p>
<pre class="screen">
$ sed -i -r '/^$/d' teszt_sed/1.txt
$
</pre>
<p>A m&#369;velet vesz&eacute;lyes, mert ilyenkor csak a megszerkesztett f&aacute;jl marad az <code class="filename">1.txt</code> n&eacute;v alatt, &iacute;gy lehet&#337;s&eacute;g van arra, hogy h&aacute;tt&eacute;r m&aacute;solatot is k&eacute;sz&iacute;ts&uuml;nk. A m&aacute;solat nev&eacute;nek kiterjeszt&eacute;s&eacute;t meg lehet adni k&ouml;zvetlen&uuml;l az <code class="option">-i</code> opci&oacute; ut&aacute;n, pl. ha azt karjuk, hogy egy <code class="filename">.bak</code> nev&#369; kiterjeszt&eacute;s&#369; m&aacute;solat keletkezzen, a feladatban is haszn&aacute;lt megold&aacute;s:</p>
<pre class="screen">
$ sed -i.bak -r '/^$/d' teszt_sed/1.txt
$
</pre>
</li></ol></div>
<div class="warning" title="A sed -i &eacute;s -s opci&oacute;i" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning: A sed -i &eacute;s -s opci&oacute;i"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Figyelem]" src="images/warning.png"></td><th align="left">A sed -i &eacute;s -s opci&oacute;i</th></tr><tr><td align="left" valign="top">

<p>
Fontos: ha egyszerre t&ouml;bb f&aacute;jlt adunk meg a parancssoron, a kimenet szempontj&aacute;b&oacute;l a <span class="command"><strong>sed</strong></span> egyetlen kimeneti folyamot k&eacute;sz&iacute;t bel&#337;l&uuml;k. &Iacute;gy <code class="option">-i</code> <span class="emphasis"><em>inline</em></span> szerkeszt&eacute;s eset&eacute;n meg kell adni, hogy egyenk&eacute;nt szerkessze a f&aacute;jlokat, ezt a <code class="option">-s</code> opci&oacute;val tessz&uuml;k, &eacute;s &iacute;gy meg lehet adni neki egy t&ouml;bb f&aacute;jlt kiv&aacute;laszt&oacute; mint&aacute;t, mint a <code class="filename">*.txt</code>. K&uuml;l&ouml;n-k&uuml;l&ouml;n fogja &#337;ket szerkeszteni:</p>
<pre class="screen">
$ sed -s -i.bak -r '/^$/d' teszt_sed/*.txt
$
</pre>

</td></tr></table></div>
<p>B&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;seket haszn&aacute;lunk, ez&eacute;rt minden esetben alkalmazzuk a <code class="option">-r</code> opci&oacute;t.</p>

</div>

</div>

    <div class="chapter" title="10. fejezet - Az awk" id="awk"><div class="titlepage"><div><div><h2 class="title">10. fejezet - <a class="indexterm" name="d5e4342"></a>Az awk</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e4344">Bevezet&#337;</a></span></dt><dt><span class="sect1"><a href="#d5e4355">Az awk parancs haszn&aacute;lata</a></span></dt><dt><span class="sect1"><a href="#d5e4401">M&#369;k&ouml;d&eacute;si elv</a></span></dt><dt><span class="sect1"><a href="#d5e4429">Az Awk programoz&aacute;si nyelv</a></span></dt><dt><span class="sect1"><a href="#d5e4457">Az Awk minta</a></span></dt><dt><span class="sect1"><a href="#d5e4540">Az utas&iacute;t&aacute;sok </a></span></dt><dt><span class="sect1"><a href="#d5e4555">A v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e4573">Bels&#337; v&aacute;ltoz&oacute;k</a></span></dt><dt><span class="sect1"><a href="#d5e4684">Konstansok</a></span></dt><dt><span class="sect1"><a href="#d5e4694">Oper&aacute;torok</a></span></dt><dt><span class="sect1"><a href="#d5e4713">Vez&eacute;rl&#337; kifejez&eacute;sek</a></span></dt><dt><span class="sect1"><a href="#d5e4726">Az Awk f&uuml;ggv&eacute;nyek</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e4729">A fontosabb numerikus f&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect2"><a href="#d5e4752">Fontosabb sztring f&uuml;ggv&eacute;nyek</a></span></dt><dt><span class="sect2"><a href="#d5e4830">Saj&aacute;t f&uuml;ggv&eacute;nyek</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e4865">Az awk haszn&aacute;lata h&eacute;jprogramokban</a></span></dt></dl></div>


<div class="sect1" title="Bevezet&#337;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4344">Bevezet&#337;</h2></div></div></div>
<p>Az Awk egy programoz&aacute;si nyelv, szerz&#337;i  "<span class="emphasis"><em>Awk, a pattern scanning and processing language</em></span>":  minta elemz&#337; &eacute;s feldolgoz&oacute; nyelv nevet adt&aacute;k neki. A nyelv tulajdonk&eacute;ppen b&aacute;rmilyen fel&eacute;p&iacute;t&eacute;s&#369; sz&ouml;vegb&#337;l mint&aacute;k alapj&aacute;n mez&#337;ket tud kiemelni, &eacute;s azokkal sz&aacute;m&iacute;t&aacute;si vagy szerkeszt&eacute;si m&#369;veleteket tud v&eacute;gezni. &Iacute;gy ak&aacute;r a Unix programok kimenet&eacute;t (pl. az <span class="command"><strong>ls</strong></span> <code class="option">-l</code>  parancs kimenet&eacute;t) ak&aacute;r  adatokat tartalmaz&oacute;, sz&ouml;vegmez&#337;kre bonthat&oacute; f&aacute;jlok (pl. a CSV t&iacute;pus&uacute; f&aacute;jlok) soraib&oacute;l ki lehet vele h&aacute;mozni egy feladat  megold&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges mez&#337;ket. A nyelv programoz&aacute;si szerkezetei a C nyelv utas&iacute;t&aacute;saira &eacute;p&uuml;lnek. Nev&eacute;t a szerz&#337;k nev&eacute;nek kezd&#337;bet&#369;ib&#337;l &aacute;ll&iacute;tott&aacute;k &ouml;ssze: Aho &#8211; Weinberger &#8211; Kernighan. Az Awk rendk&iacute;v&uuml;li m&oacute;don megk&ouml;nny&iacute;ti a sz&ouml;veges f&aacute;jlok feldolgoz&aacute;s&aacute;t. A m&eacute;rn&ouml;ki munk&aacute;ban nyers adatok el&#337;feldolgoz&aacute;s&aacute;t v&eacute;gezhetj&uuml;k vele k&ouml;nnyen.</p>

<p>Mivel szkript nyelv, kis mindennapi feladatok megold&aacute;s&aacute;t v&eacute;gezhetj&uuml;k el vele gyorsan. A nyelv szerz&#337;i nem aj&aacute;nlj&aacute;k a nyelvet nagy &eacute;s bonyolult feladatok megold&aacute;s&aacute;hoz: ennek ellen&eacute;re, el&eacute;g sok t&iacute;pus&uacute; feladatot lehet vele megoldani, k&uuml;l&ouml;n&ouml;sen azokat, amelyek rendszerprogramoz&aacute;shoz k&ouml;zeliek, &eacute;s val&oacute;s sz&aacute;mokkal is kell sz&aacute;molni.</p>
<p>Ez a fejezet az Awk fontosabb elemeit mutatja be. Kimer&iacute;t&#337; tanulm&aacute;nyoz&aacute;s&aacute;hoz a felhaszn&aacute;l&oacute;i k&eacute;zik&ouml;nyv is sz&uuml;ks&eacute;ges, amelynek van egy magyar ford&iacute;t&aacute;sa (<a class="link" href="#Ivanyi2005">Iv&aacute;nyi2005</a>). Ebben a r&ouml;vid bemutat&oacute;ban a hangs&uacute;ly a nyelv elveinek meg&eacute;rt&eacute;s&eacute;n &eacute;s h&eacute;jprogramokban val&oacute; haszn&aacute;lat&aacute;n van.</p>

<p>Felt&eacute;telezz&uuml;k, hogy az olvas&oacute; ismeri a C programoz&aacute;si nyelvet - az Awk nyelv t&ouml;bb szintaktikai elemet a C-hez hasonl&oacute;an haszn&aacute;l, &iacute;gy kis feladatokhoz k&ouml;nnyen elsaj&aacute;t&iacute;that&oacute; n&eacute;h&aacute;ny egyszer&#369; haszn&aacute;lati m&oacute;d azok sz&aacute;m&aacute;ra akik programoztak m&aacute;r C-ben.  Ha ez nincs &iacute;gy, aj&aacute;nljuk az el&#337;z&#337; bekezd&eacute;sben eml&iacute;tett Iv&aacute;nyi P&eacute;ter ford&iacute;t&aacute;snak tanulm&aacute;nyoz&aacute;s&aacute;t (vagy az aktu&aacute;lis angol nyelv&#369; k&eacute;zik&ouml;nyvet).</p>


<p>Az Awk-nak t&ouml;bb v&aacute;ltozata van, az al&aacute;bbiak a GNU Awk-ra &eacute;rv&eacute;nyesek Linux alatt.</p>

</div>

<div class="sect1" title="Az awk parancs haszn&aacute;lata"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4355">Az awk parancs haszn&aacute;lata</h2></div></div></div>

<p>A nyelvet &eacute;rtelmez&#337; <span class="command"><strong>awk</strong></span> parancs ind&iacute;t&aacute;sa hasonl&oacute; a <span class="command"><strong>sed</strong></span>-&eacute;hez, a program v&eacute;gigolvassa a bemenet&eacute;t (a standard input jelenti az implicit bemenetet), feldolgozza azt &eacute;s a kimenetre &iacute;r. A  <code class="option">-f</code> kapcsol&oacute; ugyan&uacute;gy a szkript f&aacute;jlra hivatkozik, de a szkript megjelenhet az els&#337; param&eacute;terben is id&eacute;z&#337;jelek k&ouml;z&ouml;tt.</p>

<p>N&eacute;h&aacute;ny fontos, &aacute;ltalunk is haszn&aacute;lt opci&oacute;ja:</p>


 <a name="awk_opt"></a><table border="0" summary="Simple list" class="simplelist"><tr><td><code class="option">-F c</code> &nbsp;<span class="emphasis"><em>Field separator</em></span>: meg&aacute;llap&iacute;tja a mez&#337;elv&aacute;laszt&oacute; karaktert. Ha nem adjuk meg, akkor az implicit elv&aacute;laszt&oacute; a sz&oacute;k&ouml;z &eacute;s a TAB, illetve ezek ism&eacute;tl&#337;d&eacute;se (tulajdonk&eacute;ppen egy regul&aacute;ris kifejez&eacute;s minta: <span class="regex"><code class="code">[ \t]+</code></span>  . </td></tr><tr><td><code class="option">-f f&aacute;jl</code> &nbsp;a szkript f&aacute;jl megad&aacute;sa.</td></tr><tr><td><code class="option">-v var=val</code> &nbsp;a var v&aacute;ltoz&oacute;nak val &eacute;rt&eacute;ket ad indul&aacute;s el&#337;tt.</td></tr></table>

<p>A leggyakrabban haszn&aacute;lt parancssori ind&iacute;t&aacute;sok az al&aacute;bbiak:</p>

<div class="cmdsynopsis"><p>
  <code class="command">awk</code> 
     <em class="replaceable"><code>program-sz&ouml;veg</code></em>  
   [ <em class="replaceable"><code>f&aacute;jl(ok)</code></em> ...]
</p></div>

<div class="cmdsynopsis"><p>
  <code class="command">awk</code> 
     <em class="replaceable"><code>-f program-f&aacute;jl</code></em>  
   [<em class="replaceable"><code>f&aacute;jl(ok)</code></em>...]
</p></div>

<p>Az els&#337; esetben az Awk szkript sz&ouml;vege a parancssoron van, &aacute;ltal&aacute;ban aposztr&oacute;fok k&ouml;z&ouml;tt,pl.:</p>

<pre class="screen">
$ awk '{print}' teszt.txt
</pre>

<p>A <code class="code">{print}</code> szkript egyszer&#369;en kinyomtatja a bemenetre &eacute;rkez&#337; sorokat.</p>

<p>A m&aacute;sodik esetben a szkript egy f&aacute;jlban van:</p>

<pre class="screen">
$ awk -f doit.awk teszt.txt
</pre>
<p>A bementi f&aacute;jlt megadhatjuk a standard bemenetre is:</p>

<pre class="screen">
$ cat teszt.txt | awk '{print}'  
</pre>

<p>Az Awk programokat</p>
<pre class="programlisting">
#!/bin/awk -f 
</pre>

<p>sorral kezd&#337;d&#337;en k&uuml;l&ouml;n f&aacute;jlba &iacute;rjuk, melynek az <code class="filename">.awk</code> kiterjeszt&eacute;st adjuk, hogy megk&uuml;l&ouml;nb&ouml;ztess&uuml;k &#337;ket m&aacute;s szkriptekt&#337;l (az el&eacute;r&eacute;si utat ellen&#337;rizz&uuml;k a <span class="command"><strong>which awk</strong></span> paranccsal saj&aacute;t rendszer&uuml;nk&ouml;n).</p>

<p>Megjegyz&eacute;s: a <code class="filename">.awk</code> kiterjeszt&eacute;s nem k&ouml;telez&#337;, a f&aacute;jl b&aacute;rmilyen nev&#369; lehet, helyes <span class="command"><strong>awk</strong></span> parancsokkal.</p>


</div>

<div class="sect1" title="M&#369;k&ouml;d&eacute;si elv"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4401">M&#369;k&ouml;d&eacute;si elv</h2></div></div></div>

<p>Az Awk a k&ouml;vetkez&#337; feldolgoz&aacute;si folyamatot alkalmazza a bemeneti sorokra: &uacute;gy tekinti a sorokat, mint egy elv&aacute;laszt&oacute; karakterrel (vagy karakter szekvenci&aacute;val) hat&aacute;rolt, <span class="emphasis"><em>mez&#337;kb&#337;l</em></span> &aacute;ll&oacute; sor. Egy sornak a neve <span class="emphasis"><em>rekord</em></span> (ez a feldolgoz&aacute;si egys&eacute;g). Pl. az al&aacute;bbi (zenesz&aacute;mok sz&ouml;vegeit tartalmaz&oacute; katal&oacute;gus egy sora) eset&eacute;ben:</p>

<div class="literallayout"><p><br>
112&nbsp;LinkinPark&nbsp;Numb&nbsp;numb.txt&nbsp;35<br>
</p></div>

<p>sornak 5 mez&#337;je van, az elv&aacute;laszt&oacute; egy vagy t&ouml;bb sz&oacute;k&ouml;z. A sor feldolgoz&aacute;sa k&ouml;zben a nyelv a mez&#337;kre a <code class="varname">$1</code>, <code class="varname">$2</code>, ... v&aacute;ltoz&oacute;kkal hivatkozik. Pl. a <code class="varname">$3 </code>&eacute;rt&eacute;ke  <code class="literal">Numb</code>. A teljes sorra a <code class="varname">$0</code> v&aacute;ltoz&oacute;val lehet hivatkozni.</p>

<p>A mez&#337;kre az al&aacute;bbi szerkezettel is lehet hivatkozni:</p>

<pre class="programlisting">
k=3
print $k
</pre>
<p>ahol k egy v&aacute;ltoz&oacute; (l&aacute;sd al&aacute;bb hogyan defini&aacute;ljuk a v&aacute;ltoz&oacute;kat).  Az Awk sor a harmadik mez&#337; &eacute;rt&eacute;k&eacute;t fogja kinyomtatni .</p>

<p>A sorok sz&aacute;m&aacute;t az Awk az <code class="varname">NR</code> (<span class="emphasis"><em>Number of Rows</em></span> - az &ouml;sszes eddig beolvasott sor) &eacute;s <code class="varname">FNR</code> (az aktu&aacute;lis bemeneti f&aacute;jl, ha t&ouml;bb van) v&aacute;ltoz&oacute;kban k&ouml;veti.</p>

<p>A mez&#337;k sz&aacute;ma az <code class="varname">FN</code> v&aacute;ltoz&oacute;ban van, amely az utols&oacute; mez&#337; c&iacute;mz&eacute;s&eacute;re is haszn&aacute;lhat&oacute;: <code class="varname">$FN</code>. Az al&aacute;bbi p&eacute;lda:</p>
<pre class="programlisting">
print $FN
</pre>
<p>az utols&oacute; mez&#337;t nyomtatja, f&uuml;ggetlen&uuml;l att&oacute;l, hogy h&aacute;ny van. A mez&#337;k c&iacute;mz&eacute;s&eacute;re kifejez&eacute;sek is haszn&aacute;lhat&oacute;ak:</p>

<pre class="programlisting">
print $(2+2)
</pre>

<p>a negyedik mez&#337;t fogja nyomtatni.</p>

<p>Haszn&aacute;lat k&ouml;zben az Awk &aacute;ltal el&#337;&aacute;ll&iacute;tott mez&#337;ket tartalmaz&oacute; v&aacute;ltoz&oacute;knak meg lehet v&aacute;ltoztatni az &eacute;rt&eacute;k&eacute;t:</p>

<pre class="screen">
$echo 'a b' | awk '{$1="b"; print $0}'
b b
</pre>

</div>

<div class="sect1" title="Az Awk programoz&aacute;si nyelv"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4429">Az Awk programoz&aacute;si nyelv</h2></div></div></div>
<p>Az Awk programsorok szab&aacute;lyokb&oacute;l  &aacute;llanak: egy szab&aacute;ly egy mint&aacute;b&oacute;l (<span class="emphasis"><em>pattern</em></span>) &eacute;s a hozz&aacute; tartoz&oacute; tev&eacute;kenys&eacute;gb&#337;l (<span class="emphasis"><em>action</em></span>)  vagy utas&iacute;t&aacute;sokb&oacute;l (<span class="emphasis"><em>statement</em></span>)  &aacute;ll, amely <code class="code">{}</code> k&ouml;z&eacute; z&aacute;rt blokkban van:</p>

<pre class="programlisting">
minta  {utas&iacute;t&aacute;sok}
</pre>
<p>A <code class="code">{}</code> blokkban utas&iacute;t&aacute;sok  k&ouml;vetik egym&aacute;st. A nyelvben f&uuml;ggv&eacute;nyek vagy nyelvi szerkezetek  h&iacute;vhat&oacute;ak k&uuml;l&ouml;nb&ouml;z&#337; m&#369;veletek elv&eacute;gz&eacute;s&eacute;re. F&uuml;ggv&eacute;nyei k&ouml;z&uuml;l a legegyszer&#369;bb a print : kinyomtatja a <code class="varname">$0</code> v&aacute;ltoz&oacute; tartalm&aacute;t.</p>
<pre class="programlisting">
{print}
</pre>
<p>Ha argumentumokkal haszn&aacute;ljuk, a print f&uuml;ggv&eacute;ny  a felsorolt v&aacute;ltoz&oacute;kat ki&iacute;rja a kimenetre egy kimeneti elv&aacute;laszt&oacute;val (ez implicit egy sz&oacute;k&ouml;z):</p>

<pre class="screen">
$ echo '112 LinkinPark Numb numb.txt 35' | awk '{print $1, $4}'
112 numb.txt
</pre>
<p>Norm&aacute;lis menetben az Awk nyelv &eacute;rtelmez&#337;je egy-egy sort olvas a <code class="varname">$0 </code>v&aacute;ltoz&oacute;ba, feldolgozza azt: azaz alkalmazza re&aacute; szab&aacute;lyait ha a szab&aacute;lyhoz rendelt minta  kiv&aacute;lassza a sort. Ezt a m&#369;veletet ism&eacute;tli am&iacute;g a bemenetr&#337;l elfogynak a sorok.</p>
<p>Mint&aacute;i b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;seket haszn&aacute;lnak, pl. a: <span class="regex"><code class="code">/^a/</code></span> azokat a sorokat fogja kiv&aacute;lasztani amelyek <code class="code">a</code> -val kezd&#337;dnek.</p>


<p>Az Awk szab&aacute;lyban a mint&aacute;nak vagy tev&eacute;kenys&eacute;gnek meg kell jelennie. Ha a minta elmarad, a tev&eacute;kenys&eacute;get minden bemeneti sorra alkalmazza az Awk, ha a tev&eacute;kenys&eacute;g marad el, akkor az implicit tev&eacute;kenys&eacute;g a  <code class="code">print $0</code>, azaz a bemeneti sor nyomtat&aacute;sa. &Iacute;gy:</p>
<pre class="screen">
$ echo piros | awk '{print $0}' 
piros
</pre>
<p>kinyomtatja az egyetlen bemeneti sort, mert a minta illeszkedik a sorra,</p>

<pre class="screen">
$ echo piros | awk '/^p/' 
piros
</pre>

<p>ugyanazt teszi, mert elhagytuk a tev&eacute;kenys&eacute;get de haszn&aacute;ltunk mint&aacute;t. Ugyanakkor:</p>

<pre class="screen">
$ echo piros | awk '{print $0}' 
piros
</pre>

<p>is kinyomtatja a bemeneti sort, mert nincs minta, teh&aacute;t minden sorra illeszkedik.</p>

</div>

<div class="sect1" title="Az Awk minta"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4457">Az Awk minta</h2></div></div></div>
<p>A minta fel&eacute;p&iacute;t&eacute;se bonyolultabb mint a <span class="command"><strong>sed</strong></span> &aacute;ltal haszn&aacute;lt&eacute;. Az al&aacute;bbi t&aacute;bl&aacute;zat tartalmazza a  lehets&eacute;ges eseteket:</p>

       <div class="table"><a name="d5e4461"></a><p class="title"><b>10.1. t&aacute;bl&aacute;zat - Az Awk mint&aacute;i</b></p><div class="table-contents">
                
                <table summary="Az Awk mint&aacute;i" cellpadding="2" border="1"><colgroup><col width="25%" class="c1"><col width="75%" class="c2"></colgroup><thead><tr><th align="center">Mint&aacute;k</th><th align="center">Kiv&aacute;laszt&aacute;s</th></tr></thead><tbody><tr><td align="left" valign="top"><code class="code">BEGIN</code></td><td rowspan="2" align="left" valign="top">
<p>A <code class="code">BEGIN</code> &eacute;s <code class="code">END</code> mint&aacute;k speci&aacute;lisak: az ut&aacute;nuk k&ouml;vetkez&#337; utas&iacute;t&aacute;sokat a sorok feldolgoz&aacute;sa el&#337;tt (<code class="code">BEGIN</code>) illetve minden sor feldolgoz&aacute;sa ut&aacute;n (<code class="code">END</code>) hajtja v&eacute;gre az Awk, egyetlen egyszer. Ezek a program el&#337;k&eacute;sz&iacute;t&#337; utas&iacute;t&aacute;sai (pl. v&aacute;ltoz&oacute;k kezdeti &eacute;rt&eacute;k&eacute;nek megad&aacute;sa) illetve befejez&#337; utas&iacute;t&aacute;sai (pl. v&eacute;gs&#337; eredm&eacute;ny nyomtat&aacute;sa).

A program futtathat&oacute; bemenet n&eacute;lk&uuml;l is, ha csak a BEGIN mint&aacute;t haszn&aacute;ljuk. Ilyenkor v&eacute;grehajtja utas&iacute;t&aacute;sait &eacute;s ut&aacute;na kil&eacute;p.
</p>
</td></tr><tr><td align="left" valign="top"><code class="code">END</code></td></tr><tr><td align="left" valign="top"><code class="code">/regex/</code></td><td align="left" valign="top">
<p>Regul&aacute;ris kifejez&eacute;s: a Awk b&#337;v&iacute;tett (<span class="emphasis"><em>extended</em></span>) kifejez&eacute;seket haszn&aacute;l, ugyanazokat mint az egrep. Nincs teh&aacute;t sz&uuml;ks&eacute;g k&uuml;l&ouml;n opci&oacute;ra, hogy ezt haszn&aacute;ljuk.</p>
</td></tr><tr><td align="left" valign="top"><code class="code">minta &amp;&amp; minta</code></td><td rowspan="3" align="left" valign="top">
<p>2 minta &eacute;s, vagy illetve egy minta tagad&aacute;s&aacute;nak logikai rel&aacute;ci&oacute;j&aacute;b&oacute;l k&eacute;pzett felt&eacute;tel. Az <code class="code">&amp;&amp;</code> eset&eacute;ben pl. mindk&eacute;t mint&aacute;nak illeszkednie kell a feldolgozand&oacute; sorra, az <code class="code">||</code> eset&eacute;ben csak az egyiknek. A  <code class="code">!</code> -al jel&ouml;lt mint&aacute;k eset&eacute;ben a blokk csak akkor hajt&oacute;dik v&eacute;gre, ha a minta nem v&aacute;lassza ki a sort.</p>
</td></tr><tr><td align="left" valign="top"><code class="code">minta || minta</code></td></tr><tr><td align="left" valign="top"><code class="code">! minta</code></td></tr><tr><td align="left" valign="top"><code class="code">minta1, minta2</code></td><td align="left" valign="top">
<p>Sorok tartom&aacute;ny&aacute;nak c&iacute;mz&eacute;se k&eacute;t mint&aacute;val, az els&#337; minta illeszked&eacute;s&eacute;t&#337;l a m&aacute;sodikig.</p>
</td></tr><tr><td align="left" valign="top"><code class="code">minta ? minta1 : minta2</code></td><td align="left" valign="top">
<p>A C nyelv <code class="code">?:</code> oper&aacute;tor&aacute;hoz hasonl&oacute; felt&eacute;teles teszt. Ha a <code class="code">minta</code> tal&aacute;l, akkor a <code class="code">minta1</code> teszt lesz d&ouml;nt&#337;, ha nem akkor a <code class="code">minta2</code>.</p>
</td></tr><tr><td align="left" valign="top"><code class="code">Awk rel&aacute;ci&oacute;s kifejez&eacute;s</code></td><td align="left" valign="top">

<p>Az Awk v&aacute;ltoz&oacute;ira alkalmazott C-szer&#369; rel&aacute;ci&oacute;s kifejez&eacute;s, pl. <code class="code">$1 &gt; 2</code> teh&aacute;t ha az els&#337; mez&#337; numerikusan, sz&aacute;mm&aacute; alak&iacute;tva nagyobb mint 2, akkor arra a sorra v&eacute;grehajt&oacute;dik az utas&iacute;t&aacute;ssorozat. A kifejez&eacute;sben a C nyelv rel&aacute;ci&oacute;s kifejez&eacute;seit lehet haszn&aacute;lni (<code class="code">&gt;</code>, <code class="code">&amp;</code>, <code class="code">&amp;=</code>, <code class="code">&gt;=</code>, <code class="code">==</code>, <code class="code">!=</code> ). </p>
<p>A C nyelv oper&aacute;torain k&iacute;v&uuml;l az Awk nyelvnek van k&eacute;t oper&aacute;tora, a  <code class="code">~</code>  &eacute;s a  <code class="code">~!</code> (<span class="emphasis"><em>match</em></span> &eacute;s <span class="emphasis"><em>no match</em></span>). Haszn&aacute;latuk &iacute;gy t&ouml;rt&eacute;nik:</p>

<pre class="programlisting">
$1 ~ /^a/
</pre>
<p>jelent&eacute;se: ha az els&#337; mez&#337; kis a bet&#369;vel kezd&#337;dik, azaz illeszkedik a megadott regul&aacute;ris kifejez&eacute;sre.</p>
<p>A kifejez&eacute;s akkor  v&aacute;lasztja ki a tev&eacute;kenys&eacute;get, ha az &eacute;rt&eacute;ke 0-t&oacute;l k&uuml;l&ouml;nb&ouml;zik amennyiben val&oacute;s sz&aacute;mra lehet konvert&aacute;lni, vagy nem az &uuml;res sztring amennyiben sztringre.</p>

<p>Teh&aacute;t a kifejez&eacute;seket sztringekre is lehet alkalmazni: ilyenkor az Awk karakterenk&eacute;nt hasonl&iacute;tja &ouml;ssze a sztringeket. ha k&eacute;t sztring megegyez&#337; karakterei ugyanazok, akkor a hosszabbik tekintend&#337; nagyobbnak. Pl. "10" kisebb mint "9" , mert els&#337; karaktereik &ouml;sszehasonl&iacute;t&aacute;sakor az "1" kisebb mint "9".  De 10 nagyobb mint 9: az Awk az adatt&iacute;pust&oacute;l f&uuml;gg&#337;en v&eacute;gzi el az &ouml;sszehasonl&iacute;t&aacute;st.</p>
<p>&Iacute;gy az al&aacute;bbi p&eacute;ld&aacute;kban az els&#337; h&iacute;v&aacute;s nem list&aacute;zza a bemeneti sort, a m&aacute;sodik viszont igen:</p>
<pre class="screen">
$ echo "10 sz&ouml;veg" | awk ' $1 &lt; 9  {print $2}'
$ echo "10 sz&ouml;veg" | awk ' $1 &lt; "9" {print $2}'
sz&ouml;veg
$
</pre>

</td></tr></tbody></table>
        </div></div><br class="table-break"> 

</div>
<div class="sect1" title="Az utas&iacute;t&aacute;sok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4540">Az utas&iacute;t&aacute;sok </h2></div></div></div>

<p>Az Awk nyelv elemei  <code class="code">{ }</code> z&aacute;r&oacute;jelek k&ouml;z&eacute; ker&uuml;lnek &eacute;s szab&aacute;lyokat hat&aacute;roznak meg. A C nyelvhez hasonl&oacute;an, v&aacute;ltoz&oacute; &eacute;rt&eacute;kad&aacute;st, kifejez&eacute;seket, vez&eacute;rl&#337; szerkezeteket tartalmaznak. Az oper&aacute;torok, utas&iacute;t&aacute;sok a C-hez hasonl&oacute;ak (a C nyelvet vett&eacute;k mint&aacute;nak a tervez&eacute;s&uuml;kn&eacute;l). Pl.:</p>
<pre class="programlisting">
{a=2; print a}
</pre>

<p>Az utas&iacute;t&aacute;sok k&ouml;zt az elv&aacute;laszt&oacute; az &uacute;jsor karakter illetve, amennyiben egy sorba t&ouml;bb utas&iacute;t&aacute;s ker&uuml;l(pl. a parancssoron) akkor a  <code class="code">;</code> .</p>

<p>Az Awk program 3 r&eacute;szt tartalmazhat, egy bevezet&#337; (BEGIN), egy sz&ouml;vegsoronk&eacute;nt v&eacute;grehajthat&oacute; &eacute;s egy z&aacute;r&oacute; (END) programr&eacute;szt, teh&aacute;t &aacute;ltal&aacute;nosan &iacute;gy n&eacute;z ki:</p>


<pre class="programlisting">
<span class="strong"><strong>BEGIN {bevezet&#337; utas&iacute;t&aacute;sok} 
minta { a kiv&aacute;lasztott sorra v&eacute;grehajtott utas&iacute;t&aacute;sok}
...  
END   {z&aacute;r&oacute; utas&iacute;t&aacute;sok }</strong></span>
</pre>

<p>A minta <code class="code">{utas&iacute;tasok}</code> szerkezet egym&aacute;s ut&aacute;n t&ouml;bbsz&ouml;r is el&#337;fordulhat, &eacute;s ez a r&eacute;sz ism&eacute;tl&#337;dik minden egyes feldolgozott sorra.</p>

<pre class="screen">
$ echo '1 2'| awk 'BEGIN{a=1} {a=a+$1+$2} END{print a}'
4
$ 
</pre>
<p>A <code class="code">#</code> jel magyar&aacute;zat beilleszt&eacute;s&eacute;t jelenti a sor v&eacute;g&eacute;ig, ak&aacute;r a shell eset&eacute;ben.</p>

</div>

<div class="sect1" title="A v&aacute;ltoz&oacute;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4555">A v&aacute;ltoz&oacute;k</h2></div></div></div>

<p>Az Awk v&aacute;ltoz&oacute;neveket ugyan&uacute;gy jel&ouml;lj&uuml;k mint a C nyelv v&aacute;ltoz&oacute;it. A deklar&aacute;ci&oacute; pillanat&aacute;ban j&ouml;nnek l&eacute;tre &eacute;s t&iacute;pusukat nem kell explicit deklar&aacute;lni (teh&aacute;t nem sz&uuml;ks&eacute;ges &#337;ket m&eacute;g csak a <code class="code">BEGIN</code> r&eacute;szben sem deklar&aacute;lni), &eacute;s a hozz&aacute;juk rendelt &eacute;rt&eacute;kt&#337;l vagy kontextust&oacute;l f&uuml;gg&#337;en lesznek val&oacute;sak vagy karakterl&aacute;ncok. A szkript nyelvekre jellemz&#337;en ezek dinamikus v&aacute;ltoz&oacute;k. </p>

<p>A nyelv k&eacute;t adat t&iacute;pussal rendelkezik: dupla pontoss&aacute;g&uacute; val&oacute;s illetve sztring.</p>

<pre class="programlisting">
s="piros"
</pre>
<p>egy sztringet hoz l&eacute;tre,</p>
<pre class="programlisting">
x=2.2
</pre>
<p>pedig egy val&oacute;s v&aacute;ltoz&oacute;t.</p>

<pre class="programlisting">
y=$10
</pre>
<p>Az <code class="code">y</code> a <code class="code">$10</code> mez&#337;t&#337;l f&uuml;gg&#337;en lesz val&oacute;s vagy karakterl&aacute;nc.</p>

<p>Ha nem inicializ&aacute;lt v&aacute;ltoz&oacute;ra hivatkozunk, sztring eset&eacute;ben az &uuml;res sztringet, val&oacute;s sz&aacute;m eset&eacute;ben a 0-&aacute;t adja vissza a nyelv, hib&aacute;t nem jelez. Pl.:</p>
<pre class="screen">
$awk ' BEGIN {  print s+2; } '
2
</pre>

<p>Ilyenkor a t&iacute;pus a kontextus szerint alakul: a fenti p&eacute;ld&aacute;ban az <code class="varname">s</code> v&aacute;ltoz&oacute; egy val&oacute;s kifejez&eacute;sben (&ouml;sszead&aacute;s) vesz r&eacute;szt, &iacute;gy a nyelv 0-ra inicializ&aacute;lja. Egyszer&#369; v&aacute;ltoz&oacute;kon k&iacute;v&uuml;l t&ouml;mb&ouml;k is haszn&aacute;lhat&oacute;k, ezek asszociat&iacute;v t&ouml;mb&ouml;k (l&aacute;sd az <span class="command"><strong>awk</strong></span> k&eacute;zik&ouml;nyv&eacute;nek megfelel&#337; fejezet&eacute;ben).</p>


</div>

<div class="sect1" title="Bels&#337; v&aacute;ltoz&oacute;k"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4573">Bels&#337; v&aacute;ltoz&oacute;k</h2></div></div></div>
<p>A program tartalmaz bels&#337; v&aacute;ltoz&oacute;kat, ezek mindig l&eacute;trej&ouml;nnek, nem kell &#337;ket deklar&aacute;lni.  K&ouml;z&uuml;l&uuml;k az al&aacute;bbiak fontosabbak, ezeket gyakran  haszn&aacute;ljuk.</p>


       <div class="table"><a name="d5e4576"></a><p class="title"><b>10.2. t&aacute;bl&aacute;zat - Az Awk bels&#337; v&aacute;ltoz&oacute;i</b></p><div class="table-contents">
                
                <table summary="Az Awk bels&#337; v&aacute;ltoz&oacute;i" cellpadding="2" border="1"><colgroup><col width="25%" class="col1"><col width="25%" class="col2"><col width="25%"><col width="25%"></colgroup><thead><tr><th align="center">V&aacute;ltoz&oacute;</th><th align="center">Angol neve</th><th align="center">Mit tartalmaz</th><th align="center">Implicit &eacute;rt&eacute;k</th></tr></thead><tbody><tr><td align="left" valign="top"><code class="code">ARGC</code></td><td align="left" valign="top"><span class="emphasis"><em>Command line argument count</em></span></td><td align="left" valign="top">
<p>H&aacute;ny argumentum van az Awk parancssor&aacute;n.</p>
</td><td align="left" valign="top">
&nbsp;
</td></tr><tr><td align="left" valign="top"><code class="code">FILENAME</code></td><td align="left" valign="top"><span class="emphasis"><em>Filename</em></span></td><td align="left" valign="top">
A bemeneti f&aacute;jl neve.
</td><td align="left" valign="top">
&nbsp;
</td></tr><tr><td align="left" valign="top"><code class="code">FS</code></td><td align="left" valign="top"><span class="emphasis"><em>Input Field Separator</em></span></td><td align="left" valign="top">
A bementi mez&#337;elv&aacute;laszt&oacute; karakter vagy karakterek. Az FS  regul&aacute;ris kifejez&eacute;s is lehet, tulajdonk&eacute;ppen az implicit &eacute;rt&eacute;k is az, pontosan: <span class="regex"><code class="code">[\t ]+</code></span>  , teh&aacute;t sz&oacute;k&ouml;z vagy TAB legal&aacute;bb egyszer. Ha az FS &eacute;rt&eacute;ke az &uuml;res sztring (FS="") akkor a bemenet minden egyes karaktere k&uuml;l&ouml;n mez&#337;nek sz&aacute;m&iacute;t.
</td><td align="left" valign="top">
<span class="regex"><code class="code">[\t ]+</code></span> 
</td></tr><tr><td align="left" valign="top"><code class="code">RS</code></td><td align="left" valign="top"><span class="emphasis"><em>Record separator</em></span></td><td align="left" valign="top">
<p>Ez a rekord (azaz bemeneti sor) elv&aacute;laszt&oacute;. Ez is regul&aacute;ris kifejez&eacute;s, megv&aacute;ltoztathat&oacute;.</p>
</td><td align="left" valign="top">
<p><code class="code">\n</code> egy &uacute;jsor karakter </p>
</td></tr><tr><td align="left" valign="top"><code class="code">NF</code></td><td align="left" valign="top"><span class="emphasis"><em>Fields in the current input record</em></span></td><td align="left" valign="top">
<p>H&aacute;ny mez&#337; van a bemeneti rekordban.</p>
</td><td align="left" valign="top">
&nbsp;
</td></tr><tr><td align="left" valign="top"><code class="code">NR</code></td><td align="left" valign="top"><span class="emphasis"><em>Number  of records seen so far</em></span></td><td align="left" valign="top">
<p>H&aacute;nyadik sorn&aacute;l tart a feldolgoz&aacute;s.</p>
</td><td align="left" valign="top">
&nbsp;
</td></tr><tr><td align="left" valign="top"><code class="code">OFMT</code></td><td align="left" valign="top"><span class="emphasis"><em>The output format for numbers</em></span></td><td align="left" valign="top">
<p>Hogyan format&aacute;lja a val&oacute;s sz&aacute;mokat ha a kimenetre &iacute;rjuk azokat. L&aacute;that&oacute; az implicit &eacute;rt&eacute;kb&#337;l, hogy a form&aacute;tumokat a  C nyelv <code class="function">printf</code> f&uuml;ggv&eacute;ny&eacute;nek form&aacute;z&oacute; sztringjeivel &aacute;ll&iacute;tja el&#337;.</p>
</td><td align="left" valign="top">
<p><code class="code">"%.6g"</code></p>
</td></tr><tr><td align="left" valign="top"><code class="code">OFS</code></td><td align="left" valign="top"><span class="emphasis"><em>Output field separator</em></span></td><td align="left" valign="top">
<p>A kimenti mez&#337;elv&aacute;laszt&oacute; karakter.</p>
</td><td align="left" valign="top">
<p>sz&oacute;k&ouml;z</p>
</td></tr><tr><td align="left" valign="top"><code class="code">ORS</code></td><td align="left" valign="top"><span class="emphasis"><em>Output record separator</em></span></td><td align="left" valign="top">
<p>A kimenti rekord (azaz sor) elv&aacute;laszt&oacute; karakter. Implicit &uacute;jsor, ak&aacute;r m&aacute;s is lehet, amennyiben pedig az &uuml;res sztring, akkor a kimeneten nem lesznek sz&eacute;tv&aacute;lasztva a sorok.</p>
</td><td align="left" valign="top">
<code class="code">\n</code> &uacute;jsor
</td></tr><tr><td align="left" valign="top"><code class="code">IGNORECASE</code></td><td align="left" valign="top"><span class="emphasis"><em>Ignore case</em></span></td><td align="left" valign="top">
<p>Ha nem z&eacute;r&oacute;, akkor a regul&aacute;ris kifejez&eacute;sekn&eacute;l kis nagybet&#369; nem sz&aacute;m&iacute;t.</p>
</td><td align="left" valign="top">
0
</td></tr></tbody></table>
        </div></div><br class="table-break"> 
<p>Az <code class="varname">ARGV</code> illetve <code class="varname">ENVIRON</code> v&aacute;ltoz&oacute;k is hasznosak lehetnek ak&aacute;r kis programokban is, ezek a parancssor argumentumait illetve  a k&ouml;rnyezeti v&aacute;ltoz&oacute;kat tartalmazz&aacute;k. Ezek a v&aacute;ltoz&oacute;k Awk t&ouml;mb&ouml;k. Haszn&aacute;latukat megtal&aacute;ljuk az <span class="command"><strong>awk</strong></span> k&eacute;zik&ouml;nyv&eacute;ben ( l&aacute;sd <a class="link" href="#Ivanyi2005">Ivanyi2005</a>, T&ouml;mb&ouml;k az awk-ban c&iacute;m&#369; fejezet).</p>
</div>

<div class="sect1" title="Konstansok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4684">Konstansok</h2></div></div></div>

<p>A sztring konstansok kett&#337;s id&eacute;z&#337;jellel k&ouml;r&uuml;lvett sztringek. A sztringeken bel&uuml;l haszn&aacute;lhat&oacute;ak a C nyelv vissza-per szekvenci&aacute;val megadott speci&aacute;lis karakterei, p&eacute;ld&aacute;ul az &uacute;jsor ( <code class="code">\n</code> )  vagy tabul&aacute;tor ( <code class="code">\t</code> ) . A <code class="code">\c</code> liter&aacute;lisan a <code class="code">c</code> karaktert jelenti.</p>

<pre class="screen">
$ awk 'BEGIN {s="abc"; t="def\nitt &uacute;jsor j&ouml;n"} END{print s,t}'
abc def
itt &uacute;jsor j&ouml;n
</pre>
<p>A t&iacute;zes, nyolcas &eacute;s tizenhatos sz&aacute;mrendszerben megadott konstansokat ugyan&uacute;gy kezeli mint a C nyelv. Pl:</p>
<pre class="screen">
awk 'BEGIN {print 10.2,011,0x22}'
10.2 9 34
</pre>

</div>

<div class="sect1" title="Oper&aacute;torok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4694">Oper&aacute;torok</h2></div></div></div>

<p>Az Awk a C nyelv oper&aacute;torait haszn&aacute;lja, ezek v&aacute;ltoz&oacute;ira &eacute;s konstansaira alkalmazhat&oacute;k.</p>

<p>Az oper&aacute;torok precedenci&aacute;ja &eacute;s asszociativit&aacute;sa ugyanaz mint a C nyelvn&eacute;l. K&uuml;l&ouml;nbs&eacute;gek:</p>

<p>A sztringek &ouml;sszef&#369;z&eacute;s&eacute;nek oper&aacute;tora a sz&oacute;k&ouml;z karakter, teh&aacute;t:</p>

<pre class="programlisting">
{print "a" "b"}
</pre>
<p><code class="literal">ab</code>-t fog ki&iacute;rni, k&eacute;t sztringet &ouml;sszef&#369;zni &iacute;gy lehet:</p>
<pre class="screen">
$ awk 'BEGIN {  x="a" "b"; print x  } '
ab
</pre>
<p>A nyelv nem rendelkezik a vessz&#337; oper&aacute;torral, teh&aacute;t nem haszn&aacute;lhatunk ilyen szerkezeteket mint: <code class="code">a=2, b=5</code> .</p>


<p>Rendelkezik viszont egy saj&aacute;tos oper&aacute;torral, amely nem tal&aacute;lhat&oacute; meg a C nyelvben, a regul&aacute;ris kifejez&eacute;s tesztel&eacute;se (illeszt&eacute;s, <span class="emphasis"><em>match</em></span>) oper&aacute;torral. Ezt a <code class="code">~</code> jellel adjuk meg, az ellenkez&#337; m&#369;veletet, azaz a <span class="emphasis"><em>nem illeszkedik</em></span> tesztet pedig a <code class="code">!~</code> jelekkel. Az els&#337; operandus egy v&aacute;ltoz&oacute;, a m&aacute;sodik pedig egy regul&aacute;ris kifejez&eacute;s. Pl.:</p>

<pre class="programlisting">
if ( s ~ /^a/ ) print "Az s v&aacute;ltoz&oacute; tartalma kis a bet&#369;vel kezd&#337;dik"
</pre>

<p>P&eacute;ld&aacute;k az oper&aacute;torok haszn&aacute;lat&aacute;ra:</p>
<pre class="screen">
$ #inkrement&aacute;l&aacute;s
$ echo '' | awk '{i=0; i++; print i}'
1
$
$ #&ouml;sszead&aacute;s
$echo '1.1 2.2' | awk '{ s=$1+$2; print s  }'
3.3

$ #regul&aacute;ris kifejez&eacute;s illeszt&eacute;s
$ echo '112' | awk '{if ($1 ~ /^[0-9]+$/)\
  {print "az els&#337; mez&#337; sz&aacute;mokb&oacute;l &aacute;ll"}}'
az els&#337; mez&#337; sz&aacute;mokb&oacute;l &aacute;ll
$
$ echo 'abc' | awk '{if ($1 !~ /^[0-9]+$/) \
  {print "az els&#337; mez&#337; nem &aacute;ll sz&aacute;mokb&oacute;l"}}'
az els&#337; mez&#337; nem &aacute;ll sz&aacute;mokb&oacute;l
$
$ #pelda sztring &ouml;sszef&#369;z&eacute;s&eacute;re
$ echo '1 2 3 abc def ' | awk '{print $4 $5}'
abcdef
$ 
</pre>

</div>

<div class="sect1" title="Vez&eacute;rl&#337; kifejez&eacute;sek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4713">Vez&eacute;rl&#337; kifejez&eacute;sek</h2></div></div></div>

<p>A programok d&ouml;nt&eacute;s &eacute;s ciklus szerkezeteinek megold&aacute;s&aacute;ra un. <span class="emphasis"><em>vez&eacute;rl&#337; kifejez&eacute;seket</em></span> haszn&aacute;l a nyelv. A strukt&uacute;r&aacute;kat a C nyelvb&#337;l k&ouml;lcs&ouml;nzi az Awk, az al&aacute;bbiak haszn&aacute;lhat&oacute;ak:</p>

<div class="literallayout"><p><span class="strong"><strong>if&nbsp;(felt&eacute;tel)&nbsp;utas&iacute;t&aacute;s&nbsp;[&nbsp;else&nbsp;utas&iacute;t&aacute;s&nbsp;]<br>
<br>
while&nbsp;(felt&eacute;tel)&nbsp;utas&iacute;t&aacute;s<br>
<br>
do&nbsp;utas&iacute;t&aacute;s&nbsp;while&nbsp;(felt&eacute;tel)<br>
<br>
for&nbsp;(expr1;&nbsp;expr2;&nbsp;expr3)&nbsp;utas&iacute;t&aacute;s<br>
<br>
break<br>
<br>
continue<br>
<br>
exit&nbsp;[&nbsp;kifejez&eacute;s&nbsp;]<br>
<br>
{&nbsp;utas&iacute;t&aacute;sok&nbsp;}</strong></span><br>
</p></div>
<p>Pl. az if haszn&aacute;lata: </p>

<pre class="screen">
$ echo '2.2'| awk '{ if ($1==1) {print "igaz"} else {print "hamis"}}'
hamis
</pre>

<p>Az Awk nyelv vez&eacute;rl&eacute;si utas&iacute;t&aacute;snak tekinti a <code class="code">next</code> utas&iacute;t&aacute;st (tulajdonk&eacute;ppen f&uuml;ggv&eacute;nyt) is.</p>

<p>A <code class="code">next</code> v&eacute;grehajt&aacute;sakor az Awk abbahagyja a kurrens rekord feldolgoz&aacute;s&aacute;t, &uacute;jat vesz a bemenetr&#337;l &eacute;s &uacute;jraind&iacute;tja vele az Awk programot. Pl. ha arra sz&aacute;m&iacute;tunk, hogy a bemenet minden sor&aacute;ban 4 mez&#337; van, &eacute;s nem szeretn&eacute;nk hib&aacute;s feldolgoz&aacute;st v&eacute;gezni, akkor olyan sorok &eacute;rkez&eacute;sekor amelyekben nincs 4 mez&#337; k&ouml;nnyen kiker&uuml;lhetj&uuml;k ezeket:</p>

<pre class="programlisting">
#!/bin/awk -f 
{ 
    if (NF != 4) { 
        print "Rossz mez&#337;sz&aacute;m, sorsz&aacute;m: " NR " : " $0 
        next 
    }   
} 
#... feldolgoz&aacute;sok itt kezd&#337;dnek
</pre>

</div>


<div class="sect1" title="Az Awk f&uuml;ggv&eacute;nyek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4726">Az Awk f&uuml;ggv&eacute;nyek</h2></div></div></div>


<p>Az Awk nyelvben haszn&aacute;lhat&oacute; f&uuml;ggv&eacute;nyeknek 2 kateg&oacute;ri&aacute;ja van, a be&eacute;p&iacute;tett &eacute;s a felhaszn&aacute;l&oacute; saj&aacute;t f&uuml;ggv&eacute;nyei.  A be&eacute;p&iacute;tett f&uuml;ggv&eacute;nyek fontosabb csoportjai a numerikus, a sztring &eacute;s a be/kimenetet vez&eacute;rl&#337; f&uuml;ggv&eacute;nyek.</p>

<div class="sect2" title="A fontosabb numerikus f&uuml;ggv&eacute;nyek"><div class="titlepage"><div><div><h3 class="title" id="d5e4729">A fontosabb numerikus f&uuml;ggv&eacute;nyek</h3></div></div></div>
<p>Mindazok a f&uuml;ggv&eacute;nyek amelyek egy kis tudom&aacute;nyos k&eacute;zi sz&aacute;mol&oacute;g&eacute;pben megtal&aacute;lhat&oacute;ak, megtal&aacute;lhat&oacute;ak az Awk-ban is. A f&uuml;ggv&eacute;nyeket a C nyelvhez hasonl&oacute; szintaxissal lehet megh&iacute;vni. Ezek ismertek a C nyelv standard k&ouml;nyvt&aacute;r&aacute;b&oacute;l, ugyan&uacute;gy kell megh&iacute;vni &#337;ket mint a C nyelvben. Az <code class="code">x</code> a z&aacute;r&oacute;jelben egy val&oacute;s kifejez&eacute;s is lehet. Ezek az al&aacute;bbiak:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td><code class="code">atan2(y, x)</code>  - az y/x arkusz tangens&eacute;t sz&aacute;molja radi&aacute;nban, a param&eacute;terek el&#337;jele meghat&aacute;rozza, hogy az eredm&eacute;ny melyik k&ouml;rnegyedbe esik</td></tr><tr><td><code class="code">sin(x),cos(expr)</code>  - sinus &eacute;s cosinus, bemenet radi&aacute;nban  </td></tr><tr><td><code class="code">exp(x)</code>  - visszaadja az x term&eacute;szetes alap&uacute; hatv&aacute;ny&aacute;t  </td></tr><tr><td><code class="code">int(x)</code>    - eg&eacute;sz r&eacute;szt ad vissza </td></tr><tr><td><code class="code">log(x)</code>   - visszaadja az x term&eacute;szetes alap&uacute; logaritmus&aacute;t, ha x pozit&iacute;v; egy&eacute;bk&eacute;nt hib&aacute;t jelez  </td></tr><tr><td><code class="code">sqrt(x)</code> - x gy&ouml;k&eacute;t adja vissza  </td></tr><tr><td><code class="code">rand()</code>  - egyenletes eloszl&aacute;s&uacute; v&eacute;letlen sz&aacute;m gener&aacute;l&aacute;sa 0 &eacute;s 1 k&ouml;z&ouml;tt</td></tr><tr><td><code class="code">srand ( [ sz&aacute;m ] )</code>  -  v&eacute;letlen sz&aacute;m gener&aacute;l&aacute;s&aacute;nak kezd&#337;pontj&aacute;t &aacute;ll&iacute;tja be - m&aacute;s v&eacute;letlen sz&aacute;mot kapunk, ha ezzel adunk kezd&#337;&eacute;rt&eacute;ket a gener&aacute;tornak.</td></tr></table>

<p>P&eacute;ld&aacute;ul a szinusz f&uuml;ggv&eacute;nyt &iacute;gy h&iacute;vjuk meg:</p>
<pre class="screen">
$ echo '' | awk '{print sin(1)}'
0.841471
</pre>


</div>

<div class="sect2" title="Fontosabb sztring f&uuml;ggv&eacute;nyek"><div class="titlepage"><div><div><h3 class="title" id="d5e4752">Fontosabb sztring f&uuml;ggv&eacute;nyek</h3></div></div></div>


<p>Az al&aacute;bbi egyszer&#369; kis f&uuml;ggv&eacute;nyek &aacute;llnak rendelkez&eacute;sre:</p>


       <div class="table"><a name="d5e4755"></a><p class="title"><b>10.3. t&aacute;bl&aacute;zat - Az Awk sztring f&uuml;ggv&eacute;nyei</b></p><div class="table-contents">
                
                <table summary="Az Awk sztring f&uuml;ggv&eacute;nyei" cellpadding="2" border="1"><colgroup><col width="25%" class="col1"><col width="75%" class="col2"></colgroup><thead><tr><th align="center">F&uuml;ggv&eacute;ny</th><th align="center">Mit v&eacute;gez el</th></tr></thead><tbody><tr><td align="left"><code class="code">index(hol, mit)</code></td><td align="left">
<p>Visszat&eacute;r&iacute;ti a <code class="code">mit</code> sztring poz&iacute;ci&oacute;j&aacute;t az <code class="code">hol</code> sztringben, 0-t ha nincs benne. A sztring indexeket 1-t&#337;l sz&aacute;molja a nyelv.</p>
</td></tr><tr><td align="left"><code class="code">length (s)</code></td><td align="left">
<p>A sztring hossz&aacute;t t&eacute;r&iacute;ti vissza. </p>
</td></tr><tr><td align="left"><code class="code">substr(s, i [, n])</code></td><td align="left">
<p>Szubsztringet t&eacute;r&iacute;t vissza az i-edik poz&iacute;ci&oacute;t&oacute;l kezdve, legt&ouml;bb n karaktert.</p>
</td></tr><tr><td align="left"><code class="code">tolower(str)</code></td><td align="left">
<p>Kisbet&#369;ss&eacute; konvert&aacute;l.</p>
</td></tr><tr><td align="left"><code class="code">toupper(str)</code></td><td align="left">
<p>Nagybet&#369;ss&eacute; konvert&aacute;l.</p>
</td></tr><tr><td align="left"><code class="code">sprintf (format, kifejez&eacute;s-lista) </code></td><td align="left">
<p>A  C  sprintf -j&eacute;nek megfelel&#337; form&aacute;z&oacute; f&uuml;ggv&eacute;ny.</p>
</td></tr><tr><td align="left"><code class="code">sub(regex, mivel, [miben])</code></td><td rowspan="2" align="left">
<p>Az <code class="code">miben</code> sztringben behelyettes&iacute;ti a <code class="code">regex</code>-re illeszked&#337; r&eacute;szt a mivel sztringgel. Ha a miben param&eacute;ter hi&aacute;nyzik, akkor a <code class="varname">$0</code>-ban helyettes&iacute;t. A <code class="function">sub</code> egyszer helyettes&iacute;t, a gsub minden tal&aacute;latot &aacute;t&iacute;r. Ha a miben param&eacute;tert nem adom meg, akkor a <code class="varname">$0 </code>-n dolgozik. Sikertelen &aacute;t&iacute;r&aacute;s ut&aacute;n 0-val t&eacute;rnek vissza, sikeres ut&aacute;n a <code class="function">sub</code> 1-el, a <code class="function">gsub</code> a cser&eacute;k sz&aacute;m&aacute;val. Itt is haszn&aacute;lhat&oacute; az &amp; karakter a tal&aacute;latra val&oacute; visszautal&aacute;sk&eacute;nt, ak&aacute;r a <span class="command"><strong>sed</strong></span> s parancs&aacute;ban.</p>
</td></tr><tr><td align="left"><code class="code">gsub (regex, mivel, [miben])</code></td></tr><tr><td align="left"><code class="code">gensub(regex, mivel,hogyan, [miben])</code></td><td align="left">
<p>Ez az &aacute;ltal&aacute;nos helyettes&iacute;t&#337; f&uuml;ggv&eacute;ny. Ugyan&uacute;gy m&#369;k&ouml;dik mint a <code class="function">sub</code>, de a hogyan mez&#337;ben meg lehet adni ugyanazokat a kapcsol&oacute;kat mint a <span class="command"><strong>sed</strong></span> helyettes&iacute;t&eacute;s&eacute;n&eacute;l (n: h&aacute;nyadik tal&aacute;latot illetve g). Ugyanakkor a  mivel  sztringen haszn&aacute;lhat&oacute;ak a <code class="code">\1</code>, <code class="code">\2</code> stb. visszautal&aacute;sok. Ez a f&uuml;ggv&eacute;ny a Gawk kiterjeszt&eacute;se.</p>
</td></tr><tr><td align="left"><code class="code">match(s,regexp)</code></td><td align="left">
<p>Illeszti a <code class="code">regexp</code>-et a sztringre: visszat&eacute;r&iacute;t egy sz&aacute;mot, ami 0 ha nincs illeszt&eacute;s illetve egy pozit&iacute;v eg&eacute;sz sz&aacute;m ha van: ez pontosan az illeszt&eacute;s indexe a sztringben.</p>
</td></tr></tbody></table>
        </div></div><br class="table-break"> 

<p>P&eacute;ld&aacute;ul:</p>

<pre class="screen">
$ echo 'els&#337; m&aacute;sodik' | awk '{s=substr($2,5,3); \
s1=sprintf("%s%s", $1,s); s2=substr($2,0,4); print s1,s2}'
els&#337;dik m&aacute;so
</pre>

</div>

<div class="sect2" title="Saj&aacute;t f&uuml;ggv&eacute;nyek"><div class="titlepage"><div><div><h3 class="title" id="d5e4830">Saj&aacute;t f&uuml;ggv&eacute;nyek</h3></div></div></div>

<p>Az Awk f&uuml;ggv&eacute;nyek, mint m&aacute;s nyelvben, sz&aacute;m&iacute;t&aacute;sokat csoportos&iacute;tanak, &eacute;s ezek n&eacute;v szerinti megh&iacute;v&aacute;s&aacute;t teszik lehet&#337;v&eacute;. Szintaktikailag rendelkeznek n&eacute;h&aacute;ny furcsas&aacute;ggal, amire oda kell figyelni.</p>

<p>Saj&aacute;t f&uuml;ggv&eacute;nyeket az al&aacute;bbi szintaxissal hozhatunk l&eacute;tre:</p>

<pre class="programlisting">
<span class="strong"><strong>function n&eacute;v (arg1, arg2, . . .)
{
    utas&iacute;t&aacute;sok;
}</strong></span>
</pre>

<p>A l&eacute;trehoz&aacute;s helye az Awk szab&aacute;lyokon k&iacute;v&uuml;l kell t&ouml;rt&eacute;njen a programban (programszervez&eacute;si szempontb&oacute;l mindegy, hogy hol vannak a szab&aacute;lyokon k&iacute;v&uuml;l: nem sz&uuml;ks&eacute;ges &#337;ket haszn&aacute;latuk el&#337;tt defini&aacute;lni). Aj&aacute;nlott a program v&eacute;g&eacute;re tenni &#337;ket.</p>

<p><span class="strong"><strong>Fontos:</strong></span> saj&aacute;t f&uuml;ggv&eacute;ny h&iacute;v&aacute;sakor ne &iacute;rjunk sz&oacute;k&ouml;zt a f&uuml;ggv&eacute;ny neve &eacute;s a z&aacute;r&oacute;jel k&ouml;z&eacute;, a:</p>
<pre class="programlisting">
fuggvenynev (
</pre>

<p>szerkezetben a sz&oacute;k&ouml;zt a kontextust&oacute;l f&uuml;gg&#337;en a nyelv &eacute;rt&eacute;kelheti &uacute;gy is, mint egy sztring &ouml;sszef&#369;z&eacute;s oper&aacute;tort, ez&eacute;rt j&oacute; megszokni, hogy a n&eacute;v &eacute;s z&aacute;r&oacute;jel k&ouml;z&eacute; ne tegy&uuml;nk sz&oacute;k&ouml;zt.</p>

<p>Az argumentumok lok&aacute;lis v&aacute;ltoz&oacute;k lesznek a f&uuml;ggv&eacute;ny test&eacute;ben. Ezzel ellent&eacute;tben, ha a f&uuml;ggv&eacute;ny belsej&eacute;ben v&aacute;ltoz&oacute;kat hozunk l&eacute;tre, azok glob&aacute;lisan viselkednek, teh&aacute;t alkalmasak a f&#337;programmal val&oacute; kommunik&aacute;ci&oacute;ra.</p>

<p>Az&eacute;rt, hogy ezt (a f&uuml;ggv&eacute;nyben l&eacute;trehozott v&aacute;ltoz&oacute;k l&aacute;that&oacute;s&aacute;ga a f&#337;programb&oacute;l) elker&uuml;lj&uuml;k, a f&uuml;ggv&eacute;nyben haszn&aacute;lt bels&#337; v&aacute;ltoz&oacute;kat is felsorolhatjuk az argumentumlist&aacute;ban, de &eacute;rt&eacute;k&uuml;ket nem adjuk meg h&iacute;v&aacute;skor, &iacute;gy &uuml;res v&aacute;ltoz&oacute;kk&aacute; inicializ&aacute;l&oacute;dnak. Pl.:</p>

<pre class="programlisting">
function hatvany(i,j,hat) { 
    hat=i**j 
    return hat 
} 
</pre>


<p>H&iacute;v&aacute;skor &iacute;gy haszn&aacute;ljuk:</p>

<pre class="programlisting">
x=hatvany(2,3)
</pre>

<p>&eacute;s akkor a <code class="varname">hat</code> v&aacute;ltoz&oacute; nem lesz l&aacute;that&oacute; a f&#337;programb&oacute;l.</p>

<p>Teh&aacute;t az Awk programb&oacute;l az al&aacute;bbiak szerint haszn&aacute;ljuk a f&uuml;ggv&eacute;nyeket:</p>

<pre class="programlisting">
<span class="strong"><strong>n&eacute;v(kifejez&eacute;s1, kifejez&eacute;s2, &#8230; )</strong></span>
</pre>

<p>vagy:</p>

<pre class="programlisting">
<span class="strong"><strong>v&aacute;ltoz&oacute;=n&eacute;v(kifejez&eacute;s1, kifejez&eacute;s2, &#8230; )
</strong></span></pre>

<p>mennyiben a f&uuml;ggv&eacute;ny <code class="code">return kifejez&eacute;s ;</code> utas&iacute;t&aacute;ssal l&eacute;p ki, &eacute;s egy &eacute;rt&eacute;ket rendel hozz&aacute;.</p>

<p>A f&uuml;ggv&eacute;nyeket lehet rekurz&iacute;v m&oacute;don  haszn&aacute;lni.</p>

<p>Az al&aacute;bbi program sz&aacute;mok n&eacute;gyzet&eacute;t list&aacute;zza. Itt, b&aacute;r nem haszn&aacute;ltuk fel, a <code class="varname">negy</code> v&aacute;ltoz&oacute; is l&eacute;trej&ouml;n &eacute;s l&aacute;that&oacute; lesz a f&#337;programban mivel nev&eacute;t nem adtuk meg a f&uuml;ggv&eacute;ny argumentumai k&ouml;z&ouml;tt.</p>

<pre class="programlisting">
#!/usr/bin/awk -f 

BEGIN { 
    for (i=0; i &lt; 10; i++) { 
        printf "%4d\t%4d\n", i,negyzet(i) 
    } 
    print "\na f&#337;programb&oacute;l l&aacute;that&oacute; negy:" negy
} 

function negyzet(i) { 
    negy=i*i 
    return negy 
} 
</pre>

<p>A program futtat&aacute;sakor ezt l&aacute;tjuk:</p>

<pre class="screen">
$ awk -f negyzet.awk
   0       0
   1       1
   2       4
   3       9
   4      16
   5      25
   6      36
   7      49
   8      64
   9      81

a f&#337;programb&oacute;l l&aacute;that&oacute; negy:81
$ 
</pre>

<p>Mivel a szkript csak a <code class="code">BEGIN</code> mint&aacute;t haszn&aacute;lja, lehet bemenet n&eacute;lk&uuml;l is futtatni. A n&eacute;gyzetet a f&uuml;ggv&eacute;ny p&eacute;lda kedv&eacute;&eacute;rt sz&aacute;moltuk, a nyelvnek van hatv&aacute;nyoz&oacute; oper&aacute;tora, a <code class="code">**</code> .</p>


</div>

</div>
<div class="sect1" title="Az awk haszn&aacute;lata h&eacute;jprogramokban"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4865">Az awk haszn&aacute;lata h&eacute;jprogramokban</h2></div></div></div>

<p>Az <span class="command"><strong>awk</strong></span> parancsot is haszn&aacute;lhatjuk nagyon egyszer&#369;, kis m&#369;veletekre vagy &ouml;n&aacute;ll&oacute;, nagyobb programok k&eacute;sz&iacute;t&eacute;s&eacute;re, amelyeket h&eacute;jprogramokb&oacute;l futtatunk &eacute;s r&eacute;szfeladatokat oldunk meg vel&uuml;k.</p>


<p>Az <span class="command"><strong>awk</strong></span> haszn&aacute;lat&aacute;ra lemezpart&iacute;ci&oacute;k lefoglalts&aacute;g&aacute;nak k&ouml;vet&eacute;s&eacute;t adjuk p&eacute;ldak&eacute;nt.</p>

<p><a class="indexterm" name="d5e4872"></a>A Unix rendszerek felcsatolt lemezpart&iacute;ci&oacute;inak m&eacute;ret&eacute;t &eacute;s elfoglalts&aacute;g&aacute;t a legegyszer&#369;bben a <span class="command"><strong>df</strong></span> (<span class="emphasis"><em>disk free</em></span>) paranccsal tudjuk ki&iacute;rni, a m&eacute;retek implicit 1 kilobyte-os egys&eacute;gekben vannak megadva:</p>

<pre class="screen">
$ df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda2             25798712   3428312  21059900  14% /
udev                    896720       104    896616   1% /dev
/dev/sda1               108883     29450     73811  29% /boot
/dev/sda5            185778200  21664256 154676964  13% /home
/dev/sda6             24525480   8870072  14409572  39% /usr
$
</pre>
<p>A lista az eszk&ouml;z f&aacute;jl nev&eacute;t, m&eacute;ret&eacute;t valamint az elfoglalt &eacute;s szabad 1 kilobyte-os blokkok sz&aacute;m&aacute;t &iacute;rja ki. Az utols&oacute; oszlop a f&aacute;jlrendszerbe val&oacute; csatol&aacute;s hely&eacute;t adja meg. A <code class="option">-h</code> opci&oacute;j&aacute;val szemmel k&ouml;nnyebben olvashat&oacute; list&aacute;t k&eacute;sz&iacute;t:</p>
<pre class="screen">
$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda2              25G  3.3G   21G  14% /
udev                  876M  104K  876M   1% /dev
/dev/sda1             107M   29M   73M  29% /boot
/dev/sda5             178G   21G  148G  13% /home
/dev/sda6              24G  8.5G   14G  39% /usr
</pre>

<p>A lista mez&#337;i sz&oacute;k&ouml;z&ouml;kkel vannak elv&aacute;lasztva, ezek sz&aacute;ma nem ugyanannyi minden mez&#337; k&ouml;zt, &iacute;gy az <span class="command"><strong>awk</strong></span> a legalkalmasabb arra, hogy az ehhez hasonl&oacute; kimenetekb&#337;l inform&aacute;ci&oacute;t v&aacute;gjon ki. Pl. ha sz&uuml;ks&eacute;g&uuml;nk van a <code class="filename">/home</code> k&ouml;nyvt&aacute;r alatti part&iacute;ci&oacute; m&eacute;ret&eacute;re, akkor az az al&aacute;bbi paranccsal kaphatjuk meg:</p>

<pre class="screen">
$ df | awk '/home/{print $2}'
185778200
$
</pre>
<p>, vagy a lefoglalts&aacute;gra sz&aacute;zal&eacute;kban:</p>

<pre class="screen">
$ df | awk '/home/{print substr($5,1,length($5)-1)}'
13
$
</pre>
<p>Ezeket a sz&aacute;mokat v&aacute;ltoz&oacute;ba lehet &iacute;rni, &eacute;s felhaszn&aacute;lni sz&aacute;m&iacute;t&aacute;sokra: </p>
<pre class="screen">
$ used=$( df | awk '/home/{print substr($5,1,length($5)-1)}' )
$ echo A /home part&iacute;ci&oacute; $used sz&aacute;zal&eacute;ka foglalt
A /home part&iacute;ci&oacute; 13 sz&aacute;zal&eacute;ka foglalt
$
</pre>

<p>Az al&aacute;bbi parancs &ouml;sszeadja a rendszeren l&eacute;tez&#337; part&iacute;ci&oacute;k m&eacute;ret&eacute;t (1 kilobyte-os blokkokban):</p>

<pre class="screen">
$ df | awk 'NR!=1{s=s+$2}END {print s}'
237107995
$
</pre>

<p>A <span class="command"><strong>df</strong></span> opci&oacute;it, lehet&#337;s&eacute;geit l&aacute;sd a k&eacute;zik&ouml;nyv&eacute;ben.</p>

<p>A k&ouml;vetkez&#337; szkript a part&iacute;ci&oacute;k lefoglalts&aacute;g&aacute;t ellen&#337;rzi. A f&aacute;jlrendszer part&iacute;ci&oacute;i az al&aacute;bbi &aacute;llapotban vannak:</p>
<pre class="screen">
$ df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda2             25798712   3428400  21059812  15% /
udev                    896720       104    896616   1% /dev
/dev/sda1               108883     29450     73811  29% /boot
/dev/sda5            185778200  21664260 154676960  13% /home
/dev/sda6             24525480   8870072  14409572  39% /usr
$ 
</pre>

<p>
A szkriptnek (<code class="filename">dmonitor.sh</code>) param&eacute;terk&eacute;nt megadjuk a part&iacute;ci&oacute;k csatol&aacute;si pontj&aacute;t, &eacute;s azt a sz&aacute;zal&eacute;kban maxim&aacute;lis lefedetts&eacute;get amit m&aacute;r probl&eacute;m&aacute;nak tekint&uuml;nk. Ezt egy egyszer&#369; felsorol&aacute;sban adjuk meg a parancssoron. Ha  a part&iacute;ci&oacute;k nincsenek megtelve, a szkript nem &iacute;r ki semmit, ha valamelyik meghaladja az kijel&ouml;lt hat&aacute;rt, a szkript &uuml;zenetet &iacute;r ki. Teh&aacute;t:</p>

<pre class="screen">
$ bash dmonitor.sh /home 80
$ bash dmonitor.sh /home 80 / 60
$
</pre>

<p>nem kapunk &uuml;zenetet, mert sem a <code class="filename">/home</code>, sem a <code class="filename">/</code> nem haladta meg a 80% illetve 60% lefoglalts&aacute;got (a <code class="filename">/home</code> eset&eacute;ben a 80%-ot, <code class="filename">/</code> eset&eacute;ben a 60%-ot ellen&#337;rizz&uuml;k). Ha kis m&eacute;reteket adunk meg az ellen&#337;rz&ouml;tt sz&aacute;zal&eacute;koknak (teszt miatt):</p>
<pre class="screen">
$ bash dmonitor.sh /home 12 / 60
Baj van a /home part&iacute;ci&oacute;val: lefoglalts&aacute;g: 13 %

$ bash dmonitor.sh /home 12 / 12
Baj van a /home part&iacute;ci&oacute;val: lefoglalts&aacute;g: 13 %
Baj van a / part&iacute;ci&oacute;val: lefoglalts&aacute;g: 15 %

$
</pre>
<p>A szkript az al&aacute;bbi:</p>
<pre class="programlisting">
#!/bin/bash
Az argumentum&aacute;ban magadott k&ouml;nyvt&aacute;rakra csatolt
#lemez part&iacute;ci&oacute;k lefoglalts&aacute;g&aacute;t figyeli
#ha az lefoglalts&aacute;g meghaladja a tesztelend&#337; maxim&aacute;lis
#lefoglalts&aacute;got, egy &uuml;zenetet &iacute;r ki, egy&eacute;bk&eacute;nt nem &iacute;r ki semmit
#Param&eacute;terek:
#   $1 - csatol&aacute;si pont neve, pl.: /home
#   $2 - maxim&aacute;lis lefoglalts&aacute;g, pl.: 90 (eg&eacute;sz sz&aacute;m, jelent&eacute;se 90%)
#
#   ut&aacute;na $3,$4 hasonl&oacute; p&aacute;rt jelent, $5, $6 szint&eacute;n, stb.
#

#ideiglenes f&aacute;jl a df kimenet&eacute;nek felfog&aacute;s&aacute;ra
TEMPFILE="/tmp/df.tmp"

#a df kimenet&eacute;t az ideiglenes f&aacute;jlba &iacute;rjuk
#hogy ne legyen sz&uuml;ks&eacute;ges t&ouml;bbsz&ouml;r megh&iacute;vni
#el&#337;tte lev&aacute;gjuk az els&#337; sor&aacute;t amire nincs sz&uuml;ks&eacute;g&uuml;nk
df | tail -n +2 &gt; $TEMPFILE

msg=""              #ebbe a v&aacute;ltoz&oacute;ba gy&#369;jtj&uuml;k a hiba&uuml;zeneteket

#kell legalabb 2 param&eacute;ter
if (( $# &lt; 2 )) ;then
    echo dmonitor: hib&aacute;s ind&iacute;t&aacute;s, kev&eacute;s param&eacute;ter
    exit 1
fi
#minden egyes k&ouml;nyvt&aacute;r &eacute;s sz&aacute;zal&eacute;k p&aacute;rosra elv&eacute;gezz&uuml;k az ellen&#337;rz&eacute;st
#am&iacute;g van m&eacute;g parancssori param&eacute;ter
while (( $# != 0 ))
do
    part="$1"       #els&#337; param&eacute;ter a part&iacute;ci&oacute;
    max="$2"        #m&aacute;sodik param&eacute;ter a maxim&aacute;lis lefoglalts&aacute;g
    shift 2         #eltoljuk k&eacute;t poz&iacute;ci&oacute;val a parancssort
                    #a k&ouml;vetkez&#337; ciklust k&eacute;sz&iacute;tj&uuml;k el&#337; ezzel

    #v&eacute;gz&uuml;nk n&eacute;h&aacute;ny ellen&#337;rz&eacute;st
    if [ -z "$part" ] ; then
        echo dmonitor: hib&aacute;s bemenet, part&iacute;ci&oacute; helyett &uuml;res sztring!
        exit 1
    fi
    #a m&eacute;ret egy vagy k&eacute;tjegy&#369; eg&eacute;sz sz&aacute;m?
    if ! [[ $max =~ ^[0-9]{1,2}$ ]] ; then
        echo dmonitor: a max=$max m&eacute;ret nem k&eacute;tjegy&#369; eg&eacute;sz sz&aacute;m!
        exit 1
    fi

    #kisz&#369;rj&uuml;k a part&iacute;ci&oacute;nak megfelel&#337; sort
    used=$( cat $TEMPFILE | \
        awk -v part="$part" '{if ($6==part) \
        print substr($5,1,length($5)-1)}' )

    if (( used &gt; max )) ;then
        msg="$msg""Baj van a $part part&iacute;ci&oacute;val: $used % \n"
    fi

done

#ha van &uuml;zenet ki&iacute;rjuk a kimenetre
#az echo -e kapcsol&oacute;ja a \n szekvenci&aacute;t &uacute;jsorr&aacute; alak&iacute;tja
if [ -n "$msg" ] ; then
    echo -e "$msg"
fi

</pre>

<p><span class="strong"><strong>Megjegyz&eacute;sek:</strong></span></p>


<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<p>A <span class="command"><strong>df</strong></span> kimenet&eacute;t ideiglenes &aacute;llom&aacute;nyba t&aacute;roljuk, hogy ne hajtsuk t&ouml;bbsz&ouml;r v&eacute;gre. A <code class="filename">/tmp</code> k&ouml;nyvt&aacute;rat haszn&aacute;ljuk erre, &eacute;s egy egyszer&#369; f&aacute;jlnevet, felt&eacute;telezz&uuml;k, hogy  a szkript egy p&eacute;ld&aacute;nyban fut. Ha fenn&aacute;llna annak a lehet&#337;s&eacute;ge, hogy egyszerre t&ouml;bb p&eacute;ld&aacute;ny fut, a f&aacute;jl nev&eacute;be be kellene illeszteni egy egyedi sz&aacute;mot. Ez lehet a folyamatazonos&iacute;t&oacute; (r&eacute;szletesen l&aacute;sd a <a class="link" href="#pid" title="A folyamatazonos&iacute;t&oacute;">k&ouml;vetkez&#337; fejezetben</a>), amelynek &eacute;rt&eacute;ke a <code class="code">$</code> v&aacute;ltoz&oacute;ban van:</p>
<pre class="programlisting">
TEMPFILE="/tmp/df_$$.tmp"
</pre>
<p>vagy a <a class="link" href="#cmd_mktemp" title="A mktemp parancs"><span class="command"><strong>mktemp</strong></span></a> paranccsal l&eacute;trehozott f&aacute;jln&eacute;v.</p>
</li><li class="listitem">
<p>Az eg&eacute;sz sz&aacute;m ellen&#337;rz&eacute;s&eacute;t a <a class="link" href="#test2" title="A [[ ]] szerkezet"><code class="code">[[ ]]</code></a> szerkezettel v&eacute;gezz&uuml;k. Ebben a regul&aacute;ris kifejez&eacute;s csak bizonyos &uacute;j h&eacute;jakban m&#369;k&ouml;dik. Ha nem biztos, hogy ilyen &aacute;ll rendelkez&eacute;s&uuml;nkre, vagy hordozhat&oacute;bb&aacute; akarjuk tenni ezt, akkor helyette az <span class="command"><strong>egrep</strong></span>-et alkalmazhatjuk:</p>
<pre class="programlisting">
    #a m&eacute;ret k&eacute;tjegy&#369; eg&eacute;sz sz&aacute;m?
    if  !  egrep -q '^[0-9]{1,2}$' ; then
        echo dmonitor: a max=$max m&eacute;ret nem k&eacute;tjegy&#369; eg&eacute;sz sz&aacute;m!
        exit 1
    fi
</pre>
</li><li class="listitem">
<p>A sz&#369;r&#337;k&eacute;nt haszn&aacute;lt nevekben el&#337;fordul a <code class="code">/</code> karakter  is. A nevet k&uuml;ls&#337; v&aacute;ltoz&oacute;k&eacute;nt adjuk &aacute;t az <span class="command"><strong>awk</strong></span>-nak a <a class="link" href="#awk_opt"><code class="option">-v</code> opci&oacute;val</a>. Ezt egyszer&#369;en lehet az <code class="code">==</code> oper&aacute;torral ellen&#337;rizni. &Iacute;gy a <code class="varname">6</code>-os v&aacute;ltoz&oacute;val egyeztet&uuml;nk, &eacute;s csak akkor &iacute;rjuk ki a sz&aacute;zal&eacute;kos &eacute;rt&eacute;ket ha egyez&eacute;s van. Elvileg ennek egyetlen sorban kell megt&ouml;rt&eacute;nnie a bemeneti f&aacute;jlban. Ut&aacute;na a fenti kis p&eacute;ld&aacute;ban m&aacute;r alkalmazott sz&#369;r&eacute;st v&eacute;gezz&uuml;k az <span class="command"><strong>awk</strong></span>-ban. </p>

</li><li class="listitem">
<p>Az ehhez hasonl&oacute; rendszer ellen&#337;rz&#337; szkripteket id&#337;z&iacute;tve futtatjuk  egy fel&uuml;gyel&#337; szkripttel, ez elk&uuml;ldi lev&eacute;lben a szkript kimenet&eacute;t a rendszergazd&aacute;nak, ha probl&eacute;ma van.</p>
</li></ol></div>
<p>Ez a szkript egyszer&#369; megold&aacute;s, igazi &eacute;lesben fut&oacute; rendszereken &aacute;ltal&aacute;nosabb megold&aacute;st kell tervezni.</p>

</div>

</div>

    <div class="chapter" title="11. fejezet - Folyamatok kezel&eacute;se" id="process"><div class="titlepage"><div><div><h2 class="title">11. fejezet - Folyamatok kezel&eacute;se</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e4938">Folyamatok</a></span></dt><dt><span class="sect1"><a href="#pid">A folyamatazonos&iacute;t&oacute;</a></span></dt><dt><span class="sect1"><a href="#job">A Unix feladat (job) fogalma</a></span></dt><dt><span class="sect1"><a href="#d5e5093">A wait parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_ps">Folyamatok k&ouml;vet&eacute;se a ps paranccsal</a></span></dt><dt><span class="sect1"><a href="#cmd_top">A top parancs</a></span></dt><dt><span class="sect1"><a href="#signal">Jelz&eacute;sek</a></span></dt><dt><span class="sect1"><a href="#d5e5428">A kill parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_killall">A killall parancs</a></span></dt><dt><span class="sect1"><a href="#cmd_pgrep">A pgrep &eacute;s pkill parancsok</a></span></dt><dt><span class="sect1"><a href="#cmd_trap">Jelz&eacute;sek kezel&eacute;se shell alatt: a trap parancs</a></span></dt><dt><span class="sect1"><a href="#signal_debug">Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)</a></span></dt><dt><span class="sect1"><a href="#cmd_nohup">A nohup parancs</a></span></dt><dt><span class="sect1"><a href="#subshell">Alh&eacute;jak (subshell)</a></span></dt><dt><span class="sect1"><a href="#d5e5695">P&eacute;ldaprogramok</a></span></dt></dl></div>

<div class="sect1" title="Folyamatok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e4938">Folyamatok</h2></div></div></div>
<p>Folyamatnak (<span class="emphasis"><em>process</em></span>) nevezz&uuml;k az oper&aacute;ci&oacute;s rendszerben a fut&oacute; program egy p&eacute;ld&aacute;ny&aacute;t.</p>
<p>Amikor egy oper&aacute;ci&oacute;s rendszer egy programot futtat, akkor a program k&oacute;dj&aacute;n k&iacute;v&uuml;l egy&eacute;b inform&aacute;ci&oacute;kat is nyilv&aacute;ntart err&#337;l. &Iacute;gy p&eacute;ld&aacute;ul a programhoz rendelt mem&oacute;riater&uuml;letet, megnyitott &aacute;llom&aacute;nyokat, k&ouml;rnyezeti v&aacute;ltoz&oacute;it &eacute;s m&eacute;g sok egyebet. Ezeket is kezelnie kell, &iacute;gy a fut&oacute; program p&eacute;ld&aacute;nya t&ouml;bb inform&aacute;ci&oacute;t jelent mint a programk&oacute;d. A Unix rendszerek egyik legfontosabb feladata a folyamatok kezel&eacute;se. Interakt&iacute;v munka sor&aacute;n a h&eacute;j szintj&eacute;n a felhaszn&aacute;l&oacute;nak t&ouml;bb lehet&#337;s&eacute;ge van befoly&aacute;solni a fut&oacute; folyamatokat.</p>

<p>A Unix rendszerek folyamatai "p&aacute;rhuzamosan" futnak, legal&aacute;bbis ez &iacute;gy t&#369;nik a felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra. A folyamatok p&aacute;rhuzamos v&eacute;grehajt&aacute;s&aacute;t a kernel egyik komponense, az &uuml;temez&#337; (<span class="emphasis"><em>scheduler</em></span>) vez&eacute;rli, &iacute;gy a folyamatok felv&aacute;ltva jutnak r&ouml;vid fut&aacute;si id&#337;h&ouml;z a processzoron (a kis id&#337;intervallum neve <span class="emphasis"><em>time slice</em></span>), amennyiben egy processzoros rendszeren futnak. Ha a rendszer t&ouml;bb processzoros, a kernel megpr&oacute;b&aacute;lja ezt is kihaszn&aacute;lni a p&aacute;rhuzamos&iacute;t&aacute;s &eacute;rdek&eacute;ben. Ugyanakkor ezeken a rendszereken t&ouml;bb felhaszn&aacute;l&oacute; dolgozhat egyidej&#369;leg. A folyamatokat az &uuml;temez&#337; bizonyos  priorit&aacute;sok szerint kezeli, &iacute;gy a fontosabbak gyakrabban jutnak fut&aacute;si id&#337;h&ouml;z</p>

<p>Interakt&iacute;v munka k&ouml;zben a programokat (pl. a Unix parancsokat) a h&eacute;jb&oacute;l ind&iacute;tjuk, mag&aacute;t az ind&iacute;t&aacute;s folyamat&aacute;t mindig a kernel v&eacute;gzi. A kernel adatstrukt&uacute;r&aacute;kat hoz l&eacute;tre, amiben a folyamat dinamikus le&iacute;r&oacute; inform&aacute;ci&oacute;it tartja. A folyamatok egyenk&eacute;nt rendelkeznek az al&aacute;bbi tulajdons&aacute;gokkal:</p>

  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p>Minden folyamat rendelkezik egy saj&aacute;t v&eacute;dett mem&oacute;ria z&oacute;n&aacute;val. Ez azt jelenti, hogy ezt csak a folyamat haszn&aacute;lja, &eacute;s m&aacute;sok nem &iacute;rnak/olvasnak bel&#337;le.</p>
    </li><li class="listitem">
<p>Ha a parancsot interakt&iacute;v m&oacute;dban ind&iacute;tottuk, akkor rendelkezik legal&aacute;bb 3, a folyamat indul&aacute;sakor megnyitott &aacute;llom&aacute;nnyal: standard ki &eacute;s bemenet, valamint hibakimenet. Ugyanakkor ezeken az implicit bemenetet &eacute;s kimenetet az interakt&iacute;v termin&aacute;l jelenti, ezt ilyenkor a folyamatot fel&uuml;gyel&#337; termin&aacute;lnak (<span class="emphasis"><em>controlling terminal</em></span>) nevezz&uuml;k.</p>
</li><li class="listitem">
<p>A folyamat megkapja a k&ouml;rnyezet&eacute;t le&iacute;r&oacute; v&aacute;ltoz&oacute;kat, n&eacute;v &eacute;rt&eacute;k p&aacute;rok form&aacute;j&aacute;ban, pl. <code class="varname">LANG='hu_HU.UTF-8'</code>. Ez lehet&#337;s&eacute;get ad arra, hogy k&uuml;l&ouml;nb&ouml;z&#337; inform&aacute;ci&oacute;kat juttassunk el a folyamathoz, a n&eacute;lk&uuml;l, hogy a a parancssort haszn&aacute;ln&aacute;nk. Term&eacute;szetesen els&#337;sorban az oper&aacute;ci&oacute;s rendszer &aacute;ltal ny&uacute;jtott fut&aacute;si k&ouml;rnyezetr&#337;l tartalmaznak ezek a v&aacute;ltoz&oacute;k inform&aacute;ci&oacute;t.</p>
    </li><li class="listitem">
<p>Megkapja az ind&iacute;t&aacute;sakor be&iacute;rt parancssor&aacute;t. Amennyiben a folyamat bin&aacute;ris program k&eacute;pe, &eacute;s pl. C nyelven &iacute;r&oacute;dott, a megfelel&#337; sztringeket a <code class="code">main()</code> f&uuml;ggv&eacute;ny param&eacute;tereik&eacute;nt kapja meg. A h&eacute;j  feldolgozva adja oda a programnak, &iacute;gy pl. a * helyett be van &iacute;rva a munkak&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; &aacute;llom&aacute;nyok list&aacute;ja. A h&eacute;j parancssora &ouml;sszetettebb parancsot is tartalmazhat, amely egyszerre t&ouml;bb folyamat ind&iacute;t&aacute;s&aacute;t is tartalmazhatja, ennek sz&eacute;tv&aacute;laszt&aacute;s&aacute;t az ind&iacute;t&oacute; h&eacute;j kezeli.</p>
    </li><li class="listitem">
<p>A kernel egy priorit&aacute;st rendel hozz&aacute;: erre az&eacute;rt van sz&uuml;ks&eacute;g, mert a fontosabb folyamatok nagyobb es&eacute;llyel kell fut&aacute;si id&#337;h&ouml;z jussanak, mint a kev&eacute;sb&eacute; fontosak.</p>
</li></ul></div>

<p>A folyamatl&eacute;trehoz&aacute;s gyorsan, kev&eacute;s er&#337;forr&aacute;st haszn&aacute;lva t&ouml;rt&eacute;nik a Unix rendszerek alatt. Ez&eacute;rt m&#369;k&ouml;dik j&oacute;l a Unixban az a strat&eacute;gia, hogy a nagyobb feladatokat kis programok &ouml;sszekapcsol&aacute;s&aacute;val kell megoldani.</p>

<p>A folyamatok fut&aacute;suk k&ouml;zben t&ouml;bb &aacute;llapotot vesznek fel. Erre az&eacute;rt van sz&uuml;ks&eacute;g, mert a kernel a folyamatokat felv&aacute;ltva engedi futni, hol meg&aacute;ll&iacute;tja &eacute;s v&aacute;rakoztatja ("blokkolja") &#337;ket hol pedig egy adott id&#337;re teljesen felf&uuml;ggeszti &#337;ket (pl. ha egy <span class="command"><strong>sleep</strong></span> parancsot hajtunk v&eacute;gre).</p>

<p>A folyamatokat a Unix <span class="command"><strong>ps</strong></span> nev&#369; parancs&aacute;nak seg&iacute;ts&eacute;g&eacute;vel list&aacute;zzuk (<a class="link" href="#cmd_ps" title="Folyamatok k&ouml;vet&eacute;se a ps paranccsal">haszn&aacute;lat&aacute;t l&aacute;sd al&aacute;bb</a>).  Mivel a folyamatok &uuml;temez&eacute;se nagyon kis id&#337;intervallumok alatt t&ouml;rt&eacute;nik (pl. az &uuml;temez&eacute;si id&#337; 10 miliszekundum k&ouml;r&uuml;li is lehet), nem l&aacute;that&oacute; minden k&ouml;ztes &aacute;llapot a termin&aacute;llal t&ouml;rt&eacute;n&#337; list&aacute;z&aacute;s folyam&aacute;n (ennek nincs is &eacute;rtelme,  a termin&aacute;lon megjelen&#337; sz&ouml;veg ki&iacute;r&aacute;sa t&ouml;bb ideig tarthat, mint j&oacute; n&eacute;h&aacute;ny folyamat egym&aacute;s ut&aacute;ni &uuml;temez&eacute;se). A folyamatok fontosabb, <span class="command"><strong>ps</strong></span> &aacute;ltal list&aacute;zhat&oacute; &aacute;llapotai a UNIX/Linux rendszerek alatt az al&aacute;bbiak (Linuxon, a GNU <span class="command"><strong>ps</strong></span>-t haszn&aacute;lva):</p>


       <div class="table"><a name="d5e4969"></a><p class="title"><b>11.1. t&aacute;bl&aacute;zat - A ps &aacute;ltal megjelen&iacute;tett folyamat &aacute;llapotok</b></p><div class="table-contents">
                
                <table summary="A ps &aacute;ltal megjelen&iacute;tett folyamat &aacute;llapotok" cellpadding="2" border="1"><colgroup><col width="22%" class="col1"><col width="11%" class="col2"><col width="67%" class="col3"></colgroup><thead><tr><th align="center">Az &aacute;llapot neve</th><th align="center">Az &aacute;llapot bet&#369;jele</th><th align="center">Le&iacute;r&aacute;s</th></tr></thead><tbody><tr><td align="left">Fut (<span class="emphasis"><em>Running</em></span>)</td><td align="center">R</td><td align="left">A folyamat fut. Parancssoros munka eset&eacute;ben ide soroljuk azt az esetet is amikor a folyamat m&eacute;g nem fut, de fut&aacute;sra k&eacute;sz. Ilyenkor a folyamat arra v&aacute;r, hogy processzorid&#337;h&ouml;z jusson.</td></tr><tr><td align="left">V&aacute;rakozik (<span class="emphasis"><em>Interruptible  Sleep</em></span>)</td><td align="center">S</td><td align="left">A folyamat v&aacute;rakozik valamilyen esem&eacute;nyre vagy er&#337;forr&aacute;sra &eacute;s megszak&iacute;that&oacute; egy jelz&eacute;s &aacute;ltal. P&eacute;ld&aacute;ul egy sz&aacute;ml&aacute;l&oacute;ra (<span class="command"><strong>sleep</strong></span>) vagy valamilyen Be/Ki m&#369;veletre.</td></tr><tr><td align="left">Esem&eacute;nyre v&aacute;r (<span class="emphasis"><em>Uninterruptible Sleep</em></span>)</td><td align="center">D</td><td align="left">A folyamat v&aacute;rakozik valamilyen esem&eacute;nyre vagy er&#337;forr&aacute;sra &eacute;s <span class="strong"><strong>nem</strong></span> szak&iacute;that&oacute; meg jelz&eacute;s &aacute;ltal. &Aacute;ltal&aacute;ban ez az &aacute;llapot valamilyen be/kimeneti eszk&ouml;zre val&oacute; v&aacute;rakoz&aacute;st jelent.</td></tr><tr><td align="left">Fel van f&uuml;ggesztve (<span class="emphasis"><em>Stopped, Traced</em></span>)</td><td align="center">T</td><td align="left">Fel van f&uuml;ggesztve &eacute;s &aacute;ll.  Ide ker&uuml;l egy folyamat ha a termin&aacute;lr&oacute;l futtatva lenyomjuk a Ctrl-Z billenty&#369;t.</td></tr><tr><td align="left">Ap&aacute;tlan (<span class="emphasis"><em>Zombie</em></span>)</td><td align="center">Z</td><td align="left">Ha egy folyamat kil&eacute;p, az apa folyamatnak &aacute;t kell vennie a fi&uacute; kil&eacute;p&eacute;si &aacute;llapot adatait. Am&iacute;g ezt nem teszi meg, a fi&uacute; un. ap&aacute;tlan &aacute;llapotba ker&uuml;l, b&aacute;r m&aacute;r nem fut. Ha az apa ezt nem teszi meg, az <code class="code">init</code> fogja &aacute;tvenni helyette.</td></tr></tbody></table>
        </div></div><br class="table-break"> 

 </div>

<div class="sect1" title="A folyamatazonos&iacute;t&oacute;"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="pid">A folyamatazonos&iacute;t&oacute;</h2></div></div></div>

<p>A folyamatok azonos&iacute;t&aacute;s&aacute;ra a rendszer egy folyamatazonos&iacute;t&oacute;nak nevezett eg&eacute;sz sz&aacute;mot haszn&aacute;l(<span class="emphasis"><em>process id</em></span> vagy <span class="emphasis"><em>pid</em></span>). Ezen kereszt&uuml;l &eacute;rj&uuml;k el a gyakorlatilag  folyamatot illetve annak tulajdons&aacute;gait. Azt mondjuk, hogy az 1562 sz&aacute;m&uacute;, vagy csak 1562-es folyamat fut, f&uuml;ggeszt&#337;dik fel, kil&eacute;p, stb.</p>

<p>Amikor a rendszer indul, &eacute;s a kernel elkezdi fel&eacute;p&iacute;teni a rendszert, egy <code class="code">init</code> nev&#369; folyamat az els&#337; amit elind&iacute;t. Ezt az &uuml;temez&#337; ind&iacute;tja, amelyiket a legt&ouml;bb rendszeren 0 sz&aacute;m&uacute; folyamatk&eacute;nt tartunk sz&aacute;mon (neve <span class="emphasis"><em>sched</em></span> , <span class="emphasis"><em>swapper</em></span> vagy egyszer&#369;en csak <span class="emphasis"><em>kernel</em></span> a k&uuml;l&ouml;nb&ouml;z&#337; rendszereken, a <span class="command"><strong>ps</strong></span> parancs nem list&aacute;zza ki). Az els&#337; val&oacute;di folyamat az <code class="code">init</code> , amelynek azonos&iacute;t&oacute;ja 1. A ut&aacute;na ind&iacute;tott folyamatok mind t&#337;le sz&aacute;rmaznak, &iacute;gy a folyamatok &ouml;sszef&uuml;gg&eacute;s&uuml;kben egy fa szer&#369; strukt&uacute;r&aacute;t alkotnak. Ezt megjelen&iacute;thetj&uuml;k a <span class="command"><strong>pstree</strong></span> paranccsal Linuxon: al&aacute;bb ennek kis r&eacute;szlete l&aacute;tszik (a z&aacute;r&oacute;jelben lev&#337; sz&aacute;mok a folyamat azonos&iacute;t&oacute;t jelentik):</p>

<pre class="screen">
$ pstree -p 
init(1)&#9472;&#9516;&#9472;acpid(2991) 
        &#9500;&#9472;atd(3273) 
        &#9500;&#9472;auditd(2368)&#9472;&#9516;&#9472;audispd(2370)&#9472;&#9472;&#9472;{audispd}(2371) 
        &#9474;              &#9492;&#9472;{auditd}(2369) 
        &#9500;&#9472;automount(2964)&#9472;&#9516;&#9472;{automount}(2965) 
        &#9474;                 &#9500;&#9472;{automount}(2966) 
        &#9474;                 &#9500;&#9472;{automount}(2969) 
        &#9474;                 &#9492;&#9472;{automount}(2972) 
...
</pre>

<p>A h&eacute;j a saj&aacute;t folyamatazonos&iacute;t&oacute;j&aacute;t a <code class="varname">$</code> speci&aacute;lis v&aacute;ltoz&oacute;j&aacute;banban tartalmazza, &eacute;rt&eacute;k&eacute;t a <code class="varname">$$</code> hivatkoz&aacute;ssal &eacute;rj&uuml;k el. Az interakt&iacute;v h&eacute;j folyamatazonos&iacute;t&oacute;j&aacute;t teh&aacute;t &iacute;gy list&aacute;zhatjuk:</p>

<pre class="screen">
$ echo $$ 
16239 
$ 
</pre>


</div>

<div class="sect1" title="A Unix feladat (job) fogalma"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="job">A Unix feladat (job) fogalma</h2></div></div></div>

<p>A termin&aacute;llal val&oacute; munka sor&aacute;n egy parancssorral egyszerre ak&aacute;r t&ouml;bb folyamatot ind&iacute;thatunk. Pl. az al&aacute;bbi parancssor:</p>

<pre class="screen">
$ head -20 data.txt | sort | uniq
</pre>

<p>3 folyamatot ind&iacute;t &eacute;s k&ouml;zt&uuml;k cs&#337;vezet&eacute;keket hoz l&eacute;tre. Ez&eacute;rt a termin&aacute;llal t&ouml;rt&eacute;n&#337; munka sz&aacute;m&aacute;ra sz&uuml;ks&eacute;ges egy m&aacute;sik fogalom is, ami jellemzi az egy parancssorral ind&iacute;tott folyamatokat.</p>

<p>Egy parancssor &aacute;ltal kiadott "feladatot" nevezi a UNIX "job" -nak. Ezeket k&uuml;l&ouml;n k&ouml;vetni lehet a Unix <span class="command"><strong>jobs</strong></span> paranccs&aacute;val.</p>

<p>A fontosabb fogalmakkal amelyek a feladatok kezel&eacute;s&eacute;hez tartoznak m&aacute;r tal&aacute;lkoztunk: </p>

  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p>az el&#337;t&eacute;rben &eacute;s h&aacute;tt&eacute;rben futtat&aacute;s</p>
    </li><li class="listitem">
<p>az <span class="command"><strong>fg</strong></span> &eacute;s <span class="command"><strong>bg</strong></span> parancsok</p>
    </li><li class="listitem">
<p>az <code class="code">&amp;</code> jel jelent&eacute;se a parancssoron.</p>
    </li></ul></div>

<p>Az el&#337;t&eacute;rben futtatott folyamatokat meg lehet szak&iacute;tani a termin&aacute;lr&oacute;l be&uuml;t&ouml;tt megszak&iacute;t&oacute; karakterekkel, amelyek tulajdonk&eacute;ppen jelz&eacute;seket k&uuml;ldenek (l&aacute;sd al&aacute;bb):  <code class="code">Ctrl-C</code> - megszak&iacute;t&aacute;s, <code class="code">Ctrl-Z</code> - felf&uuml;ggeszt&eacute;s,   <code class="code">Ctrl-\</code> kil&eacute;p&eacute;s program mem&oacute;riak&eacute;p&eacute;nek ki&iacute;r&aacute;s&aacute;val (<span class="emphasis"><em>core dump</em></span>).</p>

<p>Ha a parancssoron elind&iacute;tunk egy folyamatot a h&aacute;tt&eacute;rben, az utols&oacute; ind&iacute;tott folyamat azonos&iacute;t&oacute;j&aacute;t a <code class="varname">!</code> speci&aacute;lis v&aacute;ltoz&oacute;ban tal&aacute;ljuk &eacute;s <code class="varname">$!</code> hivatkoz&aacute;ssal &eacute;rj&uuml;k el.</p>

<p>A folyamatok kezel&eacute;s&eacute;nek illusztr&aacute;l&aacute;s&aacute;hoz egy kis szkriptet fogunk haszn&aacute;lni, amelyik semmit sem v&eacute;gez, de alkalmas arra, hogy ciklusban hossz&uacute; ideig fusson periodikus v&aacute;rakoz&aacute;sokkal, &iacute;gy lesz id&#337;nk megfigyelni a t&ouml;rt&eacute;nteket. A szkriptnek ind&iacute;t&aacute;skor megadjuk egy param&eacute;terben, h&aacute;ny m&aacute;sodpercig v&eacute;gezze a "semmit".</p>


<p>A <code class="filename">lassu.sh</code> szkript&uuml;nk k&oacute;dja:</p>

<pre class="programlisting">
#!/bin/bash

if [ -z "$1" ];then
    echo haszn&aacute;lat: lassu.sh  m&aacute;sodperc
    exit 1
fi

n=$1                  #h&aacute;ny ciklust v&eacute;gez

while (( n-- ))
do
    sleep 1
done
</pre>

<p>Az al&aacute;bbi p&eacute;ld&aacute;ban a h&aacute;tt&eacute;rben ind&iacute;tjuk a <code class="filename">lassu.sh</code>-t (pontosabban egy m&aacute;sodik <span class="command"><strong>bash</strong></span> &eacute;rtelmez&#337;t, amelyik a <code class="filename">lassu.sh</code>-t &eacute;rtelmezi). Ut&aacute;na kilist&aacute;zzuk az apa &eacute;s fi&uacute; folyamat azonos&iacute;t&oacute;it. Majd a <span class="command"><strong>pstree</strong></span>-vel az apa-fi&uacute; viszonyt (a <span class="command"><strong>pstree</strong></span> <code class="option">-p</code> opci&oacute;ja a folyamat azonos&iacute;t&oacute;kat, a <code class="option">-a</code> a folyamatot ind&iacute;t&oacute; parancssort list&aacute;zza). Ha a <span class="command"><strong>pstree</strong></span>-nek argumentumk&eacute;nt egy folyamatazonos&iacute;t&oacute;t adunk, csak a kiv&aacute;lasztott folyamatot &eacute;s a fiait list&aacute;zza. L&aacute;that&oacute;, hogy a <span class="command"><strong>sleep</strong></span> mint &uacute;j folyamat jelenik meg a m&aacute;sodik <span class="command"><strong>bash</strong></span> alatt.</p>

<pre class="screen">
$ bash lassu.sh 200 &amp;
[1] 12606
$ echo $!
12606
$ echo $$
23571
$ pstree -ap 23571
bash,23571
  &#9500;&#9472;bash,12606 lassu.sh 200
  &#9474;   &#9492;&#9472;sleep,12735 1
  &#9492;&#9472;pstree,12737 -ap 23571
$
[1]+  Done                    bash lassu.sh 200
$
</pre>

<p>A szkriptet h&aacute;tt&eacute;rben ind&iacute;tottuk: a []-ben tal&aacute;lhat&oacute; sz&aacute;mot, amelyet a shell &iacute;r vissza "<span class="emphasis"><em>job</em></span>" vagy feladat sz&aacute;mnak nevezz&uuml;k. A m&aacute;sodik sz&aacute;m (12606) a szkriptet futtat&oacute; h&eacute;j  folyamatazonos&iacute;t&oacute;ja. &Eacute;szrevehet&#337;, hogy az ind&iacute;t&oacute; h&eacute;j <code class="varname">!</code> v&aacute;ltoz&oacute;ja ezt tartalmazza. Ugyanakkor a <code class="varname">$</code> v&aacute;ltoz&oacute; &eacute;rt&eacute;ke egy m&aacute;sik azonos&iacute;t&oacute;, ez az &aacute;ltalunk haszn&aacute;lt interakt&iacute;v h&eacute;j&eacute;. Ha 200 m&aacute;sodperc m&uacute;lva egy &uacute;jsort &uuml;t&uuml;nk be, a h&eacute;j  ki&iacute;rja a <span class="emphasis"><em>Done</em></span> sz&oacute;t tartalmaz&oacute; sorban, hogy v&eacute;get &eacute;rt a h&aacute;tt&eacute;rben fut&oacute; folyamat (az &uacute;jsor le&uuml;t&eacute;se a kimeneti pufferben lev&#337; sz&ouml;veget &iacute;rja ki a termin&aacute;lra). Az els&#337; h&aacute;tt&eacute;rben ind&iacute;tott feladat sz&aacute;ma 1, ha t&ouml;bb feladatot ind&iacute;tunk, ezek kis, n&ouml;vekv&#337; eg&eacute;sz sz&aacute;mok lesznek (2,3,...).</p>

<p>A <span class="command"><strong>jobs</strong></span> parancs biztos&iacute;tja a termin&aacute;lr&oacute;l az elind&iacute;tott feladatok fel&uuml;gyelet&eacute;t. Fontosabb opci&oacute;i:</p>


  <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
      <p><code class="option">-p</code> csak a folyamatazonos&iacute;t&oacute;t list&aacute;zza</p>
    </li><li class="listitem">
       <p><code class="option">-l</code> mindent list&aacute;z, a feladat folyamatait is k&uuml;l&ouml;n-k&uuml;l&ouml;n</p>
    </li><li class="listitem">
       <p><code class="option">-r</code> csak a fut&oacute; folyamatokat list&aacute;zza</p>    
    </li><li class="listitem">
       <p><code class="option">-s</code> csak a le&aacute;ll&iacute;tott feladatokat  (stopped) list&aacute;zza</p>    
    </li></ul></div>

<p>Az al&aacute;bbi p&eacute;ld&aacute;ban a <code class="filename">lassu.sh</code> szkript  egym&aacute;s ut&aacute;n ind&iacute;tott k&eacute;t p&eacute;ld&aacute;ny&aacute;n kereszt&uuml;l  illusztr&aacute;ljuk haszn&aacute;lat&aacute;t:</p>

<pre class="screen">
$ ./lassu.sh 500 &amp;
[1] 18002
$ #a masodik az el&#337;terben, majd Ctrl-Z-vel felf&uuml;ggessz&uuml;k
$ ./lassu.sh 500

[2]+  Stopped                 ./lassu.sh 500
$ #kilist&aacute;zzuk a fut&oacute; feladatokat
$ jobs -l
[1]- 18002 Running                 ./lassu.sh 500 &amp;
[2]+ 18108 Stopped                 ./lassu.sh 500
$ #kilist&aacute;zzuk a fut&oacute; feladatokat
$ #elind&iacute;tjuk h&aacute;tt&eacute;rben a m&aacute;sodikat is
$ bg 2
[2]+ ./lassu.sh 500 &amp;
$ jobs -l
[1]- 18002 Running                 ./lassu.sh 500 &amp;
[2]+ 18108 Running                 ./lassu.sh 500 &amp;
$ #eloterbe hozzuk a kettest
$ fg 2
./lassu.sh 500
$ 
</pre>

<p>A "+" jel a job sz&aacute;m mellett az utols&oacute;, a "-" jel az utols&oacute; el&#337;tti ind&iacute;tott folyamatot jelzi.</p>

</div>


<div class="sect1" title="A wait parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5093">A wait parancs<a class="indexterm" name="d5e5095"></a></h2></div></div></div>

<p>Ha egy szkriptb&#337;l h&aacute;tt&eacute;rben ind&iacute;tunk egy m&aacute;sikat, &eacute;s az el&#337;t&eacute;rben fut, a szkript k&ouml;vetkez&#337; parancsa csak akkor indul, ha az el&#337;z&#337; szkript v&eacute;get &eacute;r, pl. az al&aacute;bbi <code class="filename">start.sh</code> szkriptben:</p>

<pre class="programlisting">
#!/bin/bash
./lassu.sh 100
echo v&eacute;ge
exit 0
</pre>

<p>, de ha a <code class="filename">lassu.sh</code>-t h&aacute;tt&eacute;rben ind&iacute;tjuk, az ind&iacute;t&oacute; szkript hamarabb &eacute;r v&eacute;get, mint pl. az al&aacute;bbiban:</p>

<pre class="programlisting">
#!/bin/bash
./lassu.sh 100 &amp;
echo v&eacute;ge
exit 0
</pre>

<p>A Unix rendszerekben fut&oacute; folyamatok &aacute;ltal&aacute;ban egy fut&oacute; folyamat fiak&eacute;nt kell l&eacute;tezzenek, &iacute;gy az ind&iacute;t&oacute; folyamatnak meg kell v&aacute;rnia fi&aacute;t, ezt a <span class="command"><strong>wait</strong></span> paranccsal oldhatjuk meg. Haszn&aacute;lata:</p>

<pre class="programlisting">
<span class="strong"><strong>wait</strong></span>               #minden fi&uacute; folyamatra v&aacute;r
<span class="strong"><strong>wait n</strong></span>             #az n azonos&iacute;t&oacute;j&uacute; folyamatra v&aacute;r  
<span class="strong"><strong>wait %n</strong></span>            #az n.-dik job folyamataira v&aacute;r 
</pre>

<p>Az opcion&aacute;lis <span class="strong"><strong>n</strong></span> sz&aacute;m folyamatazonos&iacute;t&oacute;t  jelent, ha <code class="code">%</code> jel van el&#337;tte akkor <span class="emphasis"><em>job</em></span> (feladat) azonos&iacute;t&oacute;t.</p>

<p>A <span class="command"><strong>wait</strong></span> parancs az argumentum&aacute;ban megadott job sz&aacute;mhoz (<code class="code">%n</code>) tartoz&oacute; folyamatokra (mindegyikre) vagy egy bizonyos folyamatra (<code class="code">n</code>)  v&aacute;r, ut&aacute;na visszaadja annak kil&eacute;p&eacute;si k&oacute;dj&aacute;t. Ha hi&aacute;nyzik a folyamatazonos&iacute;t&oacute;, akkor minden fi&uacute; folyamatra v&aacute;r.</p>

<p><code class="code">n</code> helyett szerepelhet egy lista is: <code class="code">n1 n2 n3</code> &#8230; form&aacute;ban.</p>
<p>A <span class="command"><strong>wait</strong></span> v&eacute;grehajt&aacute;sa alatt a shell nem ind&iacute;t &uacute;j parancsot &eacute;s nem olvassa a termin&aacute;lt sem.</p>

<p>Az al&aacute;bbi programban k&eacute;tszer ind&iacute;tjuk a <code class="filename">lassu.sh</code> szkriptet  ut&aacute;na bev&aacute;rjuk v&eacute;grehajt&aacute;sukat. A <code class="filename">lassu.sh</code> annyi m&aacute;sodpercig fut, amennyit k&eacute;r&uuml;nk t&#337;le a parancssoron. &Iacute;gy az els&#337;nek ind&iacute;tott p&eacute;ld&aacute;ny hamarabb &eacute;r v&eacute;get. A  <span class="command"><strong>wait</strong></span> v&eacute;grehajt&aacute;sakor a program mindkett&#337;t bev&aacute;rja:</p>

<pre class="programlisting">
#!/bin/bash

./lassu.sh 3 &amp;
./lassu.sh 10 &amp;

wait

echo v&eacute;ge
exit 0
</pre>

</div>

<div class="sect1" title="Folyamatok k&ouml;vet&eacute;se a ps paranccsal"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_ps">Folyamatok k&ouml;vet&eacute;se a ps paranccsal</h2></div></div></div>

<p>A <span class="command"><strong>ps</strong></span> (<span class="emphasis"><em>process status</em></span>) parancs a folyamatok k&ouml;vet&eacute;s&eacute;re haszn&aacute;lt legfontosabb parancs. Gyakorlatilag minden, a kernel &aacute;ltal nyilv&aacute;ntartott inform&aacute;ci&oacute;t ki lehet vele list&aacute;zni a folyamatokr&oacute;l.</p>

<p>Opci&oacute;i System V (- jel az opci&oacute; el&#337;tt)  vagy BSD (- jel n&eacute;lk&uuml;l) st&iacute;lus&uacute;ak is lehetnek; a <span class="command"><strong>ps</strong></span> komplex parancs &eacute;s sok opci&oacute;val rendelkezik. A GNU v&aacute;ltozata t&ouml;bb UNIX rendszer <span class="command"><strong>ps</strong></span> parancshaszn&aacute;lati m&oacute;dj&aacute;t is tudja emul&aacute;lni, l&aacute;sd ezzel kapcsolatban a <span class="command"><strong>ps</strong></span> k&eacute;zik&ouml;nyv oldal&aacute;t. Ez&eacute;rt csak n&eacute;h&aacute;ny egyszer&#369; haszn&aacute;lati m&oacute;dot fogunk &aacute;tn&eacute;zni.</p>

<p>A <span class="command"><strong>ps</strong></span> egy t&aacute;bl&aacute;zatszer&#369; kimenetben &iacute;rja ki a folyamatok inform&aacute;ci&oacute;it. Els&#337; sora jelzi az oszlopokban ki&iacute;rt inform&aacute;ci&oacute;kat. Kimenet&eacute;nek legfontosabb oszlopai:</p>


<div class="table"><a name="d5e5138"></a><p class="title"><b>11.2. t&aacute;bl&aacute;zat - A ps parancs kimenet&eacute;nek fontosabb oszlopai</b></p><div class="table-contents">
                
    <table summary="A ps parancs kimenet&eacute;nek fontosabb oszlopai" cellpadding="2" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Oszlop neve</th><th align="center">Mit tartalmaz</th></tr></thead><tbody><tr><td align="center">PID</td><td align="left">A folyamat folyamatazonos&iacute;t&oacute;ja.</td></tr><tr><td align="center">PPID</td><td align="left">parent pid: az apa folyamat azonos&iacute;t&oacute;ja.</td></tr><tr><td align="center">%CPU</td><td align="left">A processzornak mennyi  idej&eacute;t haszn&aacute;lja sz&aacute;zal&eacute;kban.</td></tr><tr><td align="center">TIME</td><td align="left">Mennyi  id&#337;t futott eddig: processzor id&#337; + rendszer id&#337;.</td></tr><tr><td align="center">COMMAND</td><td align="left">A parancssora.</td></tr><tr><td align="center">USER</td><td align="left">A tulajdonos neve.</td></tr><tr><td align="center">UID</td><td align="left">A tulajdonos azonos&iacute;t&oacute;ja.</td></tr><tr><td align="center">C</td><td align="left">A folyamat id&#337;haszn&aacute;lata: processzor id&#337; / val&oacute;di id&#337; . A sz&aacute;m az oszt&aacute;s eg&eacute;sz r&eacute;sz&eacute;t tartalmazza. A %cpu kijelz&eacute;s ugyanezt &iacute;rja ki sz&aacute;zal&eacute;kokban.</td></tr><tr><td align="center"><div class="literallayout"><p>PRI,<br>
RTPRIO,<br>
NI</p></div></td><td align="left">A folyamat priorit&aacute;s&aacute;nak &eacute;rt&eacute;ke a PRI mez&#337;ben ker&uuml;l kijelz&eacute;sre. Ez az &eacute;rt&eacute;k bels&#337; kernel v&aacute;ltoz&oacute;, nem lehet k&iacute;v&uuml;lr&#337;l m&oacute;dos&iacute;tani (kisebb &eacute;rt&eacute;k nagyobb priorit&aacute;st jelent).  Az RTPRIO (real time priority) olyan alkalmaz&aacute;sok kapnak magasabb &eacute;rt&eacute;ket amelyek val&oacute;s id&#337;ben m&#369;k&ouml;dnek (pl. egy vide&oacute; lej&aacute;tsz&oacute;). A folyamat nice sz&aacute;ma az NI oszlopban jelenik meg: implicit programind&iacute;t&aacute;sn&aacute;l 0, &eacute;rt&eacute;keket 1-t&#337;l 20-ig adhatunk min&eacute;l nagyobb ez a sz&aacute;m, ann&aacute;l kisebb priorit&aacute;ssal fut a folyamat. A PRI &eacute;rt&eacute;k f&uuml;gg az RTPRIO &eacute;s NICE sz&aacute;mokt&oacute;l, de az &ouml;sszef&uuml;gg&eacute;st a kernel sz&aacute;molja ki.</td></tr><tr><td align="center">WCHAN</td><td align="left">Annak a kernel f&uuml;ggv&eacute;nynek a c&iacute;me amelyben a folyamat "alszik" (v&aacute;rakozik, wait chain).</td></tr><tr><td align="center">TTY</td><td align="left">Melyik a folyamatot kontroll&aacute;l&oacute; termin&aacute;l.</td></tr><tr><td align="center">CMD</td><td align="left">Milyen paranccsal ind&iacute;tott&aacute;k.</td></tr></tbody></table>
</div></div><br class="table-break"> 

<p>Az al&aacute;bbi t&aacute;bl&aacute;zatban pedig megadjuk a ps n&eacute;h&aacute;ny gyakran haszn&aacute;lt m&oacute;dj&aacute;t, a jobb oldali oszlopnban a ps ilyenkor haszn&aacute;lt opci&oacute;i tal&aacute;lhat&oacute;ak.</p>


<div class="table"><a name="d5e5186"></a><p class="title"><b>11.3. t&aacute;bl&aacute;zat - A ps parancs n&eacute;h&aacute;ny gyakran haszn&aacute;lt parancssori opci&oacute;ja</b></p><div class="table-contents">
                
    <table summary="A ps parancs n&eacute;h&aacute;ny gyakran haszn&aacute;lt parancssori opci&oacute;ja" cellpadding="2" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Opci&oacute;k</th><th align="center">Mit list&aacute;z a <span class="command"><strong>ps</strong></span></th></tr></thead><tbody><tr><td align="center"><span class="emphasis"><em>opci&oacute; n&eacute;lk&uuml;l</em></span></td><td align="left">
<p>A <span class="command"><strong>ps</strong></span> egyszer&#369;en, opci&oacute;k n&eacute;lk&uuml;l a folyamatazonos&iacute;t&oacute;t, termin&aacute;lt, elhaszn&aacute;lt processzorid&#337;t &eacute;s a program nev&eacute;t list&aacute;zza, de csak azokat amelyek abban a termin&aacute;lban lettek elind&iacute;tva amelyet &eacute;ppen haszn&aacute;lunk:</p>
<pre class="screen">
$ ps
  PID TTY          TIME CMD
15304 pts/0    00:00:00 bash
15366 pts/0    00:00:00 cat
15715 pts/0    00:00:00 bash
15716 pts/0    00:00:00 sleep
16874 pts/0    00:00:00 ps
</pre>
</td></tr><tr><td align="center"><code class="option">-u nev</code>
        </td><td align="left">A  nev nev&#369; felhaszn&aacute;l&oacute; folyamatait list&aacute;zza.</td></tr><tr><td align="center"><code class="option">-a</code>
        </td><td align="left">Az &ouml;sszes termin&aacute;l ablakban a felhaszn&aacute;l&oacute; &aacute;ltal elind&iacute;tott folyamatot list&aacute;zza.</td></tr><tr><td align="center"><code class="option">-f</code>
        </td><td align="left">full format: t&ouml;bb inform&aacute;ci&oacute;t list&aacute;z, megjelenik az ind&iacute;t&aacute;si id&#337;pont, az apa folyamat azonos&iacute;t&oacute;ja is.</td></tr><tr><td align="center"><code class="option">-efl</code>
        </td><td align="left">-e , every: minden folyamatot list&aacute;z, -l: long format r&eacute;szletes lista.</td></tr><tr><td align="center"><code class="option">uax</code>
        </td><td align="left">Minden folyamatot list&aacute;z felhaszn&aacute;l&oacute;bar&aacute;t form&aacute;ban.</td></tr><tr><td align="center"><code class="option">-C lista</code>
        </td><td align="left">A list&aacute;ban megadott nev&#369; parancsok folyamatait list&aacute;zza:
<pre class="screen">
$ ps -C bash,lassu.sh
  PID TTY          TIME CMD
 1373 pts/0    00:00:00 bash
 2976 pts/1    00:00:00 bash
 3009 pts/2    00:00:00 bash
 6167 pts/0    00:00:00 lassu.sh
</pre>
</td></tr><tr><td align="center"><code class="option">-H</code>
        </td><td align="left">A folyamatok hierarchi&aacute;j&aacute;t mutatja:
<pre class="screen">
$ ps -H
  PID TTY          TIME CMD
15304 pts/0    00:00:00 bash
15366 pts/0    00:00:00   cat
15715 pts/0    00:00:00   bash
15716 pts/0    00:00:00     sleep
17582 pts/0    00:00:00   ps
</pre>
</td></tr><tr><td align="center"><code class="option">ps -o form&aacute;tum</code>
        </td><td align="left">
A <code class="option">-o</code> opci&oacute; ut&aacute;n megadhatjuk, hogy milyen mez&#337;ket tartalmazzon a ps list&aacute;ja, pl.:
<code class="code">cmd</code> a folyamatnak megfelel&#337; program neve,
<code class="code">pid</code> a folyamatazonos&iacute;t&oacute;,
<code class="code">ppid</code> az apa folyamatazonos&iacute;t&oacute;ja,
<code class="code">start_time</code>  mikor ind&iacute;tott&aacute;k,
<code class="code">user</code> felhaszn&aacute;l&oacute; neve,
(a lehet&#337;s&eacute;geket l&aacute;sd r&eacute;szletesen a ps k&eacute;zik&ouml;nyv&eacute;ben). P&eacute;ld&aacute;ul:
<pre class="screen">
$ ps -o pid,comm
  PID COMMAND
 1373 bash
 6167 silent.sh
 7721 sleep
 7722 ps
</pre>
</td></tr><tr><td align="center"><code class="option">-p sz&aacute;m</code>
        </td><td align="left">K&eacute;rhet&uuml;nk a ps-t&#337;l list&aacute;t csak egy bizonyos folyamatra: 
<pre class="screen">
$ cat &gt; a.txt &amp; 
[4] 9616 
$ ps  -p 9616 
  PID TTY          TIME CMD 
 9616 pts/0    00:00:00 cat  
</pre>
</td></tr></tbody></table>
</div></div><br class="table-break"> 

</div>

<div class="sect1" title="A top parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_top">A <a class="indexterm" name="d5e5252"></a>top parancs</h2></div></div></div>

<p>Dinamikusan a <span class="command"><strong>top</strong></span> paranccsal list&aacute;zhatjuk a folyamatokat. A <span class="command"><strong>ps</strong></span> csak egy adott id&#337;pillanatban l&eacute;tez&#337; &aacute;llapotot mutat. A <span class="command"><strong>top</strong></span> alkalmas a kiugr&oacute;an sok er&#337;forr&aacute;st haszn&aacute;l&oacute; folyamatok list&aacute;z&aacute;s&aacute;ra (processzorid&#337;, mem&oacute;ria). A <span class="command"><strong>top</strong></span> parancsai:</p>



<div class="table"><a name="d5e5259"></a><p class="title"><b>11.4. t&aacute;bl&aacute;zat - A top fontosabb interakt&iacute;v parancsai</b></p><div class="table-contents">
                
    <table summary="A top fontosabb interakt&iacute;v parancsai" cellpadding="2" border="1"><colgroup><col width="14%" class="col1"><col width="86%" class="col2"></colgroup><thead><tr><th align="center">Parancs</th><th align="center">Mit v&eacute;gez</th></tr></thead><tbody><tr><td align="center"><span class="command"><strong>?</strong></span></td><td align="left">seg&eacute;dletet list&aacute;z</td></tr><tr><td align="center"><span class="command"><strong>k</strong></span></td><td align="left">kill parancsot k&ouml;zvet&iacute;t</td></tr><tr><td align="center"><span class="command"><strong>r</strong></span></td><td align="left">renice: priorit&aacute;st v&aacute;ltoztat</td></tr><tr><td align="center"><span class="command"><strong>u</strong></span></td><td align="left">csak egy bizonyos felhaszn&aacute;l&oacute; folyamatait mutatja</td></tr><tr><td align="center"><span class="command"><strong>q</strong></span></td><td align="left">kil&eacute;p</td></tr><tr><td align="center"><span class="command"><strong>o</strong></span></td><td align="left">order: meg lehet adni interakt&iacute;van melyik oszlop szerint rendezzen</td></tr></tbody></table>
</div></div><br class="table-break"> 
<p>A <span class="command"><strong>top</strong></span> t&ouml;bb parancssori argumentummal is rendelkezik, r&eacute;szletesen l&aacute;sd a parancs k&eacute;zik&ouml;nyv oldalait.</p>

<p>Folyamatok fut&aacute;si priorit&aacute;s&aacute;t parancssori ind&iacute;t&aacute;skor a <span class="command"><strong><a class="indexterm" name="d5e5297"></a></strong></span> paranccsal m&oacute;dos&iacute;thatjuk, illetve a <span class="command"><strong>renice</strong></span>-al v&aacute;ltoztathatjuk. A folyamatok egy un. <span class="emphasis"><em>nice</em></span> sz&aacute;mmal rendelkeznek: ez nem a pontos priorit&aacute;st adja meg, de inform&aacute;ci&oacute;t jelent az &uuml;temez&#337;nek, &eacute;s ez figyelembe is veszi.  A folyamatok <span class="emphasis"><em>nice</em></span> sz&aacute;ma -20 -t&oacute;l (legnagyobb priorit&aacute;s) eg&eacute;szen 19-ig (legkisebb) terjed. A <span class="command"><strong>nice</strong></span> <code class="option">-n</code> paranccsal n-et adunk az implicit <span class="emphasis"><em>nice</em></span> sz&aacute;mhoz.  Argumentum n&eacute;lk&uuml;l a <span class="command"><strong>nice</strong></span> kilist&aacute;zza az implicit <span class="emphasis"><em>nice</em></span> sz&aacute;mot. Az al&aacute;bbi program pl. a legkisebb <span class="emphasis"><em>nice</em></span> sz&aacute;mmal fog futni:</p>

<pre class="screen">
$ nice -n 19 job.sh
</pre>

</div>

<div class="sect1" title="Jelz&eacute;sek"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="signal">Jelz&eacute;sek<a class="indexterm" name="d5e5311"></a></h2></div></div></div>

<p>A folyamatok norm&aacute;lis esetben lefutnak &eacute;s ha elv&eacute;gezt&eacute;k feladataikat &eacute;s befejez&#337;dnek, amennyiben shell szkriptek az <span class="command"><strong>exit</strong></span> paranccsal kil&eacute;pnek (a C programoz&aacute;si nyelven &iacute;rt programok a C <code class="function">exit()</code> f&uuml;ggv&eacute;ny&eacute;vel l&eacute;pnek ki). Fut&aacute;s k&ouml;zben t&ouml;bbf&eacute;lek&eacute;ppen kommunik&aacute;lnak egym&aacute;ssal: vagy adatokat k&uuml;ldenek &aacute;t egyik folyamat&oacute;l a m&aacute;sikhoz (pl. &aacute;llom&aacute;nyokon vagy cs&#337;vezet&eacute;ken kereszt&uuml;l) vagy egyszer&#369;en csak egym&aacute;s feladat&aacute;nak &ouml;sszehangol&aacute;sa v&eacute;gett szinkroniz&aacute;ci&oacute;s inform&aacute;ci&oacute;kat k&uuml;ldenek.</p>

<p>Az folyamatok k&ouml;zti kommunik&aacute;ci&oacute; egyik form&aacute;ja az aszinkron kommunik&aacute;ci&oacute;. Aszinkron &uuml;zenetnek azokat az &uuml;zeneteket nevezz&uuml;k, amelyek b&aacute;rmely pillanatban elk&uuml;ldhet&#337;ek egy folyamathoz, f&uuml;ggetlen&uuml;l att&oacute;l, hogy az mit v&eacute;gez: v&aacute;r-e &eacute;ppen erre, vagy nem. Az aszinkron &uuml;zenetek egyik form&aacute;ja a jelz&eacute;sek &aacute;ltali kommunik&aacute;ci&oacute;.</p>

<p> A jelz&eacute;s (<span class="emphasis"><em>signal</em></span>) egy aszinkron &eacute;rtes&iacute;t&eacute;s amelyet egyik folyamat k&uuml;ld a m&aacute;siknak (vagy a kernel egy  folyamatnak) valamilyen esem&eacute;ny bek&ouml;vetkezt&eacute;r&#337;l. A folyamatok jelz&eacute;seket kiszolg&aacute;l&oacute; f&uuml;ggv&eacute;nyeket, un. jelz&eacute;s kezel&#337;ket (<span class="emphasis"><em>signal handler</em></span>) defini&aacute;lhatnak. Amikor a folyamathoz egy jelz&eacute;s &eacute;rkezik, akkor norm&aacute;lis fut&aacute;sa megszakad, &eacute;s a jelz&eacute;skezel&#337; indul el. Amennyiben a folyamat nem defini&aacute;lt kezel&#337; f&uuml;ggv&eacute;nyt, a jelz&eacute;s implicit kezel&#337;je szolg&aacute;lja ki azt.</p>


<p>A jelz&eacute;sekre egy r&ouml;vid nagybet&#369;s n&eacute;vvel (pl.  <code class="code">INT</code> ) vagy egy eg&eacute;sz sz&aacute;mmal (pl. 2 -es jelz&eacute;s) hivatkozunk. Bizonyos esetekben, pl. a C nyelv fejl&eacute;c &aacute;llom&aacute;nyaiban vagy a <span class="command"><strong>kill</strong></span> <code class="option">-l</code> parancs list&aacute;z&aacute;sakor a n&eacute;v el&eacute; ker&uuml;l a <code class="code">SIG</code> sz&oacute;cska, teh&aacute;t &iacute;gy tal&aacute;lkozunk vel&uuml;k: <code class="code">SIGINT</code>.</p>

<p>A legt&ouml;bb jelz&eacute;snek van egy implicit kezel&eacute;si s&eacute;m&aacute;ja. Van k&eacute;t olyan jelz&eacute;s, amelyre a folyamatok nem defini&aacute;lhatnak kiszolg&aacute;l&oacute; f&uuml;ggv&eacute;nyt (<code class="code">KILL</code> &eacute;s <code class="code">TSTP</code>, l&aacute;sd al&aacute;bb).</p>


<p>A Unix rendszerek  nem egyform&aacute;n defini&aacute;lj&aacute;k a rendszerben lehets&eacute;ges jelz&eacute;seket, illetve a hozz&aacute;juk rendelt azonos&iacute;t&oacute;kat. Az al&aacute;bbi jelz&eacute;sek minden rendszeren megvannak, &eacute;s a h&eacute;j  programoz&aacute;s p&eacute;ld&aacute;ihoz elegend&#337;ek. A felsorolt jelz&eacute;sek kiszolg&aacute;l&oacute;j&aacute;n&aacute;l nem k&ouml;telez&#337; az al&aacute;bbi el&#337;&iacute;r&aacute;sokat implement&aacute;lni. Ezek ink&aacute;bb aj&aacute;nl&aacute;sok, &eacute;s a legt&ouml;bb program ezeket implement&aacute;lja. De elvileg, a jelz&eacute;s meg&eacute;rkez&eacute;se ut&aacute;n a jelz&eacute;st kiszolg&aacute;l&oacute; f&uuml;ggv&eacute;ny b&aacute;rmit implement&aacute;lhat.</p>


<div class="table"><a name="d5e5330"></a><p class="title"><b>11.5. t&aacute;bl&aacute;zat - A fontosabb jelz&eacute;sek</b></p><div class="table-contents">
                
    <table summary="A fontosabb jelz&eacute;sek" cellpadding="2" border="1"><colgroup><col width="10%" class="col1"><col width="10%" class="col2"><col width="80%" class="col3"></colgroup><thead><tr><th align="center">Jelz&eacute;s neve</th><th align="center">Sz&aacute;ma</th><th align="center">Jelent&eacute;s</th></tr></thead><tbody><tr><td colspan="3" align="left">Termin&aacute;lr&oacute;l k&uuml;ld&ouml;tt jelz&eacute;sek:</td></tr><tr><td align="center"><code class="code">TSTP</code></td><td align="center"><code class="code">20</code></td><td align="left">Felf&uuml;ggeszti a folyamatot a termin&aacute;lr&oacute;l. A  Ctrl-Z karakter le&uuml;t&eacute;se ut&aacute;n ez hajt&oacute;dik v&eacute;gre.</td></tr><tr><td align="center"><code class="code">INT</code></td><td align="center"><code class="code">2</code></td><td align="left">Megszak&iacute;tja &eacute;s azonnal le&aacute;ll&iacute;tja a folyamatot a termin&aacute;lr&oacute;l , a Ctrl-C karakter le&uuml;t&eacute;se v&aacute;ltja ki.</td></tr><tr><td align="center"><code class="code">QUIT</code></td><td align="center"><code class="code">3</code></td><td align="left">Le&aacute;ll&iacute;t&aacute;s: a folyamat lez&aacute;rhatja &aacute;llom&aacute;nyait, takar&iacute;that de kil&eacute;p ( Ctrl-\ v&aacute;ltja ki a termin&aacute;lr&oacute;l).</td></tr><tr><td colspan="3" align="left">Folyamatokb&oacute;l k&uuml;ld&ouml;tt jelz&eacute;sek (parancssorr&oacute;l a <span class="command"><strong>kill</strong></span> paranccsal):</td></tr><tr><td align="center"><code class="code">KILL</code></td><td align="center"><code class="code">9</code></td><td align="left">Felt&eacute;tel n&eacute;lk&uuml;l azonnal le&aacute;ll&iacute;tja a fut&oacute; folyamatot, mindig egy folyamat k&uuml;ldi folyamatnak.  A <code class="code">KILL</code> jelz&eacute;st nem lehet kezelni.</td></tr><tr><td align="center"><code class="code">ABRT</code></td><td align="center"><code class="code">6</code></td><td align="left">Abort - le&aacute;ll&iacute;t&aacute;s,  de el&#337;tte un. <span class="emphasis"><em>core dump</em></span> (program mem&oacute;riak&eacute;pe) nyomtat&aacute;sa.</td></tr><tr><td align="center"><code class="code">HUP</code></td><td align="center"><code class="code">1</code></td><td align="left"><span class="emphasis"><em>Hang up</em></span>: ha a folyamat interakt&iacute;van fut, &eacute;s megszakad a kapcsolat a fel&uuml;gyel&#337; termin&aacute;llal, akkor ezt a jelz&eacute;st kapja. De gyakori egy folyamat &uacute;jraind&iacute;t&aacute;s&aacute;ra val&oacute; haszn&aacute;lata is (konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyok &uacute;jraolvas&aacute;sa, inicializ&aacute;l&aacute;s).</td></tr><tr><td align="center"><code class="code">TERM</code></td><td align="center"><code class="code">15</code></td><td align="left">Szint&eacute;n le&aacute;ll&iacute;t&aacute;st k&eacute;r (<span class="emphasis"><em>terminate</em></span>), egy m&aacute;sik folyamat k&uuml;ldi. Ak&aacute;rcsak a <code class="code">QUIT</code> eset&eacute;n, aj&aacute;nlott, hogy le&aacute;ll&aacute;s el&#337;tt a folyamat elv&eacute;gezze takar&iacute;t&aacute;si feladatait. A legt&ouml;bb jelz&eacute;s k&uuml;ld&#337; parancs ezt k&uuml;ldi implicit jelz&eacute;sk&eacute;nt.</td></tr><tr><td align="center"><code class="code">USR1, USR2</code></td><td align="center"><code class="code">10,12</code></td><td align="left"><span class="emphasis"><em>User</em></span>: tetsz&eacute;s szerinti m&#369;velet programoz&aacute;s&aacute;ra haszn&aacute;lt jelz&eacute;sek.</td></tr><tr><td align="center"><code class="code">FPE</code></td><td align="center"><code class="code">8</code></td><td align="left">Lebeg&#337;pontos m&#369;velet hiba, implicit kezel&eacute;se a le&aacute;ll&aacute;s.</td></tr><tr><td align="center"><code class="code">STOP</code></td><td align="center"><code class="code">19</code></td><td align="left">Program &aacute;ltal k&uuml;ld&ouml;tt jelz&eacute;s felf&uuml;ggeszt&eacute;sre.</td></tr><tr><td align="center"><code class="code">CONT</code></td><td align="center"><code class="code">18</code></td><td align="left">&Uacute;jraind&iacute;tja a <code class="code">STOP</code>-al le&aacute;ll&iacute;tott programot.</td></tr><tr><td align="center"><code class="code">CHLD</code></td><td align="center"><code class="code">17</code></td><td align="left">Ezt a jelz&eacute;st akkor kapja a folyamat ha egyik fi&uacute; folyamata kil&eacute;p.</td></tr></tbody></table>
</div></div><br class="table-break"> 



<p>L&aacute;that&oacute;, hogy a legt&ouml;bb jelz&eacute;s valamilyen rendk&iacute;v&uuml;li, b&aacute;rmikor el&#337;fordul&oacute; esem&eacute;nyhez kapcsol&oacute;dik, &eacute;s implicit k&ouml;vetkezm&eacute;ny&uuml;k a folyamat le&aacute;ll&iacute;t&aacute;sa. Hirtelen le&aacute;ll&aacute;skor, ha a folyamat pl. ideiglenes &aacute;llom&aacute;nyokkal dolgozik, fontos lehet a  "takar&iacute;t&aacute;s", pl. a m&aacute;r nem sz&uuml;ks&eacute;ge &aacute;llom&aacute;nyok t&ouml;rl&eacute;se. Sok jelz&eacute;s hagy erre id&#337;t, teh&aacute;t &iacute;rhat&oacute; jelz&eacute;skezel&#337;, amely elv&eacute;gzi ezt a feladatot.</p>

</div>

<div class="sect1" title="A kill parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5428">A kill<a class="indexterm" name="d5e5430"></a> parancs</h2></div></div></div>

<p>Jelz&eacute;st a  <span class="command"><strong>kill</strong></span> paranccsal k&uuml;ldhet&uuml;nk. Haszn&aacute;lata:</p>

<div class="cmdsynopsis"><p>
  <code class="command">kill</code> 
    [ -n ] 
    <em class="replaceable"><code>folyamatazonos&iacute;t&oacute;(k)</code></em>... 
</p></div>

<p>ahol az n egy eg&eacute;sz sz&aacute;m, a jelz&eacute;s sz&aacute;ma. Helyette haszn&aacute;lhatjuk a jelz&eacute;s nev&eacute;t is:</p>

<div class="cmdsynopsis"><p>
  <code class="command">kill</code> 
    [ -JELZ&Eacute;SN&Eacute;V ] 
    <em class="replaceable"><code>folyamatazonos&iacute;t&oacute;(k)</code></em>... 
</p></div>

<p>Haszn&aacute;latos m&eacute;g:</p>
<div class="cmdsynopsis"><p>
  <code class="command">kill</code> 
    -s 
    JELZ&Eacute;SN&Eacute;V 
    <em class="replaceable"><code>folyamatazonos&iacute;t&oacute;(k)</code></em>... 
</p></div>

<p>alakban. Mindh&aacute;rom alak a megadott jelz&eacute;st k&uuml;ldi  a folyamatazonos&iacute;t&oacute;val rendelkez&#337; folyamatnak vagy folyamatoknak. A fenti alakokon k&iacute;v&uuml;l, a folyamatazonos&iacute;t&oacute; speci&aacute;lis &eacute;rt&eacute;keire (0, -1, -n) folyamat csoportoknak is k&uuml;ldhet&#337; jelz&eacute;s (l&aacute;sd a <span class="command"><strong>kill</strong></span> k&eacute;zik&ouml;nyv&eacute;t).</p>

<p>A jelz&eacute;sek  neveit &eacute;s azonos&iacute;t&oacute;it a <span class="command"><strong>kill</strong></span> <code class="option">-l</code> paranccsal list&aacute;zhatjuk ki.  A <code class="option">-p</code> opci&oacute;ja csak kilist&aacute;zza azokat a folyamatokat amelyeknek jelz&eacute;st k&uuml;ldene, de nem k&uuml;ldi el a jelz&eacute;st (tesztel&eacute;sre haszn&aacute;ljuk). </p>

<p>Jelz&eacute;st csak azoknak a folyamatoknak k&uuml;ldhet&uuml;nk, amelyekre az enged&eacute;lyezve van (jogrendszer). Fut&aacute;st m&oacute;dos&iacute;t&oacute; jelz&eacute;seket csak saj&aacute;t nev&uuml;nk alatt fut&oacute; programnak k&uuml;ldhet&uuml;nk (kiv&eacute;tel term&eacute;szetesen <code class="code">root</code>, &#337; minden programnak k&uuml;ldhet).</p>

<p>A <span class="command"><strong>kill</strong></span> igaz &eacute;rt&eacute;kkel t&eacute;r vissza ha a jelz&eacute;st siker&uuml;lt elk&uuml;ldeni, egy&eacute;bk&eacute;nt hamissal (1).</p>

<p>Termin&aacute;lr&oacute;l billenty&#369;kkel 3 fontosabb jelz&eacute;st k&uuml;ldhet&uuml;nk a folyamatoknak: az <code class="code">INT</code> azonnal megszak&iacute;tja a folyamatot, a <code class="code">TSTP</code> (<span class="emphasis"><em>terminal stop</em></span>) felf&uuml;ggeszti &eacute;s a <code class="code">QUIT</code> szint&eacute;n le&aacute;ll&aacute;sra sz&oacute;l&iacute;tja fel, id&#337;t hagyva "tisztogat&aacute;s"-ra. Mindh&aacute;rom jelz&eacute;s kezelhet&#337; a folyamat &aacute;ltal (teh&aacute;t a folyamat futtathat m&aacute;s k&oacute;dot is mint az implicit viselked&eacute;s).</p>

<p>Folyamatokat folyamatokb&oacute;l n&eacute;gy jelz&eacute;ssel &aacute;ll&iacute;thatunk le:  <code class="code">HUP</code> (<span class="emphasis"><em>hangup</em></span>),  <code class="code">TERM</code> (<span class="emphasis"><em>terminate</em></span>) &eacute;s <code class="code">KILL</code> illetve <code class="code">ABRT</code> (<span class="emphasis"><em>abort</em></span>). A <code class="code">TERM</code> &eacute;s <code class="code">ABRT</code> eset&eacute;ben a folyamat kil&eacute;p&eacute;s el&#337;tt "tisztogat&aacute;st" v&eacute;gezhet: lez&aacute;rhatja &aacute;llom&aacute;nyait, pl. let&ouml;r&ouml;lheti ideiglenes &aacute;llom&aacute;nyait. Az <code class="code">ABRT</code> lementheti lemezre a program mem&oacute;riak&eacute;p&eacute;t (<span class="emphasis"><em>core dump</em></span>).</p>

<p>A <code class="code">HUP</code> jelz&eacute;s is le&aacute;ll&aacute;st k&eacute;r, jelent&eacute;se: megszakadt a kapcsolat a kontroll&aacute;l&oacute; termin&aacute;llal. T&ouml;bb d&eacute;mon folyamat eset&eacute;ben csak &uacute;jra ind&iacute;t&aacute;st, vagy egyszer&#369;en a program konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;nak beolvas&aacute;s&aacute;t k&eacute;ri.</p>

<p>A <code class="code">KILL</code> azonnal le&aacute;ll&iacute;tja a folyamatot, a <code class="code">STOP</code> pedig felf&uuml;ggeszti azt (<span class="emphasis"><em>suspend</em></span>). </p>

<p>Mivel a <code class="code">KILL</code> eset&eacute;ben a programnak nem hagyunk id&#337;t a tisztogat&aacute;sra, &iacute;gy ideiglenes vagy egy&eacute;b &aacute;llom&aacute;nyok maradhatnak ut&aacute;na az &aacute;llom&aacute;nyrendszerben.</p>

<p>Ha egy program <code class="code">sleep</code> &aacute;llapotban van (<span class="emphasis"><em>Uninterruptible Sleep</em></span>, valamilyen Be/Ki eszk&ouml;zre v&aacute;r pl.), akkor jelz&eacute;s &aacute;ltal nem megszak&iacute;that&oacute; csak akkor, ha kil&eacute;p ebb&#337;l az &aacute;llapotb&oacute;l. Bizonyos jelz&eacute;seket (pl. <code class="code">USR1</code>) a sleep parancs felf&uuml;ggeszt&eacute;se alatt sem kap meg a szkript: ilyenkor a megszak&iacute;t&oacute; jelz&eacute;seket (pl. <code class="code">TERM</code> megkapja).</p>

<p>Az al&aacute;bbi p&eacute;ld&aacute;ban a <code class="filename">lassu.sh</code>-t ind&iacute;tjuk. Miut&aacute;n a <span class="command"><strong>ps</strong></span>-el meg&aacute;llap&iacute;tjuk a folyamatazonos&iacute;t&oacute;t, a <code class="code">TERM</code> jelz&eacute;ssel &aacute;ll&iacute;tjuk le.</p>

<pre class="screen">
$ bash lassu.sh 200 &amp;
[1] 14835
$ ps -l
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S   500 14835 23571  0  75   0 -  1117 wait   pts/4    00:00:00 bash
0 S   500 14859 14835  0  75   0 -   926 -      pts/4    00:00:00 sleep
0 R   500 14861 23571  0  77   0 -  1050 -      pts/4    00:00:00 ps
0 S   500 23571 23570  0  75   0 -  1163 wait   pts/4    00:00:00 bash
$ ps -O stat
  PID STAT S TTY          TIME COMMAND
14835 S    S pts/4    00:00:00 bash lassu.sh 200
14909 S    S pts/4    00:00:00 sleep 1
14910 R+   R pts/4    00:00:00 ps -O stat
23571 Ss   S pts/4    00:00:00 -bash
$ kill -TERM 14835
$
[1]+  Terminated              bash lassu.sh 200
$ 
</pre>

<p>Egy adott rendszeren  l&eacute;tez&#337; jelz&eacute;sek  nev&eacute;t, jelent&eacute;s&eacute;t &eacute;s sz&aacute;m&aacute;t a <span class="command"><strong>kill</strong></span> <code class="option">-l</code> ,  jelent&eacute;s&uuml;ket a  <code class="code">man 7 signal</code> paranccsal list&aacute;zhatjuk ki. </p>

</div>

<div class="sect1" title="A killall parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_killall">A <a class="indexterm" name="d5e5503"></a>killall parancs</h2></div></div></div>

<p>Jelz&eacute;seket a <span class="command"><strong>killall</strong></span> paranccsal is k&uuml;ldhet&uuml;nk. Ez a v&eacute;grehajthat&oacute; program neve szerint vagy ak&aacute;r a n&eacute;vre illesztett  regul&aacute;ris kifejez&eacute;sekkel is megtal&aacute;lja a fut&oacute; folyamatokat. Ez&eacute;rt haszn&aacute;lata n&eacute;ha k&eacute;nyelmesebb mint a <span class="command"><strong>kill</strong></span>-&eacute;. </p>

<p>A <span class="command"><strong>killall</strong></span> legegyszer&#369;bb haszn&aacute;lata az al&aacute;bbi:</p>

<pre class="screen">
$ killall firefox
</pre>

<p>ez <code class="code">TERM</code>  jelz&eacute;st  k&uuml;ld a firefox b&ouml;ng&eacute;sz&#337; &ouml;sszes fut&oacute; p&eacute;ld&aacute;ny&aacute;nak (a <code class="code">TERM</code> az implicit jelz&eacute;s, ha nem adjuk meg mit k&uuml;ld&uuml;nk). <code class="code">KILL</code> jelz&eacute;st &iacute;gy k&uuml;ldhet&uuml;nk:</p>

<pre class="screen">
$ killall -s KILL firefox
</pre>

<p>A c&eacute;l folyamatokat regul&aacute;ris kifejez&eacute;sekkel is megadhatjuk. Az illeszt&eacute;st b&#337;v&iacute;tett kifejez&eacute;sekkel v&eacute;gzi, &eacute;s k&eacute;rhet&uuml;nk a folyamat parancs nev&eacute;re val&oacute; teljes vagy r&eacute;szleges illeszt&eacute;st.</p>

<pre class="screen">
$ ./lassu.sh 100 &amp; 
[1] 29301 
$ killall -r '^la' 
[1]+  Terminated              ./lassu.sh 100 
</pre>

<p>Teh&aacute;t abban az esetben, ha regul&aacute;ris kifejez&eacute;ssel keress&uuml;k a folyamatot, a <code class="option">-r</code> opci&oacute;t kell haszn&aacute;lni.</p>

<p>A <span class="command"><strong>killall</strong></span> a <code class="option">-i</code> opci&oacute;val meger&#337;s&iacute;t&eacute;st k&eacute;r minden jelz&eacute;s k&uuml;ld&eacute;se el&#337;tt, a <code class="option">-v</code> opci&oacute;val &uuml;zenetet &iacute;r ki minden elk&uuml;ld&ouml;tt jelz&eacute;s ut&aacute;n. T&ouml;bb opci&oacute;ja tud szelekt&iacute;ven kiv&aacute;lasztani folyamatokat (l&aacute;sd az angol nyelv&#369; aktu&aacute;lis k&eacute;zik&ouml;nyv  lapot). </p>

</div>


<div class="sect1" title="A pgrep &eacute;s pkill parancsok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_pgrep">A pgrep &eacute;s pkill<a class="indexterm" name="d5e5526"></a> parancsok</h2></div></div></div>

<p>Modern Unix rendszereken vannak olyan parancsok, amelyek megengedik, hogy a folyamatok azonos&iacute;t&oacute;j&aacute;ra programnev&uuml;k&ouml;n kereszt&uuml;l hivatkozzunk. Pontosabban, a programn&eacute;vre illeszked&#337; regul&aacute;ris kifejez&eacute;st megadva, megkapjuk az azonos&iacute;t&oacute;t. A <code class="code"><span class="command"><strong>pgrep</strong></span> n&eacute;v</code> kilist&aacute;zza a n&eacute;v program folyamatazonos&iacute;t&oacute;j&aacute;t, a   <code class="code"><span class="command"><strong>pkill</strong></span> -JELZ&Eacute;S n&eacute;v</code>  pedig n&eacute;v szerint k&uuml;ld jelz&eacute;st.</p>

<p>A <span class="command"><strong>pgrep</strong></span> is b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;seket haszn&aacute;l:</p>

<pre class="screen">
$ cat &gt; a.txt &amp; 
[4] 9616 
$ # a cat a h&aacute;tt&eacute;rben fut, megkeress&uuml;k:
$ ps  -p $( pgrep '^cat$') 
  PID TTY          TIME CMD 
 9616 pts/0    00:00:00 cat 
$ 
</pre>

<p>A n&eacute;v szerint val&oacute; kiv&aacute;laszt&aacute;son k&iacute;v&uuml;l m&aacute;s sz&#369;k&iacute;t&eacute;sekre is alkalmas:</p>


<table border="0" summary="Simple list" class="simplelist"><tr><td><code class="code">-u felhaszn&aacute;l&oacute;</code>  csak egy bizonyos felhaszn&aacute;l&oacute; folyamatait keresi,</td></tr><tr><td><code class="code">-f</code>  (<span class="emphasis"><em>full</em></span>) a teljes parancsorra illeszt, nem csak a parancsn&eacute;vre,</td></tr><tr><td><code class="code">-o</code>  (<span class="emphasis"><em>oldest</em></span>) a legr&eacute;gebb ind&iacute;tott folyamatot v&aacute;lassza ki,</td></tr><tr><td><code class="code">-n</code>  (<span class="emphasis"><em>newest</em></span>) a legut&oacute;bb ind&iacute;tottat v&aacute;lassza a tal&aacute;latok k&ouml;z&uuml;l,</td></tr><tr><td><code class="code">-P ppid</code>  csak azokat v&aacute;lassza amelyeknek apa folyamat azonos&iacute;t&oacute;ja <code class="code">ppid</code> (<span class="emphasis"><em>parent pid</em></span>),</td></tr></table>

<p>M&aacute;s opci&oacute;k megtekinthet&#337;k a <code class="code">man pgrep</code> k&eacute;zik&ouml;nyv lapon.</p>

<p>A <span class="command"><strong>pgrep</strong></span> is tud jelz&eacute;st k&uuml;ldeni <code class="code">-jelz&eacute;s</code> opci&oacute;val egyes rendszereken (a GNU pgrep a Linuxon nem tud), de erre &aacute;ltal&aacute;ban a parancs p&aacute;rj&aacute;t a <span class="command"><strong>pkill</strong></span>-t haszn&aacute;ljuk. A <span class="command"><strong>pkill</strong></span> ugyanazokat az opci&oacute;kat fogadja, mint <span class="command"><strong>pgrep</strong></span>, r&eacute;szletek&eacute;rt l&aacute;sd a parancs k&eacute;zik&ouml;nyv lapj&aacute;t, al&aacute;bb pedig l&aacute;ssunk egy p&eacute;ld&aacute;t:</p>

<pre class="screen">
$ cat &gt; 1.txt &amp; 
[1] 29851 
[1]+  Stopped                 cat &gt; 1.txt 
$ pgrep '^cat$' 
29851 
$ pkill -KILL  '^cat$' 
[1]+  Killed                  cat &gt; 1.txt 
$ 
</pre>


</div>

<div class="sect1" title="Jelz&eacute;sek kezel&eacute;se shell alatt: a trap parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_trap">Jelz&eacute;sek kezel&eacute;se shell alatt: a trap parancs<a class="indexterm" name="d5e5564"></a></h2></div></div></div>


<p>A jelz&eacute;seket shell alatt a <span class="command"><strong>trap</strong></span> (shell-be &eacute;p&iacute;tett) parancs seg&iacute;ts&eacute;g&eacute;vel lehet elkapni: a <span class="command"><strong>trap</strong></span> tulajdonk&eacute;ppen egy jelz&eacute;skezel&#337; f&uuml;ggv&eacute;nyt &aacute;ll&iacute;t be. Haszn&aacute;lata az al&aacute;bbi:</p>


<div class="cmdsynopsis"><p>
  <code class="command">trap</code> 
    tev&eacute;kenys&eacute;g 
    jelz&eacute;slista 
</p></div>

<p>A tev&eacute;kenys&eacute;g egy <code class="code">;</code> -el elv&aacute;lasztott &eacute;s k&eacute;t id&eacute;z&#337;jel k&ouml;zti parancssorozatot vagy egy  shell f&uuml;ggv&eacute;nyh&iacute;v&aacute;st jelent, a jelz&eacute;slista pedig a kezelt jelz&eacute;s vagy jelz&eacute;sek nev&eacute;t vagy sz&aacute;m&aacute;t. </p>

<p>A <span class="command"><strong>trap</strong></span> <code class="option">-l</code> opci&oacute;val kilist&aacute;zza a l&eacute;tez&#337; jelz&eacute;seket &eacute;s a hozz&aacute;juk rendelt azonos&iacute;t&oacute;kat, a <code class="option">-p</code> opci&oacute;val pedig a jelz&eacute;sekhez rendelt <span class="command"><strong>trap</strong></span> parancsokat.</p>

<p>Pl. ha egy shell programban megh&iacute;vjuk az al&aacute;bbi parancsot:</p>

<pre class="programlisting">
trap "echo Ez egy Ctrl-C "  INT 
</pre>

<p>a program bemenet&eacute;re ker&uuml;l&#337;  <code class="code">Ctrl-C</code> nyom&aacute;n a program nem &aacute;ll le, hanem ki&iacute;rja  a l&aacute;that&oacute; sz&ouml;veget.</p>

<p>A <span class="command"><strong>trap</strong></span> parancsot mindig a program elej&eacute;re kell elhelyezni. Egy jelz&eacute;skezel&#337; ak&aacute;r t&ouml;bb jelz&eacute;st is fogadhat:</p>

<pre class="programlisting">
trap "echo Ez egy megszak&iacute;t&oacute; jelz&eacute;s !"  INT TERM QUIT
</pre>

<p>A <span class="command"><strong>trap</strong></span>-el nem lehet kezelni a <code class="code">KILL</code> jelz&eacute;st.</p>


</div>

<div class="sect1" title="Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="signal_debug">Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)</h2></div></div></div>

<p>N&eacute;h&aacute;ny speci&aacute;lis jelz&eacute;s kimondottan a h&eacute;jjal val&oacute; programk&ouml;vet&eacute;si munk&aacute;hoz opci&oacute;dik.</p>

<p>A <code class="code">DEBUG</code> jelz&eacute;s minden program sor v&eacute;grehajt&aacute;sa  ut&aacute;n lesz megh&iacute;vva (bizonyos h&eacute;jakn&aacute;l v&eacute;grehajt&aacute;s el&#337;tt: ellen&#337;rizz&uuml;k le).</p>

<p>Az <code class="code">EXIT</code> jelz&eacute;s a szkriptb&#337;l val&oacute; kil&eacute;p&eacute;sn&eacute;l h&iacute;v&oacute;dik meg, &eacute;s ha t&ouml;bb jelz&eacute;sre &iacute;runk kezel&#337;t, ez h&iacute;v&oacute;dik meg utolj&aacute;ra.</p>

<p>Az al&aacute;bbi program folyamatosan, minden sor v&eacute;grehajt&aacute;sa ut&aacute;n list&aacute;zza az <code class="varname">a</code> v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t:</p>

<pre class="programlisting">
#!/bin/bash 

function debuginfo 
{ 
    echo "debug: az a &eacute;rt&eacute;ke,  a=$a" 
} 

trap "debuginfo" DEBUG 
 
a=2 

a=3 

a=4 
</pre>

<p>V&eacute;grehajtva:</p>

<pre class="screen">
$ bash debug.sh 
debug: az a &eacute;rt&eacute;ke,  a= 
debug: az a &eacute;rt&eacute;ke,  a=2 
debug: az a &eacute;rt&eacute;ke,  a=3 
$ 
</pre>

<p>Az al&aacute;bbi program pedig az <code class="code">EXIT</code> jelz&eacute;s hat&aacute;s&aacute;ra kil&eacute;p&eacute;skor t&ouml;rli a haszn&aacute;lt ideiglenes &aacute;llom&aacute;nyt. Ideiglenes &aacute;llom&aacute;nyok nev&eacute;ben gyakran haszn&aacute;ljuk a <code class="varname">$</code> v&aacute;ltoz&oacute;t, azaz a folyamatazonos&iacute;t&oacute;t, hiszen ez a sz&aacute;m egyedi, &eacute;s &iacute;gy a program ak&aacute;r k&eacute;t p&eacute;ld&aacute;nyban is futhat, az egyik nem fogja zavarni a m&aacute;sikat.</p>

<pre class="programlisting">
#!/bin/bash

#takar&iacute;t&oacute; f&uuml;ggv&eacute;ny
function takaritas
{
    #ha l&eacute;tezik a f&aacute;jl
    if [ -f $$.txt ]
    then
        rm $$.txt  #t&ouml;rli az ideiglenes f&aacute;jlt
    fi
}

#a termin&aacute;lr&oacute;l j&ouml;v&#337; megszak&iacute;t&oacute; jelz&eacute;seken
#k&iacute;v&uuml;l az exit h&iacute;v&aacute;sokra is ez a kezel&#337; akt&iacute;v

trap "takaritas" INT TERM QUIT EXIT

#ideiglenes f&aacute;jl el&#337;&aacute;ll&iacute;t&aacute;sa
echo els&#337; &gt;&gt; $$.txt
echo m&aacute;sodik &gt;&gt; $$.txt
echo harmadik &gt;&gt; $$.txt

cat $$.txt | sort &gt; eredmeny.txt

exit 0
</pre>

<div class="note" title="A mktemp parancs" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: A mktemp mktemp parancs"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left"><a name="cmd_mktemp"></a>A mktemp  parancs</th></tr><tr><td align="left" valign="top">

<p>Ideiglenes &aacute;llom&aacute;nynevek el&#337;&aacute;ll&iacute;t&aacute;s&aacute;ra a <span class="command"><strong>mktemp</strong></span> nev&#369; parancs alkalmasabb. Ez random sz&aacute;mokb&oacute;l &aacute;ll&oacute; nevet gener&aacute;l, &eacute;s a sz&aacute;mok gener&aacute;l&aacute;sakor felhaszn&aacute;lja a folyamatazonos&iacute;t&oacute;t is. A gener&aacute;land&oacute; n&eacute;v sablonj&aacute;t meg kell neki adni egy &aacute;llom&aacute;nyn&eacute;ven kereszt&uuml;l, melyben a random sz&aacute;m r&eacute;szt X karakterekkel helyettes&iacute;tj&uuml;k a n&eacute;v v&eacute;g&eacute;n. A parancs  l&eacute;trehozza az &aacute;llom&aacute;nyt (csak a felhaszn&aacute;l&oacute; &iacute;r&aacute;s &eacute;s olvas&aacute;s jog&aacute;val) &eacute;s ugyanakkor kilist&aacute;zza a kimenetre is, hogy a n&eacute;v &aacute;tvehet&#337; legyen. Olyan alkalmaz&aacute;sokban kell haszn&aacute;lni, ahol egy gener&aacute;lt n&eacute;v nem kell kital&aacute;lhat&oacute; legyen. Haszn&aacute;lat&aacute;ra al&aacute;bb adunk egy p&eacute;ld&aacute;t:</p>
<pre class="screen">
$ mktemp "fileXXXXXXX" 
filecO30382 
$ ls -l 
total 0 
-rw------- 1 lszabo lszabo 0 2010-12-13 20:50 filecO30382 
$ 
</pre>

<p>H&eacute;jprogramokban &iacute;gy haszn&aacute;ljuk:</p>

<pre class="programlisting">
TEMPFILE=$( mktemp "fileXXXXXXXX" ) 
echo "titkos" &gt; $TEMPFILE 
</pre>
</td></tr></table></div>


<p>Egyes h&eacute;jakban, pl. a Bash-ben is m&#369;k&ouml;dik egy <code class="code">ERR</code> nev&#369; jelz&eacute;s is: ez akkor h&iacute;v&oacute;dik meg, ha a h&eacute;j valamilyen s&uacute;lyos hiba k&ouml;vetkezt&eacute;ben kil&eacute;p, &eacute;s hib&aacute;t jelez.</p>
</div>


<div class="sect1" title="A nohup parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="cmd_nohup">A nohup parancs<a class="indexterm" name="d5e5619"></a></h2></div></div></div>

<p>H&aacute;tt&eacute;rben val&oacute; futtat&aacute;shoz a <span class="command"><strong>nohup</strong></span> parancsot haszn&aacute;ljuk abban az esetben ha ki akarunk l&eacute;pni a rendszerb&#337;l, &eacute;s azt szeretn&eacute;nk, hogy az ind&iacute;tott programunk tov&aacute;bb fusson. Az &iacute;gy futtatott parancs vagy szkript nem v&aacute;laszol a HUP jelz&eacute;sre. Ugyanakkor a futtatott parancs kimenete egy napl&oacute; &aacute;llom&aacute;nyba lesz vez&eacute;relve (a GNU rendszereken ez a <code class="filename">nohup.out</code> nev&#369; f&aacute;jl. Haszn&aacute;lata:</p>

<pre class="screen">
$ nohup bash hosszu_feladat.sh  &amp; 
[1] 32280 
$ 
</pre>

<p>Ha a kimenetet &aacute;tir&aacute;ny&iacute;tjuk egy &aacute;llom&aacute;nyba, a <code class="filename">nohup.out</code> nem j&ouml;n l&eacute;tre.</p>

</div>


<div class="sect1" title="Alh&eacute;jak (subshell)"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="subshell">Alh&eacute;jak (subshell<a class="indexterm" name="d5e5629"></a>)</h2></div></div></div>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: "><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Megjegyz&eacute;s]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
<p>Az alfejezet anyaga kiz&aacute;r&oacute;lag a Bash-re &eacute;rv&eacute;nyes.</p>
</td></tr></table></div>

<p>Amint l&aacute;ttuk, minden folyamat tulajdonk&eacute;ppen fi&uacute; folyamat, az <code class="code">init</code> kiv&eacute;tel&eacute;vel mindegyiknek van "apja", &eacute;s ha a h&eacute;j alatt egy szkriptet vagy parancsot futtatunk, akkor azok fi&uacute; folyamatban fognak futni (amennyiben a parancs nem be&eacute;p&iacute;tett parancsa a h&eacute;jnak &eacute;s nem az <span class="command"><strong>exec</strong></span> parancs). Fi&uacute; folyamatot  egy szkripten bel&uuml;l, ak&aacute;r n&eacute;h&aacute;ny szerkezet v&eacute;grehajt&aacute;s&aacute;ra is ind&iacute;thatunk, ezt szintaktikailag a szekvencia <code class="code">(  )</code> z&aacute;r&oacute;jel  oper&aacute;torok k&ouml;z&eacute; helyez&eacute;s&eacute;vel adjuk meg a h&eacute;jnak.</p>

<p>Tekints&uuml;k az al&aacute;bbi szkriptet (<code class="filename">sub.sh</code>):</p>

<pre class="programlisting">
#!/bin/bash

#ezt a v&aacute;ltoz&oacute;t az k&uuml;ls&#337; shellben hozzuk l&eacute;tre
valtozo=1

#innen kezdve &uacute;j shellben fut a szkript
(

#a k&uuml;ls&#337; shell v&aacute;ltoz&oacute;ja

if [ -n "$valtozo" ] ; then
    echo a 'v&aacute;ltozo &eacute;rt&eacute;ke:' "$valtozo"
fi

while read -p "k&eacute;rek egy sztringet:" line
do

    if [ "$line" == "ok" ] ;then
        break
    fi

done

echo "Az utols&oacute; beolvasott sor a subshell-ben: $line"

)
#a subshell itt z&aacute;rul, ez ut&aacute;n ism&eacute;t a h&iacute;v&oacute; shell fut

echo "Az utols&oacute; beolvasott sor a h&iacute;v&oacute; shell-ben: $line"
</pre>


<p>A <code class="code">( )</code> -ekkel hat&aacute;rolt parancsok un. subshellben fognak futni, ez l&aacute;that&oacute;, ha a szkriptet futtatva:</p>

<pre class="screen">
$ ./sub.sh
a v&aacute;ltozo &eacute;rt&eacute;ke: 1
k&eacute;rek egy sztringet:
</pre>

<p>&eacute;s a <span class="command"><strong>read</strong></span> v&eacute;grehajt&aacute;s&aacute;n&aacute;l v&aacute;rakoztatva egy m&aacute;sik termin&aacute;lb&oacute;l megn&eacute;zz&uuml;k a fut&oacute; parancsainkat:</p>

<pre class="screen">
$ ps -a -o pid,ppid,command
  PID  PPID COMMAND
27314 21534 /bin/bash ./sub.sh
27315 27314 /bin/bash ./sub.sh
27863 23472 ps -a -o pid,ppid,command
$ 
</pre>

<p>A <code class="filename">sub.sh</code> parancs k&eacute;t folyamatazonos&iacute;t&oacute;val fut, &eacute;s a m&aacute;sodiknak az els&#337; az apja.</p>

<p>Ha be&iacute;rjuk a <span class="command"><strong>read</strong></span>-nek az "ok" sztringet:</p>

<pre class="screen">
$ ./sub.sh
a v&aacute;ltozo &eacute;rt&eacute;ke: 1
k&eacute;rek egy sztringet:ok
Az utols&oacute; beolvasott sor a subshell-ben: ok
Az utols&oacute; beolvasott sor a h&iacute;v&oacute; shell-ben:
</pre>

<p>akkor az is l&aacute;that&oacute; lesz, hogy a subshellben l&eacute;trehozott v&aacute;ltoz&oacute; nem lesz l&aacute;that&oacute; az apa shellben (<code class="code">line</code> v&aacute;ltoz&oacute;), ellenben az apa v&aacute;ltoz&oacute;i a subshellben glob&aacute;lisan viselkednek, ak&aacute;r a f&uuml;ggv&eacute;nyek eset&eacute;ben (<code class="code">valtozo</code> v&aacute;ltoz&oacute;). A v&eacute;grehajt&aacute;si m&oacute;db&oacute;l az is kider&uuml;l, hogy a subshell el&#337;t&eacute;rben fut, &eacute;s az apa megv&aacute;rja annak kil&eacute;p&eacute;s&eacute;t.</p>

<p>Tekints&uuml;k az al&aacute;bbi, m&oacute;dos&iacute;tott szkriptet (<code class="filename">sub1.sh</code>):</p>

<pre class="programlisting">
#!/bin/bash

#ezt a v&aacute;ltoz&oacute;t az k&uuml;ls&#337; shellben hozzuk l&eacute;tre
valtozo=1

#innen kezdve &uacute;j shellben fut a szkript

./loop.sh

#a subshell itt z&aacute;rul, ez ut&aacute;n ism&eacute;t a h&iacute;v&oacute; shell fut

echo "Az utols&oacute; beolvasott sor a h&iacute;v&oacute; shell-ben: $line"
</pre>

<p>amelyben a kis beolvas&oacute; ciklust k&uuml;l&ouml;n szkriptbe &iacute;rtuk &aacute;t (<code class="filename">loop.sh</code>):</p>

<pre class="programlisting">
#!/bin/bash
#a k&uuml;ls&#337; shell v&aacute;ltoz&oacute;ja

if [ -n "$valtozo" ] ; then
    echo a 'v&aacute;ltozo &eacute;rt&eacute;ke:' "$valtozo"
fi

while read -p "k&eacute;rek egy sztringet:" line
do

    if [ "$line" == "ok" ] ;then
        break
    fi

done

echo "Az utols&oacute; beolvasott sor a subshell-ben: $line"
</pre>

<p>Nyilv&aacute;n ebben az esetben is a <code class="filename">loop.sh</code> szkript k&uuml;l&ouml;n shellben fut, a k&eacute;t v&eacute;grehajt&aacute;si m&oacute;d azonban nem egyezik teljesen.</p>

<p>Ha megism&eacute;telj&uuml;k az el&#337;z&#337; tesztet, l&aacute;that&oacute; lesz, hogy ez&uacute;ttal a k&uuml;ls&#337; shell v&aacute;ltoz&oacute;i nem lesznek l&aacute;that&oacute;ak  a bels&#337; shellben, &eacute;s a bels&#337;ben l&eacute;trehozott v&aacute;ltoz&oacute;k sem a k&uuml;ls&#337;ben.</p>

<p>Amikor parancsokat futtat, a Bash un. v&eacute;grehajt&aacute;si k&ouml;rnyezetekkel (<span class="emphasis"><em>execution environment</em></span>) dolgozik, amennyiben a futtatott parancs k&uuml;ls&#337; parancs (pl. a k&uuml;ls&#337; programk&eacute;nt l&eacute;tez&#337; <span class="command"><strong>cat</strong></span>, <span class="command"><strong>ls</strong></span> vagy egy &uacute;j shell amelyik egy adott szkriptet hajt v&eacute;gre) ez a k&ouml;rnyezet az al&aacute;bbiakat tartalmazza:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td>az ind&iacute;t&oacute; shell nyitott &aacute;llom&aacute;nyait amelyeket &aacute;tir&aacute;ny&iacute;t&aacute;sok m&oacute;dos&iacute;thatnak,</td></tr><tr><td>a munkak&ouml;nyvt&aacute;rat,</td></tr><tr><td>az <code class="code">umask</code> &ouml;r&ouml;k&ouml;lt &eacute;rt&eacute;k&eacute;t (f&aacute;jl l&eacute;trehoz&aacute;si k&ouml;rnyezet &ouml;r&ouml;kl&#337;dik),</td></tr><tr><td>az <span class="command"><strong>export</strong></span> paranccsal a k&ouml;rnyezeti v&aacute;ltoz&oacute;k k&ouml;z&eacute; &iacute;rt v&aacute;ltoz&oacute;kat.</td></tr></table>

<p>Ha a parancs bels&#337; parancs (pl. a bels&#337; <span class="command"><strong>echo</strong></span>) vagy a <code class="code">( )</code> oper&aacute;tor k&ouml;z&ouml;tt fut, akkor subshellben fog futni, ilyenkor a shell duplik&aacute;lja saj&aacute;t v&eacute;grehajt&aacute;si k&ouml;rnyezet&eacute;t: ebbe az eml&iacute;tetteken k&iacute;v&uuml;l beletartoznak:</p>


 <table border="0" summary="Simple list" class="simplelist"><tr><td>a shell el&#337;z&#337;leg l&eacute;trehozott v&aacute;ltoz&oacute;i, </td></tr><tr><td>a fut&aacute;s alatt el&#337;z&#337;leg defini&aacute;lt f&uuml;ggv&eacute;nyek,</td></tr><tr><td>a <span class="command"><strong>trap</strong></span> paranccsal be&aacute;ll&iacute;tott jelz&eacute;skezel&#337;k,</td></tr><tr><td>az <span class="command"><strong>alias</strong></span> paranccsal be&aacute;ll&iacute;tott nevek,</td></tr><tr><td>a <span class="command"><strong>shopt</strong></span> &eacute;s <span class="command"><strong>set</strong></span> parancs be&aacute;ll&iacute;tott opci&oacute;i.</td></tr></table>
<p>&Iacute;gy &eacute;rthet&#337;v&eacute; v&aacute;lik az els&#337; p&eacute;lda glob&aacute;lis v&aacute;ltoz&oacute;inak viselked&eacute;se. Sem a subshell, sem az &uacute;j v&eacute;grehajt&aacute;si k&ouml;rnyezet nem m&oacute;dos&iacute;thatja a h&iacute;v&oacute; shell fut&aacute;si k&ouml;rnyezet&eacute;t.</p>

<p>Befejez&eacute;sk&eacute;nt  m&eacute;g k&eacute;t megjegyz&eacute;s a fejezethez:</p>

<p>A subshell <code class="code">( )</code>  &eacute;s a <code class="code">{ }</code> <a class="link" href="#codeblock" title="K&oacute;d blokkok haszn&aacute;lata">k&oacute;d blokk</a>, b&aacute;r  &aacute;tir&aacute;ny&iacute;t&aacute;si mechanizmusk&eacute;nt hasonl&oacute;nak t&#369;nik, &eacute;s interakt&iacute;v v&eacute;grehajt&aacute;s eset&eacute;n nem &eacute;rz&eacute;kelhet&#337; a k&uuml;l&ouml;nbs&eacute;g: mer&#337;ben m&aacute;s v&eacute;grehajt&aacute;si strukt&uacute;ra, mert a subshell eset&eacute;ben &uacute;j folyamat j&ouml;n l&eacute;tre.</p>

<p>A subshell is alkalmas p&aacute;rhuzamos futtat&aacute;sra, de komplik&aacute;lt mell&eacute;khat&aacute;sokkal j&aacute;rhat, ez&eacute;rt nagyon &oacute;vatosan kell haszn&aacute;lni, ha v&aacute;ltoz&oacute;nevek, f&aacute;jlnevek &aacute;tfed&#337;dnek.</p>

</div>
<div class="sect1" title="P&eacute;ldaprogramok"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5695">P&eacute;ldaprogramok</h2></div></div></div>

<p>A rendszerben fut&oacute; folyamatok fel&uuml;gyelete (ind&iacute;t&aacute;sa, le&aacute;ll&iacute;t&aacute;sa, k&ouml;vet&eacute;se &eacute;s statisztik&aacute;k k&eacute;sz&iacute;t&eacute;se) &aacute;ltal&aacute;ban h&eacute;jprogramok feladata. Az al&aacute;bbiakban n&eacute;h&aacute;ny egyszer&#369; p&eacute;ld&aacute;t adunk ebb&#337;l a t&eacute;mak&ouml;rb&#337;l.</p>
<p>A szkripteknek azonos&iacute;tani kell a fut&oacute; folyamatokat, ez rendszerint azok folyamatazonos&iacute;t&oacute;j&aacute;nak megszerz&eacute;s&eacute;vel j&aacute;r. A felhaszn&aacute;l&oacute; a folyamat nev&eacute;vel hivatkozik ezekre, &iacute;gy sz&uuml;ks&eacute;ges a n&eacute;vhez rendelt azonos&iacute;t&oacute; megszerz&eacute;se. Erre t&ouml;bb m&oacute;dszer is van.</p>
<p>Ha a k&ouml;vetett folyamat h&eacute;jprogram, aj&aacute;nlatos n&eacute;vvel ind&iacute;tani &eacute;s nem argumentumk&eacute;nt haszn&aacute;lni a h&eacute;j parancssor&aacute;ban, teh&aacute;t:</p>
<pre class="screen">
$ bash teszt.sh
$ 
</pre>
<p>helyett:</p>
<pre class="screen">
$ ./teszt.sh
$ 
</pre>

<p>vagy:</p>
<pre class="screen">
$ /home/lszabo/teszt.sh
$ 
</pre>
<p>, &iacute;gy a szkript f&aacute;jlra v&eacute;grehajt&aacute;si jogot kell adni.</p>

<p>Meg lehet keresni a nevet a parancssorban is, de &aacute;ltal&aacute;ban egyszer&#369;bb, ha a parancssori programn&eacute;v egyezik a szkript nev&eacute;vel.</p>
<p>A klasszikus m&oacute;dszer a <span class="command"><strong>ps</strong></span> parancs &eacute;s az <span class="command"><strong>egrep</strong></span> vagy <span class="command"><strong>grep</strong></span> haszn&aacute;lata. A <span class="command"><strong>ps</strong></span> paranccsal minden folyamatot list&aacute;zunk r&eacute;szletes list&aacute;val. Pl. ha elind&iacute;tjuk h&aacute;tt&eacute;rben m&aacute;r haszn&aacute;lt <code class="filename">lassu.sh</code> szkriptet:</p>

<pre class="screen">
$ ./lassu.sh 10000 &amp;
[1] 23611
$ 
</pre>

<p>A <span class="command"><strong>ps -f</strong></span> opci&oacute;val az al&aacute;bbi list&aacute;t kapjuk:</p>
<pre class="screen">
$ ps -f
UID        PID  PPID  C STIME TTY          TIME CMD
lszabo   23016 23015  0 17:56 pts/0    00:00:00 -bash
lszabo   23611 23016  0 18:17 pts/0    00:00:00 /bin/bash ./lassu.sh 10000
lszabo   23891 23611  0 18:20 pts/0    00:00:00 sleep 1
lszabo   23892 23016  0 18:20 pts/0    00:00:00 ps -f
$ 
</pre>
<p>Ilyenkor a <span class="command"><strong>ps</strong></span> csak a termin&aacute;lhoz rendelt folyamatokat list&aacute;zza. Ha rendszer szinten akarunk keresni, a <code class="option">-e</code> (every) opci&oacute;t is haszn&aacute;lva, egy hosszabb list&aacute;t kapunk amelyb&#337;l az <span class="command"><strong>egrep</strong></span>-el sz&#369;rhet&uuml;nk a parancs neve ut&aacute;n:</p>

<pre class="screen">
$ ps -ef | egrep 'lassu\.sh'
lszabo   23611 23016  0 18:17 pts/0    00:00:00 /bin/bash ./lassu.sh 10000
$
</pre>

<p>A list&aacute;ban az azonos&iacute;t&oacute; a m&aacute;sodik mez&#337;, ezt az <span class="command"><strong>awk</strong></span>-val sz&#369;rj&uuml;k:</p>

<pre class="screen">
$ ps -ef | egrep 'lassu\.sh' | awk '{print $2}'
23611
$
</pre>
<p>&eacute;s &iacute;rjuk v&aacute;ltoz&oacute;ba:</p>
<pre class="screen">
$ pid=$( ps -ef | egrep 'lassu\.sh' | awk '{print $2}' )
$ echo $pid
23611
$
</pre>
<p>Ha a folyamat t&ouml;bb p&eacute;ld&aacute;nyban fut, ennek megfelel&#337; sz&aacute;m&uacute; sort kapunk a <span class="command"><strong>ps</strong></span> kimenet&eacute;nek sz&#369;r&eacute;se ut&aacute;n (m&eacute;g 2 <code class="filename">lassu.sh</code>-t ind&iacute;tunk):</p>

<pre class="screen">
$ ./lassu.sh 100 &amp;
[2] 25119
$ ./lassu.sh 100 &amp;
[3] 25125
$ ps -ef | egrep 'lassu\.sh' | awk '{print $2}'
23611
25119
25125
$
</pre>
<p>, a sorok sz&aacute;m&aacute;t a <span class="command"><strong>wc</strong></span>-al megsz&aacute;molva:</p>

<pre class="screen">
$ ps -ef | egrep 'lassu\.sh' | awk '{print $2}' | wc -l
3
$
</pre>

<p>megkapjuk, h&aacute;ny p&eacute;ld&aacute;nyban fut a l<code class="filename">assu.sh</code>. A p&eacute;ld&aacute;nysz&aacute;m ismeret&eacute;ben pedig a fel&uuml;gyel&#337; szkriptek d&ouml;nthetnek tov&aacute;bbi tev&eacute;kenys&eacute;gr&#337;l (pl. ha t&uacute;l sok p&eacute;ld&aacute;ny fut, le&aacute;ll&iacute;thatnak egyes p&eacute;ld&aacute;nyokat).</p>


<p>Ha a folyamat nev&eacute;ben nincs pont karakter, az <span class="command"><strong>egrep</strong></span> vagy <span class="command"><strong>grep</strong></span> becsaphat, ti ilyenkor saj&aacute;t mag&aacute;t tartalmaz&oacute; <span class="command"><strong>ps</strong></span> sort is list&aacute;zhatja. Ha &aacute;tnevezz&uuml;k a <code class="filename">lassu.sh</code>-t <code class="filename">lassu</code>-ra, &eacute;s &uacute;gy ind&iacute;tjuk:</p>

<pre class="screen">
$ cp lassu.sh lassu
$ ./lassu 200 &amp;
[2] 25986
$ ps -ef | egrep lassu
lszabo   25986 23016  0 18:42 pts/0    00:00:00 /bin/bash ./lassu 200
lszabo   26081 23016  0 18:42 pts/0    00:00:00 egrep lassu
$
</pre>
<p>L&aacute;that&oacute;, hogy tal&aacute;lat lett az <span class="command"><strong>egrep lassu</strong></span> parancs is. Ezt az <span class="command"><strong>egrep</strong></span> <code class="option">-v</code> opci&oacute;j&aacute;val sz&#369;rhetj&uuml;k, az <span class="command"><strong>egrep</strong></span>-re keresve (a <code class="option">-v</code> a "<span class="emphasis"><em>nem tal&aacute;lat</em></span>" sorokat list&aacute;zza):</p>
<pre class="screen">
$ ps -ef | egrep lassu | egrep -v egrep
lszabo   26319 23016  0 18:45 pts/0    00:00:00 /bin/bash ./lassu 200
$
</pre>
<p>Ett&#337;l kezdve ugyanabban a helyzetben vagyunk, mint az els&#337; esetben.</p>
<p>Modern rendszereken egyszer&#369;bben kereshet&uuml;nk a m&aacute;r eml&iacute;tett <span class="command"><strong>pgrep</strong></span> paranccsal, ha megadunk egy n&eacute;vre illeszked&#337; regul&aacute;ris kifejez&eacute;st:</p>
<pre class="screen">
$ ./lassu.sh 200 &amp;
[3] 27090
$ pgrep 'lassu\.sh'
27090
$
</pre>

<p>Az al&aacute;bbi szkript  ezt a m&oacute;dszert haszn&aacute;lja, &eacute;s a k&ouml;vetkez&#337;ket v&eacute;gzi: v&aacute;r am&iacute;g a k&ouml;vetett nev&#369; folyamat megjelenik, egy napl&oacute; f&aacute;jlba &iacute;rja az adott n&eacute;vvel fut&oacute; folyamatok p&eacute;ld&aacute;nysz&aacute;m&aacute;t; ut&aacute;na m&aacute;r csak azt napl&oacute;zza, ha v&aacute;ltozik a fut&oacute; p&eacute;ld&aacute;nyok sz&aacute;ma; ha m&aacute;r egy p&eacute;ld&aacute;ny se fut kil&eacute;p.</p>


<pre class="programlisting">
#!/bin/bash
# A param&eacute;terk&eacute;nt n&eacute;vvel megadott folyamatokat k&ouml;veti &eacute;s napl&oacute;zza
# a. ha nem indult el egy p&eacute;ld&aacute;ny sem, v&aacute;r am&iacute;g elindul
# b. ut&aacute;na k&ouml;veti h&aacute;ny p&eacute;ld&aacute;ny fut
# c. INT, TERM, QUIT, HUP jelz&eacute;sre kil&eacute;p
# d. ha m&aacute;r egy p&eacute;ld&aacute;ny se fut k&ouml;vetett programb&oacute;l, kil&eacute;p
# e. az esem&eacute;nyeket napl&oacute;zza
#Param&eacute;terek:
#  $1 - a program vagy szkript neve
#  $2 - opcion&aacute;lis, h&aacute;ny m&aacute;sodpercet v&aacute;r 2 ciklus k&ouml;z&ouml;tt
#       implicit 1 m&aacute;sodperc
#
#haszn&aacute;lat:
#   follow_process.sh  programn&eacute;v [ m&aacute;sodperc ]
#

#napl&oacute; f&aacute;jl neve
LOGFILE="follow_process.log"

#jelz&eacute;s hat&aacute;s&aacute;ra kil&eacute;p
function exit_script ()
{
    echo follow_process: jelz&eacute;s miatt le&aacute;llt
    exit 1
}

#jelz&eacute;skezel&#337; be&aacute;ll&iacute;t&aacute;sa
trap exit_script INT QUIT TERM HUP

#napl&oacute; &aacute;llom&aacute;nyba &iacute;rja az els&#337; param&eacute;tert, el&eacute; teszi a
#datumot &eacute;s id&#337;pontot
function log()
{
    #id&#337;pont lek&eacute;rdez&eacute;se
    d=$( date +%Y-%m-%d:%T )
    echo follow_process: "$d" "$1"  &gt;&gt; $LOGFILE
}

#ha nem l&eacute;tezne a napl&oacute;, l&eacute;trehozzuk
touch $LOGFILE

#param&eacute;terek megfelel&#337;ek-e
if (( $# == 0 || $# &gt; 2 )); then
    echo "haszn&aacute;lat:  follow_process.sh programn&eacute;v [ m&aacute;sodperc ]"
    exit 1
fi

prog="$1"   #a program neve az els&#337; param&eacute;ter

#a v&aacute;rakoz&aacute;si m&aacute;sodpercek sz&aacute;ma
sec=1   #az implicit &eacute;rt&eacute;k
if (( $# == 2 ))
then
    sec="$2"
    #letesztelj&uuml;k, hgy eg&eacute;sz sz&aacute;m-e
    if ! echo "$sec" | egrep -q '^[0-9]+$'
    then
        echo follow_process: a m&aacute;sodik param&eacute;ter eg&eacute;sz sz&aacute;m!
        exit 1
    fi
fi

#a program nev&eacute;ben csak a . lehet regul&aacute;ris kifejez&eacute;sekben
#haszn&aacute;lt metakarakter, felt&eacute;telezz&uuml;k, hogy ez &iacute;gy van
#at&iacute;rjuk a . -ot \. -ra
prog_re=$( echo "$prog" | sed -r 's%\.%\\.%;' )

#addig megy v&eacute;gtelen ciklusban, am&iacute;g megjelenik a program
while ! pgrep "$prog_re" &gt;/dev/null
do
    sleep $sec
done

#h&aacute;ny p&eacute;ld&aacute;ny fut
N=$(  pgrep "$prog_re" | wc -l )
log "$N $prog p&eacute;ld&aacute;ny fut"

#k&ouml;vetj&uuml;k
while true
do
    #h&aacute;ny p&eacute;ld&aacute;ny
    NA=$( pgrep "$prog_re" | wc -l )
    #ha egy sem kil&eacute;p a ciklusb&oacute;l
    if (( NA == 0 )) ;then
        break
    fi
    #k&ouml;vet&#337; v&aacute;ltoz&oacute; &aacute;t&iacute;r&aacute;sa &eacute;s napl&oacute;z&aacute;s
    if (( NA != N )) ;then
        N=$NA
        log "$N $prog p&eacute;ld&aacute;ny fut"
    fi
    #k&eacute;sleltet&eacute;s
    sleep $sec
done

log "minden $prog le&aacute;llt"

echo follow_process: kil&eacute;p

exit 0
</pre>

<p>Ha a szkript nev&eacute;ben ott van a <code class="code">.</code> karakter , &aacute;t&iacute;rjuk <code class="code">\.</code> -ra, el&#337;&aacute;ll&iacute;tva a sz&uuml;ks&eacute;ges b&#337;v&iacute;tett regul&aacute;ris kifejez&eacute;st. Ha nagyon pontosak szeretn&eacute;nk lenni, a k&eacute;t hat&aacute;rol&oacute; horgonyt is be&iacute;rhatjuk:</p>
<pre class="programlisting">
prog_re=$( echo "$prog" | sed -r 's%\.%\\.%;s%(.*)%^\1$%' )
</pre>
<p>A <span class="command"><strong>pgrep</strong></span> mindenk&eacute;ppen a program nev&eacute;re fog illeszteni, f&uuml;ggetlen&uuml;l att&oacute;l, hogy  teljes el&eacute;r&eacute;si &uacute;ttal,  <code class="filename">./</code> munkak&ouml;nyvt&aacute;r c&iacute;mmel a n&eacute;v el&#337;tt vagy csak a n&eacute;lk&uuml;l ind&iacute;tottuk.</p>

<p><a name="cmd_date"></a>A napl&oacute; sztringben d&aacute;tum &eacute;s id&#337;pont el&#337;&aacute;ll&iacute;t&aacute;s&aacute;ra a rendszer <a class="indexterm" name="d5e5765"></a> <span class="command"><strong>date</strong></span> parancs&aacute;t haszn&aacute;ltuk. Param&eacute;ter n&eacute;lk&uuml;l saj&aacute;t form&aacute;tum&uacute; d&aacute;tumot, id&#337;pontot &iacute;r ki:</p>
<pre class="screen">
$ date
Mon Sep 26 00:22:28 EEST 2011
$
</pre>
<p>Form&aacute;z&oacute; sztring param&eacute;ter hat&aacute;s&aacute;ra a form&aacute;tumot m&oacute;dos&iacute;thatjuk. A form&aacute;z&oacute; sztringet a <code class="code">+</code> jellel vezetj&uuml;k be, az egyes form&aacute;tum mez&#337;ket a <code class="code">%</code> jellel:</p>
<pre class="screen">
$ date +%Y-%m-%d:%T
2011-09-26:00:21:35
$
</pre>

<p>A r&eacute;szletek&eacute;rt, lehet&#337;s&eacute;gek&eacute;rt l&aacute;sd a <span class="command"><strong>date</strong></span> k&eacute;zik&ouml;nyv lapj&aacute;t.</p>
<p>A programot futtatva:</p>

<pre class="screen">
$ ./follow_process.sh lassu.sh 1
</pre>

<p>&eacute;s egy m&aacute;sik termin&aacute;lr&oacute;l <code class="filename">lassu.sh</code> szkripteket t&ouml;bb p&eacute;ld&aacute;nyban ind&iacute;tva, le&aacute;ll&iacute;tva ez ker&uuml;l a <code class="filename">follow_process.log</code> f&aacute;jlba:</p>

<pre class="screen">
$ cat follow_process.log
follow_process: 2011-09-26:00:03:55 1 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:03:56 2 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:05 1 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:16 2 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:21 1 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:22 2 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:25 3 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:27 2 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:30 1 lassu.sh p&eacute;ld&aacute;ny fut
follow_process: 2011-09-26:00:04:46 minden lassu.sh le&aacute;llt
$
</pre>
<p>Ha a feladat az lenne, hogy a szkript a fel&uuml;gyelet mellett ne engedjen csak egy bizonyos sz&aacute;m&uacute; <code class="filename">lassu.sh</code> szkriptet futni, akkor a <code class="code">while</code> ciklust a k&ouml;vetkez&#337;k&eacute;ppen m&oacute;dos&iacute;thatjuk:</p>

<pre class="programlisting">
#ez a v&aacute;ltozat le&aacute;ll&iacute;tja a legr&eacute;gebb fut&oacute; lassu.sh-t
#ha a p&eacute;ld&aacute;nysz&aacute;m meghalad egy maxim&aacute;lis &eacute;rt&eacute;ket
MAX=3

#k&ouml;vetj&uuml;k
while true
do
    #h&aacute;ny p&eacute;ld&aacute;ny
    NA=$( pgrep "$prog_re" | wc -l )
    #ha egy sem kil&eacute;p a ciklusb&oacute;l
    if (( NA == 0 )) ;then
        break
    fi

    #k&ouml;vet&#337; v&aacute;ltoz&oacute; &aacute;t&iacute;r&aacute;sa &eacute;s napl&oacute;z&aacute;s
    if (( NA != N )) ;then
        #ha n&#337;tt a p&eacute;ld&aacute;nysz&aacute;m
        if (( NA &gt; N ))
        then
            #meghaladta a maximumot
            if (( NA &gt; MAX ))
            then
                #a legr&eacute;gebb indult folyamatsz&aacute;ma
                oldest=$( pgrep -o "$prog_re" )
                log "$prog sz&aacute;ma $NA, TERM elk&uuml;ldve"
                #TERM jelz&eacute;ssel &aacute;l&iacute;tjuk le, ez az implicit
                if ! kill  $oldest &gt; /dev/null
                then
                    log "nem lehet TERM jelz&eacute;st k&uuml;ldeni, pid=$oldest"
			        echo follow_process: TERM hiba, kil&eacute;p&eacute;s 	
                    exit 1
                fi
                #v&aacute;r, hogy biztos kil&eacute;pjen a folyamat
                sleep 0.5
                #az N megv&aacute;ltozott, &uacute;jra lek&eacute;rj&uuml;k
                N=$( pgrep "$prog_re" | wc -l )
            else
                N=$NA
            fi
        else
            N=$NA
        fi
        log "$N $prog p&eacute;ld&aacute;ny fut"
    fi

    #k&eacute;sleltet&eacute;s
    sleep $sec
done
</pre>
<p>A  <span class="command"><strong>pgrep</strong></span> <code class="option">-o</code> opci&oacute;val a legr&eacute;gebben fut&oacute; folyamat azonos&iacute;t&oacute;j&aacute;t adja vissza, ennek k&uuml;ld&uuml;nk <code class="code">TERM</code> jelz&eacute;st. Sikertelen jelz&eacute;sk&uuml;ld&eacute;s eset&eacute;n kil&eacute;p&uuml;nk, b&aacute;r ilyenkor m&eacute;g megpr&oacute;b&aacute;ljuk a <code class="code">KILL</code> jelz&eacute;s k&uuml;ld&eacute;s&eacute;t.</p>
<p>Folyamatok automatikus le&aacute;ll&iacute;t&aacute;sa k&eacute;nyes k&eacute;rd&eacute;s, nagyon &oacute;vatosan kell vele b&aacute;nni egy &eacute;les rendszerben, ak&aacute;rcsak a t&ouml;bbi folyamatkezel&#337; feladat, k&uuml;l&ouml;n&ouml;sen ha rendszergazdak&eacute;nt futtatjuk a programokat. A bibliogr&aacute;fi&aacute;ban eml&iacute;tett <a class="link" href="#Michael2003">Michael2003</a> munka r&eacute;szletesen mutatja be ezeket a k&eacute;rd&eacute;seket. </p>

</div>
</div>

    <div class="appendix" title="A. f&uuml;ggel&eacute;k - Hibakeres&eacute;s h&eacute;jprogramokban" id="appendix"><div class="titlepage"><div><div><h2 class="title">A. f&uuml;ggel&eacute;k - Hibakeres&eacute;s h&eacute;jprogramokban</h2></div></div></div><div class="toc"><p><b>Tartalom</b></p><dl><dt><span class="sect1"><a href="#d5e5803">V&aacute;ltoz&oacute;k ki&iacute;r&aacute;sa</a></span></dt><dt><span class="sect1"><a href="#d5e5809">A h&eacute;j opci&oacute;inak haszn&aacute;lata &eacute;s a set parancs</a></span></dt><dt><span class="sect1"><a href="#d5e5927">Jelz&eacute;sek haszn&aacute;lata programk&ouml;vet&eacute;sre</a></span></dt></dl></div>


<p><a name="debugmeth"></a>A h&eacute;jprogramok fejleszt&eacute;s&eacute;hez nem jellemz&#337;ek a C++, Java, stb. fejleszt&eacute;sre jellemz&#337; keretrendszereket, amelyekkel k&eacute;nyelmesen k&ouml;vethet&#337; a programok fejleszt&eacute;se, a szerkeszt&eacute;s mellett t&ouml;bbek k&ouml;zt a tesztel&eacute;s &eacute;s hibakeres&eacute;s.</p>

<p>Sz&ouml;vegszerkeszt&#337;k&eacute;nt b&aacute;rmilyen Unix alatt fut&oacute; sz&ouml;vegszerkeszt&#337;t haszn&aacute;lhatunk, mindegyik t&aacute;mogatja a shell szkriptek szerkeszt&eacute;s&eacute;t, ak&aacute;r termin&aacute;lon szerkeszt&uuml;nk (vim, emacs) vagy grafikus k&ouml;rnyezetben (Kate, Gedit, vagy valamelyik C++, Java stb. fejleszt&#337; k&ouml;rnyezet sz&ouml;vegszerkeszt&#337;je).</p>


<p>A programok k&ouml;vet&eacute;s&eacute;re l&eacute;teznek hibakeres&#337; alkalmaz&aacute;sok, mint a <span class="command"><strong>bashdb</strong></span> a Bash eset&eacute;ben (http://bashdb.sourceforge.net) vagy a  <span class="command"><strong>kshdb</strong></span> (https://github.com/rocky/kshdb). Haszn&aacute;latuknak akkor van &eacute;rtelme, ha programjainkat m&aacute;r nem tudjuk egyszer&#369;, mag&aacute;ba a h&eacute;jba &eacute;p&iacute;tett opci&oacute;kkal megoldani. A Bash eset&eacute;ben l&aacute;sd a <span class="command"><strong>bashdb</strong></span> k&eacute;zik&ouml;nyv&eacute;t: <span class="emphasis"><em>Debugging with the BASH debugger</em></span> (<a class="link" href="#Bashdb">Bashdb</a>).</p>

<p>Kis programok eset&eacute;ben egyszer&#369; eszk&ouml;z&ouml;kkel is megoldhatjuk a hibakeres&eacute;st.</p>


<div class="sect1" title="V&aacute;ltoz&oacute;k ki&iacute;r&aacute;sa"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5803">V&aacute;ltoz&oacute;k ki&iacute;r&aacute;sa</h2></div></div></div>

<p>A legegyszer&#369;bb eszk&ouml;z a v&aacute;ltoz&oacute;k ki&iacute;r&aacute;sa az <span class="command"><strong>echo</strong></span> paranccsal, persze ez maga ut&aacute;n vonja a program sz&ouml;veg&eacute;nek folyamatos szerkeszt&eacute;s&eacute;t, a m&aacute;r nem sz&uuml;ks&eacute;ges ki&iacute;r&aacute;sok kommentel&eacute;s&eacute;t illetve &uacute;jak besz&uacute;r&aacute;s&aacute;t:</p>


<pre class="programlisting">
#!/bin/bash

a=2;

echo a="$a"

b=$( expr $a + 1 )

echo b="$b"
</pre>

<p>Ez zavar&oacute; hosszabb programok, sok v&aacute;ltoz&oacute; eset&eacute;ben, ennek ellen&eacute;re haszn&aacute;ljuk.</p>

</div>

<div class="sect1" title="A h&eacute;j opci&oacute;inak haszn&aacute;lata &eacute;s a set parancs"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5809">A h&eacute;j opci&oacute;inak haszn&aacute;lata &eacute;s a set parancs</h2></div></div></div>

<p>Mint minden Unix parancs, a h&eacute;j is elind&iacute;that&oacute; k&uuml;l&ouml;nb&ouml;z&#337; opci&oacute;kkal, amelyek befoly&aacute;solj&aacute;k fut&aacute;s&aacute;t. Ezek megadhat&oacute;ak a parancssoron, de fut&aacute;s k&ouml;zben is be&aacute;ll&iacute;that&oacute;ak vagy &aacute;tkapcsolhat&oacute;k.</p>


<p><a name="cmd_set_shopt"></a><a class="indexterm" name="d5e5813"></a> A Bash fut&aacute;si m&oacute;dj&aacute;t befoly&aacute;solhatj&aacute;k a k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s a parancssor&aacute;n megadott opci&oacute;k,   amelyeknek sz&aacute;ma igen nagy.  Ezeket fut&aacute;s k&ouml;zben a <span class="command"><strong>set</strong></span> &eacute;s <span class="command"><strong>shopt</strong></span> parancsokkal tudjuk m&oacute;dos&iacute;tani. </p>

<p>A <span class="command"><strong>set</strong></span> r&eacute;gebbi, a <span class="command"><strong>shopt</strong></span> a Bash 2.0 ut&aacute;n bevezetett be&eacute;p&iacute;tett parancs a h&eacute;j m&#369;k&ouml;d&eacute;s&eacute;nek befoly&aacute;sol&aacute;s&aacute;ra. Mindkett&#337; komplik&aacute;lt, r&eacute;szletes tanulm&aacute;nyoz&aacute;shoz l&aacute;sd a Bash k&eacute;zik&ouml;nyv&eacute;nek  4. fejezet&eacute;t (<a class="link" href="#BashRef2010">BashRef2010</a>). </p>

<p>A <span class="command"><strong>set</strong></span> parancs ki &eacute;s bekapcsolja a k&uuml;l&ouml;nb&ouml;z&#337; fut&aacute;si opci&oacute;kat. Haszn&aacute;lata:</p>

<div class="cmdsynopsis"><p>
  <code class="command">set</code> 
    -o 
    opci&oacute;n&eacute;v 
</p></div>
<div class="cmdsynopsis"><p>
  <code class="command">set</code> 
    +o 
    opci&oacute;n&eacute;v 
</p></div>

<p>A szintaxis furcsa: a <code class="option">-o</code> v&aacute;ltozat bekapcsolja, a <code class="option">+o</code> kikapcsolja a megnevezett opci&oacute;t.  Pl. <code class="code">noglob</code> opci&oacute; be&aacute;ll&iacute;t&aacute;sa letiltja a <code class="code">*</code> karakter &aacute;t&iacute;r&aacute;s&aacute;t a parancssoron:</p>

<pre class="screen">
$ ls
1.txt  2.txt  4.txt  5.txt
$ echo *
1.txt 2.txt 4.txt 5.txt
$ set -o noglob
$ echo *
*
$ set +o noglob
$ echo *
1.txt 2.txt 4.txt 5.txt
$
</pre>

<p>Megjegyz&eacute;s: az opci&oacute; be&aacute;ll&iacute;t&aacute;s&aacute;ra &aacute;ltal&aacute;ban haszn&aacute;lhat&oacute; egy karakteres megold&aacute;s is, az el&#337;bbi <code class="code">set -o noglob</code> -ra p&eacute;ld&aacute;ul a <code class="code">set -f</code> , a kikapcsol&aacute;s&aacute;ra a <code class="code">set +f</code> .</p>

<p>A <span class="command"><strong>shopt</strong></span> parancs kiterjeszti ezeket a be&aacute;ll&iacute;t&aacute;sokat, haszn&aacute;lat&aacute;t l&aacute;sd az <a class="link" href="#BashRef2010">eml&iacute;tett k&eacute;zik&ouml;nyv</a> fejezetben.</p>

<p>A hibak&ouml;vet&eacute;sre 3 opci&oacute;ja haszn&aacute;lhat&oacute; a h&eacute;jnak, ezeket megadhatjuk parancssoron ind&iacute;t&aacute;skor, illetve a set paranccsal fut&aacute;s k&ouml;zben.</p>

<div class="table"><a name="d5e5845"></a><p class="title"><b>A.1. t&aacute;bl&aacute;zat - A Bash hibak&ouml;vet&eacute;sn&eacute;l haszn&aacute;lhat&oacute; opci&oacute;i</b></p><div class="table-contents">
                
    <table summary="A Bash hibak&ouml;vet&eacute;sn&eacute;l haszn&aacute;lhat&oacute; opci&oacute;i" cellpadding="2" border="1"><colgroup><col width="12%" class="col1"><col width="12%" class="col2"><col width="76%" class="col3"></colgroup><thead><tr><th align="center">A set parancsban haszn&aacute;lt neve</th><th align="center">Parancssori opci&oacute; </th><th align="center">A h&eacute;j viselked&eacute;se</th></tr></thead><tbody><tr><td align="center"><code class="code">noexec</code></td><td align="center"><code class="option">-n</code></td><td align="left">A h&eacute;j nem fogja futtatni a bemenet&eacute;re k&uuml;ld&ouml;tt programot, csak szintaxis ellen&#337;rz&eacute;st v&eacute;gez.</td></tr><tr><td align="center"><code class="code">verbose</code></td><td align="center"><code class="option">-v</code></td><td align="left">A h&eacute;j fut&aacute;s k&ouml;zben ki fogja &iacute;rni az &eacute;ppen futtatott parancsot ind&iacute;t&aacute;s el&#337;tt.</td></tr><tr><td align="center"><code class="code">xtrace</code></td><td align="center"><code class="option">-x</code></td><td align="left">A h&eacute;j ki fogja &iacute;rni a behelyettes&iacute;tett futtatott parancsot  miut&aacute;n feldolgozta a parancssort. &Iacute;gy a parancssor feldolgoz&aacute;s&aacute;nak l&eacute;p&eacute;sei is l&aacute;that&oacute;ak lesznek.</td></tr></tbody></table>
</div></div><br class="table-break"> 

<p>Tekints&uuml;k az al&aacute;bbi kis szkriptet (<code class="filename">debug1.sh</code>):</p>

<pre class="programlisting">
#!/bin/bash

d=${1:? nincs k&ouml;nyvt&aacute;r}

sum=0

#minden f&aacute;jlt v&eacute;gigj&aacute;rva
for f in $( ls "$d" )
do
    #h&aacute;ny sor van benne
    n=$( cat "$d/$f" | wc -l )
    #&ouml;sszeg
    sum=$( expr $n + $sum)
done

#&ouml;sszeget egy f&aacute;jlba
echo $sum &gt; sum.txt
</pre>

<p>Az els&#337; k&eacute;t opci&oacute; k&ouml;vet&eacute;se egyszer&#369;. A <code class="code">noexec</code> csak szintaxis ellen&#337;rz&eacute;st v&eacute;gez, ha nincs hiba:</p>

<pre class="screen">
$ bash -n debug1.sh
$
</pre>

<p>, ha besz&uacute;runk egy hib&aacute;t:</p>
<pre class="screen">
$ bash -n debug1.sh
debug1.sh: line 11: unexpected EOF while looking for matching `)'
debug1.sh: line 19: syntax error: unexpected end of file
$
</pre>

<p>Az al&aacute;bbi, k&eacute;t f&aacute;jlt tartalmaz&oacute; k&ouml;nyvt&aacute;ron fogjuk tesztelni a <code class="option">-v</code> &eacute;s <code class="option">-x</code> opci&oacute;kat:</p>

<pre class="screen">
$ ls -l teszt
total 8
-rw-rw-r-- 1 lszabo lszabo 8 Sep 22 19:31 1.txt
-rw-rw-r-- 1 lszabo lszabo 7 Sep 22 19:31 2.txt
$
</pre>

<p>Ha a <code class="option">-v</code> opci&oacute;t haszn&aacute;ljuk:</p>

<pre class="screen">
$ bash -v debug1.sh teszt
#!/bin/bash

d=${1:? nincs k&ouml;nyvt&aacute;r}

sum=0

#minden f&aacute;jlt v&eacute;gigj&aacute;rva
for f in $( ls "$d" )
do
    #h&aacute;ny sor van benne
    n=$( cat "$d/$f" | wc -l )
    #&ouml;sszeg
    sum=$( expr $n + $sum)
done
 ls "$d"
 cat "$d/$f" | wc -l
 expr $n + $sum
 cat "$d/$f" | wc -l
 expr $n + $sum

#&ouml;sszeget egy f&aacute;jlba
echo $sum &gt; sum.txt

$
</pre>

<p>Teh&aacute;t l&aacute;that&oacute; minden egyes sor v&eacute;grehajt&aacute;s el&#337;tt. &Iacute;gy ha pl. a m&aacute;sodik ciklusban akadna ki a program, az j&oacute;l lokaliz&aacute;lhat&oacute; lesz.</p>

<p>Az <code class="code">xtrace</code> opci&oacute; pontos list&aacute;t ad a v&aacute;ltoz&oacute;k alakul&aacute;s&aacute;r&oacute;l:</p>

<pre class="screen">
$ bash -x debug1.sh teszt
+ d=teszt
+ sum=0
++ ls teszt
+ for f in '$( ls "$d" )'
++ cat teszt/1.txt
++ wc -l
+ n=4
++ expr 4 + 0
+ sum=4
+ for f in '$( ls "$d" )'
++ cat teszt/2.txt
++ wc -l
+ n=4
++ expr 4 + 4
+ sum=8
+ echo 8
$
</pre>
<p>Az <code class="code">xtrace</code> minden sort egy <code class="code">+</code> jellel kezd, ez tulajdonk&eacute;ppen a parancssor &eacute;rtelmez&eacute;si szintj&eacute;t jel&ouml;li. A <code class="code">for f in $( ls "$d" )</code> sor v&eacute;grehajt&aacute;sa el&#337;tt el kell v&eacute;geznie a z&aacute;r&oacute;jelben &aacute;ll&oacute; <code class="code">ls "$d"</code> kiterjeszt&eacute;s&eacute;t, &iacute;gy ez m&aacute;sodik szintnek felel meg, ez&eacute;rt a kiterjesztett ls teszt sor k&eacute;t <code class="code">+</code> jellel jelenik meg a <code class="code">for f in ...</code> sor el&#337;tt.</p>


<p>A k&eacute;t opci&oacute;t ( <code class="option">-v</code> &eacute;s <code class="option">-x</code>) egy&uuml;tt is haszn&aacute;lhatjuk. Ugyanakkor megtehetj&uuml;k azt, hogy az opci&oacute;kat csak fut&aacute;s k&ouml;zben &aacute;ll&iacute;tjuk be, &eacute;s csak ott, ahol t&eacute;nylegesen l&aacute;tni akarjuk mi t&ouml;rt&eacute;nik. A forr&aacute;s &iacute;gy m&oacute;dosul, ha csak a <code class="code">for</code> ciklusban t&ouml;rt&eacute;ntek &eacute;rdekelnek:</p>

<pre class="programlisting">
#!/bin/bash

d=${1:? nincs k&ouml;nyvt&aacute;r}

sum=0

#minden f&aacute;jlt v&eacute;gigj&aacute;rva
for f in $( ls "$d" )
do
    set -o xtrace
    #h&aacute;ny sor van benne
    n=$( cat "$d/$f" | wc -l )
    #&ouml;sszeg
    sum=$( expr $n + $sum)
    set +o xtrace
done

#&ouml;sszeget egy f&aacute;jlba
echo $sum &gt; sum.txt
</pre>

<p>a fut&aacute;s pedig:</p>

<pre class="screen">
$ bash  debug1.sh teszt
++ cat teszt/1.txt
++ wc -l
+ n=4
++ expr 4 + 0
+ sum=4
+ set +o xtrace
++ cat teszt/2.txt
++ wc -l
+ n=4
++ expr 4 + 4
+ sum=8
+ set +o xtrace
$
</pre>

<p>Amint m&aacute;r eml&iacute;tett&uuml;k, haszn&aacute;lhatunk r&ouml;vid szintaxist is, <code class="code">set -o xtrace</code>  helyett <code class="code">set -x</code> , a <code class="code">set +o xtrace</code> helyett <code class="code">set +x</code> .</p>
<p>A ki&iacute;rt <code class="code">+</code> jel tulajdonk&eacute;ppen a h&eacute;j be&eacute;p&iacute;tett <code class="varname">PS4</code> nev&#369; v&aacute;ltoz&oacute;ja:</p>
<pre class="screen">
$ echo $PS4
+
$
</pre>

<p>Ha &uacute;gy gondoljuk, hogy helyette &iacute;rhatunk ki valami &eacute;rtelmesebbet, ami seg&iacute;t a hibakeres&eacute;sben, azt megtehetj&uuml;k a <code class="varname">PS4</code> tartalm&aacute;nak megv&aacute;ltoztat&aacute;s&aacute;val. Egyik gyakran haszn&aacute;lt megold&aacute;s erre a h&eacute;j <code class="varname">LINENO</code> v&aacute;ltoz&oacute;ja, amely mindig a v&eacute;grehajtott bemeneti f&aacute;jl sorsz&aacute;m&aacute;t tartalmazza. Ezzel a v&aacute;ltoztat&aacute;ssal az el&#337;bbi futtat&aacute;s &iacute;gy n&eacute;z ki (a <span class="command"><strong>bash</strong></span> h&iacute;v&aacute;sa el&#337;tt a k&ouml;rnyezeti v&aacute;ltozok k&ouml;z&eacute; &iacute;rjuk a megv&aacute;ltoztatott <code class="varname">PS4</code>-et az <span class="command"><strong>export</strong></span> paranccsal):</p>

<pre class="screen">
$ export PS4='sor:$LINENO '
$
$ bash  debug1.sh teszt
ssor:12 cat teszt/1.txt
ssor:12 wc -l
sor:12 n=4
ssor:14 expr 4 + 0
sor:14 sum=4
sor:15 set +o xtrace
ssor:12 cat teszt/2.txt
ssor:12 wc -l
sor:12 n=4
ssor:14 expr 4 + 4
sor:14 sum=8
sor:15 set +o xtrace
$
</pre>

<p>Ha gyakran akarjuk ezt a m&#369;k&ouml;d&eacute;si m&oacute;dot v&aacute;lasztani, a <code class="varname">PS4</code> &aacute;t&iacute;r&aacute;s&aacute;nak sor&aacute;t be&iacute;rhatjuk a <code class="filename">.bash_profile</code> konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyba, &eacute;s akkor az minden bejelentkez&eacute;sn&eacute;l &aacute;t&aacute;ll&iacute;t&oacute;dik.
</p>

</div>

<div class="sect1" title="Jelz&eacute;sek haszn&aacute;lata programk&ouml;vet&eacute;sre"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d5e5927">Jelz&eacute;sek haszn&aacute;lata programk&ouml;vet&eacute;sre</h2></div></div></div>

<p>Az eml&iacute;tett egyszer&#369; eszk&ouml;z&ouml;k&ouml;n k&iacute;v&uuml;l programk&ouml;vet&eacute;se haszn&aacute;lhatunk jelz&eacute;seket is. Ezeket a <code class="code">DEBUG</code>, <code class="code">EXIT</code>, <code class="code">ERR</code> nev&#369; jelz&eacute;seket &eacute;s azok haszn&aacute;lat&aacute;t a Jelz&eacute;sek c&iacute;m&#369; fejezet, "<a class="link" href="#signal_debug" title="Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)">Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek</a>" alfejezet&eacute;ben mutatjuk be.</p>


</div>

</div>

<div class="appendix" title="B. f&uuml;ggel&eacute;k - A getopts f&uuml;ggv&eacute;ny" id="d5e5934"><div class="titlepage"><div><div><h2 class="title">B. f&uuml;ggel&eacute;k - A getopts f&uuml;ggv&eacute;ny</h2></div></div></div>


<p><a name="getopts"></a>A shell <code class="code">getopts</code> f&uuml;ggv&eacute;nye a parancssori argumentumok &aacute;tv&eacute;tel&eacute;t oldja meg, az al&aacute;bbi m&oacute;don haszn&aacute;ljuk:</p>

<pre class="programlisting">
getopts  opci&oacute;sztring  v&aacute;ltoz&oacute;
</pre>

<p>Az opci&oacute; sztringben felsoroljuk a parancssoron megjelen&#337; &ouml;sszes lehets&eacute;ges opci&oacute;t. Azokn&aacute;l a opci&oacute;kn&aacute;l amelyek argumentumot is v&aacute;rnak, egy kett&#337;spont jelet is tesz&uuml;nk az opci&oacute; bet&#369;jele ut&aacute;n, p&eacute;ld&aacute;ul ha az opci&oacute; <code class="option">-a</code> , akkor <code class="code">a:</code> -ot &iacute;runk.</p>

<p>A f&uuml;ggv&eacute;nyt t&ouml;bbsz&ouml;r h&iacute;vjuk (legegyszer&#369;bb ezt ciklusb&oacute;l v&eacute;gezni), v&eacute;gighalad a parancssoron &eacute;s igaz &eacute;rt&eacute;kkel t&eacute;r vissza am&iacute;g tal&aacute;l a parancssoron opci&oacute;t. Az argumentum&aacute;ban megadott v&aacute;ltoz&oacute;t be&aacute;ll&iacute;tja arra  az opci&oacute; n&eacute;vre amit megtal&aacute;lt. Ezen k&iacute;v&uuml;l m&eacute;g k&eacute;t v&aacute;ltoz&oacute;t &aacute;ll&iacute;t automatikusan:</p>

<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<p><code class="varname">OPTIND</code> - annak a parancssori param&eacute;ternek a sz&aacute;ma ameddig eljutott</p>
</li><li class="listitem">
<p><code class="varname">OPTARG</code> - az opci&oacute;hoz rendelt argumentumot tartalmazza</p>
</li></ul></div> 

<p>Ha az opci&oacute;sztring els&#337; karaktere  a  kett&#337;spont, a <code class="varname">getopts</code> nem &iacute;r ki hib&aacute;kat, &eacute;s ismeretlen opci&oacute; eset&eacute;n <code class="code">?</code>-et tesz a  visszat&eacute;r&iacute;tett v&aacute;ltoz&oacute;ba. Ha nincs kett&#337;spont az opci&oacute; sztring elej&eacute;n, hib&aacute;kat &iacute;r ki (hib&aacute;s kapcsol&oacute;, elmaradt param&eacute;ter). Elmaradt param&eacute;ter eset&eacute;n nem az opci&oacute;t adja vissza a v&aacute;ltoz&oacute;ban, hanem a <code class="code">?</code> karaktert.</p>

<p>Ugyanakkor figyeli a shell  <code class="varname">OPTERR</code> nev&#369; v&aacute;ltoz&oacute;j&aacute;t (ennek implicit &eacute;rt&eacute;ke 1) &eacute;s ha ez 0, akkor semmik&eacute;ppen sem fog hib&aacute;kat ki&iacute;rni (m&eacute;g akkor sem, ha az  opci&oacute; sztring elej&eacute;n nincs  kett&#337;spont).</p>

<p>Tipikus haszn&aacute;lata az al&aacute;bbi  <code class="code">while-case</code>  kombin&aacute;ci&oacute;:</p>

<pre class="programlisting">
#!/bin/bash
#p&eacute;lda program a getopts f&uuml;ggv&eacute;ny haszn&aacute;lat&aacute;ra
#a getopts opci&oacute; sztringj&eacute;nek els&#337; karaktere a :
#ez azt jelenti, hogy nem fog hib&aacute;kat ki&iacute;rni
#ezt ki lehet t&ouml;r&ouml;lni, akkor a getopts hib&aacute;kat &iacute;r ki
#
#az al&aacute;bbi h&iacute;v&aacute;s a k&ouml;vetkez&#337; opci&oacute;kat v&aacute;rja:
#   -a opci&oacute; param&eacute;terrel
#   -b opci&oacute; param&eacute;terrel
#   -c &eacute;s -d opci&oacute;k param&eacute;ter n&eacute;lk&uuml;l
#
#a k&ouml;vetkez&#337; megtal&aacute;lt opci&oacute;t a opcio v&aacute;ltoz&oacute;ban
#t&eacute;r&iacute;ti vissza

#ha az OPTERR v&aacute;ltoz&oacute;t 0-ra &aacute;ll&iacute;tjuk, semmik&eacute;pp nem &iacute;r ki hib&aacute;t
# OPTERR=0
#ez ebben a p&eacute;ld&aacute;ban felesleges, mert van : az opci&oacute; sztring
#elej&eacute;n

#az els&#337; : -t ki lehet t&ouml;r&ouml;lni, akkor a getopts ki&iacute;rja a hib&aacute;kat
while getopts ":a:b:cd" opcio
do
    case $opcio in
        a) echo a kapcsol&oacute;, argumentum: $OPTARG ;;
        b) echo b kapcsol&oacute;, argumentum: $OPTARG ;;
        c) echo c kapcsol&oacute;;;
        d) echo d kapcsol&oacute;;;
        ?) echo ismeretlen kapcsol&oacute;: $OPTARG
           echo haszn&aacute;lat: getopts.sh \
               [ -a N ] [ -b N ] [ -c ] [ -d ] param&eacute;terek ...
           exit 1
           ;;
    esac
done

echo v&eacute;ge a getopts h&iacute;v&aacute;soknak, az OPTIND index &eacute;rt&eacute;ke = $OPTIND

#el kell mozgatni a parancssort balra $OPTIND-1 poz&iacute;ci&oacute;val
#ha m&eacute;g vannak param&eacute;terek, amelyek nem opci&oacute;k
#azok a $1, $2 stb.-be ker&uuml;lnek

shift $(($OPTIND-1))

if [ -n "$1" ];then
    echo "$1" a megmaradt els&#337; parameter
else
    echo nincsenek tov&aacute;bbi param&eacute;terek
fi
</pre>


</div>

	<div class="bibliography" title="Bibliogr&aacute;fia" id="bibliogr"><div class="titlepage"><div><div><h2 class="title">Bibliogr&aacute;fia</h2></div></div></div>
		
        <div class="bibliomixed"><a name="Manhu"></a><p class="bibliomixed">[Manhu] 
    <span class="bibliomset" title="Magyar Linux Dokument&aacute;ci&oacute;s Projekt, K&eacute;zik&ouml;nyv oldalak">
        <span class="author"><span class="surname">***</span></span>,
        <i><a class="ulink" href="http://tldp.fsf.hu/man.html" target="_blank">Magyar Linux Dokument&aacute;ci&oacute;s Projekt, K&eacute;zik&ouml;nyv oldalak</a></i>,
        <span class="pubdate">(nincs karbantartva)</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="UNIX1970"></a><p class="bibliomixed">[UNIX1970] 
    <span class="bibliomset" title="The Creation of the UNIX* Operating System">
        <span class="author"><span class="surname">***</span></span>,
        <i><a class="ulink" href="http://www.bell-labs.com/history/unix/" target="_blank">The Creation of the UNIX* Operating System</a></i>,
        <span class="pubdate">2002</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Albing2007"></a><p class="bibliomixed">[Albing2007] 
    <span class="bibliomset" title="bash Cookbook">
        <span class="author"><span class="surname">Carl Albing and JP Vossen and Cameron Newham</span></span>,
        <i>bash Cookbook</i>,
        <span class="publishername">O'Reilly</span>,
        <span class="pubdate">2007</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="Buki2002"></a><p class="bibliomixed">[Buki2002] 
    <span class="bibliomset" title="UNIX/Linux h&eacute;jprogramoz&aacute;s">
        <span class="author"><span class="surname">B&uuml;ki Andr&aacute;s</span></span>,
        <i>UNIX/Linux h&eacute;jprogramoz&aacute;s</i>,
        <span class="publishername">Kiskapu</span>,
        <span class="pubdate">2002</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="Bashdb"></a><p class="bibliomixed">[Bashdb] 
    <span class="bibliomset" title="Debugging with the BASH debugger">
        <span class="author"><span class="surname">Rocky Bernstein</span></span>,
        <i><a class="ulink" href="http://bashdb.sourceforge.net/bashdb.html" target="_blank">Debugging with the BASH debugger</a></i>,
        <span class="pubdate">2010</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Mendel2011"></a><p class="bibliomixed">[Mendel2011] 
    <span class="bibliomset" title="Advanced Bash-Scripting Guide">
        <span class="author"><span class="surname">Mendel Cooper</span></span>,
        <i><a class="ulink" href="http://tldp.org/LDP/abs/html/" target="_blank">Advanced Bash-Scripting Guide</a></i>,
        <span class="pubdate">2011</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Friedl2004"></a><p class="bibliomixed">[Friedl2004] 
    <span class="bibliomset" title="Regul&aacute;ris kifejez&eacute;sek mesterfokon">
        <span class="author"><span class="surname">Jeffrey Friedl</span></span>,
        <i>Regul&aacute;ris kifejez&eacute;sek mesterfokon</i>,
        <span class="publishername">Kossuth Kiad&oacute;</span>,
        <span class="pubdate">2004</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="Ivanyi2005"></a><p class="bibliomixed">[Ivanyi2005] 
    <span class="bibliomset" title="A GAWK felhaszn&aacute;l&oacute;i k&eacute;zik&ouml;nyve magyarul">
        <span class="author"><span class="surname">P&eacute;ter Iv&aacute;nyi</span></span>,
        <i><a class="ulink" href="http://hexahedron.hu/personal/peteri/gawk/index.html" target="_blank">A GAWK felhaszn&aacute;l&oacute;i k&eacute;zik&ouml;nyve magyarul</a></i>,
        <span class="pubdate">1998-2005</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Michael2003"></a><p class="bibliomixed">[Michael2003] 
    <span class="bibliomset" title="Mastering UNIX shell scripting">
        <span class="author"><span class="surname">Randal K. Michael</span></span>,
        <i>Mastering UNIX shell scripting</i>,
        <span class="publishername">Wiley</span>,
        <span class="pubdate">2003</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="BashHogyan"></a><p class="bibliomixed">[BashHogyan] 
    <span class="bibliomset" title="Bevezet&eacute;s a bash programoz&aacute;sba HOGYAN">
        <span class="author"><span class="surname">Mike Mikkey</span></span>,
        <i><a class="ulink" href="http://tldp.fsf.hu/HOWTO/Bash-Prog-Intro-HOWTO-hu/Bash-Prog-Intro-HOWTO-hu.html" target="_blank">Bevezet&eacute;s a bash programoz&aacute;sba HOGYAN</a></i>,
        <span class="pubdate">2000</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Newham2005"></a><p class="bibliomixed">[Newham2005] 
    <span class="bibliomset" title="Learning the Bash Shell">
        <span class="author"><span class="surname">Cameron Newham and Bill Rosenblatt</span></span>,
        <i>Learning the Bash Shell</i>,
        <span class="publishername">O'Reilly</span>,
        <span class="pubdate">2005</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="BashRef2010"></a><p class="bibliomixed">[BashRef2010] 
    <span class="bibliomset" title="Bash Reference Manual">
        <span class="author"><span class="surname">Chet Ramey</span></span>,
        <i><a class="ulink" href="http://www.gnu.org/software/bash/manual/html_node/index.html" target="_blank">Bash Reference Manual</a></i>,
        <span class="pubdate">2009</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Readline"></a><p class="bibliomixed">[Readline] 
    <span class="bibliomset" title="The GNU Readline Library">
        <span class="author"><span class="surname">Chet Ramey</span></span>,
        <i><a class="ulink" href="http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html" target="_blank">The GNU Readline Library</a></i>,
        <span class="pubdate">2009</span>
    </span>
</p></div>

<div class="bibliomixed"><a name="Robbins2005"></a><p class="bibliomixed">[Robbins2005] 
    <span class="bibliomset" title="Classic Shell Scripting">
        <span class="author"><span class="surname">Arnold Robbins and Nelson Beebe</span></span>,
        <i>Classic Shell Scripting</i>,
        <span class="publishername">O'Reilly</span>,
        <span class="pubdate">2005</span>.
    </span>
</p></div>

<div class="bibliomixed"><a name="Rosenblatt2002"></a><p class="bibliomixed">[Rosenblatt2002] 
    <span class="bibliomset" title="Learning the Korn Shell">
        <span class="author"><span class="surname">Bill Rosenblatt and Arnold Robbins</span></span>,
        <i>Learning the Korn Shell</i>,
        <span class="publishername">O'Reilly</span>,
        <span class="pubdate">2002</span>.
    </span>
</p></div>


	</div>

    <div class="index" title="T&aacute;rgymutat&oacute;" id="d5e6066"><div class="titlepage"><div><div><h2 class="title">T&aacute;rgymutat&oacute;</h2></div></div></div><div class="index"><div class="indexdiv"><h3>Jelz&eacute;sek</h3><dl><dt>!, <a class="indexterm" href="#d5e2001">Az &amp;&amp; , || &eacute;s ! szerkezetek</a></dt><dt>&amp;&amp;, <a class="indexterm" href="#d5e2001">Az &amp;&amp; , || &eacute;s ! szerkezetek</a></dt><dt>(( )), <a class="indexterm" href="#calculations">Aritmetikai ki&eacute;rt&eacute;kel&eacute;s: sz&aacute;m&iacute;t&aacute;sok a (( )) szerkezettel</a></dt><dt>? v&aacute;ltoz&oacute;, <a class="indexterm" href="#d5e1948">Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</a></dt><dt>[[ ]], <a class="indexterm" href="#test2">A [[ ]] szerkezet</a></dt><dt>||, <a class="indexterm" href="#d5e2001">Az &amp;&amp; , || &eacute;s ! szerkezetek</a></dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>awk, <a class="indexterm" href="#awk">Az awk</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>break, <a class="indexterm" href="#d5e2379">A break &eacute;s continue haszn&aacute;lata</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>chmod, <a class="indexterm" href="#cmd_chmod">
A chmod parancs</a></dt><dt>continue, <a class="indexterm" href="#d5e2379">A break &eacute;s continue haszn&aacute;lata</a></dt><dt>cp, <a class="indexterm" href="#cmd_cp">
A cp parancs</a></dt><dt>cut, <a class="indexterm" href="#d5e1399">Egyszer&#369; sz&ouml;vegsz&#369;r&eacute;s</a>, <a class="indexterm" href="#cmd_cut">A cut parancs</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>date, <a class="indexterm" href="#d5e5695">P&eacute;ldaprogramok</a></dt><dt>df, <a class="indexterm" href="#d5e4865">Az awk haszn&aacute;lata h&eacute;jprogramokban</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>egrep, <a class="indexterm" href="#d5e3222">A grep &eacute;s egrep haszn&aacute;lata</a></dt><dt>export, <a class="indexterm" href="#d5e1725">Az k&ouml;rnyezeti v&aacute;ltoz&oacute;k &eacute;s az  export parancs</a></dt><dt>expr, <a class="indexterm" href="#cmd_expr">Az expr parancs</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>f&aacute;jl, <a class="indexterm" href="#d5e396">Bevezet&#337;</a></dt><dt>f&aacute;jlrendszeri jogok, <a class="indexterm" href="#d5e587">Az &iacute;r&aacute;s, olvas&aacute;s &eacute;s v&eacute;grehajt&aacute;s jogok k&ouml;z&ouml;ns&eacute;ges f&aacute;jlokon</a></dt><dt>file, <a class="indexterm" href="#d5e4270">P&eacute;ld&aacute;k a sed haszn&aacute;lat&aacute;ra h&eacute;jprogramokban</a></dt><dt>find, <a class="indexterm" href="#d5e2583">K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se</a></dt><dt>for, <a class="indexterm" href="#d5e2264">A for ciklusok</a>, <a class="indexterm" href="#d5e3612">A C st&iacute;lus&uacute; for ciklus</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>grep, <a class="indexterm" href="#d5e3222">A grep &eacute;s egrep haszn&aacute;lata</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>head, <a class="indexterm" href="#d5e1314">Cs&#337;vezet&eacute;kek</a></dt><dt>h&eacute;jprogram, <a class="indexterm" href="#d5e1058">H&eacute;jprogramok</a></dt><dt>help, <a class="indexterm" href="#d5e1109">A h&eacute;j &aacute;ltal v&eacute;grehajtott parancsok</a></dt><dt>hozz&aacute;f&eacute;r&eacute;si jogok, <a class="indexterm" href="#d5e533">A hozz&aacute;f&eacute;r&eacute;si jogok</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>if, <a class="indexterm" href="#d5e2203">Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel</a></dt><dt>igaz/hamis felt&eacute;tel, <a class="indexterm" href="#d5e1948">Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>jelz&eacute;sek, <a class="indexterm" href="#signal">Jelz&eacute;sek</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>kil&eacute;p&eacute;si &eacute;rt&eacute;k vagy &aacute;llapot, <a class="indexterm" href="#d5e1948">Az igaz/hamis felt&eacute;tel a h&eacute;jprogramoz&aacute;sban</a></dt><dt>kill, <a class="indexterm" href="#d5e5428">A kill parancs</a></dt><dt>killall, <a class="indexterm" href="#cmd_killall">A killall parancs</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>ls, <a class="indexterm" href="#cmd_ls">
Az ls parancs</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>mkdir, <a class="indexterm" href="#cmd_mkdir">
A mkdir parancs</a></dt><dt>mktemp, <a class="indexterm" href="#signal_debug">Speci&aacute;lis, programk&ouml;vet&eacute;sre haszn&aacute;lt jelz&eacute;sek (DEBUG, EXIT, ERR)</a></dt><dt>mv, <a class="indexterm" href="#cmd_mv">
Az mv parancs</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>nice, <a class="indexterm" href="#cmd_top">A top parancs</a></dt><dt>nohup, <a class="indexterm" href="#cmd_nohup">A nohup parancs</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>pgrep &eacute;s pkill, <a class="indexterm" href="#cmd_pgrep">A pgrep &eacute;s pkill parancsok</a></dt><dt>PIPESTATUS, <a class="indexterm" href="#d5e2203">Felt&eacute;teles v&eacute;grehajt&aacute;s if szerkezettel</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>read, <a class="indexterm" href="#cmd_read">A read parancs</a></dt><dt>rm, <a class="indexterm" href="#cmd_rm">
A rm parancs</a></dt><dt>rmdir, <a class="indexterm" href="#cmd_rmdir">
Az rmdir parancs</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>sed, <a class="indexterm" href="#sed">A sed folyamszerkeszt&#337;</a></dt><dt>select, <a class="indexterm" href="#d5e2481">A select szerkezet</a></dt><dt>set, <a class="indexterm" href="#d5e5809">A h&eacute;j opci&oacute;inak haszn&aacute;lata &eacute;s a set parancs</a></dt><dt>shift, <a class="indexterm" href="#d5e2398">A shift parancs</a>, <a class="indexterm" href="#d5e2425">A case szerkezet</a></dt><dt>sleep, <a class="indexterm" href="#d5e2583">K&ouml;nyvt&aacute;r f&aacute;jljainak k&ouml;vet&eacute;se</a></dt><dt>subshell, <a class="indexterm" href="#subshell">Alh&eacute;jak (subshell)</a></dt><dt>sztring oper&aacute;torok, <a class="indexterm" href="#string_operatorok">M&#369;veletek karakterl&aacute;ncokkal</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>tail, <a class="indexterm" href="#d5e1892">P&eacute;ldaprogramok</a></dt><dt>termin&aacute;l, <a class="indexterm" href="#d5e114">T&ouml;rt&eacute;nelemi h&aacute;tt&eacute;r</a></dt><dt>test, <a class="indexterm" href="#d5e2038">A test parancs</a></dt><dt>top, <a class="indexterm" href="#cmd_top">A top parancs</a></dt><dt>tr, <a class="indexterm" href="#d5e2627">Sz&ouml;veges f&aacute;jl sorainak v&eacute;gigj&aacute;r&aacute;sa</a></dt><dt>trap, <a class="indexterm" href="#cmd_trap">Jelz&eacute;sek kezel&eacute;se shell alatt: a trap parancs</a></dt><dt>tree, <a class="indexterm" href="#d5e413">A UNIX f&aacute;jlrendszer fel&eacute;p&iacute;t&eacute;se, fontos k&ouml;nyvt&aacute;rak</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>unset, <a class="indexterm" href="#function">F&uuml;ggv&eacute;nyek</a></dt><dt>until, <a class="indexterm" href="#d5e2320">A  while &eacute;s until ciklusok</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>wait, <a class="indexterm" href="#d5e5093">A wait parancs</a></dt><dt>while, <a class="indexterm" href="#d5e2320">A  while &eacute;s until ciklusok</a></dt></dl></div></div></div>

</div></body></html>
